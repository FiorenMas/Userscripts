// ==UserScript==
// @name                YouTube Super Fast Chat
// @version             0.102.15
// @license             MIT
// @icon                https://raw.githubusercontent.com/cyfung1031/userscript-supports/main/icons/super-fast-chat.png
// @namespace           UserScript
// @match               https://www.youtube.com/live_chat*
// @match               https://www.youtube.com/live_chat_replay*
// @author              CY Fung
// @run-at              document-start
// @grant               none
// @unwrap
// @allFrames           true
// @inject-into         page
// @require             https://update.greasyfork.org/scripts/475632/1361351/ytConfigHacks.js
// @require             https://cdn.jsdelivr.net/gh/cyfung1031/userscript-supports@c2b707e4977f77792042d4a5015fb188aae4772e/library/nextBrowserTick.min.js
//
// @compatible          firefox Violentmonkey
// @compatible          firefox Tampermonkey
// @compatible          firefox FireMonkey
// @compatible          chrome Violentmonkey
// @compatible          chrome Tampermonkey
// @compatible          opera Violentmonkey
// @compatible          opera Tampermonkey
// @compatible          safari Stay
// @compatible          edge Violentmonkey
// @compatible          edge Tampermonkey
// @compatible          brave Violentmonkey
// @compatible          brave Tampermonkey
//
//
// @downloadURL https://raw.githubusercontent.com/FiorenMas/Userscripts/release/release/YouTube20Super20Fast20Chat.user.js
// @updateURL https://raw.githubusercontent.com/FiorenMas/Userscripts/release/release/YouTube20Super20Fast20Chat.meta.js
// ==/UserScript==
(So=>{"use strict";const Me=window.WeakMapOriginal||window.WeakMap,Io=+localStorage.__debugSuperFastChat__>0,To=!0,Sn=!0,In=!1,Ro=!1,yt=typeof ResizeObserver=="function"&&CSS.supports("position-area:center"),xe=!0,Zt=!0,Tn=!0,Rn=!0,Oo=!0,ft=!0,Ot=!0,ko=!0,en=90,Xe=!0,No=!0,Do=!0,Mo=!0,xo=!0,Fo=!0,Po=!0,Lo=!0,Bo=!0,On=!0,tn=!0,kn=!0,$o=31,Ho=!0,Nn=!0,Wo=!1,Dn=!0,Mn=!0,nn=!0,xn=1,Fn=!1,Pn=!0,Ln=!0,kt=1,Nt=1,Uo=48,Go=!0,Dt=!0,Ct=!0,qo=!0,Ko=512,jo=68,zo=!0,Yo=!0,on=!0,rn=!0,Bn=500,sn=!0,Vo=!1,Xo=!0,Qo=!0,Jo=!0,Zo=!0,$n=!1,ei=!0,ti=!0,an=!0,ni=!0,oi=280,ii=!0,Hn=0,ri=!0,ln=2,si=1,ai=!0,li=!0,pt=1,ci=!0,cn="72vw",ui=!0,di=!0,Mt=!0,Wn=!0,hi=!0,fi=!0,pi=!0,mi=!0,_i=!0,gi=!1,yi=!0,Ci=!0,Ei=!0,bi=!1,vi=!0,wi=!0,Ai=!0,Si=!0,Ii=!0,Un=xn===1,Ti=xn>=1,Gn=Hn>=1,{IntersectionObserver:He}=So;let qn;try{qn=document.createAttributeNS("http://www.w3.org/2000/svg","nil").addEventListener}catch{}const Kn=qn;if(!Kn)return console.warn("pureAddEventListener cannot be obtained.");const q=(async()=>{})().constructor,[Ri]=[setTimeout],Gr=Image,V=Reflect.getPrototypeOf(HTMLTitleElement),Fe=nextBrowserTick;if(typeof Fe!="function"||(Fe.version||0)<2){console.log("nextBrowserTick is not found.");return}if(!He)return console.warn(`Your browser does not support IntersectionObserver.
Please upgrade to the latest version.`);if(typeof WebAssembly!="object"||typeof CSS>"u"||typeof(CSS||0).supports!="function"||!CSS.supports("left","clamp(-100%, calc( -100% * 0.5 ), 0%)"))return console.warn(`Your browser is too old.
Please upgrade to the latest version.`);const Oi=Xe?`

    #item-offset.style-scope.yt-live-chat-item-list-renderer > #items.style-scope.yt-live-chat-item-list-renderer {
        position: static !important;
    }

  `:"",ki=Xe?`

    /* optional */
    #item-offset.style-scope.yt-live-chat-item-list-renderer {
        height: auto !important;
        min-height: unset !important;
    }

    #items.style-scope.yt-live-chat-item-list-renderer {
        transform: translateY(0px) !important;
    }

    /* optional */

  `:"",Ni=Fo?`

    /* ------------------------------------------------------------------------------------------------------------- */

    yt-live-chat-author-chip #chat-badges.yt-live-chat-author-chip, yt-live-chat-author-chip #chat-badges.yt-live-chat-author-chip yt-live-chat-author-badge-renderer, yt-live-chat-author-chip #chat-badges.yt-live-chat-author-chip yt-live-chat-author-badge-renderer #image, yt-live-chat-author-chip #chat-badges.yt-live-chat-author-chip yt-live-chat-author-badge-renderer #image img {
        contain: layout style;
    }

    #items.style-scope.yt-live-chat-item-list-renderer {
        contain: layout paint style;
    }

    #item-offset.style-scope.yt-live-chat-item-list-renderer {
        contain: style;
    }

    #item-scroller.style-scope.yt-live-chat-item-list-renderer {
        contain: size style;
    }

    #contents.style-scope.yt-live-chat-item-list-renderer, #chat.style-scope.yt-live-chat-renderer, img.style-scope.yt-img-shadow[width][height] {
        contain: size layout paint style;
    }

    .style-scope.yt-live-chat-ticker-renderer[role="button"][aria-label], .style-scope.yt-live-chat-ticker-renderer[role="button"][aria-label] > #container {
        contain: layout paint style;
    }

    yt-live-chat-text-message-renderer.style-scope.yt-live-chat-item-list-renderer, yt-live-chat-membership-item-renderer.style-scope.yt-live-chat-item-list-renderer, yt-live-chat-paid-message-renderer.style-scope.yt-live-chat-item-list-renderer, yt-live-chat-banner-manager.style-scope.yt-live-chat-item-list-renderer {
        contain: layout style;
    }

    tp-yt-paper-tooltip[style*="inset"][role="tooltip"] {
        contain: layout paint style;
    }

    /* ------------------------------------------------------------------------------------------------------------- */

  `:"",Di=Do?`

    yt-live-chat-renderer[has-action-panel-renderer] #show-more.yt-live-chat-item-list-renderer{
        top: 4px;
        transition-property: top;
        bottom: unset;
    }

    yt-live-chat-renderer[has-action-panel-renderer] #show-more.yt-live-chat-item-list-renderer[disabled]{
        top: -42px;
    }

  `:"",Mi=Mo?`

    #input-panel #picker-buttons yt-live-chat-icon-toggle-button-renderer#product-picker {
        contain: layout style;
    }

    #chat.yt-live-chat-renderer ~ #panel-pages.yt-live-chat-renderer {
        overflow: visible;
    }

  `:"",xi=xo?`

    html #panel-pages.yt-live-chat-renderer > #input-panel.yt-live-chat-renderer:not(:empty) {
        --yt-live-chat-action-panel-top-border: none;
    }

    html #panel-pages.yt-live-chat-renderer > #input-panel.yt-live-chat-renderer.iron-selected > *:first-child {
        border-top: 1px solid var(--yt-live-chat-panel-pages-border-color);
    }

    html #panel-pages.yt-live-chat-renderer {
        border-top: 0;
        border-bottom: 0;
    }

  `:"",Fi=Po?`

    img,
    yt-img-shadow[height][width],
    yt-img-shadow {
        content-visibility: visible !important;
    }

  `:"",Pi=Lo?`

    /* remove YouTube constant will-change */
    /* constant value will slow down the performance; default auto */

    /* www-player.css */
    html .ytp-contextmenu,
    html .ytp-settings-menu {
        will-change: unset;
    }

    /* frequently matched elements */
    html .fill.yt-interaction,
    html .stroke.yt-interaction,
    html .yt-spec-touch-feedback-shape__fill,
    html .yt-spec-touch-feedback-shape__stroke {
        will-change: unset;
    }

    /* live_chat_polymer.js */
    /*
    html .toggle-button.tp-yt-paper-toggle-button,
    html #primaryProgress.tp-yt-paper-progress,
    html #secondaryProgress.tp-yt-paper-progress,
    html #onRadio.tp-yt-paper-radio-button,
    html .fill.yt-interaction,
    html .stroke.yt-interaction,
    html .yt-spec-touch-feedback-shape__fill,
    html .yt-spec-touch-feedback-shape__stroke {
        will-change: unset;
    }
    */

    /* desktop_polymer_enable_wil_icons.js */
    /* html .fill.yt-interaction,
    html .stroke.yt-interaction, */
    html tp-yt-app-header::before,
    html tp-yt-iron-list,
    html #items.tp-yt-iron-list > *,
    html #onRadio.tp-yt-paper-radio-button,
    html .toggle-button.tp-yt-paper-toggle-button,
    html ytd-thumbnail-overlay-toggle-button-renderer[use-expandable-tooltip] #label.ytd-thumbnail-overlay-toggle-button-renderer,
    html #items.ytd-post-multi-image-renderer,
    html #items.ytd-horizontal-card-list-renderer,
    html #items.yt-horizontal-list-renderer,
    html #left-arrow.yt-horizontal-list-renderer,
    html #right-arrow.yt-horizontal-list-renderer,
    html #items.ytd-video-description-infocards-section-renderer,
    html #items.ytd-video-description-music-section-renderer,
    html #chips.ytd-feed-filter-chip-bar-renderer,
    html #chips.yt-chip-cloud-renderer,
    html #items.ytd-merch-shelf-renderer,
    html #items.ytd-product-details-image-carousel-renderer,
    html ytd-video-preview,
    html #player-container.ytd-video-preview,
    html #primaryProgress.tp-yt-paper-progress,
    html #secondaryProgress.tp-yt-paper-progress,
    html ytd-miniplayer[enabled] /* ,
    html .yt-spec-touch-feedback-shape__fill,
    html .yt-spec-touch-feedback-shape__stroke */ {
        will-change: unset;
    }

    /* other */
    .ytp-videowall-still-info-content[class],
    .ytp-suggestion-image[class] {
        will-change: unset !important;
    }

  `:"",it=typeof V.prototype.append=="function"&&$o||0,Li=it?`

    elzm-fonts {
        visibility: collapse;
        position: fixed;
        top: -10px;
        left: -10px;
        font-size: 10pt;
        line-height: 100%;
        width: 100px;
        height: 100px;
        transform: scale(0.1);
        transform: scale(0.01);
        transform: scale(0.001);
        transform-origin: 0 0;
        contain: strict;
        display: block;

        pointer-events: none !important;
        user-select: none !important;
    }

    elzm-fonts[id]#elzm-fonts-yk75g {
        user-select: none !important;
        pointer-events: none !important;
    }

    elzm-font {
        visibility: collapse;
        position: absolute;
        line-height: 100%;
        width: 100px;
        height: 100px;
        contain: strict;
        display: block;

        user-select: none !important;
        pointer-events: none !important;
    }

    elzm-font::before {
        visibility: collapse;
        position: absolute;
        line-height: 100%;
        width: 100px;
        height: 100px;
        contain: strict;
        display: block;

        content: '0aZ!@#$~^&*()_-+[]{}|;:><?\\0460\\0301\\0900\\1F00\\0370\\0102\\0100\\28EB2\\28189\\26DA0\\25A9C\\249BB\\23F61\\22E8B\\21927\\21076\\2048E\\1F6F5\\FF37\\F94F\\F0B2\\9F27\\9D9A\\9BEA\\9A6B\\98EC\\9798\\9602\\949D\\9370\\926B\\913A\\8FA9\\8E39\\8CC1\\8B26\\8983\\8804\\8696\\8511\\83BC\\828D\\8115\\7F9A\\7E5B\\7D07\\7B91\\7A2C\\78D2\\776C\\7601\\74AA\\73B9\\7265\\70FE\\6FBC\\6E88\\6D64\\6C3F\\6A9C\\6957\\67FE\\66B3\\6535\\63F2\\628E\\612F\\5FE7\\5E6C\\5CEE\\5B6D\\5A33\\58BC\\575B\\5611\\54BF\\536E\\51D0\\505D\\4F22\\4AD1\\41DB\\3B95\\3572\\2F3F\\26FD\\25A1\\2477\\208D\\1D0A\\1FB\\A1\\A3\\B4\\2CB\\60\\10C\\E22\\A5\\4E08\\B0\\627\\2500\\5E\\201C\\3C\\B7\\23\\26\\3E\\D\\20\\25EE8\\1F235\\FFD7\\FA10\\F92D\\9E8B\\9C3E\\9AE5\\98EB\\971D\\944A\\92BC\\9143\\8F52\\8DC0\\8B2D\\8973\\87E2\\8655\\84B4\\82E8\\814A\\7F77\\7D57\\7BC8\\7A17\\7851\\768C\\7511\\736C\\7166\\6F58\\6D7C\\6B85\\69DD\\6855\\667E\\64D2\\62CF\\6117\\5F6C\\5D9B\\5BBC\\598B\\57B3\\5616\\543F\\528D\\50DD\\4F57\\4093\\3395\\32B5\\31C8\\3028\\2F14\\25E4\\24D1\\2105\\2227\\A8\\2D9\\2CA\\2467\\B1\\2020\\2466\\251C\\266B\\AF\\4E91\\221E\\2464\\2266\\2207\\4E32\\25B3\\2463\\2010\\2103\\3014\\25C7\\24\\25BD\\4E18\\2460\\21D2\\2015\\2193\\4E03\\7E\\25CB\\2191\\25BC\\3D\\500D\\4E01\\25\\30F6\\2605\\266A\\40\\2B\\4E16\\7C\\A9\\4E\\21\\1F1E9\\FEE3\\F0A7\\9F3D\\9DFA\\9C3B\\9A5F\\98C8\\972A\\95B9\\94E7\\9410\\92B7\\914C\\8FE2\\8E2D\\8CAF\\8B5E\\8A02\\8869\\86E4\\8532\\83B4\\82A9\\814D\\7FFA\\7ED7\\7DC4\\7CCC\\7BC3\\7ACA\\797C\\783E\\770F\\760A\\74EF\\73E7\\72DD\\719C\\7005\\6ED8\\6DC3\\6CB2\\6A01\\68E1\\6792\\663A\\64F8\\63BC\\623B\\60FA\\5FD1\\5EA3\\5D32\\5BF5\\5AB2\\5981\\5831\\570A\\5605\\5519\\53FB\\52A2\\5110\\4FE3\\4EB8\\3127\\279C\\2650\\254B\\23E9\\207B\\1D34\\2AE\\176\\221A\\161\\200B\\300C\\4E4C\\1F921\\FF78\\FA0A\\F78A\\9EB9\\9D34\\9BD3\\9A6F\\9912\\97C6\\964E\\950C\\93E4\\92E5\\91F0\\90BB\\8F68\\8E18\\8B6C\\89F6\\889B\\874C\\8602\\84B1\\8378\\826E\\8113\\7FB1\\7EAF\\7D89\\7C20\\7AFB\\7988\\7840\\7705\\75CC\\749A\\73B3\\727F\\7113\\6FE8\\6ED6\\6DD3\\6CDA\\6BBB\\6A31\\6900\\67D9\\66A7\\655D\\6427\\630D\\61C6\\60AC\\5F78\\5E34\\5CE0\\5B80\\5A51\\590B\\57A1\\566F\\5551\\543D\\52DB\\518F\\5032\\3A17\\305C\\2749\\264A\\2567\\2476\\2139\\1EC0\\11AF\\2C8\\1AF\\E17\\2190\\2022\\2502\\2312\\2025\\50';

        user-select: none !important;
        pointer-events: none !important;
    }

  `:"",Bi=Ho?`
    tp-yt-iron-dropdown.yt-live-chat-app ytd-menu-popup-renderer  {
        -webkit-backdrop-filter: none;
        backdrop-filter: none;
    }
  `:"",$i=nn?`

    @keyframes blinker-miuzp {
        0%, 60%, 100% {
            opacity: 1;
        }
        30% {
            opacity: 0.6;
        }
    }

    yt-icon-button#show-more.has-new-messages-miuzp {
        animation: blinker-miuzp 1.74s linear infinite;
    }

  `:"",Hi=an?`

    yt-live-chat-paid-message-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {
      pointer-events: none !important;
    }

    yt-live-chat-membership-item-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {
      pointer-events: none !important;
    }

    yt-live-chat-paid-sticker-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {
      pointer-events: none !important;
    }

    yt-live-chat-text-message-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {
      pointer-events: none !important; /* TO_BE_REVIEWED */
    }

    yt-live-chat-auto-mod-message-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {
      pointer-events: none !important;
    }

  `:"",Wi=cn&&typeof cn=="string"?`


    tp-yt-paper-tooltip[role="tooltip"] {
      box-sizing: content-box !important;
      margin: 0px !important;
      padding: 0px !important;
      contain: none !important;
    }

    tp-yt-paper-tooltip[role="tooltip"] #tooltip[style-target="tooltip"] {
      box-sizing: content-box !important;
      display: inline-block;
      contain: none !important;
    }


    tp-yt-paper-tooltip[role="tooltip"] #tooltip[style-target="tooltip"]{
      max-width: ${cn};
      width: max-content;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
    }


  `:"",Ui=`
    [menu-visible] {
      --sfc47-text-select: none;
    }
    [menu-visible] #header[id][class],
    [menu-visible] #content[id][class],
    [menu-visible] #header[id][class] *,
    [menu-visible] #content[id][class] * {
      user-select: var(--sfc47-text-select) !important;
    }
    [menu-visible] #menu {
      --sfc47-text-select: inherit;
    }
  `,Gi=pi?`
  yt-live-chat-header-renderer.yt-live-chat-renderer #label.yt-dropdown-menu::before {
    border:0;
  }
  `:"",qi=mi?`
    .style-scope.yt-live-chat-ticker-renderer #animation-container[id][class] {
      position: relative;
      display: grid;
      grid-auto-columns: 1fr;
      grid-auto-rows: 1fr;
      grid-template-columns: repeat(1, 1fr);
      gap: 7px;
      padding-bottom: 0;
      margin-bottom: 0;
      padding-top: 0;
      align-self: flex-start;
      flex-wrap: nowrap;
      margin-top: 1px;
  }

  .style-scope.yt-live-chat-ticker-renderer #animation-container > [id][class] {
      margin-top: 0px;
      margin-bottom: 0px;
      flex-direction: row;
      flex-wrap: nowrap;
      align-items: center;
      justify-content: flex-start;
  }

  .style-scope.yt-live-chat-ticker-renderer #animation-container > [id][class]:first-child::after {
      content: '\u88DC';
      visibility: collapse;
      display: inline-block;
      position: relative;
      width: 0;
      line-height: 22px;
  }

  `:"",Ki=_i?`
    #card  #author-name-chip > yt-live-chat-author-chip[single-line] {
        flex-wrap: nowrap;
        white-space: nowrap;
        display: inline-flex;
        flex-direction: row;
        text-wrap: nowrap;
        flex-shrink: 0;
        align-items: center;
    }

    #card  #author-name-chip {
        display: inline-flex;
        flex-direction: row;
        align-items: flex-start;
    }
  `:"",ji=`
    yt-live-chat-banner-manager#live-chat-banner.style-scope.yt-live-chat-item-list-renderer {
      max-width: 100%;
      box-sizing: border-box;
    }
  `,zi=yi?`
    #reaction-control-panel-overlay[class] {
      contain: strict;
      margin: 0;
      padding: 0;
      border: 0;
      box-sizing: border-box;
      will-change: initial;
    }
    #reaction-control-panel-overlay[class] *[class] {
      will-change: initial;
    }
  `:"",Yi=xe?`

      ticker-bg-overlay {
        display: block;
        position: absolute;
        z-index: -1;
        box-sizing: border-box;
        border: 0;
        padding: 0;
        margin: 0;
        width: 200%;
        top: 0;
        bottom: 0;
        left: clamp(-100%, calc( -100% * ( var(--ticker-current-time) - var(--ticker-start-time) ) / var(--ticker-duration-time) ), 0%);
        contain: strict;
        pointer-events: none;
      }
      ticker-bg-overlay-end2 {

        all:unset;
        position: fixed;
        display: block;
        margin-left: -0.5px;
        top: 8px;
        left: clamp(-250px, calc( 250px * ( ( var(--ticker-current-time) - var(--ticker-start-time) ) / var(--ticker-duration-time) - 1 ) ), 2px);

        width: 1px;
        height: 1px;
        opacity: 0;
        pointer-events: none;
        box-sizing: border-box;
        border: 0;
        padding: 0;
        margin: 0;
        contain: strict;
        z-index: -1;
        visibility: collapse;


      }


        /* .r6-closing-ticker is provided in ADVANCED_TICKING */
        /* so .r6-width-adjustable is only available for ADVANCED_TICKING too */

        /* DO NOT use .r6-width-adjustable ~ .r6-width-adjustable  => very laggy */

        /*
        yt-live-chat-ticker-renderer {
          --r6-transition-duration: 0.2s;
        }

        .r6-width-adjustable, .yt-live-chat-ticker-stampdom {
          --r6-transition-duration-v: var(--r6-transition-duration);
          transition: var(--r6-transition-duration-v);
        }

        .r6-width-adjustable-f {
          --r6-transition-duration-v: 0s;
        }

        .r6-closing-ticker[class] {
          --r6-transition-duration-v: var(--r6-transition-duration);
        }
          */



        .r6-width-adjustable {
          --r6-min-width: 0;
          min-width: var(--r6-min-width);
        }

        .r6-width-adjustable-f {
          --r6-min-width: max-content;
        }

        .r6-closing-ticker[class] {
          --r6-min-width: 0;
        }

  `:"",Vi=ft&&Ot?`

    :root {
      --ticker-items-gap: 8px;
    }
    #ticker-items.yt-live-chat-ticker-renderer {
        position: relative;
        transform: translateZ(1px);
        box-sizing: border-box;
        contain: style;
        display: flex;
        flex-direction: row;
        gap: var(--ticker-items-gap);
    }
    #container.yt-live-chat-ticker-renderer {
        contain: layout paint style;
    }

    .yt-live-chat-ticker-stampdom {
      position: static;
      width: max-content;
      content-visibility:auto;
    }
    .yt-live-chat-ticker-stampdom[class] {
      transition: none;
    }
    .yt-live-chat-ticker-stampdom-container {
      position: static;
      width: max-content;
      content-visibility:auto;
    }

    .yt-live-chat-ticker-stampdom {
      margin-right:0 !important; /* flex gap 8px */
    }

    
    /* default animation */
    .yt-live-chat-ticker-stampdom {
        animation: ticker-shown-animation 220ms ease-in 0s 1 normal forwards;
    }
    
   
    /* default animation */
    @keyframes ticker-shown-animation {
        0%, 70%, 100% { opacity: 1; }
        30% { opacity: 0.2; }
    }


  `:"",Xi=()=>`

    yt-live-chat-renderer {
      max-height: 100vh;
    }

    @property --ticker-rtime {
      syntax: "<percentage>";
      inherits: false;
      initial-value: 0%;
    }

    .run-ticker {
      --ticker-bg:linear-gradient(90deg, var(--ticker-c1),var(--ticker-c1) var(--ticker-rtime),var(--ticker-c2) var(--ticker-rtime),var(--ticker-c2));
    }

    .run-ticker,
    yt-live-chat-ticker-renderer #items > * > #container.run-ticker,
    yt-live-chat-ticker-renderer[class] #items[class] > *[class] > #container.run-ticker[class]
    {
      background: var(--ticker-bg) !important;
    }

    yt-live-chat-ticker-dummy777-item-renderer {
      background: #00000001;
    }

    yt-live-chat-ticker-dummy777-item-renderer[dummy777] {
      position: fixed !important;
      top: -1000px !important;
      left: -1000px !important;
      font-size: 1px !important;
      color: transparent !important;
      pointer-events: none !important;
      z-index: -1 !important;
      contain: strict !important;
      box-sizing: border-box !important;
      pointer-events: none !important;
      user-select: none !important;
      max-width: 1px !important;
      max-height: 1px !important;
      overflow: hidden !important;
      visibility: collapse !important;
      display: none !important;
    }

    yt-live-chat-ticker-dummy777-item-renderer #container {
      background: inherit;
    }


    ${Li}

    ${Bi}

    @supports (contain: layout paint style) {

      ${Ni}

    }

    @supports (color: var(--general)) {

      html {
          --yt-live-chat-item-list-renderer-padding: 0px 0px;
      }

      ${Oi}

      ${Pi}

      ${Fi}

      yt-live-chat-item-list-renderer:not([allow-scroll]) #item-scroller.yt-live-chat-item-list-renderer {
          overflow-y: scroll;
          padding-right: 0;
      }

      ${ki}

      yt-icon[icon="down_arrow"] > *, yt-icon-button#show-more > * {
          pointer-events: none !important;
      }

      #continuations, #continuations * {
          contain: strict;
          position: fixed;
          top: 2px;
          height: 1px;
          width: 2px;
          height: 1px;
          visibility: collapse;
      }

      ${Di}

      ${xi}

      ${Mi}

    }


    @supports (overflow-anchor: auto) {

      .no-anchor * {
          overflow-anchor: none;
      }
      .no-anchor > item-anchor {
          overflow-anchor: auto;
      }
    
      #item-scroller.style-scope.yt-live-chat-item-list-renderer[class] {
        overflow-anchor: initial !important; /* whenever ENABLE_OVERFLOW_ANCHOR or not */
      }
    }

      
    item-anchor {

        height: 1px;
        width: 100%;
        transform: scaleY(0.00001);
        transform-origin:0 0;
        contain: strict;
        opacity:0;
        display:flex;
        position:relative;
        flex-shrink:0;
        flex-grow:0;
        margin-bottom:0;
        overflow:hidden;
        box-sizing:border-box;
        visibility: visible;
        content-visibility: visible;
        contain-intrinsic-size: auto 1px;
        pointer-events:none !important;

    }

    html item-anchor {

        height: 1px;
        width: 1px;
        top: auto;
        left: auto;
        right: auto;
        bottom: auto;
        transform: translateY(-1px);
        position: absolute;
        z-index: -1;

    }

    @supports (color: var(--pre-rendering)) {

      @keyframes dontRenderAnimation {
          0% {
              background-position-x: 3px;
          }
          100% {
              background-position-x: 4px;
          }
      }

      .dont-render[class] {
          /* visibility: collapse !important; */
          /* visibility: collapse will make innerText become "" which conflicts with BetterStreamChat; see https://greasyfork.org/scripts/469878/discussions/197267 */

          transform: scale(0.01) !important;
          transform: scale(0.00001) !important;
          transform: scale(0.0000001) !important;
          transform-origin: 0 0 !important;
          z-index: -1 !important;
          contain: strict !important;
          box-sizing: border-box !important;

          height: 1px !important;
          height: 0.1px !important;
          height: 0.01px !important;
          height: 0.0001px !important;
          height: 0.000001px !important;

          animation: dontRenderAnimation 1ms linear 80ms 1 normal forwards !important;

          pointer-events: none !important;
          user-select: none !important;

      }

      #sk35z {
        display: block !important;

        visibility: collapse !important;

        transform: scale(0.01) !important;
        transform: scale(0.00001) !important;
        transform: scale(0.0000001) !important;
        transform-origin: 0 0 !important;
        z-index: -1 !important;
        contain: strict !important;
        box-sizing: border-box !important;

        height: 1px !important;
        height: 0.1px !important;
        height: 0.01px !important;
        height: 0.0001px !important;
        height: 0.000001px !important;

        position: absolute !important;
        top: -1000px !important;
        left: -1000px !important;

      }

    }

    [rNgzQ] {
      opacity: 0 !important;
      pointer-events: none !important;
    }


    ${$i}

    ${Hi}

    ${Wi}

    ${Ui}

    ${Gi}

    ${qi}

    ${Ki}

    ${ji}

    ${zi}

    ${Yi}

    ${Vi}

  `,xt=typeof unsafeWindow<"u"?unsafeWindow:this instanceof Window?this:window,jn="mchbwnoasqph";if(xt[jn])throw new Error("Duplicated Userscript Calling");xt[jn]=!0;const qr=setTimeout,Kr=clearTimeout,Qi=setInterval,jr=clearInterval,zr=V.prototype.__shady_native_appendChild||V.prototype.appendChild,zn=V.prototype.__shady_native_removeChild||V.prototype.removeChild,Ji=d=>{for(const g in d)if(d.hasOwnProperty(g))return!1;return!0},mt=d=>{for(const g in d)if(d.hasOwnProperty(g)&&typeof d[g]=="object")return g;return null};class Yn extends Set{constructor(g){super(),this.limit=g}add(g){if(!super.has(g)){super.add(g);let C=super.size-this.limit;if(C>0){const w=super.values();do{const x=w.next().value;super.delete(x)}while(--C>0)}}}removeAdd(g){super.delete(g),this.add(g)}}function Ft(d,g){if(g=g||[],!d||typeof d!="object")return d;if(Array.isArray(d))return d.map(w=>Ft(w,g));const C={};for(let w in d)g.includes(w)||(C[w]=Ft(d[w],g));return C}class Vn{constructor(){this.p=q.resolve()}lockWith(g){this.p=this.p.then(()=>new q(g).catch(console.warn))}}const nt=((d,g)=>{const C=(w,x)=>{d=w,g=x};return class extends q{constructor(x=C){super(x),x===C&&(this.resolve=d,this.reject=g)}}})();let rt=d=>{if(rt=g=>g,typeof trustedTypes<"u"&&trustedTypes.defaultPolicy===null){let g=C=>C;trustedTypes.createPolicy("default",{createHTML:g,createScriptURL:g,createScript:g})}return d};const Zi=d=>{const g=new Set(d),C=[...g];return g.clear(),C};let Pt=null,Qe=null,We=null;const Xn=`${Math.floor(Math.random()*314159265359+314159265359).toString(36)}`,Et=new Map;Et.set=Et.setOriginal||Et.set;let un=null;const Qn=(d,g,C)=>{const w=typeof d=="string"?d:typeof(d||0).component=="string"?(d||0).component:"";if(w&&Rn&&g.id&&g.fullDurationSec){C||console.warn("[yt-chat] REUSE_TICKER: reuse bool is false");const x=Et.get(`<${w}>${g.id}:${g.fullDurationSec}`),T=le(x);if(T&&T.isAttached===!1){const z=T.hostElement;if(z instanceof V&&z.isConnected===!1&&z.parentNode===null&&z.getAttribute("__reuseid__")===Xn&&(z.hasAttribute("__nogc__")&&q.resolve(z).then(X=>{X.isConnected&&X.removeAttribute("__nogc__")}),!T.__dataInvalid&&T.__dataEnabled&&T.__dataReady)){if(!un){let X=document.createElement("noscript");X.style.all="unset",document.body.prepend(X),un=X}un.appendChild(z),T.__dataInvalid=!1,T.__dataEnabled=!0,T.__dataReady=!0,T.__data&&(T.__data=Object.assign({},T.__data)),T.__dataPending={},T.__dataOld={};try{T.markDirty()}catch{}try{T.markDirtyVisibilityObserver()}catch{}try{T.wasPrescan=T.wasVisible=!1}catch{}return z}}}Ro&&console.log(d,g,C)},bt=(d,g,C)=>{typeof C=="number"&&(C=C.toFixed(3));const w=d.style.getPropertyValue(g);return w===""||!(Math.abs(w-C)<1e-5)?(d.style.setProperty(g,C),!0):!1},ae=d=>d?d.polymerController||d.inst||d||0:d||0,er=d=>ae(d).$||d.$||0,tr=d=>{const g=d.attributes,C={};for(const{name:w,value:x}of g)C[w]=x;return C['"']=g.length,C},Jn=(()=>{let d=null,g=null,C=null;return setInterval(()=>{d&&d.resolve(),d=g,g=C,C=null},345.00123),()=>C||(C=new nt)})(),nr={get length(){return 0}},ot=d=>(d instanceof Node&&d.nodeType!==1&&!d.children&&(d.children=nr),d),dn=ot(document.createComment("1"));let Lt=new nt;new MutationObserver(()=>{Lt.resolve(),Lt=new nt}).observe(dn,{characterData:!0});let Bt=q.resolve(),$t=null,or=null,ir=null,vt=null,st=!1;const hn=()=>{pn&&(console.log("updateTickerCurrentTime"),(!vt||!le(vt))&&(vt=de(document.querySelector("yt-live-chat-ticker-renderer"))),st=!0);const d=le(vt),g=st?Date.now()/1e3-Zn/1e3:$t;d instanceof V&&g>=0&&bt(d,"--ticker-current-time",g)},Zn=+new Date(Math.floor(performance.timeOrigin))-1e3;let fn=!1;const rr=3;let eo=0,Ht=!1;const pn=!1,sr=document.getElementsByTagName("ticker-bg-overlay"),ar=d=>{if(!pn&&sr.length===0)return;Ht=!1;const g=Date.now();g-eo>375&&(eo=g,hn())},Wt=(d=!1)=>{(d===!0||st)&&(Ht||(Ht=!0,q.resolve().then(ar)))},to=()=>{fn||(fn=!0,rr&1&&document.addEventListener("yt-action",()=>{Wt(!0)},!0),Wt(!0),Qi(Wt,400))};pn&&to();function Vr(d){return d}const _e=d=>d&&ae(d).constructor.prototype||null,Ut=(d,g)=>Function.prototype.bind.call(console.log,console,`%c ${d}`,"background: #222; color: #bada55",g),ie=d=>d()||(console.assert(!1,`${d}`),!1),Xr=(d,g)=>{if(!d||typeof d!="function"){console.warn("f is not a function",d);return}let C=`${d}`,w=0,x=-1,T=0;for(let X=0,ye=C.length;X<ye;X++){const we=C[X];we>="a"&&we<="z"||we>="A"&&we<="Z"?(x<X-1&&T++,x=X):w++}let z=`${d.length}.${w}.${T}`;return g?z!==g?(console.warn("fnIntegrity=false",z),!1):!0:z},ne=(d,g)=>{if(!d||typeof d!="function"){console.warn("f is not a function",d);return}let C=`${d}`,w=0,x=-1,T=0,z=" ";for(let ye=0,we=C.length;ye<we;ye++){let he=C[ye];he>="a"&&he<="z"||he>="A"&&he<="Z"?(x<ye-1&&(T++,z==="$"&&w--),x=ye):w++,z=he}let X=`${d.length}.${w}.${T}`;return g?X!==g?(console.warn("fnIntegrity=false",X),!1):!0:X},Qr=d=>d*window.devicePixelRatio*.026458333,lr=d=>d*window.devicePixelRatio*.26458333;if((Un||Pn||Ln)&&(()=>{const d=()=>{try{return ytcfg.data_}catch{}return null},g=w=>{w&&(Un&&(!Fn||w.kevlar_should_maintain_stable_list===!0)&&(w.kevlar_should_maintain_stable_list=!0),Pn&&(w.kevlar_tuner_should_test_reuse_components=!0,w.kevlar_tuner_should_reuse_components=!0),Ln&&(w.enable_shadydom_free_scoped_node_methods=!1,w.enable_shadydom_free_scoped_query_methods=!1,w.enable_shadydom_free_scoped_readonly_properties_batch_one=!1,w.enable_shadydom_free_parent_node=!1,w.enable_shadydom_free_children=!1,w.enable_shadydom_free_last_child=!1))},C=w=>{if(w=w||d(),w){const{EXPERIMENT_FLAGS:x,EXPERIMENTS_FORCED_FLAGS:T}=w;x&&(g(x),T&&g(T))}};window._ytConfigHacks.add(w=>{C(w)}),C()})(),ui){let d=new MutationObserver(()=>{if(!d)return;let g=document.head;if(!g)return;d.disconnect(),d.takeRecords(),d=null;let C=document.createElement("meta");C.setAttribute("name","google"),C.setAttribute("content","notranslate"),g.appendChild(C)});d.observe(document,{subtree:!0,childList:!0})}console.assert(en>0),CSS.supports("contain","layout paint style")||console.warn(`Your browser does not support css property 'contain'.
Please upgrade to the latest version.`.trim());const no=CSS.supports("overflow-anchor","auto");no||console.warn(`Your browser does not support css property 'overflow-anchor'.
Please upgrade to the latest version.`.trim());const oo=No&&no&&Xe&&typeof ResizeObserver=="function";let io=!1;const Gt=(d,g)=>{let C=null;try{C=Object.getOwnPropertyDescriptor(d,g).get}catch{}return typeof C=="function"?w=>{try{return C.call(w)}catch{}return w[g]}:w=>w[g]},qt=Gt(Node.prototype,"parentNode"),cr=Gt(V.prototype,"previousElementSibling"),ur=Gt(V.prototype,"nextElementSibling"),dr=Gt(V.prototype,"lastElementChild");let Je=[],Ze=0;const[wt]=[console],h={log(...d){if(yt)return Ze===1?hr(...d):wt.log(...d)},warn(...d){if(yt)return Ze===1?fr(...d):wt.warn(...d)},debug(...d){if(yt)return Ze===1?pr(...d):wt.debug(...d)}},hr=(...d)=>{if(To)for(const g of d){if(typeof g!="string")break;if(g.endsWith("OK"))return}Je.push(["log",...d])},fr=(...d)=>{Je.push(["warn",...d])},pr=(...d)=>{Je.push(["debug",...d])},Ee=(d,g)=>{if(!yt)return;Ze!==0&&wt.warn("groupDI in groupCollapsed fails",Ze),Ze++,Je.length=0;let C="groupCollapsed";Io&&(C="group"),Je.push([C,`%c${d}%c${g}`,"background-color: #010502; color: #6acafe; font-weight: 700; padding: 2px;","background-color: #010502; color: #6ad9fe; font-weight: 300; padding: 2px;"])},be=()=>{if(yt&&(Ze--,Ze!==0&&wt.warn("groupDI in groupEnd fails",Ze),Je.length>=0)){let d=!1;for(const g of Je)if(!(g[0]==="group"||g[0]==="groupCollapsed")&&!(g[1]==="[Begin]"||g[1]==="[End]")){d=!0;break}if(d){for(const g of Je){const C=g.slice(1);let w="";for(const T of C){if(typeof T!="string"){w="";break}T==="OK"||T==="NG"?w=T:T.endsWith(" OK")?w="OK":T.endsWith(" NG")&&(w="NG")}let x=C;w&&(x=[C.map(T=>`%c${T}`).join(" "),...C.map(T=>w==="OK"&&T.includes(w)?"background-color:rgb(29, 29, 29); color:rgb(57, 215, 83); font-weight: 600;":w==="NG"&&T.includes(w)?"background-color:rgb(29, 29, 29); color:rgb(215, 133, 57); font-weight: 600;":"background-color:rgb(29, 29, 29); color:rgb(231, 231, 231); font-weight: 400;")]),console[g[0]](...x)}console.groupEnd(),Je.length=0}}},mn="ytI-ce-registry-created",mr=d=>{if(typeof customElements>"u"){"__CE_registry"in document||Object.defineProperty(document,"__CE_registry",{get(){},set(C){return typeof C=="object"&&(delete this.__CE_registry,this.__CE_registry=C,this.dispatchEvent(new CustomEvent(mn))),!0},enumerable:!1,configurable:!0});let g=C=>{document.removeEventListener(mn,g,!1);const w=d;d=null,g=null,w()};document.addEventListener(mn,g,!1)}else d()},_n=new q(mr),_r=typeof ResizeObserver<"u"?d=>new q(g=>{let C=new ResizeObserver(w=>{w&&w.length>=1&&(g(),C.disconnect(),C=null)});C.observe(d)}):d=>new q(g=>{let C=new He(w=>{w&&w.length>=1&&(g(),C.disconnect(),C=null)});C.observe(d)}),de=typeof WeakRef=="function"?d=>d?new WeakRef(d):null:d=>d||null,le=d=>d&&d.deref?d.deref():d,{insertBeforeNaFn:ro,appendChildNaFn:gr}=(()=>{const d=V.prototype.insertBefore,g=V.prototype.appendChild;return{insertBeforeNaFn:(C,w,x)=>{d.call(C,w,x)},appendChildNaFn:(C,w)=>{g.call(C,w)}}})();let Oe=0;const at=[];let so=null;const At=()=>so||(so=q.all([customElements.whenDefined("yt-live-chat-app"),customElements.whenDefined("yt-live-chat-renderer")]).then(async()=>{const d="yt-live-chat-renderer";let g=document.querySelector(d);if(g)console.log("[yt-chat-lcr] lcr exists");else{let C=null;const w=document.querySelector("yt-live-chat-app")||document.createElement("yt-live-chat-app"),x=_e(w);let T,z=0,X=!1;g=await new q(ye=>{if(typeof x.createComponent_=="function"&&!x.createComponent99_&&x.createComponent_.length===3&&(console.log("[yt-chat-lcr] lcaProto.createComponent_ is found"),x.createComponent99_=x.createComponent_,x.createComponent98_=function(he,Ue,Be){const Ge=Qn(he,Ue,Be);if(Ge!==void 0)return Ge;const qe=this.createComponent99_(he,Ue,Be);if(((typeof he=="string"?he:(he||0).component)||`${(qe||0).nodeName}`.toLowerCase())==="yt-live-chat-renderer"&&!X){z=1,Oe=Oe|1;for(const Ke of at)Ke(qe);at.length=0,ye(qe),console.log("[yt-chat-lcr] element found by method 1")}return qe},x.createComponent_=x.createComponent98_,!bi))return;const we=document.getElementsByTagName(d);T=()=>{const he=we[0];he&&(z=2,Oe=Oe|2,ye(he),console.log("[yt-chat-lcr] element found by method 2"))},C=new MutationObserver(T),C.observe(document,{subtree:!0,childList:!0,attributes:!0}),document.addEventListener("yt-action",T,!0),T()}),X=!0,C&&(C.disconnect(),C.takeRecords(),C=null),T&&(document.removeEventListener("yt-action",T,!0),T=null),console.log(`[yt-chat-lcr] lcr appears, dom = ${document.getElementsByTagName(d).length}, method = ${z}`)}return g})),{addCssManaged:gn}=(()=>{const d=()=>{Ee("YouTube Super Fast Chat"," | Fonts Pre-Rendering");let x=document.createElement("elzm-fonts");x.id="elzm-fonts-yk75g";const T=[];let z=document.createElement("elzm-font");if(T.push(z),it&1)for(const X of[100,200,300,400,500,600,700,800,900])z=document.createElement("elzm-font"),z.style.fontWeight=X,T.push(z);if(it&2)for(const X of[100,200,300,400,500,600,700,800,900])z=document.createElement("elzm-font"),z.style.fontFamily="Roboto",z.style.fontWeight=X,T.push(z);if(it&4)for(const X of[100,200,300,400,500,600,700,800,900])z=document.createElement("elzm-font"),z.style.fontFamily='"YouTube Noto",Roboto,Arial,Helvetica,sans-serif',z.style.fontWeight=X,T.push(z);if(it&8)for(const X of[100,200,300,400,500,600,700,800,900])z=document.createElement("elzm-font"),z.style.fontFamily='"Noto",Roboto,Arial,Helvetica,sans-serif',z.style.fontWeight=X,T.push(z);if(it&16)for(const X of[100,200,300,400,500,600,700,800,900])z=document.createElement("elzm-font"),z.style.fontFamily="sans-serif",z.style.fontWeight=X,T.push(z);h.log("number of elzm-font elements",T.length),V.prototype.append.apply(x,T),(document.body||document.documentElement).appendChild(x),h.log("elzm-font elements have been added to the page for rendering."),be()};let g=!1;function C(){let x=document.createElement("style");return x.id="ewRvC",x}return{addCssManaged:()=>{!g&&document.documentElement&&document.head&&(g=!0,document.head.appendChild(C()).textContent=Xi(),it&&q.resolve().then(d))}}})(),{setupStyle:yr}=(()=>{const d=Symbol(),g=w=>({get(x,T){return T in w?w[T]:T===d?x:x[T]},set(x,T,z){return T in w||(x[T]=z),!0},has(x,T){return T in x},deleteProperty(x,T){return!0},ownKeys(x){return Object.keys(x)},defineProperty(x,T,z){return Object.defineProperty(x,T,z)},getOwnPropertyDescriptor(x,T){return Object.getOwnPropertyDescriptor(x,T)}});return{setupStyle:(w,x)=>{if(!Xe)return;const T={transform:"",height:"",minHeight:"",paddingBottom:"",paddingTop:""},z=he=>function(){return this[d][he](...arguments)};for(const he of["toString","getPropertyPriority","getPropertyValue","item","removeProperty","setProperty"])T[he]=z(he);const X=g(T),ye=new Proxy(w.style,X),we=new Proxy(x.style,X);Object.defineProperty(w,"style",{get(){return ye},set(){},enumerable:!0,configurable:!0}),Object.defineProperty(x,"style",{get(){return we},set(){},enumerable:!0,configurable:!0}),w.removeAttribute("style"),x.removeAttribute("style")}}})();function ao(d){const{baseObject:g,thumbnails:C,flag0:w,imageLinks:x}=d;if((w||Ct&&x)&&C&&C.length>0)if(w>0&&C.length>1){let T=0,z=[];for(const X of C){if(!X||!X.url)continue;const ye=X.width===X.height&&typeof X.width=="number",we=T<=0||(w===1?T>X.width:T<X.width),he=ye?X.width>=Uo:!0;(!ye||we)&&he&&(z.push(X),x&&x.add(X.url)),ye&&we&&he&&(T=X.width)}C.length!==z.length&&C===g.thumbnails&&z.length>0?g.thumbnails=z:z.length=0,z=null}else for(const T of C)T&&T.url&&x&&x.add(T.url)}function yn(d,g){const C=(d||0).liveChatTextMessageRenderer||0;if(C){const w=(C.message||0).runs||0;if(w&&w.length>0)for(const T of w){const z=((T||0).emoji||0).image||0;ao({baseObject:z,thumbnails:z.thumbnails,flag0:Nt,imageLinks:g})}const x=C.authorPhoto||0;ao({baseObject:x,thumbnails:x.thumbnails,flag0:kt,imageLinks:g})}}let ke=null;const Cr=new Yn(Ko),Er=new Yn(jo),br=function(){this.resolveFn({link:this,success:!0}),this.remove()},vr=function(){this.resolveFn({link:this,success:!1}),this.remove()};function Cn(d,g,C,w){return new q(x=>{d||(d=document.createElement("link")),d.rel=g,w&&d.setAttribute("as",w),d.resolveFn=x,d.onload=br,d.onerror=vr,d.href=C,document.head.appendChild(d),d=null})}const wr=d=>q.resolve(d).then(g=>{for(const C of g.getElementsByTagName("*")){const w=ae(C);if(typeof w.dispose=="function"&&w.dispose.length===0)try{w.dispose()}catch{}else if(typeof C.dispose=="function"&&C.dispose.length===0)try{C.dispose()}catch{}}}).catch(console.warn),Ar=d=>{};new MutationObserver(()=>{const d=document.querySelectorAll("[ticker-message-removed]:nth-child(n + 40)");for(const g of d)ae(g).requestRemoval()}).observe(document,{subtree:!0,attributes:!0,attributeFilter:["ticker-message-removed"]});const Sr=d=>q.resolve(d).then(g=>{const C=document.querySelector(`.style-scope.yt-live-chat-ticker-renderer[id="${g}"]`);C&&C.setAttribute("ticker-message-removed","")}).catch(console.warn);let En=!1;const Ir=()=>{if(!En)return En=!0,q.resolve().then(()=>{En=!1;const d="[ticker-message-removed]:nth-child(n + 40)";if(document.querySelector(d)){const C=document.querySelectorAll(d);for(const w of C)ae(w).requestRemoval()}}).catch(console.warn)};(async d=>{const g=requestAnimationFrame;try{let C=16;const w="vanillajs-iframe-v1";let x=document.getElementById(w),T=null;if(!x){x=document.createElement("iframe"),x.id=w;const X=typeof webkitCancelAnimationFrame=="function"&&typeof kagi>"u"?x.src=URL.createObjectURL(new Blob([],{type:"text/html"})):null;x.sandbox="allow-same-origin";let ye=document.createElement("noscript");for(ye.appendChild(x);!document.documentElement&&C-- >0;)await new q(g);document.documentElement.appendChild(ye),X&&q.resolve().then(()=>URL.revokeObjectURL(X)),T=he=>{const Ue=Be=>{Be&&d.removeEventListener("DOMContentLoaded",Ue,!1),Be=ye,ye=d=T=0,he?he(()=>Be.remove(),200):Be.remove()};!he||document.readyState!=="loading"?Ue():d.addEventListener("DOMContentLoaded",Ue,!1)}}for(;!x.contentWindow&&C-- >0;)await new q(g);const z=x.contentWindow;if(!z)throw"window is not found.";try{const{requestAnimationFrame:X,setTimeout:ye,cancelAnimationFrame:we,setInterval:he,clearInterval:Ue,getComputedStyle:Be}=z,Ge={requestAnimationFrame:X,setTimeout:ye,cancelAnimationFrame:we,setInterval:he,clearInterval:Ue,getComputedStyle:Be};for(let Ke in Ge)Ge[Ke]=Ge[Ke].bind(d);T&&q.resolve(Ge.setTimeout).then(T);const qe=z.HTMLElement.prototype,Kt=z.EventTarget.prototype;return{...Ge,animate:qe.animate,addEventListener:Kt.addEventListener,removeEventListener:Kt.removeEventListener}}catch{return T&&T(),null}}catch(C){return console.warn(C),null}})(xt).then(d=>{if(!d)return null;const{requestAnimationFrame:g,setTimeout:C,cancelAnimationFrame:w,setInterval:x,clearInterval:T,animate:z,getComputedStyle:X,addEventListener:ye,removeEventListener:we}=d,he=new Me,Ue=I=>{let $=he.get(I);return $||($=X(I),he.set(I,$)),$},Be=(()=>{try{const I=document.createElement("canvas");return!!(I.getContext("webgl")||I.getContext("experimental-webgl"))}catch{return!1}})(),Ge=(()=>{if(Be)return null;const I=Object.getOwnPropertyDescriptor(Document.prototype,"visibilityState");if(!I||typeof I.get!="function")return null;const $=I.get;let y=null,b=$.call(document)==="hidden";return Kn.call(document,"visibilitychange",F=>{const S=$.call(document)==="hidden";b!==S&&(b=S,!b&&y&&(y=y.resolve()))}),()=>{if(y)return y;const F=(!b&&C(()=>{!b&&y===F&&(y=y.resolve())}),y=new nt);return F}})();let qe=null;const Ke=Ge||(()=>qe||(qe=new q(I=>{g($=>{qe=null,I($)})})));let et=null,Ne=null,Tr=null,lt=0,bn=!1,lo=!1,vn=0,St=null;const jt=new Me;let Rr=Date.now()-2e3;const Pe=()=>Date.now()-Rr;let co=0,_t=0,tt=!1,zt=0,Yt=0,ct=!1,$e=0,Or=null;const ts=I=>new q($=>{Fe(async()=>{try{await I()}catch(y){console.warn(y)}finally{$()}})}),kr=Object.getOwnPropertyDescriptor(Element.prototype,"firstElementChild"),Vt=Symbol();Object.defineProperty(Element.prototype,Vt,kr);const Nr=Object.getOwnPropertyDescriptor(Element.prototype,"lastElementChild"),uo=Symbol();Object.defineProperty(Element.prototype,uo,Nr);const Dr=Object.getOwnPropertyDescriptor(Element.prototype,"previousElementSibling"),ho=Symbol();Object.defineProperty(Element.prototype,ho,Dr);const Mr=Object.getOwnPropertyDescriptor(Element.prototype,"nextElementSibling"),wn=Symbol();Object.defineProperty(Element.prototype,wn,Mr);const fo=I=>{for(I=I[Vt];I instanceof Element&&!I.is;)I=I[wn];return I},xr=I=>{for(I=I[uo];I instanceof Element&&!I.is;)I=I[ho];return I},Xt=I=>{do I=I[wn];while(I instanceof Element&&!I.is);return I},po=performance.constructor.prototype.now.bind(performance),mo=typeof queueMicrotask=="function"?queueMicrotask:I=>(q.resolve().then(I),void 0),An=function(I,$=!0){if(!(I||0).length)throw new TypeError("Illegal invocation");return new q(y=>{let b=null;const F=I.length,S=new Array(F),Z=()=>new q(P=>{b=P});let J=0;const Q=()=>{if(I.length!==F)throw new TypeError("Illegal invocation");const P=b;let j=0,re=0;I.forEach((ue,ce)=>{if(typeof(ue||0)!="object")throw new TypeError("Illegal invocation");ue.fired||mo(()=>{if(re||ue.fired)return;ue.fired=!0,++J===F&&(re|=2),j||(j=po()+10);const{fn:ee}=ue;S[ce]=ee(ue),po()>j&&(re|=1)})}),mo(()=>P(re))},H=P=>{if(!P)throw new TypeError("Illegal invocation");if(P&2)P&1?Fe(()=>y(S)):y(S);else{const j=Z();Fe(Q),j.then(H)}},W=Z();$?Fe(Q):Q(),W.then(H)})},Qt=new Me,ns=I=>{const $=(b,F,S,Z)=>{if(F.has(b))return;F.add(b);const J=Object.getOwnPropertyDescriptors(b);for(const Q in J){const H=J[Q],W=H.value;W&&H.configurable&&H.writable&&!(W instanceof EventTarget)&&typeof W=="object"&&(S.push([Z,Q.length]),$(W,F,S,Z+1))}},y=[];return $(I,new WeakSet,y,0),`-${_o(y,!1).toString(36)}${_o(y,!0).toString(36)}`};function _o(I,$){let y=17;const b=31;for(let F=0;F<I.length;F++){const[S,Z]=I[F],J=$?Z:S,Q=$?S:Z;let H=(J*b^Q)>>>0;y^=H,y=(y<<5|y>>>27)>>>0,y=y*37+11>>>0}return 805306367+(y&1073741823)}const go=(I,$)=>{let y=0;const b=function(ee){const fe=ee.target;fe&&fe.nodeType===1&&fe.nodeName==="IMG"&&(y=(y&1073741823)+1)},{key:F,stamperDomClass:S,preloadFn:Z}=$,J=document.createElementNS("http://www.w3.org/2000/svg","defs");document.documentElement.insertAdjacentHTML("beforeend",rt("<!---->")),ot(document.documentElement.lastChild),document.documentElement.lastChild.replaceWith(J);const Q=document.createElement("ns-538");J.insertAdjacentHTML("beforeend",rt("<!---->")),ot(J.lastChild),J.lastChild.replaceWith(Q);const H=document.createElementNS("http://www.w3.org/2000/svg","defs");typeof Q.attachShadow=="function"?Q.attachShadow({mode:"open"}).replaceChildren(H):(Q.insertAdjacentHTML("beforeend",rt("<!---->")),ot(Q.lastChild),Q.lastChild.replaceWith(H));const W=document.createElementNS("http://www.w3.org/2000/svg","defs");H.insertAdjacentHTML("beforeend",rt("<!---->")),ot(H.lastChild),H.lastChild.replaceWith(W),W.addEventListener("load",b,!0),W.addEventListener("error",b,!0);const P=new Map;P.set=P.setOriginal||P.set;const j=new Map;j.set=j.setOriginal||j.set;const re=new Me,ue=`${F}$$c472`;let ce=!1;I.__ensureContainerDomApi7577=function(ee){const fe=this.getStampContainer_(ee);if(fe&&!fe.__checkedDomApi33__&&(fe.__checkedDomApi33__=!0,!fe.__domApi&&typeof this.stampDomArray366_=="function"&&this.stampDomArray366_.length===6)){let ge=fe;try{this.stampDomArray366_.call({getStampContainer_(Ie){return ge},get is(){throw new Error("")},get hostElement(){throw new Error("")}},0,ee,!1,!1,!1,!1)}catch{}ge=null}},I[ue]=async function(ee,fe,ge){if(!this)return;const Ie=this.fxCounter5355=(this.fxCounter5355&1073741823)+1;if(await q.all([ge,Fe()]),Ie!==this.fxCounter5355)return;const Le=this.ec389a,u=this.ec389r;if(this.ec389=!1,this.ec389a=0,this.ec389r=0,!Le&&!u)return;const f=(this.stampDom||0)[ee]||0,t=f.mapping,e=f.events;if(!t||!this.__ensureContainerDomApi7577)return;const n=this.hostElement;if(!n)return;ce=!0,this.__ensureContainerDomApi7577(fe);const i=ee==="tickerItems",l=ee==="visibleItems",o=M=>{const O=mt(M),D=t[O],te=M[O];return[D,te]};let s=0,c={},a=!1,m=this[ee];const r=m.map(M=>{const[O,D]=o(M),te=this.getComponentName_(O,D);if(D&&D.id&&te){const pe=`${te}#${D.id}`;D.__renderOrderId422__||(D.__renderOrderId422__=this.__renderOrderId411__=(this.__renderOrderId411__&1073741823)+1);let me=c[pe];return me&&(a=!0),(!me||me>D.__renderOrderId422__)&&(c[pe]=D.__renderOrderId422__),[M,O,D,te,pe]}else return[M,O,D,te,!0]});if(a)for(let M=r.length-1;M>=0;M--){const O=r[M];let D=O[4];D===!0||c[D]===O[2].__renderOrderId422__||(m.splice(M,1),r.splice(M,1))}m=null,c=null;const p=r.map(M=>{const[O,D,te,pe]=M,me=le(Qt.get(te));return me&&n.contains(me)?(s++,me):(me&&!n.contains(me)&&Qt.delete(te),O)}),A=p.length===0;this.ec389a=0,this.ec389r=0;let R=0,U=0;const Y=(M,O,D,te)=>{let pe;return j.has(te)?pe=j.get(te):(j.set(te,pe=document.createElement(te)),pe.className=S),pe=pe.cloneNode(!1),W.insertAdjacentHTML("beforeend",rt("<!---->")),ot(W.lastChild),W.lastChild.replaceWith(pe),pe},oe=this.getStampContainer_(fe),se=M=>{const[O,D]=o(M),te=this.getComponentName_(O,D),pe=P.get(te.toLowerCase());let me=null;if(pe&&(me=pe.firstElementChild)){this.telemetry_&&this.telemetry_.reuse++,W.insertAdjacentHTML("beforeend",rt("<!---->")),ot(W.lastChild),W.lastChild.replaceWith(me);const Ce=me.attributes,Ae=re.get(me);if(Ae){for(const ve of[...Ce]){const Te=ve.name;Te in Ae?ve.value=Ae[Te]:Ce.removeNamedItem(Te)}if(Ce.length!==Ae['"'])for(const ve in Ae)!Ce[ve]&&ve!=='"'&&me.setAttribute(ve,Ae[ve])}}else me=Y(M,O,D,te),this.telemetry_&&this.telemetry_.create++;if(i){const Ce=me.firstElementChild;Ce&&Ce.classList.add("yt-live-chat-ticker-stampdom-container")}return[M,O,D,me]};let _=null;if(l){const M=p.filter(O=>O==="object"&&O instanceof Node);_=Z(M)()}ce=!1;const E=A?[]:await An(p.map(M=>({item:M,fn(O){const{item:D}=O;return typeof D=="object"&&!(D instanceof Node)?se(D):D}}))),v=[],k=new Set,L=M=>{const[O,D,te,pe]=M,me=this.deferRenderStamperBinding_;let Ce;return typeof me=="object"&&(Ce=this.deferRenderStamperBinding_=[]),this.deferRenderStamperBinding_(pe,D,Object.assign({},te)),this.flushRenderStamperComponentBindings_(),typeof me=="object"&&(this.deferRenderStamperBinding_=me,Ce.length=0),re.set(pe,tr(pe)),M},B=A?[]:await An(E.map(M=>({entry:M,fn(O){const{entry:D}=O;return typeof D=="object"&&!(D instanceof Node)?L(D):D}})));if(this.flushRenderStamperComponentBindings_(),v.length>0){const M=q.all(v).catch(D=>{}),O=Jn();await q.race([M,O]).catch(D=>{}),k.clear(),v.length=0}_&&await _;const N=[],K=M=>{const O=M,D=ae(O);let te=O.querySelectorAll("yt-img-shadow").length;const pe=O.parentNode;O.__requestRemovalAt003__?O.__requestRemovalAt003__=0:D.requestRemoval&&D.requestRemoval();try{(pe.__domApi||pe).removeChild(O)}catch{}document.createDocumentFragment().appendChild(O);const Ce=O.nodeName.toLowerCase();let Ae=P.get(Ce);Ae||(Ae=document.createDocumentFragment(),P.set(Ce,Ae)),D.data&&Qt.delete(D.data);let Te=O.querySelectorAll("yt-img-shadow").length;const[Ye,Ve]=[wr(O),Ar(O)];N.push(Ye),N.push(Ve),!(!window.__fixTemplateReuse1058__&&te!==Te)&&q.all([O,Ae,Ye,Ve]).then(ut=>{const[Tt,De]=ut;De.appendChild(Tt)})};await new q(M=>{Fe(()=>{const O=this.atBottom===!0,D=[];let te=document.createDocumentFragment(),pe=null,me=null,Ce=null;const Ae={remove:ve=>{const{elNode:Te}=ve;U++;const Ye=Te.id;return K(Te),l&&N.push(Sr(Ye)),2},append:ve=>{if(!te)return;const{newNode:Te,nodeAfter:Ye,parentNode:Ve,L:ut,H:Tt}=ve;te.appendChild(Te);const De=l&&O?this.itemScroller:null;De&&me===null&&(me=De.scrollTop),Ye?(Ve.__domApi||Ve).insertBefore(te,Ye):(Ve.__domApi||Ve).appendChild(te),this.deferRenderStamperBinding_(Te,ut,Tt),this.flushRenderStamperComponentBindings_();const Re=Te,Se=ae(Re);return Qt.set(Se.data,de(Re)),R++,i&&N.push(Ir()),De&&(Ce===null&&(Ce=De.scrollTop),pe===null&&(pe=me>=0&&Ce>=0&&Math.abs(Ce-me)<6),pe&&(De.scrollTop=Ce+16777216)),1}};{const ve=new Me;if(!A)for(let Se=fo(oe),gt=0;Se instanceof Node;Se=Xt(Se))ve.set(Se,gt++);const Te=new Array(s);let Ye=0,Ve=-1,ut=!1;for(let Se=0,gt=B.length;Se<gt;Se++){const dt=B[Se];if(dt instanceof Node){const ht=ve.get(dt);Te[Ye++]=[ht,dt],ht>Ve?Ve=ht:ut=!0}}Te.length=Ye,ut&&Te.sort((Se,gt)=>Se[0]-gt[0]);let Tt=0,De=0,Re;if(Re=fo(oe),!A){for(const Se of B)if(typeof ve.get(Se)=="number"){const dt=Te[Tt++],[ht,Ao]=dt;ve.delete(Se);const Rt=ht;for(;De<Rt&&Re;)D.push({type:"remove",elNode:Re,fn:Ae.remove}),Re=Xt(Re),De++;De===Rt&&(Re?(Re=Xt(Re),De++):console.warn("elNode is not available?",p,Le,u,De,Rt))}else if(Se instanceof Node)D.push({type:"remove",elNode:Se,fn:Ae.remove});else if((Se||0).length>=4){const[dt,ht,Ao,Rt]=Se;D.push({type:"append",newNode:Rt,nodeAfter:Re,parentNode:oe,item:dt,L:ht,H:Ao,fn:Ae.append})}}for(;Re;)D.push({type:"remove",elNode:Re,fn:Ae.remove}),Re=Xt(Re)}D.length>=1&&An(D).then(()=>{te=null,M()}).catch(console.warn)})}).catch(console.warn);{const M=this[ee];let O=0;O=O|this._setPendingPropertyOrPath(`${ee}.splices`,{},!0,!0),O=O|this._setPendingPropertyOrPath(`${ee}.length`,M.length,!0,!0),O&&this._invalidateProperties()}await q.all(N);const G={container:oe};e&&this.hostElement.dispatchEvent(new CustomEvent("yt-rendererstamper-finished",{bubbles:!0,cancelable:!1,composed:!0,detail:G})),G.container=null},I[F]=function(ee,fe,ge){if(ce)return!0;const{index:Ie,addedCount:Le,removed:u}=ge,f=u?u.length:ge.removedCount;if(ge=null,!Le&&!f)return console.warn("proceedStampDomArraySplices_","Error 001"),!1;if(this.ec389)this.ec389a+=Le,this.ec389r+=f;else{if(this.ec389a||this.ec389r)return console.warn("proceedStampDomArraySplices_","Error 002"),!1;if(typeof(ee||0)!="string"||typeof(fe||0)!="string")return console.warn("proceedStampDomArraySplices_","Error 003"),!1;this.ec389=!0,this.ec389a=Le,this.ec389r=f;const t=this.ec389pr,e=this.ec389pr=this[ue](ee,fe,t).catch(console.warn);ee==="visibleItems"&&(this.prDelay288=e)}return!0}};class Fr{constructor(){this.startAt=8170,this.counter=0,this.rid=0,this.funcs=new Map;const $=this.funcs;this.bCallback=this.mCallback.bind(this),this.pClear=()=>$.clear(),this.keepRAF=!1}mCallback($){this.rid=0,q.resolve().then(this.pClear),this.funcs.forEach(y=>q.resolve($).then(y).catch(console.warn))}request($){const y=this.startAt+(this.counter=(this.counter&1073741823)+1);return this.funcs.set(y,$),this.rid===0&&(this.rid=g(this.bCallback)),y}cancel($){if($=+$,$>0){if($<=this.startAt)return w($);this.rid>0&&(this.funcs.delete($),this.funcs.size===0&&!this.keepRAF&&(w(this.rid),this.rid=0))}}}function Pr(){new q(I=>{document.readyState!=="loading"?I():xt.addEventListener("DOMContentLoaded",I,!1)}).then(()=>{const I=["https://www.youtube.com","https://googlevideo.com","https://googleapis.com","https://accounts.youtube.com","https://www.gstatic.com","https://ggpht.com","https://yt3.ggpht.com","https://yt4.ggpht.com"],$=["https://youtube.com","https://fonts.googleapis.com","https://fonts.gstatic.com"];let y=null;function b(){y=document.createElement("link"),y.relList&&y.relList.supports?ke=(y.relList.supports("dns-prefetch")?1:0)+(y.relList.supports("preconnect")?2:0)+(y.relList.supports("prefetch")?4:0)+(y.relList.supports("subresource")?8:0)+(y.relList.supports("preload")?16:0):ke=0,Ee("YouTube Super Fast Chat"," | PREFETCH SUPPORTS"),Dt&&h.log("dns-prefetch",ke&1?"OK":"NG"),Dt&&h.log("preconnect",ke&2?"OK":"NG"),Ct&&h.log("prefetch",ke&4?"OK":"NG"),Ct&&h.log("preload",ke&16?"OK":"NG"),be()}for(const F of I)ke===null&&b(),Dt&&ke&2&&(Cn(y,"preconnect",F),y=null);for(const F of $)ke===null&&b(),Dt&&ke&1&&(Cn(y,"dns-prefetch",F),y=null)})}Go&&Pr();const{notifyPath7081:Lr}=(()=>{const I=new Vn;let $=0,y=0,b=-1;const F=(P,j)=>{const re=new Set(j),ue=P.map(ce=>re.has(ce));return re.clear(),ue};let S=null;class Z{constructor(j,re,ue){this.index=j,this.addedCount=re,this.removed=ue}get __proxy312__(){return 1}get type(){return"splice"}get object(){return le(S)}}const J=(P,j,re,ue)=>{let ce=F(ue,re),ee=F(re,ue);const fe=ce.length,ge=ee.length,Ie=[],Le=[];S=null;for(let u=0,f=0;u<ge||f<fe;)if(P[u]===j[f])u++,f++;else if(re[u]===ue[f])Le.push({indexI:u,indexJ:f}),u++,f++;else{let t=0;for(let i=f;i<fe&&ce[i]===!1;i++)t++;let e=0;for(let i=u;i<ge&&ee[i]===!1;i++)e++;if(!t&&!e)throw"ERROR(0xFF32): spliceIndicesFunc";const n=new Z(f,t,e>=1?P.slice(u,u+e):[]);Ie.push(n),u+=e,f+=t}return ee=null,ce=null,re=null,ue=null,P=null,S=Ie.length>0?de(j):null,j=null,{indexSplices:Ie,contentUpdates:Le}};function Q(P){return P.map(j=>{if(!j||typeof j!="object")return console.warn("Error(0xFA41): convertToIds",j),j;let re=Object.keys(j);if(re.length!==1)return console.warn("Error(0xFA42): convertToIds",j),j;let ue=re[0],ce=j[ue]||0,ee=ce.authorName||0,fe=`${ee.simpleText||ee.text}`,ge=j;return typeof fe!="string"?console.warn("Error(0xFA53): convertToIds",j):(fe=`${ce.authorExternalChannelId||"null"}|${fe||""}`,fe.length>1&&(ge=fe)),ge})}const H=Dn?(P,j)=>P.authorName!==j.authorName||P.authorPhoto!==j.authorPhoto||P.authorBadges!==j.authorBadges:(P,j)=>P!==j;function W(P){if(Mn){if(P!=="participantsManager.participants")return this.__notifyPath5036__.apply(this,arguments);if(b===y)return}else{const ue=new Error().stack;if(P!=="participantsManager.participants"||ue.indexOf(".onParticipantsChanged")<0)return this.__notifyPath5036__.apply(this,arguments)}$>1e8&&($=$%100);let j=++$;const re=de(this);I.lockWith(ue=>{const ce=le(re),ee=((ce||0).participantsManager||0).participants||0;if(j!==$||!ce||typeof(ee||0).splice!="function"){ue();return}let fe=!1;if(Mn?(ee.r94dm||(ee.r94dm=1,y=(y&1073741823)+1,ee.push=function(){return y=(y&1073741823)+1,Array.prototype.push.apply(this,arguments)},ee.pop=function(){return y=(y&1073741823)+1,Array.prototype.pop.apply(this,arguments)},ee.shift=function(){return y=(y&1073741823)+1,Array.prototype.shift.apply(this,arguments)},ee.unshift=function(){return y=(y&1073741823)+1,Array.prototype.unshift.apply(this,arguments)},ee.splice=function(){return y=(y&1073741823)+1,Array.prototype.splice.apply(this,arguments)},ee.sort=function(){return y=(y&1073741823)+1,Array.prototype.sort.apply(this,arguments)},ee.reverse=function(){return y=(y&1073741823)+1,Array.prototype.reverse.apply(this,arguments)}),b!==y&&(b=y,fe=!0)):fe=!0,!fe){ue();return}const ge=ee.slice(0),Ie=jt.get(ce)||[];jt.set(ce,ge),(async()=>{if(Ie.length===0)return 0;let u=ce.__getAllParticipantsDOMRenderedLength__();if(Ie.length!==u)return 0;const f=Q(Ie),t=Q(ge);let{indexSplices:e,contentUpdates:n}=J(Ie,ge,f,t),i=1;if(e.length>=1){if(await new q(o=>{ce.resolveForDOMRendering781=o,ce.__notifyPath5036__("participantsManager.participants.splices",{indexSplices:e}),e=null,S=null,ce.__notifyPath5036__("participantsManager.participants.length",ge.length)}),await Fe(),u=ce.__getAllParticipantsDOMRenderedLength__(),ge.length!==u)return console.warn("ERROR(0xE2C3): notifyPath7081",Ie.length,ge.length,doms.length),0;i=6}else if(e=null,S=null,ge.length!==u)return 0;if(n.length>=1)for(const l of n)H(Ie[l.indexI],ge[l.indexJ])&&(ce.__notifyPath5036__(`participantsManager.participants[${l.indexJ}]`),i|=12);return n=null,i})().then(async u=>{const f=u===0?1:(u&4)===4?2:0,t=Wo&&f>0;t&&Ee("Participant List Change",`tid = ${j}; res = ${u}`),f===1?(t&&h.log("Full Refresh begins"),await new q(e=>{ce.resolveForDOMRendering781=e,ce.__notifyPath5036__("participantsManager.participants")}),t&&h.log("Full Refresh ends")):f===2&&(t&&h.log(`Number of participants (before): ${Ie.length}`),t&&h.log(`Number of participants (after): ${ge.length}`),t&&h.log(`Total number of rendered participants: ${ce.__getAllParticipantsDOMRenderedLength__()}`),t&&h.log(`Participant Renderer Content Updated: ${(u&8)===8}`)),t&&be(),f===2&&await new q(g),ue()})})}return{notifyPath7081:W}})(),yo=async I=>{const $=[...new Set(I)],y=$.length,b=new Array(y);for(let F=0;F<y;F++)b[F]=customElements.whenDefined($[F]);return await q.all(b),b.length=0,$},Br=()=>{function I(y,b,F){}function $(y,b,F){}customElements.whenDefined("yt-live-chat-participant-list-renderer").then(()=>{if(!Nn)return;const y="yt-live-chat-participant-list-renderer",b=_e(document.createElement(y));if(!b||typeof b.attached!="function"){console.warn(`proto.attached for ${y} is unavailable.`);return}Ee("YouTube Super Fast Chat"," | yt-live-chat-participant-list-renderer hacks");const F=["kevlar_tuner_should_test_maintain_stable_list","kevlar_should_maintain_stable_list","kevlar_tuner_should_test_reuse_components","kevlar_tuner_should_reuse_components"],S={};for(const H of F)S[H]=void 0;try{const H=ytcfg.data_.EXPERIMENT_FLAGS;for(const W of F)S[W]=H[W]}catch{}h.log(`EXPERIMENT_FLAGS: ${JSON.stringify(S,null,2)}`);const Z=(()=>{if(typeof b.__notifyPath5035__=="function"&&b.__notifyPath5035__.name!=="dummy5035"){console.warn("YouTube Live Chat Tamer is running.");return}if(typeof b.__attached411__=="function"&&b.__attached411__.name!=="dummy411"){console.warn("YouTube Live Chat Tamer is running.");return}if(b.__notifyPath5035__=I,b.__attached411__=$,typeof b.flushRenderStamperComponentBindings_!="function"||b.flushRenderStamperComponentBindings_.length!==0){console.warn("ERROR(0xE355): cProto.flushRenderStamperComponentBindings_ not found");return}if(typeof b.flushRenderStamperComponentBindings66_=="function"){console.warn("ERROR(0xE356): cProto.flushRenderStamperComponentBindings66_");return}if(typeof b.__getAllParticipantsDOMRenderedLength__=="function"){console.warn("ERROR(0xE357): cProto.__getAllParticipantsDOMRenderedLength__");return}return!0})();if(h.log(`Data Manipulation Boost = ${Z}`),ie(()=>ne(b.attached,"0.32.22")),typeof b.flushRenderStamperComponentBindings_=="function"){const H=ne(b.flushRenderStamperComponentBindings_);h.log(`flushRenderStamperComponentBindings_ ### ${H} ###`)}else h.log("flushRenderStamperComponentBindings_ - not found");typeof b.flushRenderStamperComponentBindings_=="function"&&(b.flushRenderStamperComponentBindings66_=b.flushRenderStamperComponentBindings_,b.flushRenderStamperComponentBindings_=function(){this.flushRenderStamperComponentBindings66_(),this.resolveForDOMRendering781&&(this.resolveForDOMRendering781(),this.resolveForDOMRendering781=null)}),b.__getAllParticipantsDOMRenderedLength__=function(){const H=((this||0).$||0).participants;return H?V.prototype.querySelectorAll.call(H,"yt-live-chat-participant-renderer").length:0};const J=[...document.querySelectorAll("yt-live-chat-participant-list-renderer:not(.n9fJ3)")];b.__attached412__=b.attached;const Q=function(H){const W=ae(H);if(jt.has(W))return;if(H.classList.add("n9fJ3"),ie(()=>W.__dataEnabled===!0&&W.__dataReady===!0),typeof W.notifyPath!="function"||typeof W.__notifyPath5036__<"u"){console.warn("ERROR(0xE318): yt-live-chat-participant-list-renderer");return}Ee("Participant List attached",""),W.__notifyPath5036__=W.notifyPath;const P=(W.participantsManager||0).participants||0;ie(()=>P.length>-1&&typeof P.slice=="function"),h.log(`initial number of participants: ${P.length}`);const j=P.length>=1&&typeof P.slice=="function"?P.slice(0):[];jt.set(W,j),W.notifyPath=Lr,h.log(`CHECK_CHANGE_TO_PARTICIPANT_RENDERER_CONTENT = ${Dn}`),be()};if(b.attached=function(){Q(this.hostElement||this),this.__attached412__.apply(this,arguments)},Ti){let H=Fn?()=>ytcfg.data_.EXPERIMENT_FLAGS.kevlar_should_maintain_stable_list===!0:!0;if(typeof b.stampDomArray_=="function"&&b.stampDomArray_.length===6&&!b.stampDomArray_.nIegT&&!b.stampDomArray66_){let W=0;b.stampDomArray66_=b.stampDomArray_,b.stampDomArray_=function(...P){if(P[0]&&P[0].length>0&&P[1]==="participants"&&P[2]&&P[3]===!0&&!P[5]){typeof H=="function"&&(H=H()),P[5]=H;let j=Date.now();j-W>440&&(W=j,console.log("maintain_stable_list for participants list",H))}return this.stampDomArray66_.apply(this,P)},b.stampDomArray_.nIegT=1}h.log("ENABLE_FLAGS_MAINTAIN_STABLE_LIST_FOR_PARTICIPANTS_LIST - OK")}else h.log("ENABLE_FLAGS_MAINTAIN_STABLE_LIST_FOR_PARTICIPANTS_LIST - NG");if(be(),J.length>=1)for(const H of J)ae(H).isAttached===!0&&Q(H)}).catch(console.warn)};Nn&&_n.then(Br);const je=Bo||On||tn||kn?new Fr:null,Jt=new WeakSet,ze=new Me;let It=0;const Co=typeof He=="function"?{capture:!0,passive:!0}:!0,Eo=I=>{if(It>0&&I.propertyName&&!I.pseudoElement){const $=I.target,y=ze.get($);y&&(ze.delete($),y.resolve(I.propertyName))}};if(!!hi&&typeof Object.getOwnPropertyDescriptor=="function"&&typeof Proxy<"u"){let Z=function(J){const Q=J.is;if(Q&&!J.set){let H=S.get(Q);if(!H){H=1;const W=ae(J);if(W!==J&&W&&typeof W.set=="function"){const P=W.constructor.prototype.set;P&&typeof P=="function"&&P.length===3?H=y:P&&typeof P=="function"&&P.length===2&&(H=b)}S.set(Q,H)}typeof H=="function"?J.set=H:J.set=F}},I=!1;const $=HTMLDivElement.prototype,y=function(J,Q,H){return ae(this).set(J,Q,H)},b=function(J,Q){return ae(this).set(J,Q)},F=function(){console.log("dummyFn",...arguments)},S=new Map;if(!$.__children577__&&!$.__children578__){const J=Object.getOwnPropertyDescriptor(Element.prototype,"children"),Q=Object.getOwnPropertyDescriptor(V.prototype,"children"),H=Object.getOwnPropertyDescriptor($,"children");if(J&&J.configurable===!0&&J.enumerable===!0&&typeof J.get=="function"&&!Q&&!H&&$ instanceof V&&$ instanceof Element){let W=Object.assign({},J);$.__children577__=J.get,$.__children578__=function(){if(this.__children803__)return this.__children803__;if(this.__children801__){let P=[];for(let j=this.firstElementChild;j!==null;j=j.nextElementSibling)j.is&&(Z(j),P.push(j));return this.__children801__===2&&(this.__children803__=P),P}return 577},W.get=function(){const P=this.__children578__();return P!==577?P:this.__children577__()},Object.defineProperty($,"children",W),I=!0}}I||console.log("fixChildrenIssue - set NG")}const $r=()=>{const I=b=>{const F=le(b);return F&&F.isConnected?F:null},$=()=>{q.resolve().then(()=>{const b=document.querySelector("#show-more[disabled]");let F=b?de(b):null,S=null;for(const Z of document.querySelectorAll("[wsr93]"))Z.getAttribute("wsr93")==="visible"&&(S=de(Z)),Z.setAttribute("wsr93","");Ke().then(()=>{const Z=I(F);if(F=null,Z)Z.click();else{const J=I(S);S=null,J&&q.resolve().then(()=>J.scrollIntoView()).then(()=>J.scrollIntoView(!1)).then(()=>J.scrollIntoView({behavior:"instant",block:"end",inline:"nearest"})).catch(Q=>{})}})}).catch(console.warn)},y=new MutationObserver(b=>{for(const F of b){if((F.addedNodes||0).length>=1){for(const S of F.addedNodes)if(S.nodeName==="STYLE"){$();return}}if((F.removedNodes||0).length>=1){for(const S of F.removedNodes)if(S.nodeName==="STYLE"){$();return}}}});y.observe(document.documentElement,{childList:!0,subtree:!1}),y.observe(document.head,{childList:!0,subtree:!1}),y.observe(document.body,{childList:!0,subtree:!1})},{lcRendererElm:is,visObserver:bo}=(()=>{let I=null;const $=()=>{let S=le(I);return(!S||!S.isConnected)&&(S=document.querySelector("yt-live-chat-item-list-renderer.yt-live-chat-renderer"),I=S?de(S):null),S};let y=!1;const b=S=>{const Z=S.target;if(!Z||!Z.hasAttribute("wsr93"))return;S.isIntersecting===!0&&S.intersectionRatio>.5?(Z.setAttribute("wsr93","visible"),ur(Z)===null||y||(y=!0)):Z.getAttribute("wsr93")==="visible"&&Z.setAttribute("wsr93","hidden")},F=new He(S=>{for(const Z of S)q.resolve(Z).then(b)},{rootMargin:"0px",threshold:[.05,.95]});return{lcRendererElm:$,visObserver:F}})(),vo=typeof ResizeObserver=="function"&&oo?new ResizeObserver(I=>{const y=(I[I.length-1]||0).target;if(!y)return;const b=y.closest("yt-live-chat-item-list-renderer");if(!b)return;const F=ae(b);F.visibleItems.length!==0&&F.atBottom===!0&&(y.scrollTop=16777216)}):null,{setupMutObserver:wo}=(()=>{const I=b=>{let F=-1;const S=new Set;S.add=S.addOriginal||S.add;for(let Q=dr(b);Q!==null;Q=cr(Q)){let H=Q.hasAttribute("wsr93")?Q.hasAttribute("yt-chat-item-seq")?2:1:0;if(H===1&&Q.removeAttribute("wsr93"),H===2){F=parseInt(Q.getAttribute("yt-chat-item-seq"),10);break}bo.unobserve(Q),Q.setAttribute("wsr93",""),bo.observe(Q),S.add(Q)}let Z=S.values(),J=F+S.size;for(let Q;Q=Z.next().value;)Q.setAttribute("yt-chat-item-seq",J%60),Q.classList.add("yt-chat-item-"+(J%2?"odd":"even")),J--;Z=null,S.clear()},$=new MutationObserver(b=>{const F=(b[0]||0).target;F&&I(F)});return{setupMutObserver:b=>{Or=null,$.disconnect(),$.takeRecords(),b&&(typeof b.__appendChild932__=="function"&&(typeof b.appendChild=="function"&&(b.appendChild=b.__appendChild932__),typeof b.__shady_native_appendChild=="function"&&(b.__shady_native_appendChild=b.__appendChild932__)),$.observe(b,{childList:!0,subtree:!1}),I(b),b&&b.nextElementSibling===null&&(b.parentNode.appendChild(document.createElement("item-anchor")),io=!0,oo&&(b.classList.add("no-anchor"),qt(b).classList.add("no-anchor"))),sn&&(()=>{const F="yt-iframed-player-events-relay",S=document.createElement(F),Z=_e(S);if(!Z||!Z.handlePostMessage_){console.warn(`proto.handlePostMessage_ for ${F} is unavailable.`);return}if(typeof Z.handlePostMessage_=="function"&&!Z.handlePostMessage66_&&!Z.handlePostMessage67_){Z.handlePostMessage66_=Z.handlePostMessage_;const J=H=>{if(!(!H||typeof H!="object")){if("yt-player-state-change"in H){const W=H["yt-player-state-change"];let P=!1;W===2?(P=W!==Ne,Ne=2,lt=0):W===3?(P=W!==Ne,Ne=3):W===1&&(P=W!==Ne,Ne=1),P&&et!==Ne&&(bn=!0,We=new q(j=>{const re=Ne;Ke().then(()=>{re===Ne&&et!==Ne&&(et=Ne),We=null,j()})}).catch(console.warn))}else if("yt-player-video-progress"in H){const W=H["yt-player-video-progress"];lt++,Tr=W>0?W:0,Qe&&W>0&&lt>=2&&(We?We.then(()=>{Qe&&Qe.resolve(),Qe=null}):(Qe.resolve(),Qe=null))}}};Z.handlePostMessage67_=function(H){let W=H.data;const P=de(this);Bt=Bt.then(()=>{const j=le(P);if(!j||!H||!W)return;J(W),W=null;const re=j.handlePostMessage66_(H);H=null}).catch(console.warn)};const Q=H=>{const W=document.querySelector("yt-live-chat-renderer"),P=document.querySelector("yt-player-seek-continuation");if(W&&P&&W.replayBuffer_){const j=W.replayBuffer_.lastVideoOffsetTimeMsec,re=H["yt-player-video-progress"]*1e3,ue=(W.replayBuffer_.replayQueue||0).front_,ce=(W.replayBuffer_.replayQueue||0).back_;ue&&ce&&j>re&&ce.length>2&&ce.some(ee=>ee&&+ee.videoOffsetTimeMsec>re)&&ce.some(ee=>ee&&+ee.videoOffsetTimeMsec<re)||j<re+3400&&j>re-1200||(W.previousProgressSec=1e-5,W.replayBuffer_.clear(),P.fireSeekContinuation_(H["yt-player-video-progress"]))}};Z.handlePostMessage_=function(H){let W=(H||0).data||0;const P=de(this);if(typeof W=="object"&&vn!==1){if(!lo&&(lo=!0,"yt-player-video-progress"in W)){vn=1;const j=re=>{const{origin:ue}=H;return{origin:ue,data:re}};this.handlePostMessage67_(j({"yt-iframed-parent-ready":!0})),Bt=Bt.then(()=>{const re=le(P);if(!re||!H||!W)return;Q(W),W=null,vn=2;const ue=re.handlePostMessage_(H);H=null}).catch(console.warn);return}this.handlePostMessage67_(H)}}}})())}}})(),Hr=()=>{let I=0,$=-1,y=0;const b=typeof He=="function"?{capture:!0,passive:!0}:!0,F=null;document.addEventListener("scroll",S=>{!S||!S.isTrusted||(I=(I&1073741823)+1)},b),document.addEventListener("wheel",S=>{!S||!S.isTrusted||$!==I&&($=I,co=Pe(),F&&F())},b),document.addEventListener("mousedown",S=>{!S||!S.isTrusted||((S||0).target||0).id==="item-scroller"&&(y=Pe(),tt=!0,$e=y)},b),document.addEventListener("pointerdown",S=>{!S||!S.isTrusted||((S||0).target||0).id==="item-scroller"&&(y=Pe(),tt=!0,$e=y)},b),document.addEventListener("click",S=>{!S||!S.isTrusted||((S||0).target||0).id==="item-scroller"&&(y=_t=Pe(),tt=!1,$e=y,F&&F())},b),document.addEventListener("tap",S=>{!S||!S.isTrusted||((S||0).target||0).id==="item-scroller"&&(y=_t=Pe(),tt=!1,$e=y,F&&F())},b),document.addEventListener("mouseup",S=>{!S||!S.isTrusted||tt&&(_t=Pe(),tt=!1,$e=_t,F&&F())},b),document.addEventListener("pointerup",S=>{!S||!S.isTrusted||tt&&(_t=Pe(),tt=!1,$e=_t,F&&F())},b),document.addEventListener("touchstart",S=>{!S||!S.isTrusted||(zt=Pe(),ct=!0,$e=zt)},b),document.addEventListener("touchmove",S=>{!S||!S.isTrusted||(zt=Pe(),ct=!0,$e=zt)},b),document.addEventListener("touchend",S=>{!S||!S.isTrusted||ct&&(Yt=Pe(),ct=!1,$e=Yt,F&&F())},b),document.addEventListener("touchcancel",S=>{!S||!S.isTrusted||ct&&(Yt=Pe(),ct=!1,$e=Yt,F&&F())},b)},Wr=()=>{let I=!1;const $=()=>ie(()=>location.pathname.startsWith("/live_chat")&&(location.search.indexOf("continuation=")>0||location.search.indexOf("v=")>0)),y=()=>{if(I||(I=!0,!document.body||!document.head)||!$())return;gn();let u=document.getElementById("elzm-fonts-yk75g");u&&u.parentNode!==document.body&&document.body.appendChild(u)};if(!$())return;const{weakWrap:b}=(()=>{const u="dtz02",f="dtz04",t="dtz08",e=o=>{if(!o)return null;const s=o[u];if(s){const c=s.ref;return(c?le(c):null)||null}return o},n={get(o,s){return s===f?o:Reflect.get(o,s)},apply(o,s,c){if(s=e(s),s)return Reflect.apply(o,s,c)}},i={get(o,s){if(s===u)return o;const c=o.ref,a=le(c);if(a)return typeof a[s]=="function"&&!a[s][f]&&!a[s][u]?(a[s][t]||(a[s][t]=new Proxy(a[s],n)),a[s][t]):a[s]},set(o,s,c){const a=le(o.ref);return a?c&&(c[f]||c[u])?(a[s]=c[f]||e(c),!0):(a[s]=c,!0):!0}},l=o=>(o=e(o),o?new Proxy({ref:de(o)},i):(console.error("thisArg is not found"),null));return!window.getComputedStyle533&&typeof window.getComputedStyle=="function"&&(window.getComputedStyle533=window.getComputedStyle,window.getComputedStyle=function(o,...s){return o=e(o),o?getComputedStyle533(o,...s):null}),{weakWrap:l}})();document.documentElement&&document.head&&gn();const F=new WeakSet,S=u=>{if(!u||typeof u!="object")return!1;const f=mt(u);if(!f)return!1;let t=u[f];if(!t||typeof t!="object")return!1;if(typeof(t.item||0)=="object"&&mt(t)==="item"){t=t.item;const e=mt(t);e&&(t=t[e])}return t},Z=[];function J(u,f,t,e){var n=u<=f?u:f,i=u<=f?f:u,l=t<=e?t:e,o=t<=e?e:t;return i>=l&&o>=n}const Q=(u,f)=>{let t=0;const e=u.length;let n=e;for(;t<n;){const i=t+n>>>1;u[i][0]<f[0]?t=i+1:n=i}t===e?u.push(f):u.splice(t,0,f)};function H(u,f=0){let t=f;for(let e=f;e<u.length;e++)u[e]!==null&&(t!==e&&(u[t]=u[e]),t++);u.length=t}let W=0;const P=(u,f)=>{if(u<130095&&f<130095)return u+f;const e=948e5*948e5;return Math.round((u+f)/(1+u*f/e))},j=(u,f)=>{if(f||(f=Date.now()),W||(Oe||console.error("[yt-chat] preprocessChatLiveActions might fail because of no __LCRInjection__"),In&&console.log("[yt-chat-debug] 5990","preprocessChatLiveActions",u),In&&console.log("[yt-chat-debug] 5991",document.querySelectorAll("yt-live-chat-ticker-renderer #ticker-items [class]").length),W=1),!u||!u.length||F.has(u))return u;F.add(u);const t=f;let e=null;const n=new Me;if(Zt){const s=Z,c=m=>{const r=m-1e6,p=m+1e6;let A=!1,R=null,U=null,Y=-1;for(let oe=0,se=s.length;oe<se;oe++){const _=s[oe],[E,v,k]=_;if(R>E)if(A){const B=s[U],N=P(B[2],k),K=k/(B[2]+k);B[0]+=(E-B[0])*K,B[1]+=(v-B[1])*K,B[2]=N,s[oe]=null,Y<0&&(Y=oe);continue}else{console.warn("logic ERROR"),s[oe]=null,Y<0&&(Y=oe);break}if(p<R)break;if(J(r,p,E,v)){A=!0;const B=E+(r-E)*1/(k+1);if(B<R){const N=s[U],K=P(P(N[2],k),1),G=k/(N[2]+k+1),M=1/(N[2]+k+1);N[0]+=(E-N[0])*G+(r-N[0])*M,R=N[1]+=(v-N[1])*G+(p-N[1])*M,N[2]=K,s[oe]=null,Y<0&&(Y=oe);continue}else{const N=P(k,1);_[0]=B,_[1]=R=v+(p-v)*1/(k+1),_[2]=N,U=oe}}else R=v,U=oe}Y>=0&&H(s,Y),A||Q(s,[r,p,1])};let a=0;for(let m=0,r=u.length;m<r;m++){const p=u[m],A=S(p);if(A===!1)continue;let R=A.timestampText,U,Y=null,oe=null,se=null;R&&R.simpleText&&(U=R.simpleText);let _=A.timestampUsec,E;if(_&&+_>11105532e8&&(E=+_),E>0&&!a){const v=Math.round(E/1e6);a=v-v%1e7,v-a<2e6&&(a-=1e7)}if(U&&E){let v;if(v=/^\s*(-?)(\d+):(\d+)\s*$/.exec(U)){let k=v[1]?-1:1,L=+v[2],B=+v[3];k>0&&L>=0&&B>=0?Y=L*60+B:k<0&&L>=0&&B>=0&&(Y=-L*60+-B),Y!==null&&(oe=Y-.5,se=Y+.5)}else if(v=/^\s*(-?)(\d+):(\d+):(\d+)\s*$/.exec(U)){let k=v[1]?-1:1,L=+v[2],B=+v[3],N=+v[4];k>0&&L>=0&&B>=0&&N>=0?Y=L*60*60+B*60+N:k<0&&L>=0&&B>=0&&N>=0&&(Y=-L*60*60+-B*60+-N),Y!==null&&(oe=Y-.5,se=Y+.5)}}if(oe!==null&&se!==null&&E>0){let v=oe*1e6,k=se*1e6,L=E-k,B=E-v;const N=(L+B)/2;let K=n.get(A);K||n.set(A,K={}),K.timestampUsecOriginal=E,K.t0au=L,K.t0bu=B,K.t0mu=N,c(N)}}e=s}const i=Zt?e.map(s=>{const[c,a]=s;return(c+a)/2}):null,l=s=>{const c=i.length;if(c<1||s===!1)return null;const a=n.get(s);if(!a)return null;const{t0mu:m}=a;let r=0;if(c>=3){let oe=0,se=c-1;for(;se-oe>1;){const _=oe+se>>>1;i[_]>=m?se=_:oe=_}r=oe}let p=-1,A=-1;for(let oe=r;oe<c;oe++){const se=i[oe]-m;if(se>=0){p=se;break}A=-se}const R=p,U=A;if(R>=0&&(U<0||R<=U))a.chosenT0=m+R;else if(U>=0&&(R<0||U<=R))a.chosenT0=m-U;else return console.warn("logic error"),null;const Y=a.timestampUsecOriginal-a.chosenT0;return a.timestampUsecAdjusted=Y+11105532e8,Y},o=new Map;o.set=o.setOriginal||o.set;for(let s=0,c=u.length;s<c;s++){const a=u[s],m=S(a);if(m!==!1&&(m.id&&!m.__timestampActionRequest__&&(m.__timestampActionRequest__=t),m.id&&m.__timestampActionRequest__>0&&m.durationSec>0&&m.fullDurationSec)){const r=m.__timestampActionRequest__-(m.fullDurationSec-m.durationSec)*1e3;o.set(a,r)}}if(o.size>1){const s=[];let c=u.filter((m,r)=>o.has(m)?(s.push(r),!0):!1),a=c.sort((m,r)=>o.get(m)-o.get(r));for(let m=0,r=c.length;m<r;m++){const p=s[m];u[p]=a[m]}}{const s=new Map;s.set=s.setOriginal||s.set;const c=[];let a=u.filter((m,r)=>{const p=S(m);if(!p)return!1;const A=p.timestampText,R=+p.timestampUsec;if(!R||!A)return!1;let U;if(Zt){const Y=l(p);if(!Number.isFinite(Y))return console.warn(`FIX_TIMESTAMP_FOR_REPLAY - no adjustmentTime for ${p.id}.${p.timestampUsec}`,p),!1;U=Y}else{if(!Number.isFinite(R))return console.warn(`no baseTime for ${p.id}.${p.timestampUsec}`,p),!1;U=R}return c.push(r),s.set(m,U),!0});if(s.size>1){let m=a.sort((r,p)=>s.get(r)-s.get(p));for(let r=0,p=a.length;r<p;r++){const A=c[r];u[A]=m[r]}}}return u};if(Tn){console.log("[yt-chat-control] ATTEMPT_TICKER_ANIMATION_START_TIME_DETECTION is used.");const u=function(){const e=this.pop78();if(e&&(e.actions||0).length>=1&&e.videoOffsetTimeMsec)for(const n of e.actions){const i=n?"addChatItemAction"in n?"addChatItemAction":"addLiveChatTickerItemAction"in n?"addLiveChatTickerItemAction":null:null;if(i){const o=(n[i]||0).item;if(typeof o=="object"){const s=mt(o);if(s){const c=o[s];c&&typeof c=="object"&&(c.__videoOffsetTimeMsec__=e.videoOffsetTimeMsec,c.__progressAt__=$t)}}}}return e},f={get(e,n,i){if(n==="qe3")return 1;const l=e[n];return n==="front_"&&l&&typeof l.length=="number"&&(l.pop78||(l.pop78=l.pop,l.pop=u)),l}},t=e=>{const n="yt-live-chat-renderer",l=_e(e);if(!l||!l.attached){console.warn(`proto.attached for ${n} is unavailable.`);return}typeof l.playerProgressChanged_=="function"&&!l.playerProgressChanged32_&&(l.playerProgressChanged32_=l.playerProgressChanged_,l.playerProgressChanged_=function(o,s,c){o===0&&(o=arguments[0]=Number.MIN_VALUE),$t=o,or=s,ir=c;const a=this.replayBuffer_;if(a){const m=a.replayQueue;m&&typeof m=="object"&&!m.qe3&&(a.replayQueue=new Proxy(a.replayQueue,f))}return q.resolve().then(hn),this.playerProgressChanged32_.apply(this,arguments)})};!Oe&&at.push(t),At().then(t)}const re=(()=>{let u,f,t,e=()=>{u=ot(document.createComment("1")),f=new Set,t=new MutationObserver(()=>{const i=f;f=new Set;for(const l of i)l();i.clear()}),t.observe(u,{characterData:!0})};return i=>{e&&(e=e()),f.add(i),u.data=`${(u.data&1)+1}`}})();window.stackDM=re;const ue=(()=>{let u,f,t=()=>{u=new Me,f=new He(n=>{const i=new Map;for(const l of n)i.set(l.target,l.boundingClientRect);for(const[l,o]of i){f.unobserve(l);const s=u.get(l);s&&u.delete(l);const{promise:c,values:a}=s||{};c&&a&&(a.width=o.width,c.resolve(a))}})};return n=>{t&&(t=t());{const{promise:l,values:o}=u.get(n)||{};if(l)return l}const i=new nt;return u.set(n,{promise:i,values:{}}),f.unobserve(n),f.observe(n),i}})();customElements.whenDefined("yt-live-chat-item-list-renderer").then(()=>{const u="yt-live-chat-item-list-renderer",f=document.createElement(u),t=_e(f);if(!t||!t.attached){console.warn(`proto.attached for ${u} is unavailable.`);return}y(),Ee("YouTube Super Fast Chat"," | yt-live-chat-item-list-renderer hacks"),h.log("[Begin]");const e=t,n=window._flag0281_;try{ie(()=>typeof e.scrollToBottom_=="function"),ie(()=>typeof e.flushActiveItems_=="function"),ie(()=>typeof e.canScrollToBottom_=="function"),ie(()=>typeof e.setAtBottom=="function"),ie(()=>typeof e.scrollToBottom66_>"u"),ie(()=>typeof e.flushActiveItems66_>"u")}catch{}try{ie(()=>typeof e.attached=="function"),ie(()=>typeof e.detached=="function"),ie(()=>typeof e.canScrollToBottom_=="function"),ie(()=>typeof e.isSmoothScrollEnabled_=="function"),ie(()=>typeof e.maybeResizeScrollContainer_=="function"),ie(()=>typeof e.refreshOffsetContainerHeight_=="function"),ie(()=>typeof e.smoothScroll_=="function"),ie(()=>typeof e.resetSmoothScroll_=="function")}catch{}e.prDelay171=null;let i=0,l=0,o=0,s=0,c=0,a=null;(n&8192)==0&&((e.clearList||0).length===0?((n&2)==0&&ie(()=>ne(e.clearList,"0.106.50")),e.clearList66=e.clearList,e.clearList=function(){i=(i&1073741823)+1,l=(l&1073741823)+1,o=(o&1073741823)+1,s=(s&1073741823)+1,c=(c&1073741823)+1,a=null,this.prDelay171=null,this.clearList66()},h.log("clearList","OK")):h.log("clearList","NG"));let m=!1;function r(_,E){m===!1&&(m=!0,q.resolve().then($r),gn(),(window._flag0281_&262144)===262144||Hr()),yr(_,E),wo(E),console.log("[yt-chat] setupMutObserver DONE")}const p=[];let A=0;const R=_=>{Fe(()=>{const{a:E,b:v}=_,k=le(E);k&&v&&v.call(k),_.a=_.b=null})},U=async(_,E)=>{const v=_.__weakRef9441__||(_.__weakRef9441__=de(_));if(p[A++]={a:v,b:E},A>1)return;await _.prDelay288,dn.data=`${(dn.data&7)+1}`,await Lt;const L=A;A=0;for(let B=0;B<L;B++){const N=p[B];p[B]=null,q.resolve(N).then(R)}};let Y=null;e.__showMoreBtn_transitionstart011__=function(_){Y=!0;const E=this.atBottom===!0?"hidden":"visible";if(E==="visible"){const v=_.target;v.style.visibility!==E&&(v.style.visibility=E)}},e.__showMoreBtn_transitionend011__=function(_){Y=!0;const E=this.atBottom===!0?"hidden":"visible";if(E==="hidden"){const v=_.target;v.style.visibility!==E&&(v.style.visibility=E)}},e.attached419=async function(){if(!this.isAttached)return;let _=16;for(;!this.$||!this.$["item-scroller"]||!this.$["item-offset"]||!this.$.items;){if(--_<0||!this.isAttached)return;await Fe()}if(this.isAttached!==!0)return;if(!this.$){console.warn("!this.$");return}if(!this.$)return;const E=this.$["item-scroller"],v=this.$["item-offset"],k=this.$.items;if(!E||!v||!k){console.warn("items.parentNode !== itemOffset");return}if(qt(k)!==v){console.warn("items.parentNode !== itemOffset");return}if(k.id!=="items"||v.id!=="item-offset"){console.warn("id incorrect");return}if(!V.prototype.matches.call(k,"#item-offset.style-scope.yt-live-chat-item-list-renderer > #items.style-scope.yt-live-chat-item-list-renderer")){console.warn("!isTargetItems");return}r(v,k),io?this.__itemAnchorColl011__=v.getElementsByTagName("item-anchor"):this.__itemAnchorColl011__=null;const B=this.$["show-more"];B&&(this.__showMoreBtn_transitionstart012__||(this.__showMoreBtn_transitionstart012__=this.__showMoreBtn_transitionstart011__.bind(this)),this.__showMoreBtn_transitionend012__||(this.__showMoreBtn_transitionend012__=this.__showMoreBtn_transitionend011__.bind(this)),B.addEventListener("transitionrun",this.__showMoreBtn_transitionstart012__,!1),B.addEventListener("transitionstart",this.__showMoreBtn_transitionstart012__,!1),B.addEventListener("transitionend",this.__showMoreBtn_transitionend012__,!1),B.addEventListener("transitioncancel",this.__showMoreBtn_transitionend012__,!1)),vo&&vo.observe(this.itemScroller||this.$["item-scroller"])},e.attached331=e.attached,e.attached=function(){return this.attached419&&this.attached419(),this.attached331()},e.detached331=e.detached,e.detached=function(){return wo(),this.detached331()};const oe=document.querySelectorAll("yt-live-chat-item-list-renderer");for(const _ of oe){const E=ae(_);E.isAttached===!0&&E.attached419()}if((e.async||0).length===2&&(e.cancelAsync||0).length===1){ie(()=>ne(e.async,"2.24.15")),ie(()=>ne(e.cancelAsync,"1.15.8"));const _=new Map,E=C(()=>0,.625),v=g(()=>0);clearTimeout(E),w(v);const k=E+v+1740;let L=k;e.async66=e.async,e.async=function(B,N){const K=arguments.length===2;L>1e9&&(L=k+9);const G=++L;_.set(G,B);const M=q.all([this.prDelay288,Lt,this.prDelay171,q.resolve()]),O=Jn();return q.race([M,O]).then(()=>{const D=_.get(G);if(typeof D!="function")return;const te=function(){return _.delete(G)&&D.apply(this,arguments)};_.set(G,K?this.async66(te,N):this.async66(te))}),G},e.cancelAsync66=e.cancelAsync,e.cancelAsync=function(B){if(B<=k)this.cancelAsync66(B);else if(_.has(B)){const N=_.get(B);_.delete(B),typeof N!="function"&&this.cancelAsync66(N)}},h.log("async","OK")}else h.log("async","NG");if((n&2)==0&&((e.showNewItems_||0).length===0&&Xe?(ie(()=>ne(e.showNewItems_,"0.170.79")),e.showNewItems66_=e.showNewItems_,e.showNewItems_=function(){},h.log("showNewItems_","OK")):h.log("showNewItems_","NG")),(n&2)==0)if((e.onScrollItems_||0).length===1){if(e.onScrollItems3641_||ie(()=>ne(e.onScrollItems_,"1.17.9")),typeof e.setAtBottom=="function"&&e.setAtBottom.length===0){e.setAtBottom217=e.setAtBottom,e.setAtBottom=function(){const K=this.ec217;if(typeof K!="boolean")return this.setAtBottom217();const G=this.atBottom;G!==K&&typeof G=="boolean"&&(this.atBottom=K)};let _=null;e.onScrollItems66_=e.onScrollItems_;let E=()=>{},v=null,k=null,L=null;const B=(K,G)=>{const M=K[K.length-1];M.target===_&&E(M)},N=(K,G)=>{const M=K[K.length-1];G.unobserve(M.target),M.target===_&&(_=null,E(M))};e.onScrollItems3885cb2_=function(K){const G=K.isIntersecting===!0;this.ec217=G,this.onScrollItems66_(v),this.ec217=null},e.onScrollItems3885cb1_=function(K){const G=K.intersectionRatio>.98;this.ec217=G,this.onScrollItems66_(v),this.ec217=null},e.onScrollItems_=function(K){if(K===v||K&&v&&K.timeStamp===v.timeStamp)return;v=K;const G=this.ytRendererBehavior||0;typeof G.onScroll=="function"&&G.onScroll(K);const M=this.__itemAnchorColl011__;if(M){const O=M.length===1?M[0]:null;_!==O&&(k&&k.disconnect(),_=O,O&&(this.onScrollItems3886cb2_||(this.onScrollItems3886cb2_=this.onScrollItems3885cb2_.bind(this)),E=this.onScrollItems3886cb2_,k||(k=new He(B)),k.observe(O)))}else{const O=this.$.items;if(!O)return this.onScrollItems66_();const D=xr(O);if(!D)return this.onScrollItems66_();if(_===D)return;_=D,L&&L.disconnect(),this.onScrollItems3886cb1_||(this.onScrollItems3886cb1_=this.onScrollItems3885cb1_.bind(this)),E=this.onScrollItems3886cb1_,L||(L=new He(N)),L.observe(D)}}}h.log("onScrollItems_","OK")}else h.log("onScrollItems_","NG");if((n&64)==0&&(Xe&&fi&&typeof e.refreshOffsetContainerHeight_=="function"&&!e.refreshOffsetContainerHeight26_&&e.refreshOffsetContainerHeight_.length===0?(ie(()=>ne(e.refreshOffsetContainerHeight_,"0.31.21")),e.refreshOffsetContainerHeight26_=e.refreshOffsetContainerHeight_,e.refreshOffsetContainerHeight_=function(){},h.log("refreshOffsetContainerHeight_","OK")):h.log("refreshOffsetContainerHeight_","NG")),(n&8192)==0)if((e.flushActiveItems_||0).length===0){if((n&2)==0){const v=ne(e.flushActiveItems_);v==="0.156.86"||v==="0.150.84"||v==="0.137.81"||v==="0.138.81"||ie(()=>ne(e.flushActiveItems_,"0.157.86"))||Ut("mclp.flushActiveItems_",e.flushActiveItems_)()}let _=nn?0:-1;e.flushActiveItems66a_=e.flushActiveItems_;const E=v=>{let k=[];const L=new Set;if(L.add=L.addOriginal||L.add,Ct||Nt||kt)for(const B of v)yn(B,L);if(Ct&&ke!==null&&ke&12&&L.size>0){const B=ke&8?"subresource":ke&16?"preload":ke&4?"prefetch":"";B&&L.forEach(N=>{let K=!1;if(qo&&N.includes(".ggpht.com/"))return;const M=N.includes("/emoji/")?Cr:Er;M.has(N)||(M.add(N),K=!0),K&&k.push(Cn(null,B,N,"image"))})}return L.clear(),async()=>{k.length>0&&await q.race([new q(B=>C(B,250)),q.all(k)]),k.length=0,k=null}};if(Oo&&`${e.flushActiveItems_}`.includes("this.push.apply(this,this.activeItems_)")&&`${e.flushActiveItems_}`.includes('this.splice("visibleItems",0,')&&!t.notifyPath371&&!t.proceedStampDomArraySplices381_&&!t.stampDomArraySplices381_&&!t.push377&&!t.splice377){{go(t,{key:"proceedStampDomArraySplices381_",stamperDomClass:"style-scope yt-live-chat-item-list-renderer yt-live-chat-item-list-stampdom",preloadFn:E}),t.notifyPath371=t.notifyPath,t.stampDomArraySplices381_=t.stampDomArraySplices_,typeof t.stampDomArraySplices381_=="function"&&t.stampDomArraySplices381_.length>=3?t.stampDomArraySplices_=function(K,G,M){if(K==="visibleItems"&&G==="items"&&(M||0).indexSplices){const O=M.indexSplices;if(O.length===1||typeof O.length>"u"){const D=O[0]||O;if(D.type==="splice"&&(D.addedCount>=1||(D.removed||[]).length>=1)&&this.proceedStampDomArraySplices381_(K,G,D))return}}return this.stampDomArraySplices381_(...arguments)}:console.warn("0xF0230 Function Signature Changed"),t.stampDomArray366_=t.stampDomArray_,typeof t.stampDomArray366_=="function"&&t.stampDomArray366_.length>=5?t.stampDomArray_=function(K,G,M,O,D,te){const pe=K===this.tickerItems&&G==="ticker-items",me=K===this.visibleItems&&G==="items";if(!pe&&!me)return console.log("stampDomArray_ warning 0xF501",...arguments),this.stampDomArray366_(...arguments);const Ce=(this.$||0)[G];if(!Ce)return console.log("stampDomArray_ warning 0xF502",...arguments),this.stampDomArray366_(...arguments);if(!(Ce[Vt]===null&&K.length===0)){const ve=pe?"tickerItems":"visibleItems";this.proceedStampDomArraySplices381_(ve,G,{addedCount:K.length,removedCount:Ce.childElementCount})}const Ae=()=>{this.markDirty&&this.markDirty();const ve={container:Ce};D&&this.hostElement.dispatchEvent(new CustomEvent("yt-rendererstamper-finished",{bubbles:!0,cancelable:!1,composed:!0,detail:ve})),ve.container=null};this.ec389pr?this.ec389pr.then(Ae):Ae()}:console.warn("0xF0230 Function Signature Changed"),e.push377=e.push,e.splice377=e.splice;const N=[];N.push=()=>0,N.unshift=()=>0,N.pop=()=>{},N.shift=()=>{},N.splice=()=>{},N.slice=function(){return this},typeof e.push377=="function"&&e.push377.length>=1?e.push=function(K,...G){if(K!=="visibleItems"||!G.length||!G[0])return this.push377(...arguments);const M=this.visibleItems,O=M.length,D=M.push(...G),te=G.length;return this.proceedStampDomArraySplices381_("visibleItems","items",{index:O,addedCount:te,removedCount:0}),D}:console.warn("0xF0230 Function Signature Changed"),typeof e.splice377=="function"&&e.splice377.length>=1?e.splice=function(K,...G){if(K!=="visibleItems"||!G.length||G.length===2&&!G[1]||G.length>2&&!G[2])return this.splice377(...arguments);const O=this.visibleItems.splice(...G),D=O.length,te=G.length>2?G.length-2:0;return G.length>=2&&D!==G[1]&&console.warn(`incorrect splice count. expected = ${G[1]}; actual = ${D}`),this.proceedStampDomArraySplices381_("visibleItems","items",{index:G[0],addedCount:te,removedCount:D}),O}:console.warn("0xF0230 Function Signature Changed")}e.flushActiveItemsFix001_=function(){const N=this.data;if(!N)return;const K=this.visibleItems,G=this.activeItems_;if(!K||!G)return;const M=K.length,O=G.length,D=N.maxItemsToDisplay;D&&M+O>D&&O>D&&G.splice(0,O-D)},e.flushActiveItems3641_=e.flushActiveItems_,e.__moreItemButtonBlinkingCheck183__=function(){const N=this.activeItems_&&this.activeItems_.length>0?1:0;if(_===1-N){_=N;const G=(this.$||0)["show-more"];G&&G.classList.toggle("has-new-messages-miuzp",!!N)}};let v=!1;e.flushActiveItems_=function(){v||(v=!0,U(this,()=>{if(v=!1,this.activeItems_.length>0){const N=this.data;N&&(N.maxItemsToDisplay>en&&(N.maxItemsToDisplay=en),this.flushActiveItemsFix001_(),this.flushActiveItems3641_(),nn&&this.__moreItemButtonBlinkingCheck183__())}}).catch(console.warn))},e.showNewItems3641_=e.showNewItems_,e.refreshOffsetContainerHeight3641_=e.refreshOffsetContainerHeight_,e.maybeScrollToBottom3641_=e.maybeScrollToBottom_;let k=!1;if(e.showNewItems_=function(){k||(k=!0,U(this,()=>{k=!1,this.showNewItems3641_()}).catch(console.warn))},!Xe&&!e.refreshOffsetContainerHeight26_){let N=!1;e.refreshOffsetContainerHeight_=function(){N||(N=!0,U(this,()=>{N=!1,this.refreshOffsetContainerHeight3641_()}).catch(console.warn))}}let L=!1;e.maybeScrollToBottom_=function(){L||(L=!0,U(this,()=>{L=!1,this.atBottom===!0||this.maybeScrollToBottom3641_()}).catch(console.warn))},e.onScrollItems3641_=e.onScrollItems_,e.maybeResizeScrollContainer3641_=e.maybeResizeScrollContainer_,e.handleLiveChatActions3641_=e.handleLiveChatActions_;let B=!1;if(e.onScrollItems_=function(N){B||(B=!0,U(this,()=>{B=!1,this.onScrollItems3641_(N)}).catch(console.warn))},!Xe){let N=!1;e.maybeResizeScrollContainer_=function(K){N||(N=!0,U(this,()=>{N=!1,this.maybeResizeScrollContainer3641_(K)}).catch(console.warn))}}}h.log("flushActiveItems_","OK")}else h.log("flushActiveItems_","NG");if((n&64)==0){let _=null,E=null;e.atBottomChanged314_=e.atBottomChanged_,e.atBottomChanged_=function(){const v=this.atBottom;if(E===v||(E=v,Y))return;const k=((this||0).$||0)["show-more"]||0;if(!k)return this.atBottomChanged314_();const L=k.hasAttribute("disabled");if(_!==L){if(_=L,this.visibleItems.length===0){this.atBottom===!0&&(k.setAttribute("disabled",""),_=!0);const B=this.atBottom===!0?"hidden":"visible";k.style.visibility!==B&&(k.style.visibility=B);return}Fe(()=>{if(Y)return;const B=((this||0).$||0)["show-more"]||0,N=this.atBottom===!0?"hidden":"visible";N==="hidden"&&console.warn("show-more-btn no transition"),B&&B.style.visibility!==N&&(B.style.visibility=N)})}}}if((n&2)==0)if((e.handleLiveChatActions_||0).length===1){const _=ne(e.handleLiveChatActions_);_==="1.40.20"||_==="1.39.20"||_==="1.31.17"||e.handleLiveChatActions3641_||ie(()=>ne(e.handleLiveChatActions_,"1.40.20"))||Ut("mclp.handleLiveChatActions_",e.handleLiveChatActions_)(),e.handleLiveChatActions66_=e.handleLiveChatActions_,e.handleLiveChatActions_=function(E){try{j(E)}catch(v){console.warn(v)}this.handleLiveChatActions66_(E),Wt(!0)},h.log("handleLiveChatActions_","OK")}else h.log("handleLiveChatActions_","NG");(n&262144)===262144===!1&&(e.hasUserJustInteracted11_=()=>{const _=Pe();return _-co<80||tt||ct||_-$e<80},(e.canScrollToBottom_||0).length===0&&!e.canScrollToBottom157_?(ie(()=>ne(e.canScrollToBottom_,"0.9.5")),e.canScrollToBottom157_=e.canScrollToBottom_,e.canScrollToBottom_=function(){return this.canScrollToBottom157_()&&!this.hasUserJustInteracted11_()},h.log("canScrollToBottom_","OK")):h.log("canScrollToBottom_","NG")),Xe?(e.isSmoothScrollEnabled_=function(){return!1},e.maybeResizeScrollContainer_=function(){},e.refreshOffsetContainerHeight_=function(){},e.smoothScroll_=function(){},e.resetSmoothScroll_=function(){},h.log("ENABLE_NO_SMOOTH_TRANSFORM","OK")):h.log("ENABLE_NO_SMOOTH_TRANSFORM","NG"),(n&8)==0&&typeof e.forEachItem_=="function"&&!e.forEachItem66_&&Wn&&e.forEachItem_.length===1&&(e.forEachItem66_=e.forEachItem_,e.forEachItem_=function(_){if((this._flag0281_&8)==8)return this.forEachItem66_(_);try{let E=!1;if(typeof _=="function"){const v=this.items;if(v instanceof HTMLDivElement){const k=this.visibleItems,L=this.activeItems_;k&&L&&k.length>=0&&L.length>=0&&(E=v)}}if(E){E.__children801__=1;const v=this.forEachItem66_(_);return E.__children801__=0,v}}catch{}return this.forEachItem66_(_)}),typeof e.handleAddChatItemAction_=="function"&&!e.handleAddChatItemAction66_&&on&&(Nt||kt)&&(e.handleAddChatItemAction66_=e.handleAddChatItemAction_,e.handleAddChatItemAction_=function(_){try{_&&typeof _=="object"&&!("length"in _)&&(yn(_.item,null),console.assert(arguments[0]===_))}catch(v){console.warn(v)}let E;if(Wn)try{E=this.handleAddChatItemAction66_.apply(this,arguments)}catch(v){if(v&&(v.message||"").includes(".querySelector("))console.log("skipErrorForhandleAddChatItemAction_",v.message);else throw v}else E=this.handleAddChatItemAction66_.apply(this,arguments);return E}),on&&h.log("handleAddChatItemAction_ [ FIX_THUMBNAIL_SIZE_ON_ITEM_ADDITION ]","OK"),typeof e.handleReplaceChatItemAction_=="function"&&!e.handleReplaceChatItemAction66_&&rn&&(Nt||kt)&&(e.handleReplaceChatItemAction66_=e.handleReplaceChatItemAction_,e.handleReplaceChatItemAction_=function(_){try{_&&typeof _=="object"&&!("length"in _)&&(yn(_.replacementItem,null),console.assert(arguments[0]===_))}catch(E){console.warn(E)}return this.handleReplaceChatItemAction66_.apply(this,arguments)}),rn&&h.log("handleReplaceChatItemAction_ [ FIX_THUMBNAIL_SIZE_ON_ITEM_REPLACEMENT ]","OK"),h.log("[End]"),be()}).catch(console.warn);const ce=function(u,f){let t=(this.__dataHost||ae(this).__dataHost||0).__data;if(arguments.length===2&&u==="style"&&t&&f){let e=`${f}`;const n=t.ratio*100;if(n>-1){let i=n;const l=t.data;if(l){const o=l.durationSec,s=l.fullDurationSec;let c=500;(o===s||o+1===s)&&o>1&&(s>400?c=500:s>200?c=200:s>100?c=100:s>50?c=50:(s>25,c=20)),c>Bn&&(c=Bn),c<5&&(c=5);const a=c/100;if(i=Math.round(i*a)/a,i=i.toFixed(1),e=e.replace(`${n}%`,`${i}%`).replace(`${n}%`,`${i}%`),t.__style_last__===e)return;t.__style_last__=e}}V.prototype.setAttribute.call(this,u,e)}else V.prototype.setAttribute.apply(this,arguments)},ee=u=>{const f=ae(u);ie(()=>typeof(f||0).is=="string"),ie(()=>((f||0).hostElement||0).nodeType===1);const t=(f.$||0).container;t?(ie(()=>(t||0).nodeType===1),ie(()=>typeof t.setAttribute=="function"),t.setAttribute=ce):console.warn(`"container" does not exist in ${f.is}`)},fe=["yt-live-chat-ticker-renderer","yt-live-chat-ticker-paid-message-item-renderer","yt-live-chat-ticker-paid-sticker-item-renderer","yt-live-chat-ticker-sponsor-item-renderer"],ge=["yt-live-chat-ticker-renderer","yt-live-chat-ticker-paid-message-item-renderer","yt-live-chat-ticker-paid-sticker-item-renderer","yt-live-chat-ticker-sponsor-item-renderer"];if(new MutationObserver(u=>{const f=new Set;for(const t of u)t.type==="attributes"&&f.add(t.target);for(const t of f){const e=t&&t.isConnected===!0?t.getAttribute("q92wb"):"";if(e==="1"){t.setAttribute("q92wb","2");const n=ae(t),i=((n||0).data||0).id;n&&typeof n.requestRemoval49=="function"&&i&&(t.id=i,n.requestRemoval49(),t.setAttribute("q92wb","3"))}else if(e==="3"){t.setAttribute("q92wb","4");const n=ae(t),i=((n||0).data||0).id;if(n&&typeof n.requestRemoval49=="function"&&i){t.id=i;const l=t.closest("yt-live-chat-ticker-renderer")||n.parentComponent,o=ae(l);l&&o&&o.removeTickerItemById&&(o.removeTickerItemById(i),t.setAttribute("q92wb","5"))}}}f.clear()}).observe(document,{attributes:!0,attributeFilter:["q92wb"],subtree:!0}),q.all(fe.map(u=>customElements.whenDefined(u))).then(()=>{y(),Ee("YouTube Super Fast Chat"," | yt-live-chat-ticker-... hacks"),h.log("[Begin]");let u=0;const f=function(a){if(a.hostElement&&typeof a.requestRemoval=="function"){try{(a.data||0).id||(a.data={id:1})}catch{}try{return a.requestRemoval(),!0}catch{}}return!1},t=new Me,e={updateStatsBarAndMaybeShowAnimationRevised:function(a,m,r){try{return this.__proxySelf0__||(this.__proxySelf0__=b(this)),this.updateStatsBarAndMaybeShowAnimation38.call(this.__proxySelf0__,a,m,r)}catch(p){console.log("updateStatsBarAndMaybeShowAnimationRevised ERROR"),console.error(p)}},detachedForMemoryLeakage:function(){try{this.actionHandlerBehavior.unregisterActionMap(this.behaviorActionMap)}catch{}return this.detached582MemoryLeak()},detachedForTickerInit:function(){q.resolve(this).then(r=>{r.isAttached||(r.isAttached===!1&&((r.$||0).container||0).isConnected===!1&&f(r),r.rafId>1&&je.cancel(r.rafId))}).catch(console.warn);const a=(this||0).hostElement;if(xe&&(this||0).__isTickerItem58__&&a instanceof V&&(a.style.removeProperty("--ticker-start-time"),a.style.removeProperty("--ticker-duration-time"),le(Pt)===a)){const r=document.querySelector(".r6-width-adjustable");r instanceof V&&r.classList.contains("r6-width-adjustable-f")&&r.classList.remove("r6-width-adjustable-f"),Pt=de(r)}let m;try{m=this.detached77()}catch(r){console.warn(r)}return this.__ticker_attachmentId__=0,m},attachedForTickerInit:function(){this.__ticker_attachmentId__=u=(u&1073741823)+1;const a=(this||0).hostElement;if(xe&&(this||0).__isTickerItem58__&&a instanceof V){const m=le(Pt);m instanceof V&&m.classList.add("r6-width-adjustable-f"),a.__fgvm573__?(a.classList.remove("r6-closing-ticker"),a.classList.remove("r6-width-adjustable-f")):(a.__fgvm573__=1,a.classList.add("r6-width-adjustable")),Pt=de(a)}return ee(a||this),this.attached77()},setContainerWidthNoSelfLeakage:function(){try{return this.__proxySelf0__||(this.__proxySelf0__=b(this)),this.setContainerWidth55.call(this.__proxySelf0__)}catch(a){console.log("setContainerWidthNoSelfLeakage ERROR"),console.error(a)}},slideDownNoSelfLeakage:function(){try{return this.__proxySelf0__||(this.__proxySelf0__=b(this)),this.slideDown55.call(this.__proxySelf0__)}catch(a){console.log("slideDownNoSelfLeakage ERROR"),console.error(a)}},collapseNoSelfLeakage:function(){try{return this.__proxySelf0__||(this.__proxySelf0__=b(this)),this.collapse55.call(this.__proxySelf0__)}catch(a){console.log("collapseNoSelfLeakage ERROR"),console.error(a)}},deletedChangedNoSelfLeakage:function(){try{return this.__proxySelf0__||(this.__proxySelf0__=b(this)),this.deletedChanged55.call(this.__proxySelf0__)}catch(a){console.log("deletedChangedNoSelfLeakage ERROR"),console.error(a)}},handlePauseReplayForPlaybackProgressState:function(){if(!bn)return this.handlePauseReplay66.apply(this,arguments);const a=this.__ticker_attachmentId__;if(!a)return;const m=de(this);if(We){const r=this._Y7rtu=(this._Y7rtu&1073741823)+1;We.then(()=>{const p=le(m)||0;a===p.__ticker_attachmentId__&&p.isAttached&&r===p._Y7rtu&&!We&&typeof p.handlePauseReplay=="function"&&p.hostElement&&p.handlePauseReplay.apply(p,arguments)});return}if(et===2&&this.isAttached){const r=this._Y7rtk=(this._Y7rtk&1073741823)+1,p=lt;Ke().then(()=>{const A=le(m);a===(A||0).__ticker_attachmentId__&&A.isAttached&&r===A._Y7rtk&&p===lt&&et===2&&Ne===et&&A.hostElement&&A.handlePauseReplay66()})}},handleResumeReplayForPlaybackProgressState:function(){if(!bn)return this.handleResumeReplay66.apply(this,arguments);const a=this.__ticker_attachmentId__;if(!a)return;const m=de(this);if(We){const r=this._Y7rtv=(this._Y7rtv&1073741823)+1;We.then(()=>{const p=le(m);a===(p||0).__ticker_attachmentId__&&r===p._Y7rtv&&!We&&typeof p.handleResumeReplay=="function"&&p.hostElement&&p.handleResumeReplay.apply(p,arguments)});return}if(et===1&&this.isAttached){const r=lt;Qe=Qe||new nt,Qe.then(()=>{const p=le(m);a===(p||0).__ticker_attachmentId__&&lt>r&&et===1&&Ne===et&&p.hostElement&&p.handleResumeReplay66()})}},handleReplayProgressForPlaybackProgressState:function(a){if(this.isAttached){const m=this.__ticker_attachmentId__;if(!m)return;const r=this._Y7rtk=(this._Y7rtk&1073741823)+1,p=de(le(this));Ke().then(()=>{const A=le(p);m===(A||0).__ticker_attachmentId__&&A.isAttached&&r===A._Y7rtk&&A.hostElement&&A.handleReplayProgress66(a)})}}},n=function(){const a=document.querySelector("#ticker-bar.yt-live-chat-ticker-renderer");return a?a.scrollLeft>0:!1},i=function(a){if(a.__dataEnabled===!1||a.__dataInvalid===!0)return;Oe||console.error("[yt-chat] USE_ADVANCED_TICKING fails because of no __LCRInjection__");const m=((a||0).__data||0).data||(a||0).data||0;if(!m)return;const r=a.hostElement;if(!(r instanceof V))return;const p=m.fullDurationSec||m.durationSec||0;let A;Oe&&m&&p>0&&!("__progressAt__"in m)?(A=Date.now(),m.__timestampActionRequest__||console.log(" 5688001 "),m.__liveTimestamp__=((m.__timestampActionRequest__||A)-Zn)/1e3||Number.MIN_VALUE,st=!0):Oe&&m&&p>0&&m.__progressAt__>0&&(st=!1);let R=m.__progressAt__||m.__liveTimestamp__;if(!R){console.log("time property is not found",!!Oe,!!m,p>0,!("__progressAt__"in m),m.__progressAt__,m.__liveTimestamp__);return}const U=A>0&&m.__timestampActionRequest__>0?A-m.__timestampActionRequest__:0;if(U>0&&(m.durationSec-=Math.floor(U/1e3),m.durationSec<0&&(m.durationSec=0),!m.durationSec)){try{a.requestRemoval()}catch{}return}let Y=m.fullDurationSec-m.durationSec;Y>0&&(R-=Y);const oe=`ticker-bg-overlay[ticker-id="${a.__ticker_attachmentId__}"]`,se=le(t.get(a));if((bt(r,"--ticker-start-time",R)||!se||se.isConnected===!1)&&p>0){const E=a.parentComponent,v=E?E.hostElement||E:0;if(v&&(vt=de(v),Ht=!1,fn?hn():to()),!r.querySelector(oe)){const k=r.querySelector("ticker-bg-overlay");k&&k.remove(),a.__advancedTicking038__=1;const L=se||document.createElement("ticker-bg-overlay");t.set(a,de(L));const B=document.createElement("ticker-bg-overlay-end2"),N=a.colorFromDecimal(m.startBackgroundColor),K=a.colorFromDecimal(m.endBackgroundColor),G=a.$.container;L.setAttribute("ticker-id",`${a.__ticker_attachmentId__}`);const M=`ticker-${a.__ticker_attachmentId__}-${Math.floor(Math.random()*314159265359+314159265359).toString(36)}`;L.id=`${M}-b`,L.style.background=`linear-gradient(90deg, ${N},${N} 50%,${K} 50%,${K})`,G instanceof V?ro(G,L,G.firstChild):(ro(r,L,r.firstChild),r.style.borderRadius="16px",G.style.borderRadius="initial"),G instanceof V&&(G.style.background="transparent",G.style.backgroundColor="transparent"),bt(r,"--ticker-duration-time",p),bt(B,"--ticker-start-time",R),bt(B,"--ticker-duration-time",p),B.id=`${M}-e`,gr(v,B);const O=e.wio2;O instanceof He&&O.observe(B)}}},l=a=>{if(a=le(a),!!a){if(a.__startCountdownAdv477__=Date.now(),a&&a.hostElement&&a.isAttached&&a.hostElement.isConnected&&a.parentComponent&&a.__ticker_attachmentId__){const m=a.data,r=m?((a||0).data||0).id:null,p=((a||0).hostElement||0).id;if(r&&r===p){const R=`${a.__ticker_attachmentId__}!${r}`;if(m.__wsi6c__!==R)return m.__wsi6c__=R,q.resolve(a).then(i),!0}}return!1}};let o=0;for(const a of ge){o++;const m=document.createElement(a),r=_e(m);if(!r||!r.attached){h.warn(`proto.attached for ${a} is unavailable.`);continue}vi&&typeof r.detached582MemoryLeak!="function"&&typeof r.detached=="function"&&(r.detached582MemoryLeak=r.detached,r.detached=e.detachedForMemoryLeakage),r.detached77=r.detached,r.detached=e.detachedForTickerInit,r.attached77=r.attached,r.attached=e.attachedForTickerInit;let p=0;wi&&typeof r.updateStatsBarAndMaybeShowAnimation=="function"&&!r.updateStatsBarAndMaybeShowAnimation38&&r.updateStatsBarAndMaybeShowAnimation.length===3&&(r.updateStatsBarAndMaybeShowAnimation38=r.updateStatsBarAndMaybeShowAnimation,r.updateStatsBarAndMaybeShowAnimation=e.updateStatsBarAndMaybeShowAnimationRevised,p|=2);let A=0;if(typeof r.startCountdown=="function"&&typeof r.updateTimeout=="function"&&typeof r.isAnimationPausedChanged=="function"){const se=ne(r.startCountdown,"2.66.37")&&ne(r.updateTimeout,"1.76.45")&&ne(r.isAnimationPausedChanged,"2.56.30");se||h.log("isTimingFunctionHackable = false"),A=se?2:1}else{let se=0;typeof r.startCountdown=="function"&&(se|=1),typeof r.updateTimeout=="function"&&(se|=2),typeof r.isAnimationPausedChanged=="function"&&(se|=4),h.log(`Skip Timing Function Modification[#${o}]: ${se} / 7`,` ${a}`)}let R=0;if(sn){if(typeof r.handlePauseReplay=="function"&&!r.handlePauseReplay66&&r.handlePauseReplay.length===0){const se=ne(r.handlePauseReplay);R++,se==="0.8.2"||se==="0.12.4"||ie(()=>ne(r.handlePauseReplay,"0.8.2"))}else A>0&&h.log("Error for setting cProto.handlePauseReplay",a);typeof r.handleResumeReplay=="function"&&!r.handleResumeReplay66&&r.handleResumeReplay.length===0?(R++,ie(()=>ne(r.handleResumeReplay,"0.8.2"))):A>0&&h.log("Error for setting cProto.handleResumeReplay",a),typeof r.handleReplayProgress=="function"&&!r.handleReplayProgress66&&r.handleReplayProgress.length===1?(R++,ie(()=>ne(r.handleReplayProgress,"1.16.13"))):A>0&&h.log("Error for setting cProto.handleReplayProgress",a)}const U=sn&&R===3&&(Vo?A>0:!0);r.__ENABLE_VIDEO_PROGRESS_STATE_FIX_AND_URT_PASSED__=U,U&&(r._Y7rtk=0,r._Y7rtu=0,r._Y7rtv=0,r.handlePauseReplay66=r.handlePauseReplay,r.handlePauseReplay=e.handlePauseReplayForPlaybackProgressState,r.handleResumeReplay66=r.handleResumeReplay,r.handleResumeReplay=e.handleResumeReplayForPlaybackProgressState,r.handleReplayProgress66=r.handleReplayProgress,r.handleReplayProgress=e.handleReplayProgressForPlaybackProgressState),Ai&&(!xe&&typeof r.setContainerWidth=="function"&&!r.setContainerWidth55&&r.setContainerWidth.length===0&&(r.setContainerWidth55=r.setContainerWidth,r.setContainerWidth=e.setContainerWidthNoSelfLeakage,p|=4),!xe&&typeof r.slideDown=="function"&&!r.slideDown55&&r.slideDown.length===0&&(r.slideDown55=r.slideDown,r.slideDown=e.slideDownNoSelfLeakage,p|=8),!xe&&typeof r.collapse=="function"&&!r.collapse55&&r.collapse.length===0&&(r.collapse55=r.collapse,r.collapse=e.collapseNoSelfLeakage,p|=16),typeof r.deletedChanged=="function"&&!r.deletedChanged55&&r.deletedChanged.length===0&&(r.deletedChanged55=r.deletedChanged,r.deletedChanged=e.deletedChangedNoSelfLeakage,p|=32));const Y=xe?35:63;h.log(`FIX_MEMORY_LEAKAGE_TICKER_[#${o}]: ${p} / ${Y}`,r.is);const oe=Tn&&typeof r.startCountdown=="function"&&!r.startCountdown49&&r.startCountdown.length===2&&typeof r.updateTimeout=="function"&&!r.updateTimeout49&&r.updateTimeout.length===1&&typeof r.isAnimationPausedChanged=="function"&&!r.isAnimationPausedChanged49&&r.isAnimationPausedChanged.length===2&&typeof r.setContainerWidth=="function"&&r.setContainerWidth.length===0&&typeof r.requestRemoval=="function"&&!r.requestRemoval49&&r.requestRemoval.length===0;if(CSS.supports("left","clamp(-100%, calc( -100% * ( var(--ticker-current-time) - var(--ticker-start-time) ) / var(--ticker-duration-time) ), 0%)"),xe&&oe&&ft){document.documentElement.setAttribute("r6-advanced-ticking",""),h.log(`USE_ADVANCED_TICKING[#${o}]::START`);const se=e.wio2||(e.wio2=new He(_=>{for(const E of _)if(E.isIntersecting){const v=E.target;let k=v.id;if(!k)continue;let L=k.substring(0,k.length-2);if(!L)continue;const B=document.querySelector(`#${L}-b`);if(!B)continue;const N=B;se.unobserve(v),v.remove();let K=N||0,G=4;for(;(K=K.parentElement)instanceof V;){if(K instanceof V){const M=ae(K);if(M&&typeof M.slideDown=="function"&&typeof M.setContainerWidth=="function"&&M.__advancedTicking038__===1){M.__advancedTicking038__=2;let O=!1;const D=((M||0).__data||0).data||(M||0).data||0;if(st&&D&&D.durationSec>0&&D.__timestampActionRequest__>0?D.__timestampActionRequest__+D.durationSec*1e3+280<Date.now()&&(O=!0):Oe&&!st&&D&&D.durationSec>0&&D.__progressAt__>0&&D.__progressAt__+D.durationSec+.28<$t&&(O=!0),O)f(M);else{const te=M.hostElement.style.width;(te==="auto"||te==="")&&M.setContainerWidth(),M.slideDown()}break}}if(G--,!G){console.log("cnt not found for ticker-bg-overlay");break}}}},{rootMargin:"0px",threshold:[1]}));r.__isTickerItem58__=1,r.attached747=r.attached,r.attached=function(){const _=(this||0).hostElement;return _&&_.hasAttribute("q92wb")&&_.removeAttribute("q92wb"),_&&_.__requestRemovalAt003__&&(_.__requestRemovalAt003__=0),q.resolve().then(()=>{this.hostElement&&this.isAttached&&this.hostElement.isConnected&&this.parentComponent&&this.__startCountdownAdv477__&&q.resolve(this).then(l)}).catch(console.warn),this.attached747()},r.startCountdown=e.startCountdownAdv||(e.startCountdownAdv=function(_,E){l(this)}),r.updateTimeout=e.updateTimeoutAdv||(e.updateTimeoutAdv=function(_){}),r.isAnimationPausedChanged=e.isAnimationPausedChangedAdv||(e.isAnimationPausedChangedAdv=function(_,E){}),typeof r.slideDown=="function"&&!r.slideDown43&&r.slideDown.length===0?(r.slideDown43=r.slideDown,r.slideDown=e.slideDownAdv||(e.slideDownAdv=async function(){if(this.__advancedTicking038__){this.__advancedTicking038__===1&&(this.__advancedTicking038__=2);const _=this.hostElement,E=this.$.container,v=ae(this.parentComponent),k=v?v.hostElement:null;if(_ instanceof V&&E instanceof V&&k instanceof V){_.classList.add("r6-closing-ticker"),Jt.has(k)||(Jt.add(k),document.addEventListener("transitionend",Eo,Co));const L=new nt;ze.set(_,L),ze.set(E,L),It++,_.classList.add("sliding-down"),await L.then(),It--,ze.delete(_),ze.delete(E),this&&this.hostElement instanceof V&&this.collapse();return}}this.slideDown43()}),h.log(`USE_ADVANCED_TICKING[#${o}]::slideDown - OK`)):h.log(`USE_ADVANCED_TICKING[#${o}]::slideDown - NG`),typeof r.collapse=="function"&&!r.collapse43&&r.collapse.length===0?(r.collapse43=r.collapse,r.collapse=e.collapseAdv||(e.collapseAdv=async function(){if(this.__advancedTicking038__){this.__advancedTicking038__===1&&(this.__advancedTicking038__=2);const _=this.hostElement,E=this.$.container,v=ae(this.parentComponent),k=v?v.hostElement:null;if(_ instanceof V&&E instanceof V&&k instanceof V){_.classList.add("r6-closing-ticker"),Jt.has(k)||(Jt.add(k),document.addEventListener("transitionend",Eo,Co));const L=new nt;ze.set(_,L),ze.set(E,L),It++,_.classList.add("collapsing"),_.style.width="0",await L.then(),It--,ze.delete(_),ze.delete(E),this&&this.hostElement instanceof V&&this.requestRemoval();return}}this.collapse43()}),h.log(`USE_ADVANCED_TICKING[#${o}]::collapse - OK`)):h.log(`USE_ADVANCED_TICKING[#${o}]::collapse - NG`),typeof r.requestRemoval=="function"&&!r.requestRemoval49&&r.requestRemoval.length===0?(r.requestRemoval49=r.requestRemoval,r.requestRemoval=e.requestRemovalAdv||(e.requestRemovalAdv=function(){const _=this.hostElement;if(_.__requestRemovalAt003__=Date.now(),this.__advancedTicking038__){try{const E=_.querySelector("ticker-bg-overlay[id]");if(E){const v=E.id,k=v?v.substring(0,v.length-2):"",L=k?document.querySelector(`#${k}-e`):null;L&&(se.unobserve(L),L.remove())}}catch{}if(this.__advancedTicking038__=2,_ instanceof V&&(_.style.removeProperty("--ticker-start-time"),_.style.removeProperty("--ticker-duration-time")),Rn){const E=this.data;_ instanceof V&&E.id&&E.fullDurationSec&&!_.hasAttribute("__reuseid__")&&(_.setAttribute("__reuseid__",Xn),_.setAttribute("__nogc__",""),Et.set(`<${this.is}>${E.id}:${E.fullDurationSec}`,de(this)))}}if(_ instanceof V){try{_.classList.remove("r6-closing-ticker"),_.classList.remove("r6-width-adjustable-f")}catch{}_.setAttribute("q92wb","1")}}),h.log(`USE_ADVANCED_TICKING[#${o}]::requestRemoval - OK`)):h.log(`USE_ADVANCED_TICKING[#${o}]::requestRemoval - NG`),typeof r.computeContainerStyle=="function"&&!r.computeContainerStyle49&&r.computeContainerStyle.length===2?(r.computeContainerStyle49=r.computeContainerStyle,r.computeContainerStyle=e.computeContainerStyleAdv||(e.computeContainerStyleAdv=function(_,E){return this.__advancedTicking038__?"":this.computeContainerStyle49(_,E)}),h.log(`USE_ADVANCED_TICKING[#${o}]::computeContainerStyle - OK`)):h.log(`USE_ADVANCED_TICKING[#${o}]::computeContainerStyle - NG`),ft&&Ot&&typeof r.updateWidthOnDataChanged=="function"&&r.updateWidthOnDataChanged.length===0&&!r.updateWidthOnDataChanged41&&(r.updateWidthOnDataChanged41=r.updateWidthOnDataChanged,r.updateWidthOnDataChanged=e.updateWidthOnDataChangedAdv||(e.updateWidthOnDataChangedAdv=function(){const _=this.hostElement.style;_.width="",_.overflow=""})),r.setStandardContainerWidth8447||(r.setStandardContainerWidth8447=e.setStandardContainerWidthAdv||(e.setStandardContainerWidthAdv=async function(_){this.__startCountdownAdv477__&&q.resolve(this).then(l);const E=(this||0).hostElement,v=this.$.container;let k=null,L="";{let N=4;for(let K=L=E.getAttribute("r6-ticker-width")||"";N--;){const G=`${E.id}`;if(!K||!K.startsWith(`${G}::`)){const M=E.style.width;M!==""&&M!=="auto"&&(E.style.width="auto");const O=await ue(v);if(O.width<1||!Number.isFinite(O.width))return;E.setAttribute("r6-ticker-width",K=L=`${G}::${O.width.toFixed(2)}`)}else{k=K.split("::");break}}}if(!k){console.log("container width failure"),_==="setContainerWidth"?this.setContainerWidth41():this.setRevampContainerWidth41();return}const B=((this||0).ytLiveChatTickerItemBehavior||0).shouldAnimateIn||(this||0).shouldAnimateIn||!1;re(B?async()=>{if(!(E.getAttribute("r6-ticker-width")!==L||E.isConnected!==!0))if(E.previousElementSibling||n())E.style.width=`${k[1]}px`;else{const N=E.style.width;N!=="0px"&&N!=="0"&&(E.style.width="0"),await ue(v),E.style.width=`${k[1]}px`}}:async()=>{E.getAttribute("r6-ticker-width")!==L||E.isConnected!==!0||(E.style.width=`${k[1]}px`)})})),typeof r.setRevampContainerWidth=="function"&&!r.setRevampContainerWidth41&&r.setRevampContainerWidth.length===0&&typeof r.setStandardContainerWidth8447=="function"&&r.setStandardContainerWidth8447.length===1?(r.setRevampContainerWidth41=r.setRevampContainerWidth,ft&&Ot?r.setRevampContainerWidth=e.setRevampContainerWidthAdv||(e.setRevampContainerWidthAdv=async function(){const _=this.hostElement;((_||0).style||0).width&&(_.style.width="")}):r.setRevampContainerWidth=e.setRevampContainerWidthAdv||(e.setRevampContainerWidthAdv=async function(){return this.setStandardContainerWidth8447("setRevampContainerWidth")}),h.log(`USE_ADVANCED_TICKING[#${o}]::setRevampContainerWidth - OK`)):Sn||h.log(`USE_ADVANCED_TICKING[#${o}]::setRevampContainerWidth - NG (acceptable)`),typeof r.setContainerWidth=="function"&&!r.setContainerWidth41&&r.setContainerWidth.length===0&&typeof r.setStandardContainerWidth8447=="function"&&r.setStandardContainerWidth8447.length===1?(r.setContainerWidth41=r.setContainerWidth,ft&&Ot?r.setContainerWidth=e.setContainerWidthAdv||(e.setContainerWidthAdv=async function(){const _=this.hostElement;((_||0).style||0).width&&(_.style.width="")}):r.setContainerWidth=e.setContainerWidthAdv||(e.setContainerWidthAdv=async function(){return this.setStandardContainerWidth8447("setContainerWidth")}),h.log(`USE_ADVANCED_TICKING[#${o}]::setContainerWidth - OK`)):h.log(`USE_ADVANCED_TICKING[#${o}]::setContainerWidth - NG`)}else xe&&h.log(`USE_ADVANCED_TICKING[#${o}] is not injected.`)}const s=fe.join(", "),c=document.querySelectorAll(s);if(c.length>=1)for(const a of c)ae(a).isAttached===!0&&ee(a);h.log("[End]"),be()}).catch(console.warn),Si){const u={dataChanged54500:function(){if(typeof(this.ytLiveChatTickerItemBehavior||0).setContainerWidth=="function")try{return this.__proxySelf0__||(this.__proxySelf0__=b(this)),this.dataChanged544.call(this.__proxySelf0__)}catch(f){console.log("dataChanged54500 ERROR"),console.error(f)}else return this.dataChanged544()},dataChanged54501:function(f){if(typeof(this.ytLiveChatTickerItemBehavior||0).setContainerWidth=="function")try{return this.__proxySelf0__||(this.__proxySelf0__=b(this)),this.dataChanged544.call(this.__proxySelf0__,f)}catch(t){console.log("dataChanged54501 ERROR"),console.error(t)}else return this.dataChanged544(f)}};for(const f of["yt-live-chat-ticker-sponsor-item-renderer","yt-live-chat-ticker-paid-sticker-item-renderer"].map(t=>[t,customElements.whenDefined(t)])){const[t,e]=f;e.then(()=>{const n=document.createElement(t),i=_e(n);if(!i||!i.attached){console.warn(`proto.attached for ${t} is unavailable.`);return}!i.dataChanged||i.dataChanged544||typeof i.dataChanged!="function"||!(i.dataChanged.length>=0&&i.dataChanged.length<=1)||(i.dataChanged544=i.dataChanged,i.dataChanged.length===0?i.dataChanged=u.dataChanged54500:i.dataChanged.length===1&&(i.dataChanged=u.dataChanged54501))})}}if(customElements.whenDefined("yt-live-chat-ticker-renderer").then(()=>{y(),Ee("YouTube Super Fast Chat"," | yt-live-chat-ticker-renderer hacks"),h.log("[Begin]"),(()=>{const u="yt-live-chat-ticker-renderer",f=document.createElement(u),t=_e(f);if(!t||!t.attached){h.warn(`proto.attached for ${u} is unavailable.`);return}if(ko&&typeof t.splice=="function"&&typeof t.markDirty=="function"&&typeof t.removeTickerItemById=="function"&&!t.removeTickerItemById737&&(t.removeTickerItemById737=t.removeTickerItemById,t.removeTickerItemById=function(e){if(this.tickerItemsQuery!=="#ticker-items"||typeof(e||0)!="string")return this.removeTickerItemById737(e);const n=this.hostElement;if(!n||!e)return this.removeTickerItemById737(e);const i=n.querySelectorAll(`[id="${e}"]`),l=new Set;typeof(e||0)=="string"&&l.add(e);for(const c of i){if(!c)continue;const a=c.id;if(!a)continue;l.add(a);const m=ae(c).data||0;if(m){const r=m.id;r?l.add(r):m.id=a}}const o=this.tickerItems;let s=0;for(let c=o.length-1;c>=0;c--){const a=o[c];if(!a||typeof a!="object")continue;const m=mt(a);if(!m)continue;const p=(a[m]||0).id;l.has(p)&&(this.splice("tickerItems",c,1),this.markDirty(),s++)}l.has(this.highlightId)&&(this.highlightId=void 0)}),ft&&typeof t.notifyPath=="function"&&t.notifyPath.length===2&&typeof t.stampDomArraySplices_=="function"&&t.stampDomArraySplices_.length===3&&!t.notifyPath371&&!t.proceedStampDomArraySplices371_&&!t.stampDomArraySplices371_&&!t.stampDomArray366_&&(go(t,{key:"proceedStampDomArraySplices371_",stamperDomClass:"style-scope yt-live-chat-ticker-renderer yt-live-chat-ticker-stampdom"}),t.notifyPath371=t.notifyPath,t.stampDomArraySplices371_=t.stampDomArraySplices_,typeof t.stampDomArraySplices371_=="function"&&t.stampDomArraySplices371_.length>=3?t.stampDomArraySplices_=function(e,n,i){if(e==="tickerItems"&&n==="ticker-items"&&(i||0).indexSplices){const l=i.indexSplices;if(l.length===1||typeof l.length>"u"){const o=l[0]||l;if(o.type==="splice"&&(o.addedCount>=1||(o.removed||0).length>=1)&&this.proceedStampDomArraySplices371_(e,n,o))return}}return this.stampDomArraySplices371_(...arguments)}:console.warn("0xF0230 Function Signature Changed"),t.stampDomArray366_=t.stampDomArray_,typeof t.stampDomArray366_=="function"&&t.stampDomArray366_.length>=5?t.stampDomArray_=function(e,n,i,l,o,s){const c=e===this.tickerItems&&n==="ticker-items",a=e===this.visibleItems&&n==="items";if(!c&&!a)return console.log("stampDomArray_ warning 0xF501",...arguments),this.stampDomArray366_(...arguments);const m=(this.$||0)[n];if(!m)return console.log("stampDomArray_ warning 0xF502",...arguments),this.stampDomArray366_(...arguments);if(!(m[Vt]===null&&e.length===0)){const p=c?"tickerItems":"visibleItems";this.proceedStampDomArraySplices371_(p,n,{addedCount:e.length,removedCount:m.childElementCount})}const r=()=>{this.markDirty&&this.markDirty();const p={container:m};o&&this.hostElement.dispatchEvent(new CustomEvent("yt-rendererstamper-finished",{bubbles:!0,cancelable:!1,composed:!0,detail:p})),p.container=null};this.ec389pr?this.ec389pr.then(r):r()}:console.warn("0xF0230 Function Signature Changed")),typeof t.createComponent_=="function"&&t.createComponent_.length===3&&!t.createComponent58_?(t.createComponent58_=t.createComponent_,t.createComponent_=function(e,n,i){const l=Qn(e,n,i);return l!==void 0?l:this.createComponent58_(e,n,i)}):console.warn("0xF0230 Function Signature Changed"),xe&&!t.handleLiveChatActions47&&typeof t.handleLiveChatActions=="function"&&t.handleLiveChatActions.length===1?(t.handleLiveChatActions47=t.handleLiveChatActions,t.handleLiveChatActions=function(e){try{j(e)}catch(n){console.warn(n)}return this.handleLiveChatActions47(e)},h.log("USE_ADVANCED_TICKING::handleLiveChatActions - OK")):xe&&h.log("USE_ADVANCED_TICKING::handleLiveChatActions - NG"),ri&&(typeof t.keepScrollClamped=="function"&&!t.keepScrollClamped72&&ne(t.keepScrollClamped)==="0.17.10"?(t.keepScrollClamped72=t.keepScrollClamped,t.keepScrollClamped=function(){const e=le(this);e&&e.hostElement&&(e._bound_keepScrollClamped=e._bound_keepScrollClamped||e.keepScrollClamped.bind(de(e)),e.scrollClampRaf=g(e._bound_keepScrollClamped),e.maybeClampScroll())},h.log("RAF_FIX: keepScrollClamped",u,"OK")):(ie(()=>ne(t.keepScrollClamped,"0.17.10")),h.log("RAF_FIX: keepScrollClamped",u,"NG"))),ln&&typeof t.startScrolling=="function"&&typeof t.scrollIncrementally=="function"&&"|1.43.31|1.44.31|".indexOf("|"+ne(t.startScrolling)+"|")>=0&&"|1.78.45|1.82.43|1.43.31|".indexOf("|"+ne(t.scrollIncrementally)+"|")>=0?(t.startScrolling=function(e){const n=le(this);n&&n.hostElement&&(n.scrollStopHandle&&n.cancelAsync(n.scrollStopHandle),n.asyncHandle&&w(n.asyncHandle),n.lastFrameTimestamp=n.scrollStartTime=performance.now(),n.scrollRatePixelsPerSecond=e,n._bound_scrollIncrementally=n._bound_scrollIncrementally||n.scrollIncrementally.bind(de(n)),n.asyncHandle=g(n._bound_scrollIncrementally))},t.__getTickerBarQuery__=function(){return this.tickerBarQuery==="#items"?this.$.items:this.hostElement.querySelector(this.tickerBarQuery)},t.scrollIncrementally=ln===2?function(e){const n=le(this);if(!n||!n.hostElement)return;const i=e-(n.lastFrameTimestamp||0),l=n.scrollRatePixelsPerSecond,o=i/1e3*(l||0),s=n.__getTickerBarQuery__();if(!s)return;const c=s.scrollLeft;if(n.lastFrameTimestamp!=n.scrollStartTime){if(!(o>-1e-5&&o<1e-5)){let a=c>0&&l>0&&o>0,m=c>0&&l<0&&o<0,r=c<1e-5&&c>-1e-5&&l>0&&o>0;(a||m||r)&&(s.scrollLeft+=o,n.maybeClampScroll(),n.updateArrows())}}n.lastFrameTimestamp=e,n._bound_scrollIncrementally=n._bound_scrollIncrementally||n.scrollIncrementally.bind(de(n)),0<s.scrollLeft||l&&0<l?n.asyncHandle=g(n._bound_scrollIncrementally):n.stopScrolling()}:function(e){const n=le(this);if(!n||!n.hostElement)return;const i=e-(n.lastFrameTimestamp||0),l=n.__getTickerBarQuery__();l&&(l.scrollLeft+=i/1e3*(n.scrollRatePixelsPerSecond||0),n.maybeClampScroll(),n.updateArrows(),n.lastFrameTimestamp=e,n._bound_scrollIncrementally=n._bound_scrollIncrementally||n.scrollIncrementally.bind(de(n)),0<l.scrollLeft||n.scrollRatePixelsPerSecond&&0<n.scrollRatePixelsPerSecond?n.asyncHandle=g(n._bound_scrollIncrementally):n.stopScrolling())},h.log(`RAF_FIX: scrollIncrementally${ln}`,u,"OK")):(ie(()=>ne(t.startScrolling,"1.43.31"))||Ut("cProto.startScrolling",t.startScrolling)(),ie(()=>ne(t.scrollIncrementally,"1.78.45"))||Ut("cProto.scrollIncrementally",t.scrollIncrementally)(),h.log("RAF_FIX: scrollIncrementally",u,"NG")),ci&&typeof t.attached=="function"&&!t.attached37&&typeof t.detached=="function"&&!t.detached37){t.attached37=t.attached,t.detached37=t.detached;let e=0;t.__naohzId__=0,t.attached=function(){return q.resolve(this).then(i=>{const l=i.hostElement||i;if(!(l instanceof V)||!V.prototype.matches.call(l,".yt-live-chat-renderer"))return;const o=V.prototype.closest.call(l,"iron-pages.yt-live-chat-renderer");o&&(i.__naohzId__&&we.call(o,"click",i.messageBoxClickHandlerForFade,{capture:!1,passive:!0}),i.__naohzId__=e=(e&1073741823)+1,o.setAttribute("naohz",`${+i.__naohzId__}`),ye.call(o,"click",i.messageBoxClickHandlerForFade,{capture:!1,passive:!0}),i=null)}),this.attached37.apply(this,arguments)},t.detached=function(){return q.resolve(this).then(i=>{const l=document.querySelector(`iron-pages[naohz="${+i.__naohzId__}"]`);l&&(we.call(l,"click",i.messageBoxClickHandlerForFade,{capture:!1,passive:!0}),i=null)}),this.detached37.apply(this,arguments)};const n=i=>{i.click()};t.messageBoxClickHandlerForFade=async i=>{const l=(i||0).target||0;if(l)for(let o=l;o instanceof V;o=qt(o)){const s=o.is;if(typeof s=="string"&&s){if(s==="yt-live-chat-pinned-message-renderer")return;if(s==="iron-pages"||s==="yt-live-chat-renderer"||s==="yt-live-chat-app"){const c=V.prototype.querySelector.call(o,"yt-live-chat-pinned-message-renderer:not([hidden]) #fade");c&&(q.resolve(c).then(n),i&&i.stopPropagation());return}if(s!=="yt-live-chat-ticker-renderer"&&(s.startsWith("yt-live-chat-ticker-")||!s.endsWith("-renderer")))return}else if((o.nodeName||"").includes("BUTTON"))return}},h.log("CLOSE_TICKER_PINNED_MESSAGE_WHEN_HEADER_CLICKED - OK")}else h.log("CLOSE_TICKER_PINNED_MESSAGE_WHEN_HEADER_CLICKED - NG")})(),h.log("[End]"),be()}).catch(console.warn),(tn||Mt)&&customElements.whenDefined("yt-live-chat-message-input-renderer").then(()=>{y(),Ee("YouTube Super Fast Chat"," | yt-live-chat-message-input-renderer hacks"),h.log("[Begin]"),(()=>{const u="yt-live-chat-message-input-renderer",f=document.createElement(u),t=_e(f);if(!t||!t.attached){h.warn(`proto.attached for ${u} is unavailable.`);return}if(tn&&je!==null){let e=!1;typeof t.handleTimeout=="function"&&typeof t.updateTimeout=="function"&&(e=ne(t.handleTimeout,"1.27.16")&&ne(t.updateTimeout,"1.50.33"),e||h.log("doHack = false")),e?(t.handleTimeout=function(n){const i=le(this);i&&i.hostElement&&(console.log("cProto.handleTimeout",u),i.boundUpdateTimeout38_||(i.boundUpdateTimeout38_=i.updateTimeout.bind(de(i))),i.timeoutDurationMs=i.timeoutMs=n,i.countdownRatio=1,i.lastTimeoutTimeMs===0&&je.request(i.boundUpdateTimeout38_))},t.updateTimeout=function(n){const i=le(this);i&&i.hostElement&&(console.log("cProto.updateTimeout",u),i.boundUpdateTimeout38_||(i.boundUpdateTimeout38_=i.updateTimeout.bind(de(i))),i.lastTimeoutTimeMs&&(i.timeoutMs=Math.max(0,i.timeoutMs-(n-i.lastTimeoutTimeMs)),i.countdownRatio=i.timeoutMs/i.timeoutDurationMs),i.isAttached&&i.timeoutMs?(i.lastTimeoutTimeMs=n,je.request(i.boundUpdateTimeout38_)):i.lastTimeoutTimeMs=0)},h.log("RAF_HACK_INPUT_RENDERER",u,"OK")):(h.log("typeof handleTimeout",typeof t.handleTimeout),h.log("typeof updateTimeout",typeof t.updateTimeout),h.log("RAF_HACK_INPUT_RENDERER",u,"NG"))}Mt&&typeof t.onFocusedChanged=="function"&&t.onFocusedChanged.length===1&&!t.onFocusedChanged372&&(t.onFocusedChanged372=t.onFocusedChanged,t.onFocusedChanged=function(e){q.resolve(this).then(n=>{n.isAttached===!0&&n.onFocusedChanged372(e),n=null}).catch(console.warn)})})(),h.log("[End]"),be()}),kn&&je!==null&&customElements.whenDefined("yt-emoji-picker-renderer").then(()=>{y(),Ee("YouTube Super Fast Chat"," | yt-emoji-picker-renderer hacks"),h.log("[Begin]"),(()=>{const u="yt-emoji-picker-renderer",f=document.createElement(u),t=_e(f);if(!t||!t.attached){h.warn(`proto.attached for ${u} is unavailable.`);return}let e=!1;if(typeof t.animateScroll_=="function"?(h.log("animateScroll_: function - OK"),e=ne(t.animateScroll_,"1.102.49")):h.log("animateScroll_",typeof t.animateScroll_),e){const n=V.prototype.querySelector,i=l=>({querySelector:o=>n.call(l,o)});t.animateScroll_=function(l){const o=le(this);o&&o.hostElement&&(o.boundAnimateScroll39_||(o.boundAnimateScroll39_=o.animateScroll_.bind(de(o))),o.lastAnimationTime_||(o.lastAnimationTime_=l),l-=o.lastAnimationTime_,200>l?(i(o.hostElement).querySelector("#categories").scrollTop=o.animationStart_+(o.animationEnd_-o.animationStart_)*l/200,je.request(o.boundAnimateScroll39_)):(o.animationEnd_!=null&&(i(o.hostElement).querySelector("#categories").scrollTop=o.animationEnd_),o.animationEnd_=o.animationStart_=null,o.lastAnimationTime_=0),o.updateButtons_())},h.log("ENABLE_RAF_HACK_EMOJI_PICKER",u,"OK")}else h.log("ENABLE_RAF_HACK_EMOJI_PICKER",u,"NG")})(),h.log("[End]"),be()}),On&&je!==null&&customElements.whenDefined("yt-live-chat-docked-message").then(()=>{y(),Ee("YouTube Super Fast Chat"," | yt-live-chat-docked-message hacks"),h.log("[Begin]"),(()=>{const u="yt-live-chat-docked-message",f=document.createElement(u),t=_e(f);if(!t||!t.attached){h.warn(`proto.attached for ${u} is unavailable.`);return}let e=!1;typeof t.detached=="function"&&typeof t.checkIntersections=="function"&&typeof t.onDockableMessagesChanged=="function"&&typeof t.boundCheckIntersections>"u"?(h.log("detached: function - OK"),h.log("checkIntersections: function - OK"),h.log("onDockableMessagesChanged: function - OK"),e=ne(t.detached,"0.32.22")&&ne(t.checkIntersections,"0.128.85")&&ne(t.onDockableMessagesChanged,"0.20.11")):(h.log("detached",typeof t.detached,"NG"),h.log("checkIntersections",typeof t.checkIntersections,"NG"),h.log("onDockableMessagesChanged",typeof t.onDockableMessagesChanged,"NG")),e?(t.__boundCheckIntersectionsSubstitutionFn__=function(){const n=this;!n.i5zmk&&typeof n.boundCheckIntersections=="function"&&typeof n.checkIntersections=="function"&&(n.i5zmk=1,n.boundCheckIntersections=n.checkIntersections.bind(de(n)))},t.checkIntersections=function(){const n=le(this);if(n&&n.hostElement)if(typeof n.__boundCheckIntersectionsSubstitutionFn__=="function"&&n.__boundCheckIntersectionsSubstitutionFn__(),n.dockableMessages.length){n.intersectRAF=je.request(n.boundCheckIntersections);let i=n.dockableMessages[0],l=n.hostElement.getBoundingClientRect();i=i.getBoundingClientRect();let o=i.top-l.top,s=8>=o;if(o=8>=o-n.hostElement.clientHeight,s){let c;for(;s&&(c=n.dockableMessages.shift(),s=n.dockableMessages[0],!!s);){s=s.getBoundingClientRect(),o=s.top-l.top;let a=8>=o;if(8>=o-i.height)if(a)i=s;else return;s=a}n.dock(c)}else o&&n.dockedItem&&n.clear()}else n.intersectRAF=0},t.onDockableMessagesChanged=function(){const n=this;typeof n.__boundCheckIntersectionsSubstitutionFn__=="function"&&n.__boundCheckIntersectionsSubstitutionFn__(),n.dockableMessages.length&&!n.intersectRAF&&(n.intersectRAF=je.request(n.boundCheckIntersections))},t.detached=function(){this.intersectRAF&&je.cancel(this.intersectRAF)},h.log("ENABLE_RAF_HACK_DOCKED_MESSAGE",u,"OK")):h.log("ENABLE_RAF_HACK_DOCKED_MESSAGE",u,"NG")})(),h.log("[End]"),be()}).catch(console.warn),zo&&customElements.whenDefined("yt-img-shadow").then(()=>{y(),Ee("YouTube Super Fast Chat"," | yt-img-shadow hacks"),h.log("[Begin]"),(()=>{const u="yt-img-shadow",f=document.createElement(u),t=_e(f);if(!t||!t.attached){h.warn(`proto.attached for ${u} is unavailable.`);return}typeof t.thumbnailChanged_=="function"&&!t.thumbnailChanged66_?(t.thumbnailChanged66_=t.thumbnailChanged_,t.thumbnailChanged_=function(e){if(!(this.oldThumbnail_&&this.thumbnail&&this.oldThumbnail_.thumbnails===this.thumbnail.thumbnails)&&!(!this.oldThumbnail_&&!this.thumbnail))return this.thumbnailChanged66_.apply(this,arguments)},h.log("cProto.thumbnailChanged_ - OK")):h.log("cProto.thumbnailChanged_ - NG"),typeof t.setSrc_=="function"&&!t.setSrc66_?(t.setSrc66_=t.setSrc_,t.setSrc_=function(e){if((((this||0).$||0).img||0).src!==e)return this.setSrc66_.apply(this,arguments)},h.log("cProto.setSrc_ - OK")):h.log("cProto.setSrc_ - NG")})(),h.log("[End]"),be()}).catch(console.warn),Yo&&customElements.whenDefined("yt-live-chat-author-badge-renderer").then(()=>{y(),Ee("YouTube Super Fast Chat"," | yt-live-chat-author-badge-renderer hacks"),h.log("[Begin]"),(()=>{const u="yt-live-chat-author-badge-renderer",f=document.createElement(u),t=_e(f);if(!t||!t.attached){h.warn(`proto.attached for ${u} is unavailable.`);return}typeof t.dataChanged=="function"&&!t.dataChanged86&&"|0.169.106|".includes(`|${ne(t.dataChanged)}|`)?(t.dataChanged86=t.dataChanged,t.dataChanged=function(){const e=(this||0).data,n=((this||0).$||0).image;if(n&&e&&n.firstElementChild){const i=n.firstElementChild;if(i===n.lastElementChild){if(e.icon&&i.nodeName.toUpperCase()==="YT-ICON"){const l=i,o=ae(l),s="icon"in o||"defaultToFilled"in o?o:l;if(e.icon.iconType==="MODERATOR"&&this.enableNewModeratorBadge)s.icon!=="yt-sys-icons:shield-filled"&&(s.icon="yt-sys-icons:shield-filled"),s.defaultToFilled!==!0&&(s.defaultToFilled=!0);else{const c="live-chat-badges:"+e.icon.iconType.toLowerCase();s.icon!==c&&(s.icon=c),s.defaultToFilled!==!1&&(s.defaultToFilled=!1)}return}else if(e.customThumbnail&&i.nodeName.toUpperCase()=="IMG"){const l=i;if(e.customThumbnail.thumbnails.map(o=>o.url).includes(l.src)){l.setAttribute("alt",this.hostElement.ariaLabel||"");return}}}}return this.dataChanged86.apply(this,arguments)},h.log("cProto.dataChanged - OK")):typeof t.dataChanged=="function"&&!t.dataChanged86&&"|1.163.100|1.162.100|1.160.97|1.159.97|".includes(`|${ne(t.dataChanged)}|`)?(t.dataChanged86=t.dataChanged,t.dataChanged=function(e){const n=((this||0).$||0).image;if(n&&e&&n.firstElementChild){const i=n.firstElementChild;if(i===n.lastElementChild){if(e.icon&&i.nodeName.toUpperCase()==="YT-ICON"){const l=i,o=ae(l),s="icon"in o||"defaultToFilled"in o?o:l;if(e.icon.iconType==="MODERATOR"&&this.enableNewModeratorBadge)s.icon!=="yt-sys-icons:shield-filled"&&(s.icon="yt-sys-icons:shield-filled"),s.defaultToFilled!==!0&&(s.defaultToFilled=!0);else{const c="live-chat-badges:"+e.icon.iconType.toLowerCase();s.icon!==c&&(s.icon=c),s.defaultToFilled!==!1&&(s.defaultToFilled=!1)}return}else if(e.customThumbnail&&i.nodeName.toUpperCase()=="IMG"){const l=i;if(e.customThumbnail.thumbnails.map(o=>o.url).includes(l.src)){l.setAttribute("alt",this.hostElement.ariaLabel||"");return}}}}return this.dataChanged86.apply(this,arguments)},h.log("cProto.dataChanged - OK")):(ie(()=>ne(t.dataChanged,"0.169.106")),h.log("cProto.dataChanged - NG"))})(),h.log("[End]"),be()}).catch(console.warn),xe){const u=f=>{const t="yt-live-chat-renderer",n=_e(f);if(!n||!n.attached){console.warn(`proto.attached for ${t} is unavailable.`);return}n&&typeof n.immediatelyApplyLiveChatActions=="function"&&n.immediatelyApplyLiveChatActions.length===1&&!n.immediatelyApplyLiveChatActions82&&(n.immediatelyApplyLiveChatActions82=n.immediatelyApplyLiveChatActions,n.immediatelyApplyLiveChatActions=function(i){try{j(i)}catch(l){console.warn(l)}return this.immediatelyApplyLiveChatActions82(i)}),n&&typeof n.preprocessActions_=="function"&&n.preprocessActions_.length===1&&!n.preprocessActions82_&&(n.preprocessActions82_=n.preprocessActions_,n.preprocessActions_=function(i){const l=Date.now();i=this.preprocessActions82_(i);try{j(i,l)}catch(o){console.warn(o)}return i})};!Oe&&at.push(u),At().then(u)}if(Ii){const u=f=>{const t="yt-live-chat-renderer",n=_e(f);if(!n||!n.attached){console.warn(`proto.attached for ${t} is unavailable.`);return}if((window._flag0281_&262144)===262144&&n&&typeof n.preprocessActions_=="function"&&n.preprocessActions_.length===1&&!n.preprocessActions92_){let l=!1,o=!1,s="",c="",a="";const m=function(){if(l)return this.emitSmoothedMessages018();l=!0;try{if(!o){const A=Object.getOwnPropertyNames(this);for(const R of A){if(`${R}`.endsWith("_estimatedUpdateInterval"))s=R;else if(`${R}`.endsWith("_lastUpdateTime"))c=R;else if(`${R}`.endsWith("_messageQueue"))a=R;else continue;if(s&&c&&a)break}s&&c&&a&&(o=!0)}s&&c&&(this[s]=78,this[c]=Date.now()-1)}catch{}let r=!1;try{const A=a?this[a]:null;!A||!A.length||A.length>255||document.hidden&&(r=!0)}catch{}let p;return r?Ri(()=>this.emitSmoothedMessages019(),250):p=this.emitSmoothedMessages018(),l=!1,p};n.preprocessActions92_=n.preprocessActions_,n.preprocessActions_=function(r){r=this.preprocessActions92_(r);try{const p=this.smoothedQueue_;p&&!p.__fix018__&&(p.__fix018__=!0,!p.emitSmoothedMessages018&&typeof p.emitSmoothedMessages=="function"&&p.emitSmoothedMessages.length===0&&(p.emitSmoothedMessages018=p.emitSmoothedMessages,p.emitSmoothedMessages019=m,p.emitSmoothedMessages=m))}catch(p){console.warn(p)}return r}}};!Oe&&at.push(u),At().then(u)}if(Xo){const u=i=>i&&i.get&&!i.set&&i.enumerable&&i.configurable,f=new Me,t={},e=function(){let i;if(f.get(this)===void 0){const s=document.createElement;let c=null;if(f.set(this,null),document.createElement=function(){let a=s.apply(this,arguments);return c=a,a},i=this.createTooltipIfRequired14_(),document.createElement=s,c instanceof V&&c.is){if(f.set(this,c),c.setAttribute("__nogc__",""),typeof c.offset=="number"&&(t.offset=c.offset),typeof c.fitToVisibleBounds=="boolean"&&(t.fitToVisibleBounds=c.fitToVisibleBounds),typeof c.position=="string"&&(t.position=c.position),typeof c.for=="string"&&(t.for=c.for),!(typeof Polymer<"u"&&Polymer.__fixedGetOwnerRoot__&&Polymer.__fixedQuerySelector__)){let a=null;const m=ae(c);u(Object.getOwnPropertyDescriptor(m.constructor.prototype||{},"target"))?a=m.constructor.prototype:u(Object.getOwnPropertyDescriptor(c.constructor.prototype||{},"target"))&&(a=c.constructor.prototype),a&&(delete a.target,Object.defineProperty(a,"target",{get(){const r=ae(this),p=r.hostElement||r;let A=p.parentNode,R=p.getRootNode();const U=r.for||p.for;return U?R.querySelector("#"+U):A}}))}}else f.set(this,null)}else i=this.createTooltipIfRequired14_();const l=f.get(this);if(l){l.remove(),typeof t.offset=="number"&&(l.offset=t.offset),typeof t.fitToVisibleBounds=="boolean"&&(l.fitToVisibleBounds=t.fitToVisibleBounds);try{typeof t.position=="string"&&(l.position=t.position),typeof t.for=="string"?l.for=t.for:delete l.for}catch{}}const o=l;if(!o._showing&&o.__shady_parentNode&&o.__shady_parentNode!==o.parentNode){if(o.__shady_parentNode)try{o.__shady_parentNode.__shady_removeChild(o)}catch{}if(o.__shady_parentNode)try{o.__shady_parentNode.removeChild(o)}catch{}if(o.__shady_parentNode)try{o.__shady_parentNode.__shady_native_removeChild(o)}catch{}if(o.__shady_parentNode)try{zn.call(o.__shady_parentNode,o)}catch{}if(o.parentNode&&!o.__shady_parentNode)try{zn.call(o.parentNode,o)}catch{}}return i},n=i=>{const l="yt-live-chat-renderer",s=_e(i);if(!s||!s.attached){console.warn(`proto.attached for ${l} is unavailable.`);return}s&&typeof s.createTooltipIfRequired_=="function"&&s.createTooltipIfRequired_.length===0&&!s.createTooltipIfRequired14_&&(s.createTooltipIfRequired14_=s.createTooltipIfRequired_,s.createTooltipIfRequired_=e)};!Oe&&at.push(n),At().then(n),customElements.whenDefined("tp-yt-paper-tooltip").then(()=>{y(),Ee("YouTube Super Fast Chat"," | tp-yt-paper-tooltip hacks"),h.log("[Begin]"),(()=>{const i="tp-yt-paper-tooltip",l=document.createElement(i),o=_e(l);if(!o||!o.attached){h.warn(`proto.attached for ${i} is unavailable.`);return}typeof o.attached=="function"&&typeof o.detached=="function"&&o._readyClients&&o._attachDom&&o.ready&&!o._readyClients43?(o._readyClients43=o._readyClients,o._readyClients=function(){let s=o._readyClients43.apply(this,arguments);return this.$&&this.$$&&this.$.tooltip&&(this.root=null),s},h.log("_readyClients - OK")):h.log("_readyClients - NG"),typeof o.show=="function"&&!o.show17?(o.show17=o.show,o.show=function(){let s=this.show17.apply(this,arguments);return this._showing===!0&&q.resolve(this).then(c=>{const a=(c.$||0).tooltip;if(a&&a.firstElementChild===null){let m=a.textContent;typeof m=="string"&&m.length>=2&&(a.textContent=m.trim())}c=null}).catch(console.warn),s},h.log("trim tooltip content - OK")):h.log("trim tooltip content - NG")})(),h.log("[End]"),be()}).catch(console.warn)}if(an){const u=()=>{let f=0,t=null;const e={muHandler282:function(n){if(!n||!n.isTrusted||!f)return;const i=t;f=0,t=null;const l=le(St)||0,o=l.hostElement||l;!o.hasAttribute("menu-visible")||V.prototype.closest.call(o,"yt-live-chat-banner-renderer")||i&&i.positionTarget&&o.contains(i.positionTarget)&&(f=Date.now(),n.stopImmediatePropagation(),n.stopPropagation(),q.resolve(i).then(c=>{c.cancel(),c=null}))},mlHandler282:function(n){f=0,t=null},ckHandler282:function(n){!n||!n.isTrusted||!f||Date.now()-f<40&&(f=Date.now(),n.stopImmediatePropagation(),n.stopPropagation())},tapHandler282:function(n){!n||!n.isTrusted||!f||Date.now()-f<40&&(f=Date.now(),n.stopImmediatePropagation(),n.stopPropagation())},handleEvent(n){if(n){const i=le(St)||0,l=ae(i),o=l.hostElement||l;if(!l||l.isAttached!==!0||o.isConnected!==!0)return;switch(n.type){case"mouseup":return this.muHandler282(n);case"mouseleave":return this.mlHandler282(n);case"tap":return this.tapHandler282(n);case"click":return this.ckHandler282(n)}}}};document.addEventListener("mousedown",function(n){if(!n||!n.isTrusted||!n.target)return;f=0,t=null;const i=le(St);if(!i)return;const l=V.prototype.closest.call(i,"[menu-visible]")||0;if(!l||!l.hasAttribute("whole-message-clickable"))return;const o=ae(l);if(!o.isClickableChatRow111||!o.isClickableChatRow111()||!V.prototype.contains.call(l,n.target)||V.prototype.closest.call(l,"yt-live-chat-banner-renderer")||0)return;let c=null;for(const a of document.querySelectorAll("tp-yt-iron-dropdown.style-scope.yt-live-chat-app"))a&&a.positionTarget===i&&(c=a);if(c&&!n.target.closest("ytd-menu-popup-renderer")&&(t=c)){f=Date.now(),n.stopImmediatePropagation(),n.stopPropagation(),St=de(l);const a={capture:!0,passive:!1,once:!0};document.removeEventListener("mouseup",e,a),document.removeEventListener("mouseleave",e,a),document.removeEventListener("tap",e,a),document.removeEventListener("click",e,a),document.addEventListener("mouseup",e,a),document.addEventListener("mouseleave",e,a),document.addEventListener("tap",e,a),document.addEventListener("click",e,a)}},!0)};yo(["yt-live-chat-paid-message-renderer","yt-live-chat-membership-item-renderer","yt-live-chat-paid-sticker-renderer","yt-live-chat-text-message-renderer","yt-live-chat-auto-mod-message-renderer"]).then(f=>{y(),Ee("YouTube Super Fast Chat"," | yt-live-chat-message-renderer(s)... hacks"),h.log("[Begin]");let t=!1;const e={isClickableChatRow111:function(){return this.data&&typeof this.shouldSupportWholeItemClick=="function"&&typeof this.hasModerationOverlayVisible=="function"&&this.data.contextMenuEndpoint&&this.wholeMessageClickable&&this.shouldSupportWholeItemClick()&&!this.hasModerationOverlayVisible()},updateMessage374:function(){try{return this.updateMessage372()}catch(n){console.warn(n)}}};for(const n of f)(()=>{const i=n,l=document.createElement(i),o=_e(l);if(!o||!o.attached){h.warn(`proto.attached for ${i} is unavailable.`);return}if(o&&typeof o.updateMessage=="function"&&!o.updateMessage373&&o.updateMessage.length===0&&ne(o.updateMessage)){const c=ne(o.updateMessage);c!=="0.36.21"?console.warn("updateMessage signature changed",c,"0.36.21",o.updateMessage):(o.updateMessage373=!0,o.updateMessage372=o.updateMessage,o.updateMessage=e.updateMessage374)}const s=ae(l);"wholeMessageClickable"in s&&typeof s.hasModerationOverlayVisible=="function"&&typeof s.shouldSupportWholeItemClick=="function"?(o.isClickableChatRow111=e.isClickableChatRow111,typeof o.shouldSupportWholeItemClick=="function"&&typeof o.hasModerationOverlayVisible=="function"&&(t=!0),h.log("shouldSupportWholeItemClick - OK",i)):h.log("shouldSupportWholeItemClick - NG",i)})();t&&(u(),h.log("FIX_CLICKING_MESSAGE_MENU_DISPLAY_ON_MOUSE_CLICK - Doc MouseEvent OK")),h.log("[End]"),be()}).catch(console.warn)}if(ni){let u=null,f=null;document.addEventListener("mousedown",t=>{if(!t||!t.isTrusted)return;let e=t.target;for(;e instanceof V&&!e.is;e=e.parentNode);if(!e||!e.is||e.closest("ytd-menu-popup-renderer"))return;const n=ae(e);if(typeof n.onItemTap=="function"){n._onItemTap_isNonStationary=0;const i=_e(e);!i.onItemTap366&&typeof i.onItemTap=="function"&&i.onItemTap.length===1&&(i.onItemTap366=i.onItemTap,i.onItemTap=function(l){const o=this._onItemTap_isNonStationary;if(this._onItemTap_isNonStationary=0,!(o>Date.now()))return this.onItemTap366.apply(this,arguments)}),f=t,u=de(n)}else f=null,u=null},{capture:!0,passive:!0}),document.addEventListener("mouseup",t=>{if(!t||!t.isTrusted)return;const e=f;if(f=null,!e)return;const n=le(u);if(u=null,!!n)if(t.timeStamp-e.timeStamp>oi)n._onItemTap_isNonStationary=Date.now()+40;else if(`${window.getSelection()}`.trim().replace(/[\u2000-\u200a\u202f\u2800\u200B\u200C\u200D\uFEFF]+/g,"").length>=1)n._onItemTap_isNonStationary=Date.now()+40;else{const i=t.clientX-e.clientX,l=t.clientY-e.clientY,o=Math.sqrt(i*i+l*l);lr(o)>1?n._onItemTap_isNonStationary=Date.now()+40:n._onItemTap_isNonStationary=0}},{capture:!0,passive:!0})}const Ie=function(u){let f=null;const t=new q(n=>{f=n}),e=()=>{const n=f;n&&(f=null,n())};return{p1:t,p1unlock:e,assignLock:(n,i)=>{n.__showContextMenu_assign_lock__(t),i&&C(e,i)}}};ii&&document.addEventListener("mousedown",function(u){let e=0,n=0,i=(u||0).target||0;if(!i||i.closest("ytd-menu-popup-renderer"))return;for(;i instanceof V&&!(++e>4||typeof(i.is||ae(i).is||null)=="string");)i=qt(i);const l=[];for(;i instanceof V&&!(++n>4);){const p=ae(i);if(typeof(i.is||p.is||null)=="string"&&l.push(i),typeof p.showContextMenu=="function")break;i=i.parentComponent||p.parentComponent||null}if(!(i instanceof V))return;const o=ae(i);if(typeof o.handleGetContextMenuResponse_!="function"||typeof o.handleGetContextMenuError!="function"){console.log("Error Found: handleGetContextMenuResponse_ OR handleGetContextMenuError is not defined on a component with showContextMenu");return}const s=(o.data||0).contextMenuEndpoint;if(!s||o.opened||!o.isAttached)return;typeof o.__cacheResolvedEndpointData__!="function"&&console.log(`preRequest for showContextMenu in ${o.is} is not yet supported.`);const c=er(i);let a=!1;if((l.length>=2&&l[0].id==="menu-button"&&(c||0)["menu-button"]===l[0]||l.length===1&&l[0]===i||l.length>=2&&l[0].id==="author-photo"&&(c||0)["author-photo"]===l[0])&&(a=!0),a===!1){console.log("doPreRequest = fasle on showContextMenu",l);return}if(typeof o.__getCachedEndpointData__!="function"||o.__getCachedEndpointData__(s))return;if(typeof o.__showContextMenu_mutex_unlock_isEmpty__=="function"&&!o.__showContextMenu_mutex_unlock_isEmpty__()){console.log("preRequest on showContextMenu aborted due to stacked network request");return}const m=p=>{if(p=p.response||p,!p){console.log("unexpected error in prerequest for showContextMenu.onSuccess");return}let A=null;p.liveChatItemContextMenuSupportedRenderers&&p.liveChatItemContextMenuSupportedRenderers.menuRenderer&&(A=p.liveChatItemContextMenuSupportedRenderers.menuRenderer),A&&(p=A,o.__cacheResolvedEndpointData__(s,p,!0))},r=p=>{o.__cacheResolvedEndpointData__(s,null)};if(a){let p=0;const A=Ie(o),R=800,U="__$$__proxy_to_this__$$__"+Date.now();try{const Y=function(){if(A.p1unlock(),p!==5){console.log("Error in prerequest for showContextMenu.onSuccessHelperFn");return}if(this[U]!==o){console.log("Error in prerequest for showContextMenu.this");return}m(...arguments)},oe=function(){if(A.p1unlock(),p!==5){console.log("Error in prerequest for showContextMenu.onFailureHelperFn");return}if(this[U]!==o){console.log("Error in prerequest for showContextMenu.this");return}r(...arguments)},se=new Proxy({__showContextMenu_forceNativeRequest__:1,get handleGetContextMenuResponse_(){return p+=2,Y},get handleGetContextMenuError(){return p+=3,oe}},{get(E,v,k){if(v in E)return E[v];if(v===U)return o;let L=!1;if(v in o&&(v==="data"||typeof o[v]=="function")&&(L=!0),L)return o[v]}}),_=(()=>{const{target:E,bubbles:v,cancelable:k,cancelBubble:L,srcElement:B,timeStamp:N,defaultPrevented:K,currentTarget:G,composed:M}=u,O=function(){},[D,te,pe]=[O,O,O];return{type:"tap",eventPhase:0,isTrusted:!1,__composed:!0,bubbles:v,cancelable:k,cancelBubble:L,timeStamp:N,target:E,srcElement:B,defaultPrevented:K,currentTarget:G,composed:M,stopPropagation:D,stopImmediatePropagation:te,preventDefault:pe}})(u);o.showContextMenu.call(se,_)}catch(Y){console.warn(Y),p=7}if(p!==5){console.log("Error in prerequest for showContextMenu",p);return}A.assignLock(o,R)}},!0),yo(["yt-live-chat-ticker-sponsor-item-renderer","yt-live-chat-ticker-paid-message-item-renderer","yt-live-chat-banner-header-renderer","yt-live-chat-text-message-renderer","ytd-sponsorships-live-chat-gift-purchase-announcement-renderer","ytd-sponsorships-live-chat-header-renderer","ytd-sponsorships-live-chat-gift-redemption-announcement-renderer","yt-live-chat-paid-sticker-renderer","yt-live-chat-viewer-engagement-message-renderer","yt-live-chat-paid-message-renderer"]).then(u=>{y(),Ee("YouTube Super Fast Chat"," | fixShowContextMenu"),h.log("[Begin]");const f=new Vn;let t=null,e=null;const n=new Me,i={__cacheResolvedEndpointData__:(l,o,s)=>{o?(s&&(o=Ft(o)),n.set(l,o)):n.remove(l)},__getCachedEndpointData__:function(l){return l=l||(this.data||0).contextMenuEndpoint||0,l?n.get(l):null},__showCachedContextMenu__:function(l){l=Ft(l),q.resolve(l).then(o=>{this.__showContextMenu_skip_cacheResolvedEndpointData__=1,this.showContextMenu_(o),this.__showContextMenu_skip_cacheResolvedEndpointData__=0,o=null})},showContextMenuForCacheReopen:function(l){if(this&&this.__showContextMenu_forceNativeRequest__)return this.showContextMenu37(l);if(!(!this||!this.isAttached)){if(!this.__showContextMenu_forceNativeRequest__){const o=(this.data||0).contextMenuEndpoint||0;if(o){const s=this.__getCachedEndpointData__(o);if(s){this.__showCachedContextMenu__(s),l&&l.stopPropagation();return}}}return this.showContextMenu37(l)}},showContextMenuForCacheReopen_:function(l){if(this&&this.__showContextMenu_forceNativeRequest__)return this.showContextMenu37_(l);if(!(!this||!this.isAttached)){if(!this.__showContextMenu_skip_cacheResolvedEndpointData__){const o=(this.data||0).contextMenuEndpoint||0;if(o){const s=this.__cacheResolvedEndpointData__;typeof s=="function"&&s(o,l,!0)}}return this.showContextMenu37_(l)}},showContextMenuWithDisableScroll:function(l){if(((this.data||0).contextMenuEndpoint||0)&&typeof this.is=="string"&&this.menuVisible===!1&&this.menuOpen===!1){const s=this.parentComponent;s&&s.is==="yt-live-chat-item-list-renderer"&&s.contextMenuOpen===!1&&s.allowScroll===!0&&(s.contextMenuOpen=!0)}return this.showContextMenu48.apply(this,arguments)},__showContextMenu_mutex_unlock_isEmpty__:()=>t===null,__showContextMenu_assign_lock__:function(l){f.lockWith(s=>{l.then(s),l=null,s=null})},showContextMenuWithMutex:function(l){if(this.__showContextMenu_forceNativeRequest__)return this.showContextMenu47(l);if(!this||!this.isAttached)return;e=this;const o=de(this);f.lockWith(c=>{const a=le(o);if(e!==a||!a){c();return}C(c,800),t=c;try{a.showContextMenu47(l)}catch(m){console.warn(m),c()}})},showContextMenuWithMutex_:function(l){return t&&this===e&&(t(),t=null),this.showContextMenu47_(l)}};for(const l of u)(()=>{const o=document.createElement(l),s=_e(o);if(!s||!s.attached){h.warn(`proto.attached for ${l} is unavailable.`);return}Zo&&typeof s.showContextMenu=="function"&&typeof s.showContextMenu_=="function"&&!s.showContextMenu37&&!s.showContextMenu37_&&s.showContextMenu.length===1&&s.showContextMenu_.length===1?(s.showContextMenu37_=s.showContextMenu_,s.showContextMenu37=s.showContextMenu,s.__showContextMenu_forceNativeRequest__=0,s.__cacheResolvedEndpointData__=i.__cacheResolvedEndpointData__,s.__getCachedEndpointData__=i.__getCachedEndpointData__,s.__showCachedContextMenu__=i.__showCachedContextMenu__,s.showContextMenu=i.showContextMenuForCacheReopen,s.showContextMenu_=i.showContextMenuForCacheReopen_,h.log("CACHE_SHOW_CONTEXT_MENU_FOR_REOPEN - OK",l)):h.log("CACHE_SHOW_CONTEXT_MENU_FOR_REOPEN - NG",l),$n&&typeof s.showContextMenu=="function"&&typeof s.showContextMenu_=="function"&&!s.showContextMenu48&&!s.showContextMenu48_&&s.showContextMenu.length===1&&s.showContextMenu_.length===1?(s.showContextMenu48=s.showContextMenu,s.showContextMenu=i.showContextMenuWithDisableScroll,h.log("ADVANCED_NOT_ALLOW_SCROLL_FOR_SHOW_CONTEXT_MENU - OK",l)):$n?h.log("ADVANCED_NOT_ALLOW_SCROLL_FOR_SHOW_CONTEXT_MENU - NG",l):Sn||h.log("ADVANCED_NOT_ALLOW_SCROLL_FOR_SHOW_CONTEXT_MENU - N/A",l),ei&&typeof s.showContextMenu=="function"&&typeof s.showContextMenu_=="function"&&!s.showContextMenu47&&!s.showContextMenu47_&&s.showContextMenu.length===1&&s.showContextMenu_.length===1?(s.showContextMenu47_=s.showContextMenu_,s.showContextMenu47=s.showContextMenu,s.__showContextMenu_mutex_unlock_isEmpty__=i.__showContextMenu_mutex_unlock_isEmpty__,s.__showContextMenu_assign_lock__=i.__showContextMenu_assign_lock__,s.showContextMenu=i.showContextMenuWithMutex,s.showContextMenu_=i.showContextMenuWithMutex_,h.log("ENABLE_MUTEX_FOR_SHOW_CONTEXT_MENU - OK",l)):h.log("ENABLE_MUTEX_FOR_SHOW_CONTEXT_MENU - NG",l)})();h.log("[End]"),be()}).catch(console.warn),Ci&&customElements.whenDefined("tp-yt-paper-dialog").then(()=>{y(),Ee("YouTube Super Fast Chat"," | tp-yt-paper-dialog hacks"),h.log("[Begin]"),(()=>{const u="tp-yt-paper-dialog",f=document.createElement(u),t=_e(f);if(!t||!t.attached){h.warn(`proto.attached for ${u} is unavailable.`);return}typeof t.__openedChanged=="function"&&!t.__openedChanged49&&t.__openedChanged.length===0&&(t.__openedChanged49=t.__openedChanged,t.__openedChanged=function(){const e=(this||0)._manager||0;return e&&!e.trackBackdrop49&&e.trackBackdrop&&(e.trackBackdrop49=e.trackBackdrop,e.trackBackdrop.length===0&&(e.trackBackdrop=function(){try{return this.trackBackdrop49()}catch(n){let i=!0;n instanceof TypeError&&n.message==="this.backdropElement.prepare is not a function"&&(i=!1),i&&console.log("manager.trackBackdrop",n)}})),this.__openedChanged49()})})(),h.log("[End]"),be()}).catch(console.warn),customElements.whenDefined("tp-yt-iron-dropdown").then(()=>{y(),Ee("YouTube Super Fast Chat"," | tp-yt-iron-dropdown hacks"),h.log("[Begin]"),(()=>{const u="tp-yt-iron-dropdown",f=document.createElement(u),t=_e(f);if(!t||!t.attached){h.warn(`proto.attached for ${u} is unavailable.`);return}if(Qo&&typeof t.__deraf=="function"&&t.__deraf.length===2&&!t.__deraf34&&ne(t.__deraf)==="2.42.24"?(t.__deraf_hn__=function(e,n){const i=`_rafHandler_${e}`,l=this[i]||(this[i]=new Me);if(l.has(n))return l.get(n);const o=()=>{this.__rafs[e]=null,n.call(this)};return l.set(n,o),l.set(o,o),o},t.__deraf34=t.__deraf,t.__deraf=function(e,n){let i=this.__rafs;i[e]!==null&&w(i[e]),i[e]=g(this.__deraf_hn__(e,n))},h.log("USE_VANILLA_DEREF - OK")):h.log("USE_VANILLA_DEREF - NG"),Jo&&typeof t.__deraf=="function"&&t.__deraf.length===2&&!t.__deraf66?(t.__deraf66=t.__deraf,t.__deraf=function(e,n){return this.__byPassRAF__&&q.resolve(this).then(l=>{n.call(l),l=null}),this.__deraf66.apply(this,arguments)},h.log("FIX_DROPDOWN_DERAF - OK")):h.log("FIX_DROPDOWN_DERAF - NG"),ti&&typeof t.__openedChanged=="function"&&!t.__mtChanged__&&ne(t.__openedChanged)==="0.46.20"){let e=null,n=null,i=0;t.__mtChanged__=function(s){q.resolve(this).then(c=>(c._applyFocus(),c)).then(c=>{s?c._renderOpened():c._renderClosed(),c=null}).catch(console.warn)};const l=()=>{i&&(i=0,n&&!e&&n.isAttached?n.__mtChanged__(1):e&&!n&&e.isAttached&&e.__mtChanged__(0),n=null,e=null)};typeof t._openedChanged=="function"&&!t._openedChanged66&&(t._openedChanged66=t._openedChanged,t._openedChanged=function(){this.__byPassRAF__=!0;let s=this._openedChanged66.apply(this,arguments);return this.__byPassRAF__=!1,s});const o=(s,c,a)=>({get:(c[s]||0).get||(a[s]||0).get,set:(c[s]||0).set||(a[s]||0).set});if(t.__modifiedMenuPropsFn__=function(){const s=Object.getOwnPropertyDescriptors(this.constructor.prototype),c=Object.getOwnPropertyDescriptors(this),a=o("autoFitOnAttach",s,c),m=o("expandSizingTargetForScrollbars",s,c),r=o("allowOutsideScroll",s,c);if(a.get||a.set){console.warn("there is setter/getter for autoFitOnAttach");return}if(m.get||m.set){console.warn("there is setter/getter for expandSizingTargetForScrollbars");return}if(!r.get||!r.set){console.warn("there is NO setter-getter for allowOutsideScroll");return}let{autoFitOnAttach:p,expandSizingTargetForScrollbars:A,allowOutsideScroll:R}=this;this.__AllowOutsideScrollPD__=r;const U=Hn===2;Object.defineProperties(this,{autoFitOnAttach:{get(){return U&&this._modifiedMenuPropOn062__?!0:p},set(Y){return p=Y,!0},enumerable:!0,configurable:!0},expandSizingTargetForScrollbars:{get(){return U&&this._modifiedMenuPropOn062__?!0:A},set(Y){return A=Y,!0},enumerable:!0,configurable:!0},allowOutsideScroll:{get(){return this._modifiedMenuPropOn062__?!0:R},set(Y){return R=Y,this.__AllowOutsideScrollPD__.set.call(this,Y),!0},enumerable:!0,configurable:!0}})},si&&typeof t.position=="function"&&!t.position34&&typeof t.refit=="function"){let s=0;t.__refitByPosition__=function(){if(s++,s<=0&&(s=0),s!==1)return;const c=this.hostElement||this;if(document.visibilityState==="visible"){const a=this.sizingTarget;if(!a){s=0;return}c.setAttribute("rNgzQ",""),a.setAttribute("rNgzQ","");const m=()=>{c.removeAttribute("rNgzQ"),a.removeAttribute("rNgzQ")};C(async()=>{for(;s>=1;)await _r(a),this.opened&&this.isAttached&&a.isConnected===!0&&a===this.sizingTarget&&a.matches('ytd-menu-popup-renderer[slot="dropdown-content"].yt-live-chat-app')&&this.refit(),s--;s=0,q.resolve().then(m)},4)}else s=0},t.position34=t.position,t.position=function(){return this._positionInitialize_&&(this._positionInitialize_=0,this.__refitByPosition__()),t.position34.apply(this,arguments)},h.log("FIX_MENU_POSITION_ON_SHOWN - OK")}else h.log("FIX_MENU_POSITION_ON_SHOWN - NG");t.__openedChanged=function(){if(this._positionInitialize_=1,typeof this.__menuTypeCheck__!="boolean"&&(this.__menuTypeCheck__=!0,Gn&&(this._modifiedMenuPropOn062__=!1,this.__modifiedMenuPropsFn__())),Gn&&this.opened){let s=null;const c=this.positionTarget;if(c&&c.classList.contains("yt-live-chat-text-message-renderer")?this._modifiedMenuPropOn062__===!1&&(s=!0):this._modifiedMenuPropOn062__===!0&&(s=!1),s!==null){const a=this.allowOutsideScroll;this._modifiedMenuPropOn062__=s;const m=this.allowOutsideScroll;a!==m&&this.__AllowOutsideScrollPD__.set.call(this,m)}}this.opened?q.resolve().then(()=>{this._prepareRenderOpened()}).then(()=>{try{this._manager.addOverlay(this)}catch{console.log("this._manager.addOverlay(this) fails.")}if(this._manager._overlays.length===1)n=this,e=null;else return 1;i=i||g(l)}).then(s=>{s&&this.__mtChanged__(1)}).catch(console.warn):q.resolve().then(()=>{try{this._manager.removeOverlay(this)}catch{console.log("this._manager.removeOverlay(this) fails.")}if(this._manager._overlays.length===0)e=this,n=null;else return 1;i=i||g(l)}).then(s=>{s&&this.__mtChanged__(0)}).catch(console.warn)},h.log("BOOST_MENU_OPENCHANGED_RENDERING - OK")}else ie(()=>ne(t.__openedChanged,"0.46.20")),h.log("FIX_MENU_REOPEN_RENDER_PERFORMANC_1 - NG");an&&typeof t.__openedChanged=="function"&&!t.__openedChanged82&&(t.__openedChanged82=t.__openedChanged,t.__openedChanged=function(){const e=this.positionTarget;return St=e?de(e):null,this.__openedChanged82.apply(this,arguments)})})(),h.log("[End]"),be()}).catch(console.warn),gi&&customElements.whenDefined("yt-live-chat-toggle-renderer").then(()=>{y(),Ee("YouTube Super Fast Chat"," | yt-live-chat-toggle-renderer hacks"),h.log("[Begin]"),(()=>{const u="yt-live-chat-toggle-renderer",f=document.createElement(u),t=_e(f);if(!t||!t.attached){h.warn(`proto.attached for ${u} is unavailable.`);return}})(),h.log("[End]"),be()}),Ei&&(()=>{let u=0;const f=new WeakSet;new MutationObserver(l=>{for(const o of document.querySelectorAll("[shared-tooltip-text]:not([__a6cwm__])"))o.setAttribute("__a6cwm__","")}).observe(document,{subtree:!0,attributes:!0,attributeFilter:["shared-tooltip-text"],childList:!0}),new MutationObserver(l=>{for(const o of l){const s=o.target;if(o.attributeName){if(s.getAttribute("shared-tooltip-text")){f.add(s);for(const c of s.getElementsByTagName("*"))f.add(c)}else if(f.has(s)){f.remove(s);for(const c of s.getElementsByTagName("*"))f.remove(c)}}}}).observe(document,{subtree:!0,attributes:!0,attributeFilter:["__a6cwm__","shared-tooltip-text"],childList:!1});let n=0;const i=l=>{const o="yt-live-chat-renderer",c=_e(l);if(!c||!c.attached){console.warn(`proto.attached for ${o} is unavailable.`);return}if(n!==1&&typeof c.onMouseOver_=="function"&&!c.onMouseOver37_&&typeof c.createTooltipIfRequired_=="function"&&c.createTooltipIfRequired_.length===0){n=1;const a=c.onMouseOver37_=c.onMouseOver_;if((()=>{let r=[],p=!1;try{a.call(l,{type:"mouseover",target:new Proxy({nodeName:"DIV",tagName:"DIV",getAttribute:function(){},parentNode:null},{get(R,U){if(r.push(`getter:${U}`),!(U in R))throw Error(`getter ${U} is not found`)},set(R,U,Y){throw r.push(`setter:${U}`),Error(`setter ${U} is not found`)}})})}catch{p=!0}if(p||r.join(",")!=="getter:getAttribute,getter:parentNode")return!1;r.length=0;let A;try{A=new Proxy({nodeName:"DIV",tagName:"DIV",getAttribute:function(R){return r.push(`getter:getAttribute(${R})`),R==="shared-tooltip-text"?":cherry_blossom:":null},parentNode:null},{get(R,U){if(r.push(`getter:${U}`),!(U in R))throw Error(`getter ${U} is not found`);return R[U]},set(R,U,Y){throw r.push(`setter:${U}`),Error(`setter ${U} is not found`)}}),a.call(l,{type:"mouseover",target:new Proxy({nodeName:"IMG",tagName:"IMG",id:"img",getAttribute:function(R){return r.push(`getter:getAttribute(${R})`),R==="shared-tooltip-text"?":cherry_blossom:":null},get parentNode(){return A},get parentElement(){return A}},{get(R,U){if(r.push(`getter:${U}`),!(U in R))throw Error(`getter ${U} is not found`);return R[U]},set(R,U,Y){throw r.push(`setter:${U}`),Error(`setter ${U} is not found`)}})})}catch{p=!0}if(A=null,p&&r.join(",")==="getter:getAttribute,getter:getAttribute,getter:getAttribute(shared-tooltip-text),getter:getAttribute,getter:getAttribute(shared-tooltip-text),getter:tagName,getter:parentElement,getter:id,getter:id,getter:$$")return!0})()){c.onMouseOver_=function(p){const A=(p||0).target||0;if(A.nodeType===1&&f.has(A)){const R=Date.now();if(u+18>R)return;const U=ae(this);u=R;try{U.onMouseOver37_.call(this,p)}catch(Y){console.warn(Y)}}};const r=Zi([l,...document.querySelectorAll("yt-live-chat-renderer")]);for(const p of r){const A=ae(p),R=A.hostElement;R&&A.isAttached===!0&&A.onMouseOver37_===c.onMouseOver37_&&typeof c.onMouseOver_=="function"&&c.onMouseOver_!==c.onMouseOver37_&&A.onMouseOver_===c.onMouseOver_&&(R.removeEventListener("mouseover",c.onMouseOver37_,!0),R.addEventListener("mouseover",c.onMouseOver_,!0))}console.log("[yt-chat-lcr] FIX_MOUSEOVER_FN - OK")}else console.log("[yt-chat-lcr] FIX_MOUSEOVER_FN - NG")}else n!==1&&(n=2,console.log("[yt-chat-lcr] FIX_MOUSEOVER_FN - NG"))};!Oe&&at.push(i),At().then(i)})();const Le=u=>{if(!u||typeof u!="object")return;const f=u.constructor.prototype;let t="";for(const[c,a]of Object.entries(u))c.includes("_callbacks_")&&(t=c);if(!t||typeof f.unsubscribe!="function"||f.unsubscribe.length!==2||f.unsubscribe16)return;f.unsubscribe16=f.unsubscribe,Ee("YouTube Super Fast Chat"," | *live-chat-manager* hacks"),h.log("[Begin]");const e=new Map,n=function(c){if(!c||typeof c!="string")return null;let a=e.get(c);return a||(a=atob(c.replace(/-/g,"+").replace(/_/g,"/")),e.set(c,a),a)},i=[];let l=0,o=0;const s=()=>{if(l=0,i.length===1){const c=i[0];i.length=0,c()}else if(i.length>1){const c=i.slice(0);i.length=0;for(const a of c)a()}};if(li){const c=a=>{if(a&&typeof a.unsubscribe16=="function"&&a.unsubscribe16.length===2&&typeof a.subscribe18=="function"&&(a.subscribe18.length===0||a.subscribe18.length===3)){const m=new Set(Object.keys(a)),r=new Set(Object.keys(a.constructor.prototype));if(m.size>=6&&r.size>=4){let p=0;for(const A of["nextHandle_","clients_",t,"unsubscribeAsyncHandles_","subscribe","subscribe18"])p+=m.has(A)?1:0;for(const A of["unsubscribe","handleInvalidationData_","unsubscribe16","subscribe19"])p+=r.has(A)?1:0;if(p===10){const A=R=>(R||0).constructor===Object;if(A(a.clients_)&&A(a[t])&&A(a.unsubscribeAsyncHandles_))return!0}}}return!1};f.subscribe19=function(a,m,r){const p=this.clients_||0,A=this.unsubscribeAsyncHandles_||0;if(this.__doCustomSubscribe__!==!0||!p||!A)return this.subscribe18.apply(this,arguments);let R=((a||0).invalidationId||0).objectId;return R?(R=n(R),p[R]&&A[R]<0&&delete A[R],this.subscribe18.apply(this,arguments)):this.subscribe18.apply(this,arguments)},f.unsubscribe=function(a,m){!this.subscribe18&&typeof this.subscribe=="function"&&(this.subscribe18=this.subscribe,this.subscribe=this.subscribe19,this.__doCustomSubscribe__=c(this));const r=this.clients_,p=this.unsubscribeAsyncHandles_;if(this.__doCustomSubscribe__!==!0||!r||!p)return this.unsubscribe16.apply(this,arguments);let A=((a||0).invalidationId||0).objectId;if(!A)return this.unsubscribe16.apply(this,arguments);A=n(A);const R=this[t]||0,U=R[A]||0;if(U&&(delete U[m],Ji(U))){const Y=r[A];o=(o&1073741823)+1;const oe=-o;i.push(()=>{if(oe===p[A]){const se={callbacks:R,callbackObj:U,client:r[A],handle:p[A]};let _=0;try{r[A]===Y?(Y&&typeof Y.dispose=="function"&&Y.dispose(),delete r[A],delete p[A],_=1):_=2}catch(E){console.warn(E)}console.log(`unsubscribed: ${_}`,this,se)}}),p[A]=oe,l===0&&(l=g(s))}},h.log("CHANGE_MANAGER_UNSUBSCRIBE - OK")}else h.log("CHANGE_MANAGER_UNSUBSCRIBE - NG");h.log("[End]"),be()};(di&&q.all([customElements.whenDefined("yt-icon-shape"),customElements.whenDefined("yt-icon")])).then(()=>{let u=0,f=[document.createElement("yt-icon-shape"),document.createElement("yt-icon")];for(const t of f){let e=_e(t);e&&typeof e.shouldRenderIconShape=="function"&&!e.shouldRenderIconShape571&&e.shouldRenderIconShape.length===1&&(ie(()=>ne(e.shouldRenderIconShape,"1.70.38")),u++,e.shouldRenderIconShape571=e.shouldRenderIconShape,e.shouldRenderIconShape=function(n){return this.isAnimatedIcon?this.shouldRenderIconShape571(n):!this.iconType||!this.iconShapeData?this.shouldRenderIconShape571(n):this.iconName?!1:this.shouldRenderIconShape571(n)})}u===1?console.log("modified shouldRenderIconShape - Y"):console.log("modified shouldRenderIconShape - N",u)}),customElements.whenDefined("yt-invalidation-continuation").then(()=>{let u=null;y(),Ee("YouTube Super Fast Chat"," | yt-invalidation-continuation hacks"),h.log("[Begin]"),(()=>{const f="yt-invalidation-continuation",t=document.createElement(f),e=_e(t);if(!e||!e.attached){h.warn(`proto.attached for ${f} is unavailable.`);return}u=ae(t).manager_||0})(),h.log("[End]"),be(),Le(u)}).catch(console.warn),pt>=1&&customElements.whenDefined("yt-live-interactivity-component-background").then(()=>{y(),Ee("YouTube Super Fast Chat"," | yt-live-interactivity-component-background hacks"),h.log("[Begin]"),(()=>{const u="yt-live-interactivity-component-background",f=document.createElement(u),t=_e(f);if(!t||!t.attached){h.warn(`proto.attached for ${u} is unavailable.`);return}t.__toStopAfterRun__=function(e){let n=new MutationObserver(()=>{n.disconnect(),n.takeRecords(),n=null,this.lottieAnimation&&this.lottieAnimation.stop(),Ke().then(()=>{this.lottieAnimation&&this.lottieAnimation.stop()})});n.observe(e,{subtree:!0,childList:!0})},pt>=1&&typeof t.maybeLoadAnimationBackground=="function"&&!t.maybeLoadAnimationBackground77&&t.maybeLoadAnimationBackground.length===0?(t.maybeLoadAnimationBackground77=t.maybeLoadAnimationBackground,t.maybeLoadAnimationBackground=function(){let e=!0,n=!1;if(!this.__bypassDisableAnimationBackground__){let i=!1;pt===1?this.lottieAnimation||(i=!0):pt===2&&(i=!0),i&&(this.useAnimationBackground===!0&&console.log("DISABLE_INTERACTIVITY_BACKGROUND_ANIMATION",this.lottieAnimation),e=!0,n=!0)}if(e){n&&this.hostElement instanceof V&&this.__toStopAfterRun__(this.hostElement);const i=this.maybeLoadAnimationBackground77.apply(this,arguments);return n&&this.lottieAnimation&&this.lottieAnimation.stop(),i}},h.log(`INTERACTIVITY_BACKGROUND_ANIMATION(${pt}) - OK`)):h.log(`INTERACTIVITY_BACKGROUND_ANIMATION(${pt}) - NG`)})(),h.log("[End]"),be()}).catch(console.warn),Mt&&customElements.whenDefined("yt-live-chat-text-input-field-renderer").then(()=>{y(),Ee("YouTube Super Fast Chat"," | yt-live-chat-text-input-field-renderer hacks"),h.log("[Begin]"),(()=>{const u="yt-live-chat-text-input-field-renderer",f=document.createElement(u),t=_e(f);if(!t||!t.attached){h.warn(`proto.attached for ${u} is unavailable.`);return}Mt&&typeof t.focusedChanged=="function"&&t.focusedChanged.length===0&&!t.focusedChanged372&&(t.focusedChanged372=t.focusedChanged,t.focusedChanged=function(){q.resolve(this).then(e=>{e.isAttached===!0&&e.focusedChanged372()})})})(),h.log("[End]"),be()})};_n.then(Wr);const Ur=()=>{let I=window.onerror;try{JSON.parse("{}")}catch(y){console.warn(y)}let $=window.onerror;I!==$&&(console.groupCollapsed("%cYouTube Super Fast Chat%c | JS Engine Issue Found","background-color: #010502; color: #fe806a; font-weight: 700; padding: 2px;","background-color: #010502; color: #fe806a; font-weight: 300; padding: 2px;"),console.warn(`
JSON.parse is hacked (e.g. Brave's script injection) which causes window.onerror changes on every JSON.parse call.
Please install https://greasyfork.org/scripts/473972-youtube-js-engine-tamer to fix the issue.
`),console.groupEnd())};ai&&_n.then(Ur)})})({IntersectionObserver});
