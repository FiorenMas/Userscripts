// ==UserScript==
// @name Linkify Plus Plus
// @version 12.0.1
// @license BSD-3-Clause
// @author eight04 <eight04@gmail.com>
// @homepageURL https://github.com/eight04/linkify-plus-plus
// @supportURL https://github.com/eight04/linkify-plus-plus/issues
// @namespace eight04.blogspot.com
// @include *
// @exclude https://www.google.*/search*
// @exclude https://www.google.*/webhp*
// @exclude https://music.google.com/*
// @exclude https://mail.google.com/*
// @exclude https://docs.google.com/*
// @exclude https://encrypted.google.com/*
// @exclude https://*101weiqi.com/*
// @exclude https://w3c*.github.io/*
// @exclude https://www.paypal.com/*
// @exclude https://term.ptt.cc/*
// @exclude https://mastodon.social/*
// @grant GM.getValue
// @grant GM.setValue
// @grant GM.deleteValue
// @grant GM_addStyle
// @grant GM_registerMenuCommand
// @grant GM_getValue
// @grant GM_setValue
// @grant GM_deleteValue
// @grant GM_addValueChangeListener
// @grant unsafeWindow
// @compatible firefox Tampermonkey latest
// @compatible chrome Tampermonkey latest
// @icon data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDE2IDE2Ij4gPHBhdGggZmlsbD0iIzRjNGM0ZCIgZD0iTTMuNSAxYS41LjUgMCAxIDAgMCAxSDR2OWgtLjVhLjUuNSAwIDAgMCAwIDFoNy44NTVhLjUuNSAwIDAgMCAuNDc1LS4xODQuNS41IDAgMCAwIC4xMDYtLjM5OFYxMC41YS41LjUgMCAxIDAtMSAwdi41SDZWMmguNWEuNS41IDAgMSAwIDAtMWgtM3oiLz4gPHBhdGggZmlsbD0iIzQ1YTFmZiIgZD0iTTIuNSAxNGExIDEgMCAxIDAgMCAyaDExYTEgMSAwIDEgMCAwLTJoLTExeiIvPiA8L3N2Zz4=
// @downloadURL https://raw.githubusercontent.com/FiorenMas/Userscripts/release/release/Linkify20Plus20Plus.user.js
// @updateURL https://raw.githubusercontent.com/FiorenMas/Userscripts/release/release/Linkify20Plus20Plus.meta.js
// ==/UserScript==
var optionsFuzzyIpLabel="Match ambiguous IP addresses.",optionsIgnoreMustacheLabel="Ignore URLs inside mustaches e.g. {{ ... }}.",optionsEmbedImageLabel="Create an image element if the URL looks like an image file.",optionsEmbedImageExcludeElementLabel="Exclude following elements. (CSS selector)",optionsUnicodeLabel="Match unicode characters.",optionsMailLabel="Match email address.",optionsNewTabLabel="Open links in new tabs.",optionsStandaloneLabel="The URL must be surrounded by whitespaces.",optionsLinkifierLabel="Linkifier",optionsTriggerByPageLoadLabel="Trigger on page load.",optionsTriggerByNewNodeLabel="Trigger on dynamically created elements.",optionsTriggerByHoverLabel="Trigger on mouse over.",optionsTriggerByClickLabel="Trigger on mouse click.",optionsBoundaryLeftLabel="Allowed characters between the whitespace and the link. (left side)",optionsBoundaryRightLabel="Allowed characters between the whitespace and the link. (right side)",optionsExcludeElementLabel="Do not linkify following elements. (CSS selector)",optionsIncludeElementLabel="Always linkify following elements. Override above. (CSS selector)",optionsTimeoutLabel="Max execution time. (ms)",optionsTimeoutHelp="The script will terminate if it takes too long to convert the entire page.",optionsMaxRunTimeLabel="Max script run time. (ms)",optionsMaxRunTimeHelp="If the script takes too long to run, the process would be splitted into small chunks to avoid browser freeze.",optionsUrlMatcherLabel="URL matcher",optionsCustomRulesLabel="Custom rules. (RegExp per line)",currentScopeLabel="Current domain",addScopeLabel="Add new domain",addScopePrompt="Add new domain",deleteScopeLabel="Delete current domain",deleteScopeConfirm="Delete domain $1?",learnMoreButton="Learn more",importButton="Import",importPrompt="Paste settings",exportButton="Export",exportPrompt="Copy settings",translate={optionsFuzzyIpLabel,optionsIgnoreMustacheLabel,optionsEmbedImageLabel,optionsEmbedImageExcludeElementLabel,optionsUnicodeLabel,optionsMailLabel,optionsNewTabLabel,optionsStandaloneLabel,optionsLinkifierLabel,optionsTriggerByPageLoadLabel,optionsTriggerByNewNodeLabel,optionsTriggerByHoverLabel,optionsTriggerByClickLabel,optionsBoundaryLeftLabel,optionsBoundaryRightLabel,optionsExcludeElementLabel,optionsIncludeElementLabel,optionsTimeoutLabel,optionsTimeoutHelp,optionsMaxRunTimeLabel,optionsMaxRunTimeHelp,optionsUrlMatcherLabel,optionsCustomRulesLabel,currentScopeLabel,addScopeLabel,addScopePrompt,deleteScopeLabel,deleteScopeConfirm,learnMoreButton,importButton,importPrompt,exportButton,exportPrompt};/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */function EventLite(){if(!(this instanceof EventLite))return new EventLite}var LISTENERS="listeners",methods={on,once,off,emit};mixin(EventLite.prototype),EventLite.mixin=mixin;function mixin(e){for(var t in methods)e[t]=methods[t];return e}function on(e,t){return getListeners(this,e).push(t),this}function once(e,t){var r=this;return u.originalListener=t,getListeners(r,e).push(u),r;function u(){off.call(r,e,u),t.apply(this,arguments)}}function off(e,t){var r=this,u;if(!arguments.length)delete r[LISTENERS];else if(t){if(u=getListeners(r,e,!0),u){if(u=u.filter(n),!u.length)return off.call(r,e);r[LISTENERS][e]=u}}else if(u=r[LISTENERS],u&&(delete u[e],!Object.keys(u).length))return off.call(r);return r;function n(i){return i!==t&&i.originalListener!==t}}function emit(e,t){var r=this,u=getListeners(r,e,!0);if(!u)return!1;var n=arguments.length;if(n===1)u.forEach(s);else if(n===2)u.forEach(a);else{var i=Array.prototype.slice.call(arguments,1);u.forEach(c)}return!!u.length;function s(f){f.call(r)}function a(f){f.call(r,t)}function c(f){f.apply(r,i)}}function getListeners(e,t,r){if(!(r&&!e[LISTENERS])){var u=e[LISTENERS]||(e[LISTENERS]={});return u[t]||(u[t]=[])}}function createPref(e,t="/"){let r,u="global",n=["global"];const i=new EventLite,s={};let a={},c=Object.assign({},e),f;return Object.assign(i,{connect:g,disconnect:x,get:b,getAll:d,set:o,getCurrentScope:y,setCurrentScope:L,addScope:j,deleteScope:I,getScopeList:z,import:p,export:m,has:l});function p(h){const v=h.scopeList||n.slice(),E=new Set(v);if(!E.has("global"))throw new Error("invalid scopeList");const M={scopeList:v};for(const[S,k]of Object.entries(h.scopes))if(E.has(S))for(const[C,N]of Object.entries(k))e[C]!=null&&(M[`${S}${t}${C}`]=N);return r.setMany(M)}function m(){const h=[];for(const v of n)h.push(...Object.keys(e).map(E=>`${v}${t}${E}`));return h.push("scopeList"),r.getMany(h).then(v=>{const E=v.scopeList||n.slice(),M=new Set(E),S={scopeList:E,scopes:{}};for(const[k,C]of Object.entries(v)){const N=k.indexOf(t);if(N<0)continue;const T=k.slice(0,N),O=k.slice(N+t.length);M.has(T)&&e[O]!=null&&(S.scopes[T]||(S.scopes[T]={}),S.scopes[T][O]=C)}return S})}function g(h){return r=h,f=r.getMany(Object.keys(e).map(v=>`global${t}${v}`).concat(["scopeList"])).then(w),r.on("change",w),f}function x(){r.off("change",w),r=null}function w(h,v=!1){if(h.scopeList&&(n=h.scopeList,i.emit("scopeListChange",n),!n.includes(u)))return L("global");const E=new Set;for(const[k,C]of Object.entries(h)){const[N,T]=k.startsWith(`global${t}`)?["global",k.slice(6+t.length)]:k.startsWith(`${u}${t}`)?[u,k.slice(u.length+t.length)]:[null,null];!N||e[T]==null||(N==="global"&&(E.add(T),s[T]=C),N===u&&(E.add(T),a[T]=C))}v&&Object.keys(e).forEach(k=>E.add(k));const M={};let S=!1;for(const k of E){const C=a[k]!=null?a[k]:s[k]!=null?s[k]:e[k];c[k]!==C&&(M[k]=C,c[k]=C,S=!0)}S&&i.emit("change",M)}function l(h){return c.hasOwnProperty(h)}function b(h){return c[h]}function d(){return Object.assign({},c)}function o(h,v){return r.setMany({[`${u}${t}${h}`]:v})}function y(){return u}function L(h){return u===h?Promise.resolve(!0):n.includes(h)?r.getMany(Object.keys(e).map(v=>`${h}${t}${v}`)).then(v=>(u=h,a={},i.emit("scopeChange",u),w(v,!0),!0)):Promise.resolve(!1)}function j(h){return n.includes(h)?Promise.reject(new Error(`${h} already exists`)):h.includes(t)?Promise.reject(new Error(`invalid word: ${t}`)):r.setMany({scopeList:n.concat([h])})}function I(h){return h==="global"?Promise.reject(new Error("cannot delete global")):Promise.all([r.setMany({scopeList:n.filter(v=>v!=h)}),r.deleteMany(Object.keys(e).map(v=>`${h}${t}${v}`))])}function z(){return n}}const keys=Object.keys;function isBoolean(e){return typeof e=="boolean"}function isElement(e){return e&&typeof e.nodeType=="number"}function isString(e){return typeof e=="string"}function isNumber(e){return typeof e=="number"}function isObject(e){return typeof e=="object"?e!==null:isFunction(e)}function isFunction(e){return typeof e=="function"}function isArrayLike(e){return isObject(e)&&typeof e.length=="number"&&typeof e.nodeType!="number"}function forEach(e,t){if(e)for(const r of keys(e))t(e[r],r)}function isRef(e){return isObject(e)&&"current"in e}const isUnitlessNumber={animationIterationCount:0,borderImageOutset:0,borderImageSlice:0,borderImageWidth:0,boxFlex:0,boxFlexGroup:0,boxOrdinalGroup:0,columnCount:0,columns:0,flex:0,flexGrow:0,flexPositive:0,flexShrink:0,flexNegative:0,flexOrder:0,gridArea:0,gridRow:0,gridRowEnd:0,gridRowSpan:0,gridRowStart:0,gridColumn:0,gridColumnEnd:0,gridColumnSpan:0,gridColumnStart:0,fontWeight:0,lineClamp:0,lineHeight:0,opacity:0,order:0,orphans:0,tabSize:0,widows:0,zIndex:0,zoom:0,fillOpacity:0,floodOpacity:0,stopOpacity:0,strokeDasharray:0,strokeDashoffset:0,strokeMiterlimit:0,strokeOpacity:0,strokeWidth:0};function prefixKey(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}const prefixes=["Webkit","ms","Moz","O"];keys(isUnitlessNumber).forEach(e=>{prefixes.forEach(t=>{isUnitlessNumber[prefixKey(t,e)]=0})});const SVGNamespace="http://www.w3.org/2000/svg",XLinkNamespace="http://www.w3.org/1999/xlink",XMLNamespace="http://www.w3.org/XML/1998/namespace";function isVisibleChild(e){return!isBoolean(e)&&e!=null}function className(e){return Array.isArray(e)?e.map(className).filter(Boolean).join(" "):isObject(e)?keys(e).filter(t=>e[t]).join(" "):isVisibleChild(e)?""+e:""}const svg={animate:0,circle:0,clipPath:0,defs:0,desc:0,ellipse:0,feBlend:0,feColorMatrix:0,feComponentTransfer:0,feComposite:0,feConvolveMatrix:0,feDiffuseLighting:0,feDisplacementMap:0,feDistantLight:0,feFlood:0,feFuncA:0,feFuncB:0,feFuncG:0,feFuncR:0,feGaussianBlur:0,feImage:0,feMerge:0,feMergeNode:0,feMorphology:0,feOffset:0,fePointLight:0,feSpecularLighting:0,feSpotLight:0,feTile:0,feTurbulence:0,filter:0,foreignObject:0,g:0,image:0,line:0,linearGradient:0,marker:0,mask:0,metadata:0,path:0,pattern:0,polygon:0,polyline:0,radialGradient:0,rect:0,stop:0,svg:0,switch:0,symbol:0,text:0,textPath:0,tspan:0,use:0,view:0};function createElement(e,t,...r){(isString(t)||Array.isArray(t))&&(r.unshift(t),t={}),t=t||{},!t.namespaceURI&&svg[e]===0&&(t={...t,namespaceURI:SVGNamespace}),t.children!=null&&!r.length&&({children:r,...t}=t);let u;return isString(e)?(u=t.namespaceURI?document.createElementNS(t.namespaceURI,e):document.createElement(e),attributes(t,u),appendChild(r,u)):isFunction(e)&&(isObject(e.defaultProps)&&(t={...e.defaultProps,...t}),u=e({...t,children:r})),isRef(t.ref)?t.ref.current=u:isFunction(t.ref)&&t.ref(u),u}function appendChild(e,t){isArrayLike(e)?appendChildren(e,t):isString(e)||isNumber(e)?appendChildToNode(document.createTextNode(e),t):e===null?appendChildToNode(document.createComment(""),t):isElement(e)&&appendChildToNode(e,t)}function appendChildren(e,t){for(const r of e)appendChild(r,t);return t}function appendChildToNode(e,t){t instanceof window.HTMLTemplateElement?t.content.appendChild(e):t.appendChild(e)}function normalizeAttribute(e){return e.replace(/[A-Z\d]/g,t=>":"+t.toLowerCase())}function attribute(e,t,r){switch(e){case"xlinkActuate":case"xlinkArcrole":case"xlinkHref":case"xlinkRole":case"xlinkShow":case"xlinkTitle":case"xlinkType":attrNS(r,XLinkNamespace,normalizeAttribute(e),t);return;case"xmlnsXlink":attr(r,normalizeAttribute(e),t);return;case"xmlBase":case"xmlLang":case"xmlSpace":attrNS(r,XMLNamespace,normalizeAttribute(e),t);return}switch(e){case"htmlFor":attr(r,"for",t);return;case"dataset":forEach(t,(u,n)=>{u!=null&&(r.dataset[n]=u)});return;case"innerHTML":case"innerText":case"textContent":r[e]=t;return;case"spellCheck":r.spellcheck=t;return;case"class":case"className":isFunction(t)?t(r):attr(r,"class",className(t));return;case"ref":case"namespaceURI":return;case"style":if(isObject(t)){forEach(t,(u,n)=>{isNumber(u)&&isUnitlessNumber[n]!==0?r.style[n]=u+"px":r.style[n]=u});return}}if(isFunction(t)){if(e[0]==="o"&&e[1]==="n"){const u=e.toLowerCase();r[u]==null?r[u]=t:r.addEventListener(e,t)}}else t===!0?attr(r,e,""):t!==!1&&t!=null&&attr(r,e,t)}function attr(e,t,r){e.setAttribute(t,r)}function attrNS(e,t,r,u){e.setAttributeNS(t,r,u)}function attributes(e,t){for(const r of keys(e))attribute(r,e[r],t);return t}function messageGetter({getMessage:e,DEFAULT:t}){return(r,u)=>{const n=e(r,u);if(n)return n;const i=t[r];return i?u?(Array.isArray(u)||(u=[u]),i.replace(/\$(\d+)/g,(s,a)=>u[a-1])):i:""}}function fallback(e){return messageGetter({getMessage:e,DEFAULT:{currentScopeLabel:"Current scope",addScopeLabel:"Add new scope",deleteScopeLabel:"Delete current scope",learnMoreButton:"Learn more",importButton:"Import",exportButton:"Export",addScopePrompt:"Add new scope",deleteScopeConfirm:"Delete scope $1?",importPrompt:"Paste settings",exportPrompt:"Copy settings"}})}const VALID_CONTROL=new Set(["import","export","scope-list","add-scope","delete-scope"]);class DefaultMap extends Map{constructor(t){super(),this.getDefault=t}get(t){let r=super.get(t);return r||(r=this.getDefault(),super.set(t,r)),r}}function bindInputs(e,t){const r=[],u=s=>{for(const a in s)if(t.has(a))for(const c of t.get(a))i(c,s[a])};e.on("change",u),r.push(()=>e.off("change",u));for(const[s,a]of t.entries())for(const c of a){const f=c.hasAttribute("realtime")?"input":"change",p=()=>n(s,c);c.addEventListener(f,p),r.push(()=>c.removeEventListener(f,p))}return u(e.getAll()),()=>{for(const s of r)s()};function n(s,a){if(a.checkValidity()){if(a.type==="checkbox"){e.set(s,a.checked);return}if(a.type==="radio"){a.checked&&e.set(s,a.value);return}if(a.nodeName==="SELECT"&&a.multiple){e.set(s,[...a.options].filter(c=>c.selected).map(c=>c.value));return}if(a.type==="number"||a.type==="range"){e.set(s,Number(a.value));return}e.set(s,a.value)}}function i(s,a){if(s.nodeName==="INPUT"&&s.type==="radio"){s.checked=s.value===a;return}if(s.type==="checkbox"){s.checked=a;return}if(s.nodeName==="SELECT"&&s.multiple){const c=new Set(a);for(const f of s.options)f.selected=c.has(f.value);return}s.value=a}}function bindFields(e,t){const r=u=>{for(const n in u)if(t.has(n))for(const i of t.get(n))i.disabled=i.dataset.bindToValue?i.dataset.bindToValue!==u[n]:!u[n]};return e.on("change",r),r(e.getAll()),()=>e.off("change",r)}function bindControls({pref:e,controls:t,alert:r=alert,confirm:u=confirm,prompt:n=prompt,getMessage:i=()=>{},getNewScope:s=()=>""}){const a={import:["click",p],export:["click",m],"scope-list":["change",g],"add-scope":["click",x],"delete-scope":["click",w]};for(const d in a)for(const o of t.get(d))o.addEventListener(a[d][0],a[d][1]);e.on("scopeChange",l),e.on("scopeListChange",b),b(),l();const c=fallback(i);return f;function f(){e.off("scopeChange",l),e.off("scopeListChange",b);for(const d in a)for(const o of t.get(d))o.removeEventListener(a[d][0],a[d][1])}async function p(){try{const d=await n(c("importPrompt"));if(d==null)return;const o=JSON.parse(d);return e.import(o)}catch(d){await r(d.message)}}async function m(){try{const d=await e.export();await n(c("exportPrompt"),JSON.stringify(d))}catch(d){await r(d.message)}}function g(d){e.setCurrentScope(d.target.value)}async function x(){try{let d=await n(c("addScopePrompt"),s());if(d==null)return;if(d=d.trim(),!d)throw new Error("the value is empty");await e.addScope(d),e.setCurrentScope(d)}catch(d){await r(d.message)}}async function w(){try{const d=e.getCurrentScope();if(await u(c("deleteScopeConfirm",d)))return e.deleteScope(d)}catch(d){await r(d.message)}}function l(){const d=e.getCurrentScope();for(const o of t.get("scope-list"))o.value=d}function b(){const d=e.getScopeList();for(const o of t.get("scope-list"))o.innerHTML="",o.append(...d.map(y=>{const L=document.createElement("option");return L.value=y,L.textContent=y,L}))}}function createBinding({pref:e,root:t,elements:r=t.querySelectorAll("input, textarea, select, fieldset, button"),keyPrefix:u="pref-",controlPrefix:n="webext-pref-",alert:i,confirm:s,prompt:a,getMessage:c,getNewScope:f}){const p=new DefaultMap(()=>[]),m=new DefaultMap(()=>[]),g=new DefaultMap(()=>[]);for(const b of r){const d=b.id&&w(b.id,u);if(d&&e.has(d)){p.get(d).push(b);continue}if(b.nodeName==="INPUT"&&b.type==="radio"){const y=b.name&&w(b.name,u);if(y&&e.has(y)){p.get(y).push(b);continue}}if(b.nodeName==="FIELDSET"&&b.dataset.bindTo){m.get(b.dataset.bindTo).push(b);continue}const o=l(b.classList);o&&g.get(o).push(b)}const x=[bindInputs(e,p),bindFields(e,m),bindControls({pref:e,controls:g,alert:i,confirm:s,prompt:a,getMessage:c,getNewScope:f})];return()=>{for(const b of x)b()};function w(b,d){return d?b.startsWith(d)?b.slice(d.length):"":b}function l(b){for(const d of b){const o=w(d,n);if(VALID_CONTROL.has(o))return o}}}function createUI({body:e,getMessage:t=()=>{},toolbar:r=!0,navbar:u=!0,keyPrefix:n="pref-",controlPrefix:i="webext-pref-"}){const s=document.createDocumentFragment(),a=fallback(t);return r&&s.append(c()),u&&s.append(f()),s.append(createElement("div",{class:i+"body"},e.map(o=>(o.hLevel||(o.hLevel=3),p(o))))),s;function c(){return createElement("div",{class:i+"toolbar"},createElement("button",{type:"button",class:[i+"import","browser-style"]},a("importButton")),createElement("button",{type:"button",class:[i+"export","browser-style"]},a("exportButton")))}function f(){return createElement("div",{class:i+"nav"},createElement("select",{class:[i+"scope-list","browser-style"],title:a("currentScopeLabel")}),createElement("button",{type:"button",class:[i+"delete-scope","browser-style"],title:a("deleteScopeLabel")},"\xD7"),createElement("button",{type:"button",class:[i+"add-scope","browser-style"],title:a("addScopeLabel")},"+"))}function p(o){return o.type==="section"?b(o):o.type==="checkbox"?l(o):o.type==="radiogroup"?g(o):m(o)}function m(o){const y=n+o.key;let L;const j=o.validate?I=>{try{o.validate(I.target.value),I.target.setCustomValidity("")}catch(z){I.target.setCustomValidity(z.message||String(z))}}:null;return o.type==="select"?L=createElement("select",{multiple:o.multiple,class:"browser-style",id:y,onChange:j},Object.entries(o.options).map(([I,z])=>createElement("option",{value:I},z))):o.type==="textarea"?L=createElement("textarea",{rows:"8",class:"browser-style",id:y,onChange:j}):L=createElement("input",{type:o.type,id:y,onChange:j}),createElement("div",{class:[`${i}${o.type}`,"browser-style",o.className]},createElement("label",{htmlFor:y},o.label),o.learnMore&&createElement(w,{url:o.learnMore}),L,o.help&&createElement(x,{content:o.help}))}function g(o){return createElement("div",{class:[`${i}${o.type}`,"browser-style",o.className]},createElement("div",{class:i+"radio-title"},o.label),o.learnMore&&createElement(w,{url:o.learnMore}),o.help&&createElement(x,{content:o.help}),o.children.map(y=>(y.parentKey=o.key,l(d(o,y)))))}function x({content:o}){return createElement("p",{class:i+"help"},o)}function w({url:o}){return createElement("a",{href:o,class:i+"learn-more",target:"_blank",rel:"noopener noreferrer"},a("learnMoreButton"))}function l(o){const y=o.parentKey?`${n}${o.parentKey}-${o.value}`:n+o.key;return createElement("div",{class:[`${i}${o.type}`,"browser-style",o.className]},createElement("input",{type:o.type,id:y,name:o.parentKey?n+o.parentKey:null,value:o.value}),createElement("label",{htmlFor:y},o.label),o.learnMore&&createElement(w,{url:o.learnMore}),o.help&&createElement(x,{content:o.help}),o.children&&createElement("fieldset",{class:i+"checkbox-children",dataset:{bindTo:o.parentKey||o.key,bindToValue:o.value}},o.children.map(L=>p(d(o,L)))))}function b(o){const y=`h${o.hLevel}`;return o.hLevel++,createElement("div",{class:[i+o.type,o.className]},createElement(y,{class:i+"header"},o.label),o.help&&createElement(x,{content:o.help}),o.children&&o.children.map(L=>p(d(o,L))))}function d(o,y){return y.hLevel=o.hLevel,y}}function createGMStorage(){const e=typeof GM_setValue=="function"?a(GM_setValue):GM.setValue.bind(GM),t=typeof GM_getValue=="function"?a(GM_getValue):GM.getValue.bind(GM),r=typeof GM_deleteValue=="function"?a(GM_deleteValue):GM.deleteValue.bind(GM),u=new EventLite;return typeof GM_addValueChangeListener=="function"&&GM_addValueChangeListener("webext-pref-message",(c,f,p)=>{const m=JSON.parse(p);for(const g of Object.keys(m))typeof m[g]=="object"&&m[g].$undefined&&(m[g]=void 0);u.emit("change",m)}),Object.assign(u,{getMany:n,setMany:i,deleteMany:s});function n(c){return Promise.all(c.map(f=>t(`webext-pref/${f}`).then(p=>[f,typeof p=="string"?JSON.parse(p):p]))).then(f=>{const p={};for(const[m,g]of f)p[m]=g;return p})}function i(c){return Promise.all(Object.entries(c).map(([f,p])=>e(`webext-pref/${f}`,JSON.stringify(p)))).then(()=>{if(typeof GM_addValueChangeListener=="function")return e("webext-pref-message",JSON.stringify(c));u.emit("change",c)})}function s(c){return Promise.all(c.map(f=>r(`webext-pref/${f}`))).then(()=>{if(typeof GM_addValueChangeListener=="function"){const p={};for(const m of c)p[m]={$undefined:!0};return e("webext-pref-message",JSON.stringify(p))}const f={};for(const p of c)f[p]=void 0;u.emit("change",f)})}function a(c){return(...f)=>{try{return Promise.resolve(c(...f))}catch(p){return Promise.reject(p)}}}}function GM_webextPref({default:e,separator:t,css:r="",...u}){const n=createPref(e,t),i=n.connect(createGMStorage());let s=!1;const a=typeof GM_registerMenuCommand=="function"?GM_registerMenuCommand:typeof GM<"u"&&GM&&GM.registerMenuCommand?GM.registerMenuCommand.bind(GM):void 0;return a&&a(`${f()} - Configure`,c),Object.assign(n,{ready:()=>i,openDialog:c});function c(){if(s)return;s=!0;let p;const m=document.createElement("div");m.className="webext-pref-modal",m.onclick=()=>{m.classList.remove("webext-pref-modal-open"),m.addEventListener("transitionend",()=>{p&&p(),m.remove(),s=!1})};const g=document.createElement("style");g.textContent=`body{overflow:hidden}.webext-pref-modal{position:fixed;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.5);overflow:auto;z-index:999999;opacity:0;transition:opacity .2s linear;display:flex}.webext-pref-modal-open{opacity:1}.webext-pref-modal::after,.webext-pref-modal::before{content:"";display:block;height:30px;visibility:hidden}.webext-pref-iframe-wrap{margin:auto}.webext-pref-iframe{margin:30px 0;display:inline-block;width:100%;max-width:100%;background:#fff;border-width:0;box-shadow:0 0 30px #000;transform:translateY(-20px);transition:transform .2s linear}.webext-pref-modal-open .webext-pref-iframe{transform:none}
      body {
        padding-right: ${window.innerWidth-document.documentElement.offsetWidth}px;
      }
    `;const x=document.createElement("iframe");x.className="webext-pref-iframe",x.srcdoc=`
      <html>
        <head>
          <style class="dialog-style"></style>
        </head>
        <body>
          <div class="dialog-body"></div>
        </body>
      </html>
    `;const w=document.createElement("div");w.className="webext-pref-iframe-wrap",w.append(x),m.append(g,w),document.body.appendChild(m),x.onload=()=>{x.onload=null,x.contentDocument.querySelector(".dialog-style").textContent="body{display:inline-block;font-size:16px;font-family:sans-serif;white-space:nowrap;overflow:hidden;margin:0;color:#3d3d3d;line-height:1}input[type=number],input[type=text],select,textarea{display:block;width:100%;box-sizing:border-box;height:2em;font:inherit;padding:0 .3em;border:1px solid #9e9e9e;cursor:pointer}select[multiple],textarea{height:6em}input[type=number]:hover,input[type=text]:hover,select:hover,textarea:hover{border-color:#d5d5d5}input[type=number]:focus,input[type=text]:focus,select:focus,textarea:focus{cursor:auto;border-color:#3a93ee}textarea{line-height:1.5}input[type=checkbox],input[type=radio]{display:inline-block;width:1em;height:1em;font:inherit;margin:0}button{box-sizing:border-box;height:2em;font:inherit;border:1px solid #9e9e9e;cursor:pointer;background:0 0}button:hover{border-color:#d5d5d5}button:focus{border-color:#3a93ee}.dialog-body{margin:2em}.webext-pref-toolbar{display:flex;align-items:center;margin-bottom:1em}.dialog-title{font-size:1.34em;margin:0 2em 0 0;flex-grow:1}.webext-pref-toolbar button{font-size:.7em;margin-left:.5em}.webext-pref-nav{display:flex;margin-bottom:1em}.webext-pref-nav select{text-align:center;text-align-last:center}.webext-pref-nav button{width:2em}.webext-pref-number,.webext-pref-radiogroup,.webext-pref-select,.webext-pref-text,.webext-pref-textarea{margin:1em 0}.webext-pref-body>:first-child{margin-top:0}.webext-pref-body>:last-child{margin-bottom:0}.webext-pref-number>input,.webext-pref-select>select,.webext-pref-text>input,.webext-pref-textarea>textarea{margin:.3em 0}.webext-pref-checkbox,.webext-pref-radio{margin:.5em 0;padding-left:1.5em}.webext-pref-checkbox>input,.webext-pref-radio>input{margin-left:-1.5em;margin-right:.5em;vertical-align:middle}.webext-pref-checkbox>label,.webext-pref-radio>label{cursor:pointer;vertical-align:middle}.webext-pref-checkbox>label:hover,.webext-pref-radio>label:hover{color:#707070}.webext-pref-checkbox-children,.webext-pref-radio-children{margin:.7em 0 0;padding:0;border-width:0}.webext-pref-checkbox-children[disabled],.webext-pref-radio-children[disabled]{opacity:.5}.webext-pref-checkbox-children>:first-child,.webext-pref-radio-children>:first-child{margin-top:0}.webext-pref-checkbox-children>:last-child,.webext-pref-radio-children>:last-child{margin-bottom:0}.webext-pref-checkbox-children>:last-child>:last-child,.webext-pref-radio-children>:last-child>:last-child{margin-bottom:0}.webext-pref-help{color:#969696}.responsive{white-space:normal}.responsive .dialog-body{margin:1em}.responsive .webext-pref-toolbar{display:block}.responsive .dialog-title{margin:0 0 1em 0}.responsive .webext-pref-toolbar button{font-size:1em}.responsive .webext-pref-nav{display:block}"+r;const l=x.contentDocument.querySelector(".dialog-body");l.append(createUI(u)),p=createBinding({pref:n,root:l,...u});const b=document.createElement("h2");b.className="dialog-title",b.textContent=f(),x.contentDocument.querySelector(".webext-pref-toolbar").prepend(b),x.contentDocument.body.offsetWidth>m.offsetWidth&&x.contentDocument.body.classList.add("responsive"),x.style=`
        width: ${x.contentDocument.body.offsetWidth}px;
        height: ${x.contentDocument.body.scrollHeight}px;
      `,m.classList.add("webext-pref-modal-open")}}function f(){return typeof GM_info=="object"?GM_info.script.name:GM.info.script.name}}function prefDefault(){return{fuzzyIp:!0,embedImage:!0,embedImageExcludeElement:".hljs, .highlight, .brush\\:",ignoreMustache:!1,unicode:!1,mail:!0,newTab:!1,standalone:!1,boundaryLeft:`{[("'`,boundaryRight:`'")]},.;?!`,excludeElement:".highlight, .editbox, .brush\\:, .bdsug, .spreadsheetinfo",includeElement:"",timeout:1e4,triggerByPageLoad:!1,triggerByNewNode:!1,triggerByHover:!0,triggerByClick:!supportHover(),maxRunTime:100,customRules:""}}function supportHover(){return window.matchMedia("(hover)").matches}var prefBody=e=>{return[{type:"section",label:e("optionsUrlMatcherLabel"),children:[{key:"fuzzyIp",type:"checkbox",label:e("optionsFuzzyIpLabel")},{key:"ignoreMustache",type:"checkbox",label:e("optionsIgnoreMustacheLabel")},{key:"unicode",type:"checkbox",label:e("optionsUnicodeLabel")},{key:"mail",type:"checkbox",label:e("optionsMailLabel")},{key:"standalone",type:"checkbox",label:e("optionsStandaloneLabel"),children:[{key:"boundaryLeft",type:"text",label:e("optionsBoundaryLeftLabel")},{key:"boundaryRight",type:"text",label:e("optionsBoundaryRightLabel")}]},{key:"customRules",type:"textarea",label:e("optionsCustomRulesLabel"),learnMore:"https://github.com/eight04/linkify-plus-plus?tab=readme-ov-file#custom-rules"}]},{type:"section",label:e("optionsLinkifierLabel"),children:[{key:"triggerByPageLoad",type:"checkbox",label:e("optionsTriggerByPageLoadLabel")},{key:"triggerByNewNode",type:"checkbox",label:e("optionsTriggerByNewNodeLabel")},{key:"triggerByHover",type:"checkbox",label:e("optionsTriggerByHoverLabel")},{key:"triggerByClick",type:"checkbox",label:e("optionsTriggerByClickLabel")},{key:"embedImage",type:"checkbox",label:e("optionsEmbedImageLabel"),children:[{key:"embedImageExcludeElement",type:"textarea",label:e("optionsEmbedImageExcludeElementLabel"),validate:t}]},{key:"newTab",type:"checkbox",label:e("optionsNewTabLabel")},{key:"excludeElement",type:"textarea",label:e("optionsExcludeElementLabel"),validate:t},{key:"includeElement",type:"textarea",label:e("optionsIncludeElementLabel"),validate:t},{key:"timeout",type:"number",label:e("optionsTimeoutLabel"),help:e("optionsTimeoutHelp")},{key:"maxRunTime",type:"number",label:e("optionsMaxRunTimeLabel"),help:e("optionsMaxRunTimeHelp")}]}];function t(r){r&&document.documentElement.matches(r)}},maxLength=24,chars="\u30BB\u30FC\u30EB\u4F5B\u5C71\u0CAD\u0CBE\u0CB0\u0CA4\u96C6\u56E2\u5728\u7EBF\uD55C\uAD6D\u0B2D\u0B3E\u0B30\u0B24\u09AD\u09BE\u09F0\u09A4\u09B0\u516B\u5366\u05D9\u05E9\u05E8\u05D0\u05DC\u0645\u0648\u0642\u0639\u09AC\u0982\u09B2\u516C\u53F8\u7F51\u7AD9\u79FB\u52A8\u6211\u7231\u4F60\u043C\u043E\u0441\u043A\u0432\u0430\u049B\u0437\u043D\u043B\u0439\u0442\u8054\u901A\u0440\u0431\u0433\u0435\u05E7\u05D5\u05DD\u30D5\u30A1\u30C3\u30B7\u30E7\u30F3\u30B9\u30C8\u30A2\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BC2\u0BB0\u5546\u6807\u5E97\u57CE\u0434\u0438\u044E\u5BB6\u96FB\u4E2D\u6587\u4FE1\u56FD\u570B\u5A31\u4E50\u0C2D\u0C3E\u0C30\u0C24\u0C4D\u0DBD\u0D82\u0D9A\u0DCF\u8D2D\u7269\u30AF\u30E9\u30A6\u30C9\u0AAD\u0ABE\u0AB0\u0AA4\u092D\u093E\u0930\u0924\u092E\u094D\u094B\u0938\u0902\u0917\u0920\u0928\u9910\u5385\u7EDC\u0443\u9999\u6E2F\u98DF\u54C1\u98DE\u5229\u6D66\u53F0\u6E7E\u7063\u624B\u673A\u0627\u0644\u062C\u0632\u0626\u0631\u0646\u06CC\u062A\u0628\u064A\u067E\u06A9\u0633\u062F\u063A\u0638\u062D\u0629\u0680\u6FB3\u9580\uB2F7\uCEF4\u0634\u0643\u10D2\u10D4\u6784\u5065\u5EB7\u0E44\u0E17\u0E22\u62DB\u8058\u0444\u0EA5\u0EB2\u0EA7\u307F\u3093\u306A\u03B5\u03C5\u03BB\u4E16\u754C\u66F8\u7C4D\u0D2D\u0D3E\u0D30\u0D24\u0D02\u0A2D\u0A3E\u0A30\u0A24\u5740\uB137\u30B3\u30E0\u6E38\u620F\xF6\u4F01\u4E1A\u606F\u0635\u0637\u5E7F\u4E1C\u0B87\u0BB2\u0BC8\u0BA8\u0BA4\u0BAF\u0BBE\u0570\u0561\u0575\u65B0\u52A0\u5761\u0641\u653F\u52A1",table={aaa:!0,aarp:!0,abb:!0,abbott:!0,abbvie:!0,abc:!0,able:!0,abogado:!0,abudhabi:!0,ac:!0,academy:!0,accountant:!0,accountants:!0,aco:!0,actor:!0,ad:!0,adult:!0,ae:!0,aeg:!0,aero:!0,aetna:!0,af:!0,afl:!0,africa:!0,ag:!0,agency:!0,ai:!0,aig:!0,airbus:!0,airforce:!0,akdn:!0,al:!0,allfinanz:!0,allstate:!0,ally:!0,alsace:!0,alstom:!0,am:!0,amazon:!0,americanexpress:!0,amex:!0,amfam:!0,amica:!0,amsterdam:!0,analytics:!0,android:!0,anz:!0,ao:!0,apartments:!0,app:!0,apple:!0,aq:!0,aquarelle:!0,ar:!0,archi:!0,army:!0,arpa:!0,art:!0,arte:!0,as:!0,asia:!0,associates:!0,at:!0,attorney:!0,au:!0,auction:!0,audi:!0,audio:!0,auspost:!0,auto:!0,autos:!0,aw:!0,aws:!0,ax:!0,axa:!0,az:!0,azure:!0,ba:!0,baby:!0,band:!0,bank:!0,bar:!0,barcelona:!0,barclaycard:!0,barclays:!0,bargains:!0,basketball:!0,bauhaus:!0,bayern:!0,bb:!0,bbc:!0,bbva:!0,bcn:!0,bd:!0,be:!0,beauty:!0,beer:!0,bentley:!0,berlin:!0,best:!0,bet:!0,bf:!0,bg:!0,bh:!0,bi:!0,bible:!0,bid:!0,bike:!0,bing:!0,bingo:!0,bio:!0,biz:!0,bj:!0,black:!0,blackfriday:!0,blog:!0,bloomberg:!0,blue:!0,bm:!0,bmw:!0,bn:!0,bnpparibas:!0,bo:!0,boats:!0,bond:!0,boo:!0,bostik:!0,boston:!0,bot:!0,boutique:!0,box:!0,br:!0,bradesco:!0,bridgestone:!0,broadway:!0,broker:!0,brother:!0,brussels:!0,bs:!0,bt:!0,build:!0,builders:!0,business:!0,buzz:!0,bw:!0,by:!0,bz:!0,bzh:!0,ca:!0,cab:!0,cafe:!0,cam:!0,camera:!0,camp:!0,canon:!0,capetown:!0,capital:!0,car:!0,cards:!0,care:!0,career:!0,careers:!0,cars:!0,casa:!0,case:!0,cash:!0,casino:!0,cat:!0,catering:!0,catholic:!0,cba:!0,cbn:!0,cc:!0,cd:!0,center:!0,ceo:!0,cern:!0,cf:!0,cfa:!0,cfd:!0,cg:!0,ch:!0,chanel:!0,channel:!0,charity:!0,chase:!0,chat:!0,cheap:!0,chintai:!0,christmas:!0,church:!0,ci:!0,cisco:!0,citi:!0,citic:!0,city:!0,ck:!0,cl:!0,claims:!0,cleaning:!0,click:!0,clinic:!0,clothing:!0,cloud:!0,club:!0,clubmed:!0,cm:!0,cn:!0,co:!0,coach:!0,codes:!0,coffee:!0,college:!0,cologne:!0,com:!0,commbank:!0,community:!0,company:!0,compare:!0,computer:!0,condos:!0,construction:!0,consulting:!0,contact:!0,contractors:!0,cooking:!0,cool:!0,coop:!0,corsica:!0,country:!0,coupons:!0,courses:!0,cpa:!0,cr:!0,credit:!0,creditcard:!0,creditunion:!0,cricket:!0,crown:!0,crs:!0,cruises:!0,cu:!0,cuisinella:!0,cv:!0,cw:!0,cx:!0,cy:!0,cymru:!0,cyou:!0,cz:!0,dad:!0,dance:!0,date:!0,dating:!0,day:!0,de:!0,deal:!0,dealer:!0,deals:!0,degree:!0,delivery:!0,dell:!0,deloitte:!0,democrat:!0,dental:!0,dentist:!0,desi:!0,design:!0,dev:!0,dhl:!0,diamonds:!0,diet:!0,digital:!0,direct:!0,directory:!0,discount:!0,discover:!0,diy:!0,dj:!0,dk:!0,dm:!0,do:!0,doctor:!0,dog:!0,domains:!0,download:!0,dubai:!0,dupont:!0,durban:!0,dvag:!0,dz:!0,earth:!0,ec:!0,eco:!0,edeka:!0,edu:!0,education:!0,ee:!0,eg:!0,email:!0,emerck:!0,energy:!0,engineer:!0,engineering:!0,enterprises:!0,equipment:!0,er:!0,ericsson:!0,erni:!0,es:!0,esq:!0,estate:!0,et:!0,eu:!0,eurovision:!0,eus:!0,events:!0,exchange:!0,expert:!0,exposed:!0,express:!0,extraspace:!0,fage:!0,fail:!0,fairwinds:!0,faith:!0,family:!0,fan:!0,fans:!0,farm:!0,fashion:!0,feedback:!0,ferrero:!0,fi:!0,film:!0,finance:!0,financial:!0,firmdale:!0,fish:!0,fishing:!0,fit:!0,fitness:!0,fj:!0,fk:!0,flickr:!0,flights:!0,flir:!0,florist:!0,flowers:!0,fm:!0,fo:!0,foo:!0,food:!0,football:!0,ford:!0,forex:!0,forsale:!0,forum:!0,foundation:!0,fox:!0,fr:!0,fresenius:!0,frl:!0,frogans:!0,fujitsu:!0,fun:!0,fund:!0,furniture:!0,futbol:!0,fyi:!0,ga:!0,gal:!0,gallery:!0,game:!0,games:!0,garden:!0,gay:!0,gd:!0,gdn:!0,ge:!0,gea:!0,gent:!0,genting:!0,gf:!0,gg:!0,gh:!0,gi:!0,gift:!0,gifts:!0,gives:!0,giving:!0,gl:!0,glass:!0,gle:!0,global:!0,globo:!0,gm:!0,gmail:!0,gmbh:!0,gmo:!0,gmx:!0,gn:!0,godaddy:!0,gold:!0,golf:!0,goog:!0,google:!0,gop:!0,gov:!0,gp:!0,gq:!0,gr:!0,grainger:!0,graphics:!0,gratis:!0,green:!0,gripe:!0,group:!0,gs:!0,gt:!0,gu:!0,gucci:!0,guide:!0,guitars:!0,guru:!0,gw:!0,gy:!0,hair:!0,hamburg:!0,haus:!0,health:!0,healthcare:!0,help:!0,helsinki:!0,here:!0,hermes:!0,hiphop:!0,hisamitsu:!0,hitachi:!0,hiv:!0,hk:!0,hm:!0,hn:!0,hockey:!0,holdings:!0,holiday:!0,homes:!0,honda:!0,horse:!0,hospital:!0,host:!0,hosting:!0,hotmail:!0,house:!0,how:!0,hr:!0,hsbc:!0,ht:!0,hu:!0,hyatt:!0,hyundai:!0,ice:!0,icu:!0,id:!0,ie:!0,ieee:!0,ifm:!0,ikano:!0,il:!0,im:!0,imamat:!0,immo:!0,immobilien:!0,in:!0,inc:!0,industries:!0,info:!0,ing:!0,ink:!0,institute:!0,insurance:!0,insure:!0,int:!0,international:!0,investments:!0,io:!0,ipiranga:!0,iq:!0,ir:!0,irish:!0,is:!0,ismaili:!0,ist:!0,istanbul:!0,it:!0,itau:!0,itv:!0,jaguar:!0,java:!0,jcb:!0,je:!0,jetzt:!0,jewelry:!0,jio:!0,jll:!0,jm:!0,jmp:!0,jnj:!0,jo:!0,jobs:!0,joburg:!0,jp:!0,jpmorgan:!0,jprs:!0,juegos:!0,kaufen:!0,ke:!0,kfh:!0,kg:!0,kh:!0,ki:!0,kia:!0,kids:!0,kim:!0,kitchen:!0,kiwi:!0,km:!0,kn:!0,koeln:!0,komatsu:!0,kp:!0,kpmg:!0,kpn:!0,kr:!0,krd:!0,kred:!0,kw:!0,ky:!0,kyoto:!0,kz:!0,la:!0,lamborghini:!0,lancaster:!0,land:!0,landrover:!0,lanxess:!0,lat:!0,latrobe:!0,law:!0,lawyer:!0,lb:!0,lc:!0,lease:!0,leclerc:!0,legal:!0,lexus:!0,lgbt:!0,li:!0,lidl:!0,life:!0,lifestyle:!0,lighting:!0,lilly:!0,limited:!0,limo:!0,lincoln:!0,link:!0,live:!0,living:!0,lk:!0,llc:!0,loan:!0,loans:!0,locker:!0,locus:!0,lol:!0,london:!0,lotto:!0,love:!0,lr:!0,ls:!0,lt:!0,ltd:!0,ltda:!0,lu:!0,lundbeck:!0,luxe:!0,luxury:!0,lv:!0,ly:!0,ma:!0,madrid:!0,maif:!0,maison:!0,makeup:!0,man:!0,management:!0,mango:!0,market:!0,marketing:!0,markets:!0,marriott:!0,mattel:!0,mba:!0,mc:!0,md:!0,me:!0,med:!0,media:!0,meet:!0,melbourne:!0,meme:!0,memorial:!0,men:!0,menu:!0,mg:!0,mh:!0,miami:!0,microsoft:!0,mil:!0,mini:!0,mit:!0,mk:!0,ml:!0,mlb:!0,mm:!0,mma:!0,mn:!0,mo:!0,mobi:!0,moda:!0,moe:!0,moi:!0,mom:!0,monash:!0,money:!0,monster:!0,mortgage:!0,moscow:!0,motorcycles:!0,mov:!0,movie:!0,mp:!0,mq:!0,mr:!0,ms:!0,mt:!0,mtn:!0,mtr:!0,mu:!0,museum:!0,music:!0,mv:!0,mw:!0,mx:!0,my:!0,mz:!0,na:!0,nab:!0,nagoya:!0,name:!0,navy:!0,nc:!0,ne:!0,nec:!0,net:!0,netbank:!0,network:!0,neustar:!0,new:!0,news:!0,next:!0,nexus:!0,nf:!0,ng:!0,ngo:!0,nhk:!0,ni:!0,nico:!0,nike:!0,ninja:!0,nissan:!0,nl:!0,no:!0,nokia:!0,now:!0,nowruz:!0,np:!0,nr:!0,nra:!0,nrw:!0,ntt:!0,nu:!0,nyc:!0,nz:!0,observer:!0,office:!0,okinawa:!0,om:!0,omega:!0,one:!0,ong:!0,onl:!0,online:!0,ooo:!0,oracle:!0,orange:!0,org:!0,organic:!0,osaka:!0,otsuka:!0,ovh:!0,pa:!0,page:!0,panasonic:!0,paris:!0,partners:!0,parts:!0,party:!0,pe:!0,pet:!0,pf:!0,pfizer:!0,pg:!0,ph:!0,pharmacy:!0,phd:!0,philips:!0,photo:!0,photography:!0,photos:!0,physio:!0,pics:!0,pictet:!0,pictures:!0,ping:!0,pink:!0,pioneer:!0,pizza:!0,pk:!0,pl:!0,place:!0,play:!0,plumbing:!0,plus:!0,pm:!0,pn:!0,pohl:!0,poker:!0,politie:!0,porn:!0,post:!0,pr:!0,praxi:!0,press:!0,prime:!0,pro:!0,productions:!0,prof:!0,promo:!0,properties:!0,property:!0,protection:!0,pru:!0,prudential:!0,ps:!0,pt:!0,pub:!0,pw:!0,pwc:!0,py:!0,qa:!0,qpon:!0,quebec:!0,quest:!0,racing:!0,radio:!0,re:!0,realestate:!0,realtor:!0,realty:!0,recipes:!0,red:!0,redstone:!0,rehab:!0,reise:!0,reisen:!0,reit:!0,ren:!0,rent:!0,rentals:!0,repair:!0,report:!0,republican:!0,rest:!0,restaurant:!0,review:!0,reviews:!0,rexroth:!0,rich:!0,ricoh:!0,rio:!0,rip:!0,ro:!0,rocks:!0,rodeo:!0,rogers:!0,rs:!0,rsvp:!0,ru:!0,rugby:!0,ruhr:!0,run:!0,rw:!0,ryukyu:!0,sa:!0,saarland:!0,sale:!0,salon:!0,samsung:!0,sandvik:!0,sandvikcoromant:!0,sanofi:!0,sap:!0,sarl:!0,saxo:!0,sb:!0,sbi:!0,sbs:!0,sc:!0,scb:!0,schaeffler:!0,schmidt:!0,school:!0,schule:!0,schwarz:!0,science:!0,scot:!0,sd:!0,se:!0,seat:!0,security:!0,select:!0,sener:!0,services:!0,seven:!0,sew:!0,sex:!0,sexy:!0,sfr:!0,sg:!0,sh:!0,sharp:!0,shell:!0,shiksha:!0,shoes:!0,shop:!0,shopping:!0,show:!0,si:!0,singles:!0,site:!0,sk:!0,ski:!0,skin:!0,sky:!0,skype:!0,sl:!0,sm:!0,smart:!0,sn:!0,sncf:!0,so:!0,soccer:!0,social:!0,softbank:!0,software:!0,sohu:!0,solar:!0,solutions:!0,sony:!0,soy:!0,spa:!0,space:!0,sport:!0,sr:!0,srl:!0,ss:!0,st:!0,stada:!0,statebank:!0,statefarm:!0,stc:!0,stockholm:!0,storage:!0,store:!0,stream:!0,studio:!0,study:!0,style:!0,su:!0,sucks:!0,supplies:!0,supply:!0,support:!0,surf:!0,surgery:!0,suzuki:!0,sv:!0,swatch:!0,swiss:!0,sx:!0,sy:!0,sydney:!0,systems:!0,sz:!0,taipei:!0,target:!0,tatamotors:!0,tatar:!0,tattoo:!0,tax:!0,taxi:!0,tc:!0,td:!0,team:!0,tech:!0,technology:!0,tel:!0,temasek:!0,tennis:!0,teva:!0,tf:!0,tg:!0,th:!0,theater:!0,theatre:!0,tickets:!0,tienda:!0,tips:!0,tires:!0,tirol:!0,tj:!0,tk:!0,tl:!0,tm:!0,tn:!0,to:!0,today:!0,tokyo:!0,tools:!0,top:!0,toray:!0,toshiba:!0,total:!0,tours:!0,town:!0,toyota:!0,toys:!0,tr:!0,trade:!0,trading:!0,training:!0,travel:!0,travelers:!0,trust:!0,tt:!0,tube:!0,tui:!0,tv:!0,tvs:!0,tw:!0,tz:!0,ua:!0,ug:!0,uk:!0,unicom:!0,university:!0,uno:!0,uol:!0,us:!0,uy:!0,uz:!0,va:!0,vacations:!0,vana:!0,vanguard:!0,vc:!0,ve:!0,vegas:!0,ventures:!0,versicherung:!0,vet:!0,vg:!0,vi:!0,viajes:!0,video:!0,vig:!0,villas:!0,vin:!0,vip:!0,vision:!0,vivo:!0,vlaanderen:!0,vn:!0,vodka:!0,vote:!0,voting:!0,voto:!0,voyage:!0,vu:!0,wales:!0,walter:!0,wang:!0,watch:!0,watches:!0,webcam:!0,weber:!0,website:!0,wed:!0,wedding:!0,weir:!0,wf:!0,whoswho:!0,wien:!0,wiki:!0,williamhill:!0,win:!0,windows:!0,wine:!0,wme:!0,woodside:!0,work:!0,works:!0,world:!0,ws:!0,wtf:!0,xbox:!0,xin:!0,"xn--1ck2e1b":!0,"xn--1qqw23a":!0,"xn--2scrj9c":!0,"xn--3bst00m":!0,"xn--3ds443g":!0,"xn--3e0b707e":!0,"xn--3hcrj9c":!0,"xn--45br5cyl":!0,"xn--45brj9c":!0,"xn--45q11c":!0,"xn--4dbrk0ce":!0,"xn--4gbrim":!0,"xn--54b7fta0cc":!0,"xn--55qx5d":!0,"xn--5tzm5g":!0,"xn--6frz82g":!0,"xn--6qq986b3xl":!0,"xn--80adxhks":!0,"xn--80ao21a":!0,"xn--80asehdb":!0,"xn--80aswg":!0,"xn--8y0a063a":!0,"xn--90a3ac":!0,"xn--90ae":!0,"xn--90ais":!0,"xn--9dbq2a":!0,"xn--bck1b9a5dre4c":!0,"xn--c1avg":!0,"xn--cck2b3b":!0,"xn--clchc0ea0b2g2a9gcd":!0,"xn--czr694b":!0,"xn--czrs0t":!0,"xn--czru2d":!0,"xn--d1acj3b":!0,"xn--d1alf":!0,"xn--e1a4c":!0,"xn--fct429k":!0,"xn--fiq228c5hs":!0,"xn--fiq64b":!0,"xn--fiqs8s":!0,"xn--fiqz9s":!0,"xn--fjq720a":!0,"xn--fpcrj9c3d":!0,"xn--fzc2c9e2c":!0,"xn--g2xx48c":!0,"xn--gckr3f0f":!0,"xn--gecrj9c":!0,"xn--h2breg3eve":!0,"xn--h2brj9c":!0,"xn--h2brj9c8c":!0,"xn--hxt814e":!0,"xn--i1b6b1a6a2e":!0,"xn--imr513n":!0,"xn--io0a7i":!0,"xn--j1amh":!0,"xn--j6w193g":!0,"xn--jvr189m":!0,"xn--kcrx77d1x4a":!0,"xn--kprw13d":!0,"xn--kpry57d":!0,"xn--kput3i":!0,"xn--l1acc":!0,"xn--lgbbat1ad8j":!0,"xn--mgb9awbf":!0,"xn--mgba3a4f16a":!0,"xn--mgbaam7a8h":!0,"xn--mgbab2bd":!0,"xn--mgbah1a3hjkrd":!0,"xn--mgbai9azgqp6j":!0,"xn--mgbayh7gpa":!0,"xn--mgbbh1a":!0,"xn--mgbc0a9azcg":!0,"xn--mgbca7dzdo":!0,"xn--mgbcpq6gpa1a":!0,"xn--mgberp4a5d4ar":!0,"xn--mgbgu82a":!0,"xn--mgbpl2fh":!0,"xn--mgbtx2b":!0,"xn--mix891f":!0,"xn--mk1bu44c":!0,"xn--ngbc5azd":!0,"xn--ngbe9e0a":!0,"xn--node":!0,"xn--nqv7f":!0,"xn--nyqy26a":!0,"xn--o3cw4h":!0,"xn--ogbpf8fl":!0,"xn--otu796d":!0,"xn--p1acf":!0,"xn--p1ai":!0,"xn--pgbs0dh":!0,"xn--q7ce6a":!0,"xn--q9jyb4c":!0,"xn--qxa6a":!0,"xn--qxam":!0,"xn--rhqv96g":!0,"xn--rovu88b":!0,"xn--rvc1e0am3e":!0,"xn--s9brj9c":!0,"xn--ses554g":!0,"xn--t60b56a":!0,"xn--tckwe":!0,"xn--unup4y":!0,"xn--vermgensberatung-pwb":!0,"xn--vhquv":!0,"xn--vuq861b":!0,"xn--wgbh1c":!0,"xn--wgbl6a":!0,"xn--xhq521b":!0,"xn--xkc2al3hye2a":!0,"xn--xkc2dl3a5ee0h":!0,"xn--y9a3aq":!0,"xn--yfro4i67o":!0,"xn--ygbi2ammx":!0,"xn--zfr164b":!0,xxx:!0,xyz:!0,yachts:!0,yahoo:!0,yandex:!0,ye:!0,yodobashi:!0,yoga:!0,yokohama:!0,youtube:!0,yt:!0,za:!0,zappos:!0,zara:!0,zip:!0,zm:!0,zone:!0,zuerich:!0,zw:!0,\u30BB\u30FC\u30EB:!0,\u4F5B\u5C71:!0,\u0CAD\u0CBE\u0CB0\u0CA4:!0,\u96C6\u56E2:!0,\u5728\u7EBF:!0,\uD55C\uAD6D:!0,\u0B2D\u0B3E\u0B30\u0B24:!0,\u09AD\u09BE\u09F0\u09A4:!0,\u09AD\u09BE\u09B0\u09A4:!0,\u516B\u5366:!0,\u05D9\u05E9\u05E8\u05D0\u05DC:!0,\u0645\u0648\u0642\u0639:!0,\u09AC\u09BE\u0982\u09B2\u09BE:!0,\u516C\u53F8:!0,\u7F51\u7AD9:!0,\u79FB\u52A8:!0,\u6211\u7231\u4F60:!0,\u043C\u043E\u0441\u043A\u0432\u0430:!0,\u049B\u0430\u0437:!0,\u043E\u043D\u043B\u0430\u0439\u043D:!0,\u0441\u0430\u0439\u0442:!0,\u8054\u901A:!0,\u0441\u0440\u0431:!0,\u0431\u0433:!0,\u0431\u0435\u043B:!0,\u05E7\u05D5\u05DD:!0,\u30D5\u30A1\u30C3\u30B7\u30E7\u30F3:!0,\u043E\u0440\u0433:!0,\u30B9\u30C8\u30A2:!0,\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD:!0,\u5546\u6807:!0,\u5546\u5E97:!0,\u5546\u57CE:!0,\u0434\u0435\u0442\u0438:!0,\u043C\u043A\u0434:!0,\u0435\u044E:!0,\u5BB6\u96FB:!0,\u4E2D\u6587\u7F51:!0,\u4E2D\u4FE1:!0,\u4E2D\u56FD:!0,\u4E2D\u570B:!0,\u5A31\u4E50:!0,\u0C2D\u0C3E\u0C30\u0C24\u0C4D:!0,\u0DBD\u0D82\u0D9A\u0DCF:!0,\u8D2D\u7269:!0,\u30AF\u30E9\u30A6\u30C9:!0,\u0AAD\u0ABE\u0AB0\u0AA4:!0,\u092D\u093E\u0930\u0924\u092E\u094D:!0,\u092D\u093E\u0930\u0924:!0,\u092D\u093E\u0930\u094B\u0924:!0,\u7F51\u5E97:!0,\u0938\u0902\u0917\u0920\u0928:!0,\u9910\u5385:!0,\u7F51\u7EDC:!0,\u0443\u043A\u0440:!0,\u9999\u6E2F:!0,\u98DF\u54C1:!0,\u98DE\u5229\u6D66:!0,\u53F0\u6E7E:!0,\u53F0\u7063:!0,\u624B\u673A:!0,\u043C\u043E\u043D:!0,\u0627\u0644\u062C\u0632\u0627\u0626\u0631:!0,\u0639\u0645\u0627\u0646:!0,\u0627\u06CC\u0631\u0627\u0646:!0,\u0627\u0645\u0627\u0631\u0627\u062A:!0,\u0628\u0627\u0632\u0627\u0631:!0,\u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627:!0,\u067E\u0627\u06A9\u0633\u062A\u0627\u0646:!0,\u0627\u0644\u0627\u0631\u062F\u0646:!0,\u0628\u0627\u0631\u062A:!0,\u0627\u0644\u0645\u063A\u0631\u0628:!0,\u0627\u0628\u0648\u0638\u0628\u064A:!0,\u0627\u0644\u0628\u062D\u0631\u064A\u0646:!0,\u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629:!0,\u0680\u0627\u0631\u062A:!0,\u0633\u0648\u062F\u0627\u0646:!0,\u0639\u0631\u0627\u0642:!0,\u6FB3\u9580:!0,\uB2F7\uCEF4:!0,\u0634\u0628\u0643\u0629:!0,\u0628\u064A\u062A\u0643:!0,\u10D2\u10D4:!0,\u673A\u6784:!0,\u5065\u5EB7:!0,\u0E44\u0E17\u0E22:!0,\u0633\u0648\u0631\u064A\u0629:!0,\u62DB\u8058:!0,\u0440\u0443\u0441:!0,\u0440\u0444:!0,\u062A\u0648\u0646\u0633:!0,\u0EA5\u0EB2\u0EA7:!0,\u307F\u3093\u306A:!0,\u03B5\u03C5:!0,\u03B5\u03BB:!0,\u4E16\u754C:!0,\u66F8\u7C4D:!0,\u0D2D\u0D3E\u0D30\u0D24\u0D02:!0,\u0A2D\u0A3E\u0A30\u0A24:!0,\u7F51\u5740:!0,\uB2F7\uB137:!0,\u30B3\u30E0:!0,\u6E38\u620F:!0,verm\u00F6gensberatung:!0,\u4F01\u4E1A:!0,\u4FE1\u606F:!0,\u0645\u0635\u0631:!0,\u0642\u0637\u0631:!0,\u5E7F\u4E1C:!0,\u0B87\u0BB2\u0B99\u0BCD\u0B95\u0BC8:!0,\u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE:!0,\u0570\u0561\u0575:!0,\u65B0\u52A0\u5761:!0,\u0641\u0644\u0633\u0637\u064A\u0646:!0,\u653F\u52A1:!0,onion:!0},RE={PROTOCOL:"([a-z][-a-z*]+://)?",USER:"(?:([\\w:.+-]+)@)?",DOMAIN_UNI:`([a-z0-9-.\\u00A0-\\uFFFF]+\\.[a-z0-9-${chars}]{1,${maxLength}})`,DOMAIN:`([a-z0-9-.]+\\.[a-z0-9-]{1,${maxLength}})`,PORT:"(:\\d+\\b)?",PATH_UNI:"([/?#]\\S*)?",PATH:"([/?#][\\w-.~!$&*+;=:@%/?#(),'\\[\\]]*)?"},TLD_TABLE=table;function regexEscape(e){return e.replace(/[[\]\\^-]/g,"\\$&")}function buildRegex({unicode:e=!1,customRules:t=[],standalone:r=!1,boundaryLeft:u,boundaryRight:n}){var i=RE.PROTOCOL+RE.USER;e?i+=RE.DOMAIN_UNI+RE.PORT+RE.PATH_UNI:i+=RE.DOMAIN+RE.PORT+RE.PATH,t.length?i="(?:("+t.join("|")+")|"+i+")":i="()"+i;var s,a,c;return r?(u?s="((?:^|\\s)["+regexEscape(u)+"]*?)":s="(^|\\s)",n?a="(["+regexEscape(n)+"]*(?:$|\\s))":a="($|\\s)",c="[^\\s"+regexEscape(n)+"]"):(s="(^|\\b|_)",a="()"),i=s+i+a,{url:new RegExp(i,"igm"),invalidSuffix:c&&new RegExp(c),mustache:/\{\{[\s\S]+?\}\}/g}}function pathStrip(e,t,r){var u=e.path.replace(t,r);u!=e.path&&(e.end-=e.path.length-u.length,e.suffix=e.path.slice(u.length)+e.suffix,e.path=u)}function pathStripQuote(e,t){var r=0,u=e.path,n,i=0;if(u.endsWith(t)){for(;(i=u.indexOf(t,i))>=0;)r%2?n=null:n=i,i++,r++;n&&(e.end-=u.length-n,e.path=u.slice(0,n),e.suffix=u.slice(n)+e.suffix)}}function pathStripBrace(e,t,r){for(var u=e.path,n=new RegExp("[\\"+t+"\\"+r+"]","g"),i,s=0,a;i=n.exec(u);){if(s%2==0){if(a=i.index,i[0]==r)break}else if(i[0]==t)break;s++}!i&&s%2==0||(e.end-=e.path.length-a,e.path=u.slice(0,a),e.suffix=u.slice(a)+e.suffix)}function isIP(e){var t,r;if(!(t=e.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/)))return!1;for(r=1;r<t.length;r++)if(+t[r]>255||t[r].length>1&&t[r][0]=="0")return!1;return!0}function inTLDS(e){var t=e.match(/\.([^.]+)$/);if(!t)return!1;var r=t[1].toLowerCase();return TLD_TABLE.hasOwnProperty(r)}class UrlMatcher{constructor(t={}){this.options=t,this.regex=buildRegex(t)}*match(t){var{fuzzyIp:r=!0,ignoreMustache:u=!1,mail:n=!0}=this.options,{url:i,invalidSuffix:s,mustache:a}=this.regex,c,f;a.lastIndex=0,i.lastIndex=0;var p,m;u&&(p=a.exec(t),p&&(m={start:p.index,end:a.lastIndex}));for(var g;g=i.exec(t);){const l={start:0,end:0,text:"",url:"",prefix:g[1],custom:g[2],protocol:g[3],auth:g[4]||"",domain:g[5],port:g[6]||"",path:g[7]||"",suffix:g[8]};if(l.custom?(l.start=g.index,l.end=i.lastIndex,l.text=l.url=g[0]):(l.start=g.index+l.prefix.length,l.end=i.lastIndex-l.suffix.length),m&&m.end<=l.start&&(p=a.exec(t),p?(m.start=p.index,m.end=a.lastIndex):m=null),!(m&&l.start<m.end&&l.end>=m.start)){if(!l.custom){if(l.path&&(pathStrip(l,/\[\/?(b|i|u|url|img|quote|code|size|color)\].*/i,""),pathStripBrace(l,"(",")"),pathStripBrace(l,"[","]"),pathStripBrace(l,"{","}"),pathStripQuote(l,"'"),pathStripQuote(l,'"'),pathStrip(l,/(^|[^-_])[.,?]+$/,"$1")),s&&s.test(l.suffix)){/\s$/.test(l.suffix)&&i.lastIndex--;continue}if(!r&&isIP(l.domain)&&!l.protocol&&!l.auth&&!l.path)continue;if(!l.protocol&&l.auth){var x=l.auth.match(/^mailto:(.+)/);x&&(l.protocol="mailto:",l.auth=x[1])}if(l.protocol&&l.protocol.match(/^(hxxp|h\*\*p|ttp)/)&&(l.protocol="http://"),!l.protocol){var w;(w=l.domain.match(/^(ftp|irc)/))?l.protocol=w[0]+"://":l.domain.match(/^(www|web)/)?l.protocol="http://":l.auth&&l.auth.indexOf(":")<0&&!l.path?l.protocol="mailto:":l.protocol="http://"}if(!n&&l.protocol==="mailto:")continue;if(!isIP(l.domain)){if(/^(http|https|mailto)/.test(l.protocol)&&!inTLDS(l.domain))continue;const b=getInvalidLabel(l.domain);if(b){i.lastIndex=g.index+b.index+1;continue}}l.url=l.protocol+(l.auth&&l.auth+"@")+l.domain+l.port+l.path,l.text=t.slice(l.start,l.end)}f=a.lastIndex,c=i.lastIndex,yield l,i.lastIndex=c,a.lastIndex=f}}}}function getInvalidLabel(e){let t=0;const r=e.split(".");for(const u of r){if(!u||u.startsWith("-")||u.endsWith("-"))return{index:t,value:u};t+=u.length+1}}var INVALID_TAGS={a:!0,noscript:!0,option:!0,script:!0,style:!0,textarea:!0,svg:!0,canvas:!0,button:!0,select:!0,template:!0,meter:!0,progress:!0,math:!0,time:!0};class Pos{constructor(t,r,u=0){this.container=t,this.offset=r,this.i=u}add(t){var r=this.container,u=this.offset;for(this.i+=t,r.childNodes.length&&(r=r.childNodes[u],u=0);r;){if(r.nodeType==3){if(r.LEN||(r.LEN=r.nodeValue.length),u+t<=r.LEN){this.container=r,this.offset=u+t;return}t=u+t-r.LEN,u=0}r=r.nextSibling}}moveTo(t){this.add(t-this.i)}}function cloneContents(e){return e.startContainer==e.endContainer?document.createTextNode(e.toString()):e.cloneContents()}var DEFAULT_OPTIONS={maxRunTime:100,timeout:1e4,newTab:!0,noOpener:!0,embedImage:!0,recursive:!0};class Linkifier extends EventLite{constructor(t,r={}){super(),t instanceof Node||(r=t,t=r.root),this.root=t,this.options=Object.assign({},DEFAULT_OPTIONS,r),this.aborted=!1}start(){var t=Date.now,r=t(),u=this.generateChunks(),n=()=>{if(this.aborted){this.emit("error",new Error("Aborted"));return}var i=t(),s;do if(u.next().done){this.emit("complete",t()-r);return}while((s=t())-i<this.options.maxRunTime);if(s-r>this.options.timeout){this.emit("error",new Error(`max execution time exceeded: ${s-r}, on ${this.root}`));return}setTimeout(n)};setTimeout(n)}abort(){this.aborted=!0}*generateRanges(){var{validator:t,recursive:r}=this.options,u={acceptNode:function(f){return t&&!t(f)||INVALID_TAGS[f.localName]?NodeFilter.FILTER_REJECT:f.localName=="wbr"||f.nodeType==3?NodeFilter.FILTER_ACCEPT:r?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_REJECT}},n=document.createTreeWalker(this.root,NodeFilter.SHOW_TEXT+NodeFilter.SHOW_ELEMENT,u),i,s,a,c;if(s=i=n.nextNode(),!!i){for(c=document.createRange(),c.setStartBefore(i);a=n.nextNode();){if(s.nextSibling==a){s=a;continue}c.setEndAfter(s),yield c,s=i=a,c.setStartBefore(i)}c.setEndAfter(s),yield c}}*generateChunks(){var{matcher:t}=this.options;for(var r of this.generateRanges()){var u=null,n=null,i=r.toString(),s=null;for(var a of t.match(i)){u||(u=document.createDocumentFragment(),n=new Pos(r.startContainer,r.startOffset),s=r.cloneRange()),n.moveTo(a.start),s.setEnd(n.container,n.offset),u.appendChild(cloneContents(s)),s.collapse(),n.moveTo(a.end),s.setEnd(n.container,n.offset);var c=cloneContents(s),f=this.buildLink(a,c);s.collapse(),u.appendChild(f),this.emit("link",{link:f,range:r,result:a,content:c})}n&&(n.moveTo(i.length),s.setEnd(n.container,n.offset),u.appendChild(cloneContents(s)),r.deleteContents(),r.insertNode(u)),yield}}buildLink(t,r){var{newTab:u,embedImage:n,noOpener:i}=this.options,s=document.createElement("a");s.href=t.url,s.title="Linkify Plus Plus",s.className="linkifyplus",u&&(s.target="_blank"),i&&(s.rel="noopener");var a;return n&&/^[^?#]+\.(?:jpg|jpeg|png|apng|gif|svg|webp)(?:$|[?#])/i.test(t.url)?(a=new Image,a.src=t.url,a.alt=t.text):a=r,s.appendChild(a),s}}function linkify(...e){return new Promise((t,r)=>{var u=new Linkifier(...e);u.on("error",r),u.on("complete",t);for(var n of Object.keys(u.options))n.startsWith("on")&&u.on(n.slice(2),u.options[n]);u.start()})}const processedNodes=new WeakSet,nodeValidationCache=new WeakMap;async function linkifyRoot(e,t,r=!0){if(validRoot(e,t.validator)&&(processedNodes.add(e),await linkify({...t,root:e,recursive:!0})),t.includeElement&&r)for(const u of e.querySelectorAll(t.includeElement))await linkifyRoot(u,t,!1)}function validRoot(e,t){if(processedNodes.has(e))return!1;return r(e);function r(u){if(!u.parentNode)return!1;let n=nodeValidationCache.get(u);return n===void 0&&(t.isIncluded(u)?n=!0:t.isExcluded(u)?n=!1:u.parentNode!=document.documentElement?n=r(u.parentNode):n=!0,nodeValidationCache.set(u,n)),n}}function prepareDocument(){return t().then(e);function e(){const r=document.querySelector("[data-server-rendered]");if(r)return new Promise(u=>{const n=()=>{r.hasAttribute("data-server-rendered")||(u(),i.disconnect())},i=new MutationObserver(n);i.observe(r,{attributes:!0})})}function t(){return document.readyState!=="loading"?Promise.resolve():new Promise(r=>{document.addEventListener("DOMContentLoaded",r,{once:!0})})}}var load={key:"triggerByPageLoad",enable:async e=>{await prepareDocument(),await linkifyRoot(document.body,e)},disable:()=>{}};let options$1;const EVENTS$1=[["click",handle$1,{passive:!0}]];function handle$1(e){const t=e.target;validRoot(t,options$1.validator)&&(processedNodes.add(t),linkify({...options$1,root:t,recursive:!1}))}function enable$2(e){options$1=e;for(const[t,r,u]of EVENTS$1)document.addEventListener(t,r,u)}function disable$2(){for(const[e,t,r]of EVENTS$1)document.removeEventListener(e,t,r)}var click={key:"triggerByClick",enable:enable$2,disable:disable$2};let options;const EVENTS=[["mousemove",handle,{passive:!0,once:!0}],["mouseover",handle,{passive:!0}]];function handle(e){const t=e.target;validRoot(t,options.validator)&&(processedNodes.add(t),linkify({...options,root:t,recursive:!1}))}function enable$1(e){options=e;for(const[t,r,u]of EVENTS)document.addEventListener(t,r,u)}function disable$1(){for(const[e,t,r]of EVENTS)document.removeEventListener(e,t,r)}var hover={key:"triggerByHover",enable:enable$1,disable:disable$1};const MAX_PROCESSES=100;let processes=0,observer;async function enable(e){await prepareDocument(),observer=new MutationObserver(function(t){var r=t[t.length-1],u=r.addedNodes,n;if(u.length>=2){for(n=0;n<2;n++)if(u[n].className=="linkifyplus")return}for(var i of t)for(const s of i.addedNodes)if(s.nodeType===1&&!processedNodes.has(s)){if(processes>=MAX_PROCESSES)throw new Error("Too many processes");processes++,linkifyRoot(s,e).finally(()=>{processes--})}}),observer.observe(document.body,{childList:!0,subtree:!0})}async function disable(){await prepareDocument(),observer&&observer.disconnect()}var mutation={key:"triggerByNewNode",enable,disable},triggers=[load,click,hover,mutation];function createValidator({includeElement:e,excludeElement:t}){const r=function(u){if(processedNodes.has(u)||u.isContentEditable)return!1;if(u.matches){if(e&&u.matches(e))return!0;if(t&&u.matches(t))return!1}return!0};return r.isIncluded=u=>e&&u.matches(e),r.isExcluded=u=>INVALID_TAGS[u.localName]?!0:t&&u.matches(t),r}function stringToList(e){return e=e.trim(),e?e.split(/\s*\n\s*/g):[]}function createOptions(e){const t={};return e.on("change",r),r(e.getAll()),t;function r(n){Object.assign(t,n),t.validator=createValidator(t),typeof t.customRules=="string"&&(t.customRules=stringToList(t.customRules)),t.matcher=new UrlMatcher(t),t.onlink=t.embedImageExcludeElement?u:null}function u({link:n,range:i,content:s}){if(!(n.childNodes[0].localName!=="img"||!t.embedImageExcludeElement)){var a=i.startContainer;a.closest||(a=a.parentNode),a.closest(t.embedImageExcludeElement)&&(n.innerHTML="",n.appendChild(s))}}}async function startLinkifyPlusPlus(e){if(document.contentType&&!["text/plain","text/html","application/xhtml+xml"].includes(document.contentType))return;const t=await e(),r=createOptions(t);for(const u of triggers)t.get(u.key)&&u.enable(r);t.on("change",u=>{for(const n of triggers)u[n.key]===!0&&n.enable(r),u[n.key]===!1&&n.disable()})}function getMessageFactory(){return(e,t)=>t?(Array.isArray(t)||(t=[t]),translate[e].replace(/\$\d/g,r=>{const u=Number(r.slice(1));return t[u-1]})):translate[e]}startLinkifyPlusPlus(async()=>{const e=getMessageFactory(),t=GM_webextPref({default:prefDefault(),body:prefBody(e),getMessage:e,getNewScope:()=>location.hostname});return await t.ready(),await t.setCurrentScope(location.hostname),t});
