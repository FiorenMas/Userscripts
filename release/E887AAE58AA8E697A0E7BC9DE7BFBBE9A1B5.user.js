// ==UserScript==
// @name         AutoPager
// @version      6.6.58
// @author       X.I.U
// @match        *://*/*
// @connect      userscript.xiu2.xyz
// @connect      userscript.h233.eu.org
// @connect      bitbucket.org
// @connect      jsd.onmicrosoft.cn
// @connect      wget.la
// @connect      cdn.wget.la
// @connect      ghfast.top
// @connect      raw.ixnic.net
// @connect      ghproxy.cfd
// @connect      raw.github.site
// @connect      raw.github.store
// @connect      raw.dgithub.xyz
// @connect      gh-proxy.ygxz.in
// @connect      ghproxy.net
// @connect      github.moeyy.xyz
// @connect      github.7boe.top
// @connect      github.starrlzy.cn
// @connect      cdn.jsdmirror.com
// @connect      js.cdn.haah.net
// @connect      gh.akass.cn
// @connect      raw.kkgithub.com
// @connect      gcore.jsdelivr.net
// @connect      fastly.jsdelivr.net
// @connect      jsd.proxy.aks.moe
// @connect      jsdelivr.pai233.top
// @connect      gh-proxy.com
// @connect      www.xuexiniu.com
// @connect      bbs.xuexiniu.com
// @connect      weili.ooopic.com
// @connect      www.ykmh.com
// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAALfElEQVRYhX2Xe3Bd1XXGf3vvc859X+nq6nUlW5Yly7JlI2xsYzAwtnk4ATpAxkNTHm0mnaTT/gHTTvrIBDLTpp1JUoZppqHQls5AKTR2INOWJJQSXF4x2BhsJCRZ8kuWZckPSVf3/Trn7N3RVTFpQrNn1l97n7O/vda31reWMKMPcmUJA9U8vrwHGdqCHn4HPzePaIxhVSoYbYRXrn7BeMVbCUduF6kVUXHwvQP+6amDaqDnoIompmQytaBnTmB8H5lowrjgFss48SBeI/hUEEZeudLi1ywhJEIJdL6Q8rzal/1a5SGC4XZrYBvWwEZobMdLdH6RH+z/Io1taEeh52fe8tOZbysl/ouWFvANYP7fSz4DgAEBBIL4xiS8ubmnVcTZK68aRK29Dtm8dgnZJydRW+/E2nrnp19nz+7U77+60zt0qMz07J/KxuQTwrIw4rMBCDP6wC+FIIcO34eudDdXf/7jD52Opi772lugY3AZr++hp06gz48j+waRqTWYmVHcS+chEMFeuw1hBzBzY7g/fQE9fmqBYPzBQKrpVa/R4OkCAnXlSvXnX9sIllk220BE4Z8OdHoj54YCK6Od1i2/iUmuRyDRk6NUn3+M0pv/hnf0AE40jEjEqP3oe6Rf/CGOWUTNjFKby2MP7EBtugURFWFxfOhB4+o4yfhrGAdZsxHaqZt6dNce9KXYFSPfGWS68JFqTXSqO7+MCaTqETGTwxSeeoRCOoPT2YUIhFC2jbQF/uwUatU6rPbVUM5T+OfHUO3dWKv6kSsGUIOD6PEPr+fswnanpecFZYVQhFAyjPS9Tj4xw2rcU+pJApEutWsvRjaBW8NUShilkE1JIqlUPfi6VMLNFTBVr+7KYKqJ8uEjlM+dJrR5K0L7eB+9hTd2CFrWYt33h0jH3O5Nj37TBGtgZUBkUN/6q4dQ7UmsnlW450//gU5PPRq460uQXAu+j//i99A/+UdUMoXqbMNkz2OnUkixlF4u9spe/HMTULyEaA7jXkoT2fEbQIXi838DJ4cRDXHkEjc2b0MPHdptZubGpBUbM0UfKQpBRDmKWRSD3tTMk87gddA2WGe4+dkzMD0CyQ5qP/4XVDCAvfkaLMvHamzEClpQzGDF46iuJOH1CaKr2tDZRfzhQ0Ru24NYsYrCM4/jDb+FiHdi3XU/0s3vr7WsGKxcfyPSy+bxi0UqJ8f/IriiE2vrnuWsLefQk8NoO4AMBBB9/XjDI6hQCjdTxq9WCaQ6ULaDFrIeKr3oIlv70Olz2K1xlAVaSUQojD786nKi9e5A3LBHMHn0W+LUUaS1FI9q+iZZWLhHdq/FxFbWSSfsIDIQwVw4g/GK2OuuhloNMzaCaF+DNBJtQfX8LFYigElX0OkQtZKHVy3jqwDlqWncCzPI3nU4t+2FWrH+OLHzHpRl3109memTOhqDi9NfkefHEKvWLTO+VKD68Qf4G27CueFWhJ/Df+0lVFcXJOJYnobm1ZjsJUxuFjyDjK/GNK2gND4ESuDPXcCOSaI7thPqX0ft8OtUn/oTKOQgkET39KJU4RbpZXOtNRW717p+FyRSdYT+v36H4u/fQXbfc3iRDkT3FsTGjWAWEU0OZKfAU9CyEdXVD2lQPduplmo4jkBEbMzK1VgDu5EVTe3gm1RHx6Bcxpz6YLkEO0lMYeFGi6z7eVMqhkT/ZrCb0LNT+NMTRH/nt/BLRdy3X8Nv68Lu6cZEHURjE6K3hirYeLRhDWyA4jxzH40RXJwkeuM29MpN+JcziEsz+Avz6GgcW1pYbUlEQCyHwYpSyxS7rGo+v8man4ZMATrAHf+QSt7FTkWR4QbsjlbIX8IMH0VuuAqj4piGAbhmEPPzI/injnNxMUPuwOtseOIxKKTJ7/8BTBxDdXcjO9sJdTeg01VqH4wg3CDB9bshHMKORbGolVOmeRW09dVdUxkbp3ruNM7GXnS1hK5OYSoSbBDZBcxCBtF3DcUzk6hkhGA0RmtHKx1rOkE04lbzWC1tqMRt1CZHUafPIs8H6/JsNTcgN+9YFq1qgbBUFUvnK9qrVghXCvWN8MBmivueJDtylqaeBKWJaXR4JZEtNyBWrkGt6AJboCZO4J49Rc64xGIhcgtZgm6egKhgtUQQto17WeHOLqCNj5Vowbr7q4j+Lcs1JhhEphcXLTebd0jPwpkx6Lwa++bbCR95ALecp5a6BrvrJoLdHajmMOTnKb3+BrVMntjARpzeFbz8jcfpa22gGm+kMJlm95Zu9M9+iI5G0G3d6EgIUSnjzs/gv/Icgd6rqcvz0IeYWnXc8pEtYnEe8gtXNL7xz74LehHSE3DqNP7EIdx3p5DSh7JNJePiBE/gN3Uz8NWHae5sRJYXqKQvU+raQPg7L6L3/QNMHcfp6EREGjC5LDp9GaOs5VQ/NQI93YctOxFPlwniDh/C3n47JHvrQPTBl3DHjiIDQUQ4jGhOYcqaQFuE0Nl53OnLRHfsZV33KsTxd6GlHeaP477zMl5uAWv7dkyLg6kZREsb+vgCcvPOuoaYuWNQWERs3jAuQ6nooXK6TH566cXnrjQK7uwFaoseWA3oJf2WEhEJUjm/gMgXCfdvQlFFv/R3uCND6FIRv7MfMnOIiaPoI/8NEb2kWAhfoLbdjLr2jmUv/8f+pVbkHRGNnZHum2/udxxtCn4j/vgEIjNTD4O9upfIprUYoxBKo9Z14jumTq7YYD9WayvuR++hs1lkshmha4iuNeDYiIAFMoCevIi+cJHaa29gmvsRTUn0R29g9u1D7bxxv+jrRnpD56cCkdjfV9NzpA+8A5VlLojWAczlGVTAYKXimIU8MlsjtKEXgiF0aRGdm8cEYnXm+O+/gdAGuWsP3shhTHoOEYqCCEF2DsrF5f+e/xiikUldrT6l3z+GevSaTahaZdRY6uFqxRXR1sRyzU/21Gu6OTOMfzmPd6kI8TgiX8B4imouj1QCKmVUNITJ59AnR1F77kH4ZaRnQFroMyeRW3egdt6DwIX391Gshv+4LK2jtcuLqK9t7ALjZXzH1uVM/mb/7BTRnjZEex+idQ2EAnjjR/BdF1PIoV2Bae/F/fh9dL5IYE0XUmpMNo+ev4AINSJWb0UPHa63Z7SvRN3/CHJpFHj2G4iZzAuBbTu+GWpIEGxrQ/3RnlvxG5M4kYa3Lc2u4uyFblnIE+xfAbF2RMtqZGsn/uTYUgHH+dz9eFMnqYx8gO+CEwkjhcDPF/DLHurSaeTm3RiWMsDHeuDrSFvBv3+bi08+N1Vwuj/vZWtu+dwclZlFrESoeZmZysJXoTsCjnVk8dDQBuN+n8RDD9fbcdG7leBX1iOkQjhBOHmQfKGAHW3CS6fR+QClmYuYMyPY265DtPVgtfctiw4V/GcfYfGNQzj3/u4DqlormUoZEQwuc0I//eSnY4G0wPJjmdGhw+mh0fWxNZ0037cXccPd1MXgk+GjNE/tR3+Le+YEyg5TnT6LXlwgcu1u7C99HZlsv3K2+vjvkTs2RvDe3747tm7Dy1SKvzSYPP/MLwxFAkIKEzEye2zswOXX395lJyK0fOFzRHfuglQfqPin59Nn0RNDuJk09vprkd0brmx5H7xCbfgQbrZ83OkfvN1pj0+ZmkBYNhjzCwCeffr/AsBDJyU6kqBwbPzRuTcP/GXV82lYlaJpfQ+BjVdhXX0tNKTAjvzKqKXPTeC++1NKY0c9kVz1SGzb9X8tjIdfzSFCDfUw/noA0scPuxBrwcvmmH3rQIvMm3/y0XdJS4JfIpiIUG9g+wcg6KDnZpGZNDQ0Ii5cSAtlPRHYct13axWvJNwadiiAli4iEP8VAJ89HQtR129TLiG1nos0Nt8dSOi12qi9lRq3utVqT/lirql24hW3vLBQi3d3XUqu73+PZOonBNR/WnbYSMeGTO5/Xf6ZtwDwPwtFRezQVs+sAAAAAElFTkSuQmCC
// @grant        GM_xmlhttpRequest
// @grant        GM_registerMenuCommand
// @grant        GM_unregisterMenuCommand
// @grant        GM_openInTab
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_notification
// @grant        GM_info
// @grant        GM.info
// @grant        window.onurlchange
// @grant        unsafeWindow
// @sandbox      JavaScript
// @license      GPL-3.0 License
// @run-at       document-end
// @namespace    https://github.com/XIU2/UserScript
// @supportURL   https://github.com/XIU2/UserScript
// @homepageURL  https://github.com/XIU2/UserScript
// @exclude      https://*.taobao.com/*
// @exclude      https://*.tmall.com/*
// @exclude      https://*.1688.com/*
// @exclude      https://*.jd.com/*
// @exclude      https://*.vip.com/*
// @exclude      https://*.suning.com/*
// @exclude      https://*.aliexpress.com/*
// @exclude      https://*.paypal.com/*
// @exclude      https://*.iqiyi.com/*
// @exclude      https://*.youku.com/*
// @exclude      https://m.v.qq.com/*
// @exclude      https://v.qq.com/*
// @exclude      https://*.acfun.cn/*
// @exclude      https://t.bilibili.com/*
// @exclude      https://www.bilibili.com/*
// @exclude      https://live.bilibili.com/*
// @exclude      https://space.bilibili.com/*
// @exclude      https://manga.bilibili.com/*
// @exclude      https://member.bilibili.com/*
// @exclude      https://message.bilibili.com/*
// @exclude      https://*.youtube.com/*
// @exclude      https://*.youtube-nocookie.com/*
// @exclude      https://*.cnki.net/*
// @exclude      https://mail.qq.com/*
// @exclude      https://weread.qq.com/*
// @exclude      https://*.weread.qq.com/*
// @exclude      https://www.qidian.com/chapter/*
// @exclude      https://bz.zzzmh.cn/*
// @exclude      https://wallhaven.cc/*
// @exclude      https://chrome.zzzmh.cn/*
// @exclude      https://*.guazi.com/*
// @exclude      https://*.liepin.com/*
// @exclude      https://*.58.com/*
// @downloadURL https://raw.githubusercontent.com/FiorenMas/Userscripts/release/release/E887AAE58AA8E697A0E7BC9DE7BFBBE9A1B5.user.js
// @updateURL https://raw.githubusercontent.com/FiorenMas/Userscripts/release/release/E887AAE58AA8E697A0E7BC9DE7BFBBE9A1B5.meta.js
// ==/UserScript==
(function(){"use strict";let urlArr=["https://github.7boe.top/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json","https://github.starrlzy.cn/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json","https://cdn.jsdmirror.com/gh/XIU2/UserScript/other/Autopage/rules.json","https://js.cdn.haah.net/gh/XIU2/UserScript/other/Autopage/rules.json","https://gh.akass.cn/XIU2/UserScript/master/other/Autopage/rules.json","https://raw.kkgithub.com/XIU2/UserScript/master/other/Autopage/rules.json","https://fastly.jsdelivr.net/gh/XIU2/UserScript/other/Autopage/rules.json","https://jsdelivr.pai233.top/gh/XIU2/UserScript/other/Autopage/rules.json","https://gh-proxy.com/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json"];const urlArr2=["https://userscript.h233.eu.org/other/Autopage/rules.json","https://userscript.xiu2.xyz/other/Autopage/rules.json","https://bitbucket.org/xiu2/userscript/raw/master/other/Autopage/rules.json","https://jsd.onmicrosoft.cn/gh/XIU2/UserScript/other/Autopage/rules.json","https://wget.la/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json","https://cdn.wget.la/gh/XIU2/UserScript/other/Autopage/rules.json","https://ghfast.top/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json","https://ghproxy.cfd/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json","https://raw.dgithub.xyz/XIU2/UserScript/master/other/Autopage/rules.json","https://gh-proxy.ygxz.in/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json","https://ghproxy.net/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json","https://github.moeyy.xyz/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json"],loadMoreExclude1=[".smzdm.com","stackoverflow.com"],loadMoreExclude2=[".steampowered.com",".zcool.com.cn"];var menuAll=[["menu_disable","\u2705 \u5DF2\u542F\u7528 (\u70B9\u51FB\u5BF9\u5F53\u524D\u7F51\u7AD9\u7981\u7528)","\u274C \u5DF2\u7981\u7528 (\u70B9\u51FB\u5BF9\u5F53\u524D\u7F51\u7AD9\u542F\u7528)",[]],["menu_thread","\u5E16\u5B50\u5185\u81EA\u52A8\u7FFB\u9875 (\u793E\u533A\u7C7B\u7F51\u7AD9)","\u5E16\u5B50\u5185\u81EA\u52A8\u7FFB\u9875 (\u793E\u533A\u7C7B\u7F51\u7AD9)",!0],["menu_page_number","\u663E\u793A\u5F53\u524D\u9875\u7801\u53CA\u70B9\u51FB\u6682\u505C\u7FFB\u9875","\u663E\u793A\u5F53\u524D\u9875\u7801\u53CA\u70B9\u51FB\u6682\u505C\u7FFB\u9875",!0],["menu_pause_page","\u5DE6\u952E\u53CC\u51FB\u7F51\u9875\u7A7A\u767D\u5904\u6682\u505C\u7FFB\u9875","\u5DE6\u952E\u53CC\u51FB\u7F51\u9875\u7A7A\u767D\u5904\u6682\u505C\u7FFB\u9875",!1],["menu_history","\u6DFB\u52A0\u5386\u53F2\u8BB0\u5F55+\u4FEE\u6539\u5730\u5740/\u6807\u9898","\u6DFB\u52A0\u5386\u53F2\u8BB0\u5F55+\u4FEE\u6539\u5730\u5740/\u6807\u9898",!0],["menu_rules","\u66F4\u65B0\u5916\u7F6E\u7FFB\u9875\u89C4\u5219 (\u5B9A\u671F\u81EA\u52A8)","\u66F4\u65B0\u5916\u7F6E\u7FFB\u9875\u89C4\u5219 (\u5B9A\u671F\u81EA\u52A8)",{}],["menu_customRules","\u81EA\u5B9A\u4E49\u7FFB\u9875\u89C4\u5219","\u81EA\u5B9A\u4E49\u7FFB\u9875\u89C4\u5219",{}]],menuId=[],webType=0,curSite={SiteTypeID:0},DBSite,DBSite2,DBSiteNow,pausePage=!0,pageNum={now:1,_now:1},urlC=!1,nowLocation="",lp=location.pathname,scriptHandler;urlArr.push(...urlArr2),window.autoPage={lp:()=>location.pathname,indexOF,isMobile,isUrlC,isPager,isTitle,blank:forceTarget,getAll,getOne,getAllXpath,getXpath,getAllCSS,getCSS,getNextE,getNextEP,getNextSP,getNextEPN,getNextUPN,getNextUP,getNextF,getSearch,getCookie,insStyle,insScript,cleanuEvent,src_bF,xs_bF,pageNumIncrement},typeof GM_info<"u"?scriptHandler=GM_info.scriptHandler:typeof GM<"u"&&typeof GM.info<"u"?scriptHandler=GM.info.scriptHandler:scriptHandler="";for(let t=0;t<menuAll.length;t++)GM_getValue(menuAll[t][0])==null&&GM_setValue(menuAll[t][0],menuAll[t][3]);if(typeof GM_openInTab!="function"&&(GM_openInTab=openInTab),typeof window.structuredClone!="function"&&(window.structuredClone=function(t){return JSON.parse(JSON.stringify(t))}),getRulesUrl(),registerMenuCommand(),menuId.length<4)return;function registerMenuCommand(){if(menuId.length!=[])for(let t=0;t<menuId.length;t++)GM_unregisterMenuCommand(menuId[t]);for(let t=0;t<menuAll.length;t++)if(menuAll[t][3]=GM_getValue(menuAll[t][0]),menuAll[t][0]==="menu_disable")if(menu_disable("check")){menuId[t]=GM_registerMenuCommand(`${menuAll[t][2]}`,function(){menu_disable("del")});return}else{if(webType=doesItSupport(),webType===0){menuId[0]=GM_registerMenuCommand("\u274C \u5F53\u524D\u7F51\u9875\u6682\u4E0D\u652F\u6301 [\u70B9\u51FB\u7533\u8BF7] (\u6216\u65E0\u9700\u7FFB\u9875)",function(){GM_openInTab("https://github.com/XIU2/UserScript#xiu2userscript",{active:!0,insert:!0,setParent:!0}),GM_openInTab("https://greasyfork.org/zh-CN/scripts/419215/feedback",{active:!0,insert:!0,setParent:!0})}),menuId[1]=GM_registerMenuCommand("\u{1F504} \u66F4\u65B0\u5916\u7F6E\u7FFB\u9875\u89C4\u5219 (\u5B9A\u671F\u81EA\u52A8)",function(){getRulesUrl(!0)}),menuId[2]=GM_registerMenuCommand("#\uFE0F\u20E3 \u81EA\u5B9A\u4E49\u7FFB\u9875\u89C4\u5219",function(){customRules()});return}else if(webType===-1)return;menuId[t]=GM_registerMenuCommand(`${menuAll[t][1]}`,function(){menu_disable("add")})}else menuAll[t][0]==="menu_rules"?menuId[t]=GM_registerMenuCommand(`\u{1F504} ${menuAll[t][1]}`,function(){getRulesUrl(!0)}):menuAll[t][0]==="menu_customRules"?menuId[t]=GM_registerMenuCommand(`#\uFE0F\u20E3 ${menuAll[t][1]}`,function(){customRules()}):menuId[t]=GM_registerMenuCommand(`${menuAll[t][3]?"\u2705":"\u274C"} ${menuAll[t][1]}`,function(){menu_switch(menuAll[t][3],menuAll[t][0],menuAll[t][2])});menuId[menuId.length]=GM_registerMenuCommand("\u{1F4AC} \u53CD\u9988\u5931\u6548 / \u7533\u8BF7\u652F\u6301",function(){GM_openInTab("https://github.com/XIU2/UserScript#xiu2userscript",{active:!0,insert:!0,setParent:!0}),GM_openInTab("https://greasyfork.org/zh-CN/scripts/419215/feedback",{active:!0,insert:!0,setParent:!0})})}function doesItSupport(){setDBSite();let t=!1;e:for(let e in DBSite)if(!DBSite[e].ignore){if(typeof DBSite[e].url=="function"?DBSiteNow=DBSite[e]:DBSiteNow=structuredClone(DBSite[e]),Array.isArray(DBSite[e].host)){for(let i of DBSite[e].host)if(typeof i=="string"&&i.slice(0,1)==="/"&&(i=new RegExp(i.slice(1,i.length-1))),i instanceof RegExp&&i.test(location.hostname)||typeof i=="string"&&i===location.hostname){if(self!=top&&!DBSite[e].iframe)continue e;if(DBSite[e].url)if(typeof DBSite[e].url=="function")DBSite[e].url();else try{if(DBSite[e].url.slice(0,1)==="/")if(new RegExp(DBSite[e].url.slice(1,DBSite[e].url.length-1),"i").test(location.pathname+location.search)===!0)curSite=DBSite[e];else{urlC===!0&&(t=!0);break}else if(new Function("fun","rule",DBSite[e].url)(window.autoPage,DBSiteNow))curSite=DBSiteNow;else{urlC===!0&&(t=!0);break}}catch(n){console.error(`[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u5F53\u524D\u7F51\u9875\u89C4\u5219 "url" \u5339\u914D\u51FA\u9519\uFF0C\u8BF7\u68C0\u67E5\uFF1A
`,DBSite[e].url+`

`,n)}else curSite=DBSite[e];t=!0;break e}}else if(typeof DBSite[e].host=="string"&&DBSite[e].host.slice(0,1)==="/"&&(DBSite[e].host=new RegExp(DBSite[e].host.slice(1,DBSite[e].host.length-1))),DBSite[e].host===void 0||DBSite[e].host instanceof RegExp&&DBSite[e].host.test(location.hostname)||typeof DBSite[e].host=="string"&&DBSite[e].host===location.hostname){if(self!=top&&!DBSite[e].iframe)continue;if(DBSite[e].url)if(typeof DBSite[e].url=="function")DBSite[e].url();else try{if(DBSite[e].url.slice(0,1)==="/")if(new RegExp(DBSite[e].url.slice(1,DBSite[e].url.length-1),"i").test(location.pathname+location.search)===!0)curSite=DBSite[e];else{urlC===!0&&(t=!0);continue}else if(new Function("fun","rule",DBSite[e].url)(window.autoPage,DBSiteNow))curSite=DBSiteNow;else{urlC===!0&&(t=!0);continue}}catch(i){console.error(`[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u5F53\u524D\u7F51\u9875\u89C4\u5219 "url" \u5339\u914D\u51FA\u9519\uFF0C\u8BF7\u68C0\u67E5\uFF1A
`,DBSite[e].url+`

`,i)}else curSite=DBSite[e];t=!0;break}}if(DBSiteNow=void 0,t)return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u72EC\u7ACB\u89C4\u5219 \u7F51\u7AD9"),1;if(self!=top)return-1;if(typeof discuz_uid<"u"||getCSS('meta[name="author" i][content*="Discuz!" i], meta[name="generator" i][content*="Discuz!" i], body[id="nv_forum" i][class^="pg_" i][onkeydown*="27"], body[id="nv_search" i][onkeydown*="27"]')||getXpath('id("ft")[contains(string(),"Discuz!")]'))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - <Discuz!> \u8BBA\u575B"),2;if(typeof flarum<"u"||getCSS("#flarum-loading"))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - <Flarum> \u8BBA\u575B"),3;if(typeof phpbb<"u"||getCSS("body#phpbb"))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - <phpBB> \u8BBA\u575B"),4;if(typeof xn<"u"&&getXpath('//footer//a[contains(string(), "Xiuno")] | //link[contains(@href, "xiuno")] | //script[contains(@src, "xiuno")]'))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - <Xiuno> \u8BBA\u575B"),5;if(typeof XF<"u")return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - <XenForo> \u8BBA\u575B"),6;if(typeof MyBB<"u")return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - <MyBB> \u8BBA\u575B"),14;if(getCSS('head meta[name="generator" i][content="nexusphp" i]')||getXpath('id("footer")[contains(string(), "NexusPHP")]'))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - <NexusPHP> \u8BBA\u575B"),7;if(unsafeWindow.config&&(unsafeWindow.config.assetVersionEncoded&&unsafeWindow.config.assetVersionEncoded.indexOf("gitea")!==-1||unsafeWindow.config.customEmojis&&unsafeWindow.config.customEmojis.gitea))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - <Forgejo/Gitea> git \u6258\u7BA1\u7CFB\u7EDF"),15;if(loadMoreExclude(loadMoreExclude1)&&getAllCSS('.load-more, .load_more, .loadmore, #load-more, #load_more, #loadmore, [id^="loadmore"], .show-more:not([data-gps-track]), .show_more, .ajax-more').length===1)return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u90E8\u5206\u81EA\u5E26 \u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875 \u7684\u7F51\u7AD9 1"),8;if(loadMoreExclude(loadMoreExclude2)&&getAllXpath('//*[self::a or self::span or self::button or self::div][text()="\u52A0\u8F7D\u66F4\u591A"][not(@href) or @href="#" or starts-with(@href, "javascript")]').length===1)return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u90E8\u5206\u81EA\u5E26 \u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875 \u7684\u7F51\u7AD9 2"),9;if(getCSS('link[href*="/wp-content/" i], script[src*="/wp-content/" i], link[href*="/wp-includes/" i], script[src*="/wp-includes/" i], head>meta[name=generator][content*="WordPress" i]')){if(getXpath('(//*[contains(@class, "post-page-numbers") and contains(@class, "current")])[last()]/following-sibling::a[1]')?(DBSite.wp_article_post.pager.nextL='(//*[contains(@class, "post-page-numbers") and contains(@class, "current")])[last()]/following-sibling::a[1]',DBSite.wp_article_post.pager.replaceE='//a[contains(@class,"post-page-numbers")]/..'):getXpath('(//div[contains(@class,"fenye")])[last()]//a[string()="\u4E0B\u4E00\u9875"]')&&(DBSite.wp_article_post.pager.nextL='(//div[contains(@class,"fenye")])[last()]//a[string()="\u4E0B\u4E00\u9875"]',DBSite.wp_article_post.pager.replaceE=".fenye"),DBSite.wp_article_post.pager.nextL!=null)return getAllCSS("#entry-content>#content-innerText, .entry-content>#content-innerText").length==1?DBSite.wp_article_post.pager.pageE="#entry-content>#content-innerText, .entry-content>#content-innerText":getAllCSS(".entry-content .single-content img").length>3?DBSite.wp_article_post.pager.pageE=".entry-content .single-content":getAllCSS(".entry-content").length==1?DBSite.wp_article_post.pager.pageE=".entry-content>*:not(.wbp-cbm):not(.page-links):not(.post-links):not(.article-paging):not(.entry-pagination):not(.pagination):not(.fenye):not(.open-message):not(#social):not(.article-social):not(.single-cat-tag):not(.single-meta):not(#fontsize):not(.clear):not(.tg-m):not(.tg-site):not(footer)":getAllCSS(".article-content").length==1?DBSite.wp_article_post.pager.pageE=".article-content>*:not(.page-links):not(.post-links):not(.article-paging):not(.entry-pagination):not(.pagination):not(.fenye):not(.open-message):not(#social):not(.article-social):not(.single-cat-tag):not(.single-meta):not(#fontsize):not(.clear):not(.tg-m):not(.tg-site):not(footer)":getAllCSS("article").length==1&&(DBSite.wp_article_post.pager.pageE="article>*:not(.page-links):not(.post-links):not(.article-paging):not(.entry-pagination):not(.pagination):not(.fenye):not(.open-message):not(#social):not(.article-social):not(.single-cat-tag):not(.single-meta):not(#fontsize):not(.clear):not(.tg-m):not(.tg-site):not(footer)"),DBSite.wp_article_post.pager.pageE!=null&&console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u90E8\u5206\u4F7F\u7528 WordPress \u7684\u7F51\u7AD9 - \u6587\u7AE0\u5185"),11;if(getCSS("a.next, a.next-page"))DBSite.wp_article.pager.nextL="a.next, a.next-page";else if(getCSS('a[rel="next" i], a[aria-label="next" i], a[aria-label="\u4E0B\u4E00\u4E2A"].page-link, a[aria-label="Next Page" i], a[aria-label="\u4E0B\u4E00\u9875"], a[rel="\u4E0B\u4E00\u9875"], a[title="\u4E0B\u4E00\u9875"], a[aria-label="\u4E0B\u4E00\u9801"], a[rel="\u4E0B\u4E00\u9801"], a[title="\u4E0B\u4E00\u9801"]'))DBSite.wp_article.pager.nextL='a[rel="next" i], a[aria-label="next" i], a[aria-label="\u4E0B\u4E00\u4E2A"].page-link, a[aria-label="Next Page" i], a[aria-label="\u4E0B\u4E00\u9875"], a[rel="\u4E0B\u4E00\u9875"], a[title="\u4E0B\u4E00\u9875"], a[aria-label="\u4E0B\u4E00\u9801"], a[rel="\u4E0B\u4E00\u9801"], a[title="\u4E0B\u4E00\u9801"]';else if(getCSS("li.next-page > a, li.next > a, li.pagination-next>a"))DBSite.wp_article.pager.nextL="li.next-page > a, li.next > a, li.pagination-next>a";else if(getCSS("span.current+a"))DBSite.wp_article.pager.nextL="span.current+a";else if(getCSS(".nav-previous a, a.nav-previous"))DBSite.wp_article.pager.nextL=".nav-previous a, a.nav-previous";else if(getCSS(".pagination>.page-item.active+li.page-item>a"))DBSite.wp_article.pager.nextL=".pagination>.page-item.active+li.page-item>a";else{const e=getCSS('#nav-below, nav.navigation, nav.paging-navigation, #pagination:not([class*="entry"]), .pagination:not([class*="entry"]), .wp-pagenavi, .pagenavi, nav[role="navigation"]');e&&getXpath('//a[contains(text(), "\u4E0B\u4E00\u9875") or contains(text(), "\u4E0B\u4E00\u9801") or contains(text(), ">") or contains(text(), "next") or contains(text(), "Next") or contains(text(), "NEXT")]',e)&&(DBSite.wp_article.pager.nextL='//*[self::ul or self::nav or self::div][@id="nav-below" or @id="pagination" or contains(@class, "navigation") or contains(@class, "pagination") or contains(@class, "pagenavi") or @role="navigation"]//a[contains(text(), "\u4E0B\u4E00\u9875") or contains(text(), "\u4E0B\u4E00\u9801") or contains(text(), ">") or contains(text(), "next") or contains(text(), "Next") or contains(text(), "NEXT")]')}if(DBSite.wp_article.pager.nextL!=null&&(DBSite.wp_article.pager.nextL.indexOf("//")!==0&&(DBSite.wp_article.pager.replaceE+=","+DBSite.wp_article.pager.nextL),getAllCSS("main").length==1&&(getAllCSS("main .posts-wrapper.row>div>article").length>3?DBSite.wp_article.pager.pageE="main .posts-wrapper.row>div":getAllXpath('//main//div[contains(@class,"row")]/div/article').length>3?DBSite.wp_article.pager.pageE='//main//div[contains(@class,"row")]/div/article/parent::div':getAllCSS('main article[id^="post-"]').length>3?DBSite.wp_article.pager.pageE='main article[id^="post-"]':getAllCSS("main article[class]").length>3?DBSite.wp_article.pager.pageE="main article[class]":getAllCSS('main div[id^="post-"]').length>3?DBSite.wp_article.pager.pageE='main div[id^="post-"]':getAllCSS("main .post").length>3&&(DBSite.wp_article.pager.pageE="main .post"),DBSite.wp_article.pager.pageE!=null)||(getAllCSS(".posts-wrapper.row>div>article").length>3?DBSite.wp_article.pager.pageE=".posts-wrapper.row>div":getAllXpath('//div[contains(@class,"row")]/div/article').length>3?DBSite.wp_article.pager.pageE='//div[contains(@class,"row")]/div/article/parent::div':getAllCSS('article[id^="post-"]').length>3?DBSite.wp_article.pager.pageE='article[id^="post-"]':getAllCSS("article[class]").length>3?DBSite.wp_article.pager.pageE="article[class]":getAllCSS('div[id^="post-"]').length>3?DBSite.wp_article.pager.pageE='div[id^="post-"]':getAllCSS('ul[class*="post"]>li.item').length>3?DBSite.wp_article.pager.pageE='ul[class*="post"]>li.item':getAllCSS(".post").length>3?DBSite.wp_article.pager.pageE=".post":getAllCSS('.posts-row>posts[class*="post"]').length>3?DBSite.wp_article.pager.pageE='.posts-row>posts[class*="post"]':getAllCSS("#posts, .posts").length==1?DBSite.wp_article.pager.pageE="#posts, .posts":getAllCSS("#content .container>.row").length==1&&getAllCSS("#content .container>.row+.nav-pagination").length==1&&(DBSite.wp_article.pager.pageE="#content .container>.row"),DBSite.wp_article.pager.pageE!=null)))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u90E8\u5206\u4F7F\u7528 WordPress \u7684\u7F51\u7AD9"),10}else{if(getCSS('meta[name="template" i][content="handsome" i]')&&getCSS(".page-navigator"))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u90E8\u5206\u4F7F\u7528 Typecho \u7684\u7F51\u7AD9 (handsome)"),12;if(getCSS('meta[name="template" i][content="Mirages" i]')&&getCSS(".page-navigator"))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u90E8\u5206\u4F7F\u7528 Typecho \u7684\u7F51\u7AD9 (Mirages)"),13;if(getCSS(".stui-page, .stui-page__item, #long-page, .myui-page, .myui-page__item"))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u90E8\u5206\u5F71\u89C6\u7F51\u7AD9"),300;if(getCSS("#page")&&getCSS(".module-items,a.module-poster-item"))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u90E8\u5206\u5F71\u89C6\u7F51\u7AD9 2"),301;if(getCSS(".ArticleImageBox, .PictureList")&&getCSS(".article_page")&&getXpath('//div[contains(@class,"article_page")]//a[text()="\u4E0B\u4E00\u9875"]'))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u90E8\u5206\u7F8E\u56FE\u7F51\u7AD9 - \u624B\u673A\u7248"),302;if(getCSS("meta[content^=SearXNG i], link[href*=SearXNG i], script[src*=SearXNG i]"))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - <SearXNG> \u5143\u641C\u7D22\u5F15\u64CE"),303;if(getCSS(".content > #content")&&getXpath('//div[contains(@class,"page_chapter")]//a[text()="\u4E0B\u4E00\u7AE0"]'))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - <\u7B14\u8DA3\u9601 1> \u6A21\u677F\u7684\u5C0F\u8BF4\u7F51\u7AD9"),200;if(getCSS("#nr1, #chaptercontent, .Readarea, .ReadAjax_content")&&getCSS("#pb_next, #linkNext"))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - <\u7B14\u8DA3\u9601 1 - \u624B\u673A\u7248> \u6A21\u677F\u7684\u5C0F\u8BF4\u7F51\u7AD9"),201;if(getCSS("#txt, .txt")&&getCSS("#pb_next, .url_next")&&getCSS(".chapter-control, .chapter-page-btn"))return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - <\u7B14\u8DA3\u9601 2> \u6A21\u677F\u7684\u5C0F\u8BF4\u7F51\u7AD9"),202;if((getCSS('meta[name="description" i][content*="\u5C0F\u8BF4"], meta[name="description" i][content*="\u7AE0\u8282"], meta[name="description" i][content*="\u9605\u8BFB"], meta[name="keywords" i][content*="\u7B14\u8DA3"]')||location.hostname.indexOf("biqu")!=-1||document.title.match(/笔趣阁|小说|章/)!=null)&&getXpath('//a[contains(text(), "\u4E0B\u4E00\u7AE0") or contains(text(), "\u4E0B\u4E00\u9875") or contains(text(), "\u4E0B\u4E00\u8282")]')){let e=['[id="chapter_content" i]','[class~="chapter_content" i]','[id="chaptercontent" i]','[class~="chaptercontent" i]','[class~="read_chapterdetail" i]','[id="booktext" i]','[class~="booktext" i]','[id="txtcontent" i]','[class~="txtcontent" i]','[id="textcontent" i]','[class~="textcontent" i]','[id="read-content" i]','[class~="read-content" i]','[id="txtnav" i]','[class~="txtnav" i]','[id="txt" i][class~="txt" i]','[id="contents" i]','[class~="contents" i]','[id="content" i]','[class~="content" i]','[id="contentbox" i]'];for(let i of e)if(getAllCSS(i).length===1){DBSite.biquge3.pager.pageE=i,DBSite.biquge3.pager.insertP=[i,6],DBSite.biquge3.style=i+">.readinline, "+DBSite.biquge3.style;break}if(DBSite.biquge3.pager.pageE!=null)return console.info("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - <\u7B14\u8DA3\u9601 3> \u6A21\u677F\u7684\u5C0F\u8BF4\u7F51\u7AD9"),203}}return 0}function webTypeIf(){if(webType!=1)switch(webType){case 2:discuz_();break;case 3:DBSite.flarum.url();break;case 4:DBSite.phpbb.url();break;case 5:DBSite.xiuno.url();break;case 6:DBSite.xenforo.url();break;case 14:DBSite.mybb.url();break;case 7:DBSite.nexusphp.url();break;case 15:DBSite.forgejoGitea.url();break;case 8:DBSite.loadmore.url('.load-more, .load_more, .loadmore, #load-more, #load_more, #loadmore, [id^="loadmore"], .show-more, .show_more, .ajax-more');break;case 9:DBSite.loadmore.url('//*[self::a or self::span or self::button or self::div][text()="\u52A0\u8F7D\u66F4\u591A"][not(@href) or @href="#" or starts-with(@href, "javascript")]');break;case 10:DBSite.wp_article.url();break;case 11:curSite=DBSite.wp_article_post;break;case 12:DBSite.typecho_handsome.url();break;case 13:DBSite.typecho_mirages.url();break;case 200:DBSite.biquge1.url();break;case 201:curSite=DBSite.biquge1_m;break;case 202:DBSite.biquge2.url();break;case 203:curSite=DBSite.biquge3;break;case 300:curSite=DBSite.yingshi;break;case 301:curSite=DBSite.yingshi2;break;case 302:curSite=DBSite.meinvtu_m;break;case 303:document.cookie="infinite_scroll=1; expires=Thu, 18 Dec 2031 12:00:00 GMT; path=/",document.cookie="results_on_new_tab=1; expires=Thu, 18 Dec 2031 12:00:00 GMT; path=/";break}}function setDBSite(){DBSite={loadmore:{ignore:!0,url:function(r){curSite=DBSite.loadmore,curSite.pager.nextL=r},pager:{type:2,isHidden:!0,interval:1e3}},wp_article:{ignore:!0,url:()=>{!indexOF("/post/")&&!getCSS("#comments, .comments-area, #disqus_thread")&&(curSite=DBSite.wp_article,setTimeout(()=>{getOne(curSite.pager.pageE).style.cssText.indexOf("position: absolute")!=-1&&insStyle(curSite.pager.pageE+"{position: static !important; float: left !important; height: "+parseInt(getCSS(curSite.pager.pageE).offsetHeight*1.1)+"px !important;}")},1500))},style:"img[data-src], img[data-original] {opacity: 1 !important;}",blank:3,pager:{replaceE:'#nav-below, nav.navigation, nav.paging-navigation, #pagination:not([class*="entry"]), .pagination:not([class*="entry"]), .wp-pagenavi, .pagenavi, nav[role="navigation"], ul[class*="-pagination"]',forceHTTPS:!0,scrollD:3e3},function:{bF:src_bF}},wp_article_post:{ignore:!0,pager:{type:3,scrollD:3e3},function:{bF:src_bF}},typecho_handsome:{ignore:!0,url:()=>{getCSS("nav:not([id=comment-navigation]) .page-navigator")&&(curSite=DBSite.typecho_handsome)},blank:3,pager:{nextL:".page-navigator li.next>a",pageE:".blog-post, .post-list",replaceE:".page-navigator"}},typecho_mirages:{ignore:!0,url:()=>{getAllCSS("#index>article, #archive>article").length>3&&getCSS("li.next")&&(curSite=DBSite.typecho_mirages)},blank:3,pager:{nextL:"li.next>a",pageE:"#index>article, #archive>article",scriptT:3,replaceE:".page-navigator"}},biquge1:{ignore:!0,url:()=>{curSite=DBSite.biquge1,xs_bF(getAllCSS(".content > #content"),[/<br>.{0,10}秒记住.+$/,""])},style:'img, .posterror, a[href*="posterror()"], [style*="background"][style*="url("]:not(html):not(body), #content > *:not(br):not(p), #content>.readinline {display: none !important;}',history:!0,retry:3e3,pager:{nextL:'//div[@class="page_chapter"]//a[text()="\u4E0B\u4E00\u7AE0"]',pageE:".content > #content",insertP:[".content > #content",6],replaceE:".page_chapter"},function:{bF:xs_bF,bFp:[/<br>.{0,10}秒记住.+$/,""]}},biquge1_m:{ignore:!0,style:'img, .posterror, .show-app2, a[href*="posterror()"], [onclick*="location.href"], [style*="background"][style*="url("]:not(html):not(body), #nr1>*:not(br):not(p), #chaptercontent>*:not(br):not(p), .Readarea>*:not(br):not(p), .ReadAjax_content>*:not(br):not(p), #nr1>.readinline, #chaptercontent>.readinline, .Readarea>.readinline, .ReadAjax_content>.readinline {display: none !important;}',history:!0,retry:3e3,pager:{nextL:"#pb_next, #linkNext",pageE:"#nr1, #chaptercontent, .Readarea, .ReadAjax_content",insertP:["#nr1, #chaptercontent, .Readarea, .ReadAjax_content",6],replaceE:'//a[@id="pb_next" or @id="linkNext"]/parent::*'}},biquge2:{ignore:!0,url:()=>{isMobile()||getCSS(".chapter-page-btn")!=null?curSite=DBSite.biquge2_m:curSite=DBSite.biquge2},style:'img, .posterror, a[href*="posterror()"], [style*="background"][style*="url("]:not(html):not(body), #txt > *:not(br):not(p), #txt>.readinline, .txt>.readinline {display: none !important;}',history:!0,retry:3e3,pager:{type:6,nextL:"#pb_next, .url_next",pageE:"#txt, .txt",insertP:["#txt, .txt",6],replaceE:".chapter-control, .chapter-page-btn",loadTime:1500,scrollD:3500}},biquge2_m:{ignore:!0,style:'img, .posterror, a[href*="posterror()"], [style*="background"][style*="url("]:not(html):not(body), #txt > *:not(br):not(p), #txt>.readinline, .txt>.readinline {display: none !important;}',history:!0,retry:3e3,pager:{nextL:"#pb_next, .url_next",pageE:"#txt, .txt",insertP:["#txt, .txt",6],replaceE:".chapter-control, .chapter-page-btn"}},biquge3:{ignore:!0,style:'img, .posterror, a[href*="posterror()"], [style*="background"][style*="url("]:not(html):not(body), script+div[style="padding:15px;"], p[style*="font-weight:"] {display: none !important;}',history:!0,retry:3e3,pager:{nextL:`js; const a=[fun.getNextE('(//a[contains(text(), "\u4E0B\u4E00\u9875")])[last()]'),fun.getNextE('(//a[contains(text(), "\u4E0B\u4E00\u7AE0")])[last()]'),fun.getNextE('(//a[contains(text(), "\u4E0B\u4E00\u8282")])[last()]')];return a.find(i => i)`,insertP6Br:!1,replaceE:'//a[contains(text(), "\u4E0B\u4E00\u7AE0") or contains(text(), "\u4E0B\u4E00\u9875") or contains(text(), "\u4E0B\u4E00\u8282")]/parent::*'},function:{bF:xs_bF,bFp:[/<br>.{0,10}秒记住.+$/,""]}},yingshi:{ignore:!0,style:"div.stui-page__all, div.myui-page__all {display: none !important;}",blank:3,pager:{nextL:".stui-page li.active+li>a, .stui-page__item li.active+li>a, #long-page .active+li>a, .myui-page .visible-xs+li>a",pageE:".stui-vodlist, .myui-vodlist>li, #content, #searchList",replaceE:".stui-page, .stui-page__item, #long-page, .myui-page, .myui-page__item"},function:{bF:src_bF,bFp:[1,"[data-original]","data-original"]}},yingshi2:{ignore:!0,blank:3,style:".module-poster-item, .module-items>* {display: inline-block !important;}",pager:{nextL:'#page a[title="\u4E0B\u4E00\u9875"], a.page-next',pageE:".module-items>*, a.module-poster-item",replaceE:"#page"},function:{bF:src_bF}},meinvtu_m:{ignore:!0,history:!0,blank:3,pager:{type:3,nextL:'//div[contains(@class,"article_page")]//a[text()="\u4E0B\u4E00\u9875"]',pageE:".ArticleImageBox, .PictureList",replaceE:".article_page",scrollD:500}},discuz_forum:{ignore:!0,pager:{type:2,nextL:"#autopbn",interval:800}},discuz_guide:{ignore:!0,pager:{nextL:'a.nxt:not([href^="javascript"]) ,a.next:not([href^="javascript"])',pageE:'tbody[id^="normalthread_"],tbody[id^="stickthread_"]',replaceE:".pg, .pages",forceHTTPS:!0}},discuz_waterfall:{ignore:!0,style:".pgbtn",pager:{nextL:'a.nxt:not([href^="javascript"]) ,a.next:not([href^="javascript"])',pageE:"#waterfall > li, #waterfall > dl",replaceE:".pg, .pages",forceHTTPS:!0}},discuz_thread:{ignore:!0,thread:!0,style:".pgbtn, .viewthread:not(:first-of-type)>h1, .viewthread:not(:first-of-type)>ins, .viewthread:not(:first-of-type)>.headactions {display: none;}",pager:{nextL:'a.nxt:not([href^="javascript"]) ,a.next:not([href^="javascript"])',pageE:'#postlist > div[id^="post_"], form>.viewthread',replaceE:'//div[contains(@class,"pg") or contains(@class,"pages")][./a[contains(@class,"nxt") or contains(@class,"next") or contains(@class,"prev")][not(contains(@href,"javascript") or contains(@href,"commentmore"))]]',forceHTTPS:!0},function:{bF:src_bF,bFp:[0,"img[file]","file"]}},discuz_search:{ignore:!0,pager:{nextL:'a.nxt:not([href^="javascript"]) ,a.next:not([href^="javascript"])',pageE:"#threadlist > ul",replaceE:".pg, .pages",forceHTTPS:!0}},discuz_youspace:{ignore:!0,pager:{nextL:'a.nxt:not([href^="javascript"]) ,a.next:not([href^="javascript"])',pageE:'form:not([action^="search.php?"]) tbody > tr:not(.th)',replaceE:".pg, .pages",forceHTTPS:!0}},discuz_collection:{ignore:!0,pager:{nextL:'a.nxt:not([href^="javascript"]) ,a.next:not([href^="javascript"])',pageE:"#ct .bm_c table > tbody",replaceE:".pg, .pages",forceHTTPS:!0}},discuz_archiver:{ignore:!0,pager:{nextL:'//div[@id="content"][last()]//div[@class="page"]/strong/following-sibling::a[1]',pageE:"#content"}},discuz_m:{ignore:!0,thread:!0,pager:{nextL:'//a[@class="nxt" or @class="next"] | //div[@class="page"]/a[text()="\u4E0B\u4E00\u9875" or contains(text(), ">")]',replaceE:".pg, .page",forceHTTPS:!0,scrollD:1e3}},discuz_m_forum:{ignore:!0,pager:{type:2,nextL:"a.loadmore",interval:500,scrollD:1e3}},flarum:{ignore:!0,url:()=>{urlC=!0,indexOF("/d/")||(getCSS(".DiscussionList-loadMore")?curSite=DBSite.flarum:getCSS("a.Button--primary")&&(curSite=DBSite.flarum2))},pager:{type:2,nextL:".DiscussionList-loadMore > button",isHidden:!0}},flarum2:{ignore:!0,blank:4,pager:{type:6,nextL:"a.Button--primary+a:not(.disabled)",pageE:".DiscussionList-discussions>li",replaceE:".Orion-DiscussionListPagination"}},phpbb:{ignore:!0,url:()=>{indexOF("/viewforum.php")?curSite=DBSite.phpbb:indexOF("/viewtopic.php")?curSite=DBSite.phpbb_post:indexOF("/search.php")&&(curSite=DBSite.phpbb_search)},pager:{nextL:'.pagination li.next a[rel="next"], .topic-actions .pagination strong~a',pageE:".forumbg:not(.announcement) ul.topiclist.topics > li",replaceE:".action-bar .pagination, .topic-actions .pagination"}},phpbb_post:{ignore:!0,thread:!0,pager:{nextL:'.pagination li.next a[rel="next"], .topic-actions .pagination strong~a',pageE:"div.post[id], div.post[id]+hr",replaceE:".action-bar .pagination, .topic-actions .pagination"}},phpbb_search:{ignore:!0,pager:{nextL:'.pagination li.next a[rel="next"], .topic-actions .pagination strong~a',pageE:"div.search.post",replaceE:".action-bar .pagination, .pagination"}},xenforo:{ignore:!0,url:()=>{indexOF(/\/(forums|f)\//)||getCSS(DBSite.xenforo.pager.nextL)&&getCSS(DBSite.xenforo.pager.pageE)?curSite=DBSite.xenforo:indexOF(/\/(threads|t)\//)||getCSS(DBSite.xenforo.pager.nextL)&&getCSS(DBSite.xenforo_post.pager.pageE)?curSite=DBSite.xenforo_post:(indexOF("/search/")||getCSS(DBSite.xenforo.pager.nextL)&&getCSS(DBSite.xenforo_search.pager.pageE))&&(curSite=DBSite.xenforo_search)},blank:3,pager:{nextL:"a.pageNav-jump--next",pageE:".structItemContainer > div",replaceE:"nav.pageNavWrapper",scrollD:2500}},xenforo_post:{ignore:!0,thread:!0,pager:{nextL:"a.pageNav-jump--next",pageE:".block-body.js-replyNewMessageContainer > article",replaceE:"nav.pageNavWrapper",scrollD:2500}},xenforo_search:{ignore:!0,blank:3,pager:{nextL:"a.pageNav-jump--next",pageE:"ol.block-body > li",replaceE:"nav.pageNavWrapper",scrollD:2500}},mybb:{ignore:!0,url:()=>{location.pathname.toLowerCase().indexOf("/forum")==0||location.pathname.toLowerCase().indexOf("/search")==0||getCSS(DBSite.mybb.pager.nextL)&&getCSS(DBSite.mybb.pager.pageE)?curSite=DBSite.mybb:(location.pathname.toLowerCase().indexOf("thread")!==-1||getCSS(DBSite.mybb.pager.nextL)&&getCSS(DBSite.mybb_post.pager.pageE))&&(curSite=DBSite.mybb_post,curSite.pager=Object.assign({},DBSite.mybb.pager,DBSite.mybb_post.pager))},blank:3,pager:{nextL:"div:not([id=breadcrumb_multipage_popup])>a.pagination_next, div:not([id=breadcrumb_multipage_popup])>.pagination_current+a.pagination_page",pageE:"tr.inline_row",replaceE:".pagination",scrollD:2500}},mybb_post:{ignore:!0,thread:!0,pager:{pageE:"#posts>*",scrollD:2500}},xiuno:{ignore:!0,url:()=>{lp=="/"||indexOF(/\/(index|forum)/)?curSite=DBSite.xiuno:indexOF("/thread")&&(curSite=DBSite.xiuno_post)},pager:{nextL:'//li[@class="page-item"]/a[text()="\u25B6" or text()="\xBB" or contains(text(),">") or contains(text(),"\u4E0B\u4E00\u9875")]',pageE:"ul.threadlist > li",replaceE:"ul.pagination"}},xiuno_post:{ignore:!0,thread:!0,pager:{nextL:'//li[@class="page-item"]/a[text()="\u25B6" or text()="\xBB" or contains(text(),">") or contains(text(),"\u4E0B\u4E00\u9875")]',pageE:"li.post[data-pid]:not(.newpost)",replaceE:"ul.pagination"}},forgejoGitea:{ignore:!0,url:()=>{(indexOF(/^\/explore\/.+/)||indexOF(/\/(issues|pulls|releases|tags)$/)||indexOF(/\/commits\/branch\/.+/)||getCSS(".pagination>.active+.item")&&getCSS(".flex-list>.flex-item"))&&(curSite=DBSite.forgejoGitea)},pager:{nextL:".pagination>.active+.item",pageE:".flex-list>.flex-item, #issue-list>div, #release-list>li, tbody.tag-list>tr, tbody.commit-list>tr",replaceE:".pagination"}},nexusphp:{ignore:!0,url:()=>{lp=="/torrents.php"||getCSS("table.torrents")?curSite=DBSite.nexusphp:lp=="/subtitles.php"?(curSite=DBSite.nexusphp,curSite.pager.pageE="#outer > table.main~table > tbody > tr:not(:first-of-type)"):lp=="/forums.php"&&indexOF("action=viewforum","s")?(curSite=DBSite.nexusphp,curSite.pager.pageE="#outer > table.main+table > tbody > tr:not(:first-of-type):not(:last-of-type)"):lp=="/forums.php"&&indexOF("action=viewtopic","s")&&(curSite=DBSite.nexusphp,curSite.thread=!0,curSite.pager.pageE="td.text > div, td.text > div+table.main")},pager:{nextL:'//a[./b[contains(text(), "\u4E0B\u4E00\u9875") or contains(text(), ">>")]]',pageE:"table.torrents > tbody > tr:not(:first-of-type)",replaceE:'//p[@align][./font[@class="gray"]]'}},nexusmods:{host:"www.nexusmods.com",url:()=>{urlC=!0,indexOF(/\/(mods|users)\/\d+/)?indexOF("tab=posts","s")?curSite=DBSite.nexusmods_posts:indexOF("tab=user+files","s")&&(curSite=DBSite.nexusmods):lp!=="/"&&getCSS(".pagination a.page-selected")&&(curSite=DBSite.nexusmods)},blank:1,history:!1,xRequestedWith:!0,pager:{nextL:nexusmods_nextL,pageE:"ul.tiles>li",replaceE:".pagination",scrollD:3500},function:{bF:nexusmods_bF}},nexusmods_posts:{ignore:!0,history:!1,xRequestedWith:!0,pager:{nextL:nexusmods_nextL,pageE:"#comment-container>ol>li.comment:not(.comment-sticky)",replaceE:".pagination",scrollD:3500}},mangabz:{host:["mangabz.com","www.mangabz.com"],url:()=>{indexOF(/\/m\d+/)?(setTimeout(mangabz_init,1500),curSite=DBSite.mangabz):indexOF(/\/\d+bz\//)?getCSS(".detail-list-form-more")&&getCSS(".detail-list-form-more").click():(indexOF("/manga-list")||lp=="/search")&&(curSite=DBSite.mangabz_list)},style:"body > .container > div:not([id]) {display: none !important;} .top-bar {opacity: 0.3 !important;} #cp_img > img{display: block !important;margin: 0 auto !important; max-width: 99% !important; width: auto !important; height: auto !important;}",pager:{type:4,nextL:mangabz_nextL,insertP:["#cp_img",3],insertE:mangabz_insertE,replaceE:"p.top-title, body > .container > div:not([id])",interval:500}},mangabz_list:{ignore:!0,blank:4,pager:{nextL:'//div[contains(@class,"page-pagination")]//a[contains(text(), ">")]',pageE:"ul.mh-list > li",replaceE:".page-pagination",scrollD:800}},dm5:{host:"www.dm5.com",url:()=>{indexOF(/\/m\d+/)?(setTimeout(mangabz_init,1500),curSite=DBSite.dm5):indexOF("/manga-list")||lp=="/search"||getCSS(".box-body > ul.mh-list > li")?curSite=DBSite.mangabz_list:getCSS(".detail-more")&&getCSS(".detail-more").click()},style:".view-paging > .container, .view-comment {display: none !important;} .rightToolBar {opacity: 0.3 !important;} #cp_img > img, #barChapter > img{display: block !important;margin: 0 auto !important; max-width: 99% !important; width: auto !important; height: auto !important;} body {overflow: auto !important;}",pager:{type:4,nextL:dm5_nextL,insertP:["#barChapter,#cp_img",3],insertE:dm5_insertE,replaceE:".view-paging > .container, .rightToolBar",interval:500}},xmanhua:{host:["xmanhua.com","www.xmanhua.com","yymanhua.com","www.yymanhua.com"],url:()=>{indexOF(/\/m\d+/)?(setTimeout(mangabz_init,1500),location.hostname.indexOf("xmanhua")!=-1?unsafeWindow.MH_PREFIX23="XMANHUA_":unsafeWindow.MH_PREFIX23="YYMANHUA_",curSite=DBSite.xmanhua):indexOF(/\/\d+xm\//)?getCSS(".detail-list-form-more")&&getCSS(".detail-list-form-more").click():(indexOF("/manga-list")||lp=="/search")&&(curSite=DBSite.xmanhua_list)},style:"a.reader-bottom-page {display: none !important;} .header, .reader-bottom {opacity: 0.3 !important;} #cp_img > img{display: block !important;margin: 0 auto !important; max-width: 99% !important; width: auto !important; height: auto !important;}",hiddenPN:!0,pager:{type:4,nextL:xmanhua_nextL,insertP:["#cp_img",3],insertE:xmanhua_insertE,replaceE:".reader-title, body > .container > div:not([id])",interval:500,scrollD:2500}},xmanhua_list:{ignore:!0,blank:4,pager:{nextL:'//div[@class="page-pagination"]//a[contains(text(), ">")]',pageE:"ul.mh-list > li",replaceE:".page-pagination",scrollD:1e3}}};let t=GM_getValue("menu_customRules",{}),e=GM_getValue("menu_rules",{});Object.prototype.toString.call(t)!=="[object Object]"&&(t={}),Object.prototype.toString.call(e)!=="[object Object]"&&(e={});let i=Object.keys(t),n=Object.keys(e);if(i.length===0)DBSite=Object.assign({},e,DBSite),DBSite2=structuredClone(e);else{for(let r=0;r<i.length;r++)n.indexOf(i[r])!=-1&&(t[i[r]].inherits===!0&&(t[i[r]].pager!=null&&e[i[r]].pager!=null&&(t[i[r]].pager=Object.assign({},e[i[r]].pager,t[i[r]].pager)),t[i[r]]=Object.assign({},e[i[r]],t[i[r]])),delete e[i[r]]);DBSite=Object.assign({},t,e,DBSite),DBSite2=Object.assign({},structuredClone(t),structuredClone(e))}setSiteTypeID()}function getRulesUrl(t=!1){typeof GM_getValue("menu_ruleUpdateTime","")=="string"&&(t=!0,scriptHandler!="AdGuard"?alert(`\u8BF7\u70B9\u51FB\u3010\u786E\u5B9A\u3011\u5F00\u59CB\u9996\u6B21\u83B7\u53D6\u3010\u5916\u7F6E\u7FFB\u9875\u89C4\u5219\u3011\uFF08\u5927\u6982\u51E0\u79D2

\u5728\u6B64\u671F\u95F4\u8BF7\u4E0D\u8981 \u64CD\u4F5C/\u8DF3\u8F6C/\u5173\u95ED \u5F53\u524D\u7F51\u9875~

\u5982\u679C\u4E0D\u5C0F\u5FC3\u6CA1\u83B7\u53D6\u6210\u529F\u4E5F\u6CA1\u4E8B\uFF0C\u53EF\u4EE5\u53BB\u811A\u672C\u83DC\u5355\u4E2D\u624B\u52A8\u3010\u66F4\u65B0\u5916\u7F6E\u7FFB\u9875\u89C4\u5219\u3011\u5373\u53EF\uFF08\u6D4F\u89C8\u5668\u53F3\u4E0A\u89D2 Tampermonkey \u6269\u5C55\u56FE\u6807\u5185\u7684\u811A\u672C\u83DC\u5355


\u53E6\u5916\uFF0C\u60F3\u8981\u3010\u4E34\u65F6\u6682\u505C\u7FFB\u9875\u3011\u8BF7\u70B9\u51FB\u5DE6\u4E0B\u89D2\u60AC\u6D6E\u7684\u3010\u9875\u7801\u3011\u6309\u94AE

\u5982\u679C\u6BCF\u6B21\u6253\u5F00\u7F51\u9875\u90FD\u4F1A\u770B\u5230\u8BE5\u63D0\u793A\uFF0C\u8BF4\u660E\u4F60\u7684 \u6CB9\u7334\u811A\u672C\u7BA1\u7406\u5668\u4E0E\u672C\u811A\u672C\u4E4B\u95F4 \u5B58\u5728\u517C\u5BB9\u6027\u95EE\u9898\uFF0C\u8BF7\u66F4\u6362\u5176\u4ED6\u8BD5\u8BD5\uFF01`):urlArr2=urlArr),t?(GM_notification({text:"\u{1F504} \u66F4\u65B0\u5916\u7F6E\u7FFB\u9875\u89C4\u5219\u4E2D\uFF0C\u8BF7\u52FF\u64CD\u4F5C\u7F51\u9875...",timeout:5e3}),e(!0)):parseInt(+new Date/1e3)-GM_getValue("menu_ruleUpdateTime",0)>5184e3&&e();function e(i=!1,n){if(i?n=urlArr2[Math.floor(Math.random()*urlArr2.length)]:n=urlArr[Math.floor(Math.random()*urlArr.length)],n===void 0){GM_notification({text:"\u274C \u6240\u6709\u66F4\u65B0\u5730\u5740\u5747\u4EE5\u8BD5\u8FC7\uFF0C\u5DF2\u65E0\u53EF\u7528\u5730\u5740\uFF0C\u8BF7\u8054\u7CFB\u4F5C\u8005\u89E3\u51B3...",timeout:5e3});return}GM_xmlhttpRequest({url:n,method:"GET",responseType:"json",overrideMimeType:"application/json; charset=utf-8",timeout:4e3,onload:function(r){try{r.status===200&&r.response&&Object.prototype.toString.call(r.response)==="[object Object]"&&Object.keys(r.response).length>100?(GM_setValue("menu_rules",r.response),GM_setValue("menu_ruleUpdateTime",parseInt(+new Date/1e3)),curSite={SiteTypeID:0},pageNum.now=1,registerMenuCommand(),webTypeIf(),GM_getValue("menu_thread")||curSite.thread&&(curSite={SiteTypeID:0},pageNum.now=1),GM_getValue("menu_page_number")?pageNumber("add"):pageNumber("set"),curSite.blank!=null&&setTimeout(forceTarget,1e3),curSite.style&&insStyle(curSite.style),pausePageEvent(),pageLoading(),i&&GM_notification({text:`\u2705 \u5DF2\u66F4\u65B0\u5916\u7F6E\u7FFB\u9875\u89C4\u5219\uFF01
\u5982\u679C\u4F9D\u7136\u65E0\u6CD5\u7FFB\u9875\uFF0C\u8BF4\u660E\u8FD8\u4E0D\u652F\u6301\u5F53\u524D\u7F51\u9875\uFF0C\u70B9\u51FB\u6B64\u5904\u63D0\u4EA4\u7533\u8BF7~`,timeout:5e3,onclick:function(){GM_openInTab("https://github.com/XIU2/UserScript#xiu2userscript",{active:!0,insert:!0,setParent:!0}),GM_openInTab("https://greasyfork.org/zh-CN/scripts/419215/feedback",{active:!0,insert:!0,setParent:!0})}})):(console.log("URL\uFF1A"+n,r),GM_notification({text:`\u274C \u4E3A\u7A7A\uFF01\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u518D\u8BD5\u51E0\u6B21...
\u5982\u679C\u4F9D\u7136\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u8054\u7CFB\u4F5C\u8005\u89E3\u51B3...`,timeout:5e3}),i?urlArr2.splice(urlArr2.indexOf(n),1):urlArr.splice(urlArr.indexOf(n),1))}catch(a){console.log("URL\uFF1A"+n,a),GM_notification({text:`\u274C \u62A5\u9519\uFF01\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u518D\u8BD5\u51E0\u6B21...
\u5982\u679C\u4F9D\u7136\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u8054\u7CFB\u4F5C\u8005\u89E3\u51B3...`,timeout:5e3}),i?urlArr2.splice(urlArr2.indexOf(n),1):urlArr.splice(urlArr.indexOf(n),1)}},onerror:function(r){console.log("URL\uFF1A"+n,r),GM_notification({text:`\u274C \u9519\u8BEF\uFF01\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u518D\u8BD5\u51E0\u6B21...
\u5982\u679C\u4F9D\u7136\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u8054\u7CFB\u4F5C\u8005\u89E3\u51B3...`,timeout:5e3}),i?urlArr2.splice(urlArr2.indexOf(n),1):urlArr.splice(urlArr.indexOf(n),1)},ontimeout:function(r){console.log("URL\uFF1A"+n,r),GM_notification({text:`\u274C \u8D85\u65F6\uFF01\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u518D\u8BD5\u51E0\u6B21...
\u5982\u679C\u4F9D\u7136\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u8054\u7CFB\u4F5C\u8005\u89E3\u51B3...`,timeout:5e3}),i?urlArr2.splice(urlArr2.indexOf(n),1):urlArr.splice(urlArr.indexOf(n),1)}})}}webTypeIf(),GM_getValue("menu_thread")||curSite.thread&&(curSite={SiteTypeID:0},pageNum.now=1),GM_getValue("menu_page_number")?pageNumber("add"):pageNumber("set"),pausePageEvent(),curSite.blank!=null&&setTimeout(forceTarget,1e3),urlC&&(nowLocation=location.href,window.onurlchange===void 0&&addUrlChangeEvent(),webType===1?window.addEventListener("urlchange",function(){if(lp=location.pathname,curSite.history!==!1&&window.top.document.Autopage_nowUrl===location.href){nowLocation=location.href;return}nowLocation!=location.href&&(curSite.pager&&curSite.pager.type==5&&(self!=top?window.top.location.href=location.href:getCSS("iframe#Autopage_iframe")&&getCSS("iframe#Autopage_iframe").remove(),pausePage=!0),nowLocation=location.href,curSite={SiteTypeID:0},pageNum.now=1,registerMenuCommand(),curSite.blank!=null&&setTimeout(forceTarget,1e3),curSite.style&&insStyle(curSite.style),GM_getValue("menu_thread")||curSite.thread&&(curSite={SiteTypeID:0},pageNum.now=1),GM_getValue("menu_page_number")?pageNumber("add"):pageNumber("set"),pausePageEvent(),pageLoading())}):webType===2?window.addEventListener("urlchange",function(){lp=location.pathname,nowLocation!=location.href&&setTimeout(function(){nowLocation=location.href,curSite={SiteTypeID:0},pageNum.now=1,discuz_(),GM_getValue("menu_thread")||curSite.thread&&(curSite={SiteTypeID:0},pageNum.now=1),curSite.style&&insStyle(curSite.style),GM_getValue("menu_page_number")?pageNumber("add"):pageNumber("set"),pausePageEvent(),pageLoading()},500)}):webType===3&&window.addEventListener("urlchange",function(){lp=location.pathname,nowLocation!=location.href&&(nowLocation=location.href,curSite={SiteTypeID:0},pageNum.now=1,DBSite.flarum.url(),curSite.style&&insStyle(curSite.style),GM_getValue("menu_page_number")?pageNumber("add"):pageNumber("set"),pausePageEvent(),pageLoading())})),curSite.style&&insStyle(curSite.style),pageLoading();function discuzForum(t){t=="m"?(getCSS("a.loadmore")?curSite=DBSite.discuz_m_forum:getCSS(".threadlist")?(curSite=DBSite.discuz_m,curSite.pager.pageE=".threadlist > ul > li"):getCSS('[id^="normalthread_"]')&&(curSite=DBSite.discuz_m,curSite.pager.pageE='[id^="normalthread_"]:not(.ZDlist)'),curSite.SiteTypeID!==0&&location.hostname==="keylol.com"&&(curSite.history=!1,urlC=!0)):getCSS("#autopbn")?curSite=DBSite.discuz_forum:getCSS("#waterfall")?getCSS("#pgbtn.pgbtn>a[href^=javascript]")||(curSite=DBSite.discuz_waterfall,waterfallStyle()):curSite=DBSite.discuz_guide}function discuzThreadM(){getCSS('[id^="pid"]')?(curSite=DBSite.discuz_m,curSite.pager.pageE='[id^="pid"], [id^="pid"]+div:not([id="post_new"])'):getCSS('[id^="post_"]')&&(curSite=DBSite.discuz_m,curSite.pager.pageE='[id^="post_"]'),curSite.SiteTypeID!==0&&location.hostname==="keylol.com"&&(curSite.history=!1,urlC=!0)}function discuz_(){if(getCSS('body[id="nv_forum"][class^="pg_"][onkeydown*="27"]'))switch(getCSS('body[id="nv_forum"][class^="pg_"][onkeydown*="27"]').className){case"pg_forumdisplay":discuzForum();break;case"pg_viewthread":curSite=DBSite.discuz_thread;break;case"pg_guide":curSite=DBSite.discuz_guide;break;case"pg_collection":curSite=DBSite.discuz_collection;break}curSite.SiteTypeID===0&&(indexOF("search")||getCSS('body[id="nv_search"][onkeydown*="27"]'))&&(indexOF("mobile=2","s")?(curSite=DBSite.discuz_m,curSite.pager.pageE=".threadlist > ul > li",urlC=!0):curSite=DBSite.discuz_search),curSite.SiteTypeID===0&&(indexOF(".html")&&(indexOF("/forum-")?getXpath('//head/meta[@name="applicable-device" and @content="mobile"] | //head/title[contains(text(), "\u624B\u673A\u7248")] | //head/link[contains(@href, "/mobile/")] | //head/script[contains(@src, "/mobile/")]')?discuzForum("m"):discuzForum():indexOF("/thread-")&&(getXpath('//head/meta[@name="applicable-device" and @content="mobile"] | //head/title[contains(text(), "\u624B\u673A\u7248")] | //head/link[contains(@href, "/mobile/")] | //head/script[contains(@src, "/mobile/")]')?discuzThreadM():curSite=DBSite.discuz_thread)),indexOF("/archiver/")&&(curSite=DBSite.discuz_archiver)),curSite.SiteTypeID===0&&(indexOF("mod=forumdisplay","s")||indexOF("forumdisplay.php")?indexOF("mobile=2","s")||indexOF("mobile=yes","s")||getXpath('//head/meta[@name="applicable-device" and @content="mobile"] | //head/title[contains(text(), "\u624B\u673A\u7248")] | //head/link[contains(@href, "/mobile/")] | //head/script[contains(@src, "/mobile/")]')?discuzForum("m"):discuzForum():indexOF("mod=viewthread","s")||indexOF("viewthread.php")?indexOF("mobile=2","s")||getXpath('//head/meta[@name="applicable-device" and @content="mobile"] | //head/title[contains(text(), "\u624B\u673A\u7248")] | //head/link[contains(@href, "/mobile/")] | //head/script[contains(@src, "/mobile/")]')?discuzThreadM():curSite=DBSite.discuz_thread:indexOF("mod=guide","s")?curSite=DBSite.discuz_guide:indexOF("mod=space","s")&&indexOF("do=thread","s")?curSite=DBSite.discuz_youspace:indexOF("mod=collection","s")?curSite=DBSite.discuz_collection:getCSS('#threadlist, tbody[id^="normalthread_"]')?discuzForum():getCSS("#postlist, form>.viewthread")?curSite=DBSite.discuz_thread:isMobile()&&(discuzForum("m"),curSite.SiteTypeID===0&&discuzThreadM()))}function waterfallStyle(){let t=getCSS("#waterfall > li:first-child");t&&t.style&&t.style.width?insStyle(`#waterfall {height: auto !important; width: 100% !important;} #waterfall > li {width: ${t.style.width} !important; float: left !important; position: inherit !important; left: auto !important; top: auto !important;}`):(t=getAllCSS("#waterfall > dl"),t&&t.length>5&&insStyle("#waterfall > dl {display: unset !important;}"))}function nexusmods_nextL(){if(getCSS(".nexus-ui-blocker")||!getCSS(".pagination a.page-selected"))return;let t;if(indexOF("/news")?t=RH_NewsTabContent:indexOF("/users/")&&indexOF("tab=user+files","s")?t=RH_UserModsTab:indexOF("/mods/")&&indexOF("tab=posts","s")?t=RH_CommentContainer:t=RH_ModList,!t)return;let e=JSON.stringify(t.out_items).replace(/{|}|"/g,""),i=getXpath('//div[contains(@class, "pagination")][1]//a[contains(@class, "page-selected")]/../following-sibling::li[1]/a');var n="";if(i&&i.innerText){if(i=i.innerText,e.indexOf("page:")>-1?e=e.replace(/page:\d+/,`page:${i}`):e+=`,page:${i}`,!indexOF(/\/(mods|users)\/\d+/)){let r=t.out_items.categories,a=t.out_items.tags_yes,o=t.out_items.search,l="";if(r&&r!=[]){if(t.out_items.categories instanceof Array)for(let s=0;s<r.length;s++)l+=`categories[]:${r[s]},`;else for(let s in t.out_items.categories)l+=`categories[${s}]:${t.out_items.categories[s]},`;e.indexOf("categories:")>-1&&(e=e.replace("categories:",l))}if(l="",a&&a!=[]){if(t.out_items.tags_yes instanceof Array)for(let s=0;s<a.length;s++)l+=`tags_yes[]:${a[s]},`;else for(let s in t.out_items.tags_yes)l+=`tags_yes[${s}]:${t.out_items.tags_yes[s]},`;e.indexOf("tags_yes:")>-1&&(e=e.replace("tags_yes:",l))}if(l="",o&&o.length!=0){for(let s in t.out_items.search)l+=`search[${s}]:${t.out_items.search[s]},`;e.indexOf("search:")>-1&&(e=e.replace("search:",l))}l=""}return`https://www.nexusmods.com${t.uri}?RH_${t.id}=${e}`}return""}function nexusmods_bF(t){return t.forEach(function(e){let i=e.querySelector(".mod-tile-left");if(i){let n=i.querySelector(".downloadcount > span.flex-label");n&&GlobalModStats[i.dataset.gameId]&&GlobalModStats[i.dataset.gameId][i.dataset.modId]&&(n.textContent=shortFormat(parseInt(GlobalModStats[i.dataset.gameId][i.dataset.modId].total)))}}),t}function mangabz_init(){getCSS("#showimage")&&getCSS("#showimage").removeAttribute("oncontextmenu"),getCSS("#cp_img")&&getCSS("#cp_img").removeAttribute("oncontextmenu"),getCSS("#barChapter")&&getCSS("#barChapter").removeAttribute("oncontextmenu"),getCSS("#cp_image")&&(getCSS("#cp_image").removeAttribute("oncontextmenu"),getCSS("#cp_image").removeAttribute("style"),getCSS("#cp_image").removeAttribute("id"))}function mangabz_nextL(){var t="";if(MANGABZ_PAGE===MANGABZ_IMAGE_COUNT)getNextE_('//a[./img[contains(@src, "icon_xiayizhang")]]')&&getPageE_(curSite.pageUrl);else{if(!e)var e="";if(t=location.origin+location.pathname+`chapterimage.ashx?cid=${MANGABZ_CID}&page=${MANGABZ_PAGE+1}&key=${e}&_cid=${MANGABZ_CID}&_mid=${MANGABZ_MID}&_dt=${MANGABZ_VIEWSIGN_DT}&_sign=${MANGABZ_VIEWSIGN}`,t===curSite.pageUrl)return;curSite.pageUrl=t,getPageE_(curSite.pageUrl,"text","GET","","Next")}}function mangabz_insertE(pageE,type){if(pageE)if(type==="Next"){let imgArr=eval(pageE),_img="";for(let t of imgArr)_img+=`<img src="${t}">`;_img&&(getOne(curSite.pager.insertP[0]).insertAdjacentHTML(getAddTo(curSite.pager.insertP[1]),_img),MANGABZ_PAGE+=imgArr.length,addHistory(pageE,document.title,location.origin+MANGABZ_CURL.substring(0,MANGABZ_CURL.length-1)+"-p"+MANGABZ_PAGE+"/"))}else insScript("html:not([dir]) > head > script:not([src])",pageE),addHistory(pageE),pageNumIncrement(),replaceElems(pageE),MANGABZ_PAGE=0,mangabz_nextL()}function dm5_nextL(){var t="";if(DM5_PAGE===DM5_IMAGE_COUNT)getNextE_('//div[@class="view-paging"]//a[text()="\u4E0B\u4E00\u7AE0"]')&&getPageE_(curSite.pageUrl);else{if(!e)var e="";if(t=location.origin+location.pathname+`chapterfun.ashx?cid=${DM5_CID}&page=${DM5_PAGE+1}&key=${e}&language=1&gtk=6&_cid=${DM5_CID}&_mid=${DM5_MID}&_dt=${DM5_VIEWSIGN_DT}&_sign=${DM5_VIEWSIGN}`,t===curSite.pageUrl)return;curSite.pageUrl=t,getPageE_(curSite.pageUrl,"text","GET","","Next")}}function dm5_insertE(pageE,type){if(pageE)if(type==="Next"){let imgArr=eval(pageE),_img="";for(let t of imgArr)_img+=`<img src="${t}">`;_img&&(getOne(curSite.pager.insertP[0]).insertAdjacentHTML(getAddTo(curSite.pager.insertP[1]),_img),DM5_PAGE+=imgArr.length,addHistory(pageE,document.title,location.origin+DM5_CURL.substring(0,DM5_CURL.length-1)+"-p"+DM5_PAGE+"/"))}else insScript("html:not([dir])>head>script:not([src])",pageE),addHistory(pageE),pageNumIncrement(),replaceElems(pageE),DM5_PAGE=0,dm5_nextL()}function xmanhua_nextL(){var t="";if(unsafeWindow[unsafeWindow.MH_PREFIX23+"PAGE"]===unsafeWindow[unsafeWindow.MH_PREFIX23+"IMAGE_COUNT"])getNextE_('//a[./img[contains(@src, "reader-bottom-right-2.png")]]')&&getPageE_(curSite.pageUrl);else{if(!e)var e="";if(t=location.origin+location.pathname+`chapterimage.ashx?cid=${unsafeWindow[unsafeWindow.MH_PREFIX23+"CID"]}&page=${unsafeWindow[unsafeWindow.MH_PREFIX23+"PAGE"]+1}&key=${e}&_cid=${unsafeWindow[unsafeWindow.MH_PREFIX23+"_CID"]}&_mid=${unsafeWindow[unsafeWindow.MH_PREFIX23+"MID"]}&_dt=${unsafeWindow[unsafeWindow.MH_PREFIX23+"VIEWSIGN_DT"]}&_sign=${unsafeWindow[unsafeWindow.MH_PREFIX23+"VIEWSIGN"]}`,t===curSite.pageUrl)return;curSite.pageUrl=t,getPageE_(curSite.pageUrl,"text","GET","","Next")}}function xmanhua_insertE(pageE,type){if(pageE)if(type==="Next"){let imgArr=eval(pageE),_img="";for(let t of imgArr)_img+=`<img src="${t}">`;_img&&(getOne(curSite.pager.insertP[0]).insertAdjacentHTML(getAddTo(curSite.pager.insertP[1]),_img),unsafeWindow[unsafeWindow.MH_PREFIX23+"PAGE"]+=imgArr.length,addHistory(pageE,document.title,location.origin+unsafeWindow[unsafeWindow.MH_PREFIX23+"CURL"].substring(0,unsafeWindow[unsafeWindow.MH_PREFIX23+"CURL"].length-1)+"-p"+unsafeWindow[unsafeWindow.MH_PREFIX23+"PAGE"]+"/"))}else insScript("html:not([dir]) > head > script:not([src])",pageE),addHistory(pageE),pageNumIncrement(),replaceElems(pageE),unsafeWindow[unsafeWindow.MH_PREFIX23+"PAGE"]=0,xmanhua_nextL()}function pageLoading(){if(curSite.SiteTypeID===0||!curSite.pager)return;curSite.pager.type===void 0&&(curSite.pager.type=1),curSite.pager.scrollD===void 0&&(curSite.pager.scrollD=2e3),curSite.pager.interval===void 0&&(curSite.pager.interval=500),curSite.pageUrl="",windowScroll(function(e,i){if(e!="down"||!pausePage||curSite.SiteTypeID==0||curSite.pager.type==5&&self!=top&&window.top.document.xiu_pausePage==!1)return;let n=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,r=window.innerHeight||document.documentElement.clientHeight,a=curSite.pager.scrollD;if(curSite.pager.type===3)curSite.pager.scrollE||(curSite.pager.replaceE?curSite.pager.scrollE=curSite.pager.replaceE:curSite.pager.scrollE=curSite.pager.nextL),getOne(curSite.pager.scrollE).offsetTop-(n+r)<=a&&(t(),checkURL(getPageE));else if(document.documentElement.scrollHeight<=r+n+a)if(curSite.pager.type===1)t(),checkURL(getPageE);else if(curSite.pager.type===2){let o=getOne(curSite.pager.nextL);if(!o||curSite.pager.isHidden&&isHidden(o))return;curSite.pager.nextText?o.innerText===curSite.pager.nextText&&(o.click(),pageNumIncrement()):curSite.pager.nextTextOf?o.innerText.indexOf(curSite.pager.nextTextOf)>-1&&(o.click(),pageNumIncrement()):curSite.pager.nextHTML?o.innerHTML===curSite.pager.nextHTML&&(o.click(),pageNumIncrement()):(t(),o.click(),pageNumIncrement())}else curSite.pager.type===4?(t(),typeof curSite.pager.nextL=="function"?curSite.pager.nextL():getNextE_(curSite.pager.nextL)&&getPageE_(curSite.pageUrl)):curSite.pager.type===5?checkURL(insIframe):curSite.pager.type===6&&checkURL(insIframe_)});function t(){curSite.pager.interval&&(pausePage=!1,setTimeout(function(){pausePage=!0},curSite.pager.interval))}}function getPageE(t){if(curSite.gmxhr)GM_xmlhttpRequest({url:t,method:"GET",overrideMimeType:"text/html; charset="+(document.characterSet||document.charset||document.inputEncoding),headers:{"x-requested-with":curSite.xRequestedWith===!0?"XMLHttpRequest":null,Referer:curSite.noReferer===!0?null:location.href,Accept:"text/html,application/xhtml+xml,application/xml"},timeout:5e3,onload:function(e){try{processElems(createDocumentByString(e.responseText))}catch(i){console.error(`[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u5904\u7406\u83B7\u53D6\u5230\u7684\u4E0B\u4E00\u9875\u5185\u5BB9\u65F6\u51FA\u73B0\u95EE\u9898\uFF0C\u8BF7\u68C0\u67E5\uFF01
`,i,`
URL\uFF1A`+t,`
\u6700\u7EC8 URL\uFF1A`+e.finalUrl,`
\u8FD4\u56DE\u72B6\u6001\uFF1A`+e.statusText,`
\u8FD4\u56DE\u5185\u5BB9\uFF1A`+e.responseText)}},onerror:function(e){console.log("URL\uFF1A"+t,e),GM_notification({text:"\u274C \u83B7\u53D6\u4E0B\u4E00\u9875\u5931\u8D25...",timeout:5e3})},ontimeout:function(e){setTimeout(function(){curSite.pageUrl=""},3e3),console.log("URL\uFF1A"+t,e),GM_notification({text:"\u274C \u83B7\u53D6\u4E0B\u4E00\u9875\u8D85\u65F6\uFF0C\u53EF 3 \u79D2\u540E\u518D\u6B21\u6EDA\u52A8\u7F51\u9875\u91CD\u8BD5\uFF08\u6216\u5C1D\u8BD5\u5237\u65B0\u7F51\u9875\uFF09...",timeout:5e3})}});else{const e=new XMLHttpRequest;e.open("GET",t,!0),e.overrideMimeType("text/html; charset="+(document.characterSet||document.charset||document.inputEncoding)),curSite.xRequestedWith===!0&&e.setRequestHeader("x-requested-with","XMLHttpRequest"),e.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),e.timeout=5e3,e.onload=function(){try{processElems(createDocumentByString(e.responseText))}catch(i){console.error(`[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u5904\u7406\u83B7\u53D6\u5230\u7684\u4E0B\u4E00\u9875\u5185\u5BB9\u65F6\u51FA\u73B0\u95EE\u9898\uFF0C\u8BF7\u68C0\u67E5\uFF01
`,i,`
URL\uFF1A`+t,`
\u6700\u7EC8 URL\uFF1A`+e.responseURL,`
\u8FD4\u56DE\u72B6\u6001\uFF1A`+e.statusText,`
\u8FD4\u56DE\u5185\u5BB9\uFF1A`+e.responseText)}},e.onerror=function(){console.log("URL\uFF1A"+t,e.statusText),GM_notification({text:"\u274C \u83B7\u53D6\u4E0B\u4E00\u9875\u5931\u8D25...",timeout:5e3})},e.ontimeout=function(){setTimeout(function(){curSite.pageUrl=""},3e3),console.log("URL\uFF1A"+t,e.statusText),GM_notification({text:"\u274C \u83B7\u53D6\u4E0B\u4E00\u9875\u8D85\u65F6\uFF0C\u53EF 3 \u79D2\u540E\u518D\u6B21\u6EDA\u52A8\u7F51\u9875\u91CD\u8BD5\uFF08\u6216\u5C1D\u8BD5\u5237\u65B0\u7F51\u9875\uFF09...",timeout:5e3})},e.send()}}function getPageE_(t,e="",i="GET",n="",r){let a,o;switch(e){case"json":o="application/json",a="application/json; charset="+(document.characterSet||document.charset||document.inputEncoding);break;case"text":o="text/plain",a="text/plain; charset="+(document.characterSet||document.charset||document.inputEncoding);break;default:o="text/html,application/xhtml+xml,application/xml",a="text/html; charset="+(document.characterSet||document.charset||document.inputEncoding)}GM_xmlhttpRequest({url:t,method:i,data:n,responseType:e,overrideMimeType:a,headers:{Referer:curSite.noReferer===!0?null:location.href,"Content-Type":i==="POST"?"application/x-www-form-urlencoded":"",Accept:o},timeout:5e3,onload:function(l){try{switch(e){case"json":curSite.pager.insertE(l.response,r);break;case"text":curSite.pager.insertE(l.responseText,r);break;default:curSite.pager.insertE(createDocumentByString(l.responseText),r)}}catch(s){console.log(s)}},onerror:function(l){setTimeout(function(){curSite.pageUrl=""},3e3),console.log("URL\uFF1A"+t,l),GM_notification({text:"\u274C \u83B7\u53D6\u4E0B\u4E00\u9875\u5931\u8D25\uFF0C\u53EF 3 \u79D2\u540E\u518D\u6B21\u6EDA\u52A8\u7F51\u9875\u91CD\u8BD5\uFF08\u6216\u5C1D\u8BD5\u5237\u65B0\u7F51\u9875\uFF09...",timeout:5e3})},ontimeout:function(l){setTimeout(function(){curSite.pageUrl=""},3e3),console.log("URL\uFF1A"+t,l),GM_notification({text:"\u274C \u83B7\u53D6\u4E0B\u4E00\u9875\u8D85\u65F6\uFF0C\u53EF 3 \u79D2\u540E\u518D\u6B21\u6EDA\u52A8\u7F51\u9875\u91CD\u8BD5\uFF08\u6216\u5C1D\u8BD5\u5237\u65B0\u7F51\u9875\uFF09...",timeout:5e3})}})}function insIframe(t){if(curSite.SiteTypeID==0)return;curSite.SiteTypeID=0;let e=document.createElement("iframe");e.id="Autopage_iframe",e.src=t.replace(/#.+$/,""),document.documentElement.appendChild(document.createElement("style")).textContent="iframe#Autopage_iframe {position: absolute !important; width: 100% !important; height: 100% !important; border: none !important;}";var i=document.documentElement.scrollTop||document.body.scrollTop;window.addEventListener("scroll",function(){let n=document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.clientHeight||document.body.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight,o=document.documentElement.scrollTop||document.body.scrollTop,l=o-i;if(l==0)return!1;if(i=o,l>0&&n+r+10>=a&&!getCSS("#Autopage_iframe-scroll")){let s=document.createElement("style");s.id="Autopage_iframe-scroll",s.textContent="html::-webkit-scrollbar, body::-webkit-scrollbar {width: 0 !important;height: 0 !important;} html, body {scrollbar-width: none !important;}",curSite.pager.style&&(s.textContent+=curSite.pager.style),document.documentElement.appendChild(s),e.contentWindow.document.querySelectorAll("#Autopage_iframe-scroll-hidden")&&e.contentWindow.document.querySelectorAll("#Autopage_iframe-scroll-hidden").forEach(c=>{c.remove()}),e.focus(),e.contentWindow.document.body&&(e.contentWindow.document.body.focus(),e.contentWindow.document.body.click())}else if(l<0&&n+r+10<=a&&getCSS("#Autopage_iframe-scroll")&&(getCSS("#Autopage_iframe-scroll").remove(),!e.contentWindow.document.getElementById("Autopage_iframe-scroll-hidden"))){let s=document.createElement("style");s.id="Autopage_iframe-scroll-hidden",s.textContent="html, body {overflow: hidden !important;}",e.contentWindow.document.documentElement.appendChild(s)}},!1),e.onload=function(){if(!getCSS("#Autopage_iframe-scroll")&&!e.contentWindow.document.getElementById("Autopage_iframe-scroll-hidden")){let n=document.createElement("style");n.id="Autopage_iframe-scroll-hidden",n.textContent="html, body {overflow: hidden !important;}",e.contentWindow.document.documentElement.appendChild(n)}curSite.history===void 0?GM_getValue("menu_history",!0)&&addHistory(e.contentWindow.document,e.contentWindow.document.title):curSite.history&&addHistory(e.contentWindow.document,e.contentWindow.document.title),curSite.hiddenPN||getCSS("#Autopage_number",window.top.document)&&pageNumIncrement()},location.hostname=="www.cocomanga.com"?document.body.appendChild(e):document.documentElement.appendChild(e)}function insIframe_(t){if(!pausePage)return;pausePage=!1;let e=document.getElementById("Autopage_iframe");e||(e=document.createElement("iframe"),e.id="Autopage_iframe",e.src=t.replace(/#.+$/,""),document.documentElement.appendChild(document.createElement("style")).textContent="iframe#Autopage_iframe {position: absolute !important; top: -9999px !important; left: -9999px !important; width: 100% !important; height: 100% !important; border: none !important; z-index: -999 !important;}"),e.onload=function(){curSite.pager.loadTime||(curSite.pager.loadTime=300);let i=0,n=setInterval(function(){let r=(e.contentWindow.document.documentElement.scrollHeight||e.contentWindow.document.body.scrollHeight)/10;e.contentWindow.scrollTo(0,999999),e.contentWindow.scrollTo(0,r*i),++i==10&&(clearInterval(n),processElems(e.contentWindow.document),pausePage=!0)},curSite.pager.loadTime/10)},document.getElementById("Autopage_iframe")?e.src=t.replace(/#.+$/,""):document.documentElement.appendChild(e)}function processElems(t){curSite.pager.insertP||(curSite.pager.insertP=[curSite.pager.pageE,5]);let e=getAll(curSite.pager.pageE,t,t),i;if(curSite.pager.insertP[1]===5?i=toE5pop(getAll(curSite.pager.insertP[0])):i=getOne(curSite.pager.insertP[0]),e.length>0&&i){curSite.function&&curSite.function.bF&&(curSite.function.bFp?typeof curSite.function.bF=="string"?e=new Function("pageE","bFp","fun",curSite.function.bF)(e,curSite.function.bFp,window.autoPage):e=curSite.function.bF(e,curSite.function.bFp):typeof curSite.function.bF=="string"?e=new Function("pageE","fun",curSite.function.bF)(e,window.autoPage):e=curSite.function.bF(e)),(curSite.blank===4||curSite.blank===5||curSite.blank===6)&&(e=forceTarget(e));let n=getAddTo(curSite.pager.insertP[1]);if(curSite.pager.insertP[1]===6){let r="";curSite.pager.insertP6Br===!1?unsafeWindow.insertP6Br===!0?r+="<br/><br/>":unsafeWindow.insertP6Br===void 0&&getAll("br",getOne(curSite.pager.pageE)).length>10&&(function(o){const l=Array.from(o.childNodes).filter(c=>c.nodeType===Node.ELEMENT_NODE||c.nodeType===Node.TEXT_NODE&&c.textContent.trim()!==""),s=l[l.length-1];return s.tagName==="BR"?!0:s.tagName==="P"&&s.classList.contains("readinline")?l[l.length-2].tagName==="BR":!1}(getOne(curSite.pager.pageE))?unsafeWindow.insertP6Br=!1:(unsafeWindow.insertP6Br=!0,r+="<br/><br/>")):curSite.pager.insertP6Br&&(r+="<br/><br/>"),e.forEach(function(a){r+=a.innerHTML}),i.insertAdjacentHTML(n,r)}else(curSite.pager.insertP[1]===2||curSite.pager.insertP[1]===4||curSite.pager.insertP[1]===5)&&e.reverse(),e.forEach(function(r){i.insertAdjacentElement(n,r)});if(pageNumIncrement(),curSite.history===void 0?GM_getValue("menu_history",!0)&&addHistory(t):curSite.history&&addHistory(t),curSite.pager.replaceE!==""&&replaceElems(t),curSite.pager.scriptT||curSite.pager.scriptT==0)switch(curSite.pager.scriptT){case 0:insScript("script",t);break;case 1:insScript("script:not([src])",t);break;case 2:(curSite.pager.insertP[1]===2||curSite.pager.insertP[1]===4||curSite.pager.insertP[1]===5)&&e.reverse(),insScript(null,e);break;case 3:(curSite.pager.insertP[1]===2||curSite.pager.insertP[1]===4||curSite.pager.insertP[1]===5)&&e.reverse(),insScript("script:not([src])",e);break}curSite.function&&curSite.function.aF&&(curSite.function.aFp?typeof curSite.function.aF=="string"?new Function("aFp","fun",curSite.function.aF)(curSite.function.aFp,window.autoPage):curSite.function.aF(curSite.function.aFp):typeof curSite.function.aF=="string"?new Function("fun",curSite.function.aF)(window.autoPage):curSite.function.aF())}else console.log(curSite.pager.pageE,e,curSite.pager.insertP,i,t),curSite.retry?(console.warn("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] \u83B7\u53D6\u4E3B\u4F53\u5143\u7D20\u5931\u8D25\uFF0C"+curSite.retry+"\u6BEB\u79D2 \u540E\u53EF\u5411\u4E0B\u7FFB\u7F51\u9875\u6765\u89E6\u53D1\u811A\u672C\u5C1D\u8BD5\u91CD\u65B0\u83B7\u53D6..."),setTimeout(function(){curSite.pageUrl=""},curSite.retry)):console.error("[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] \u83B7\u53D6\u4E3B\u4F53\u5143\u7D20\u5931\u8D25...")}function src_bF(t,e=[0,"img[data-original], img[data-src]","data-original"]){return e[2]===void 0&&(e[2]="data-original"),t.forEach(function(i){e[0]==0?i.tagName==="IMG"?i.getAttribute(e[2])?i.src=i.getAttribute(e[2]):i.dataset.src&&(i.src=i.dataset.src):i.querySelectorAll(e[1]).forEach(function(n){n.getAttribute(e[2])?n.src=n.getAttribute(e[2]):n.dataset.src&&(n.src=n.dataset.src)}):e[0]==1&&(i.tagName==="IMG"?i.getAttribute(e[2])?i.style.backgroundImage='url("'+i.getAttribute(e[2])+'")':i.dataset.src&&(i.style.backgroundImage='url("'+i.dataset.src+'")'):i.querySelectorAll(e[1]).forEach(function(n){n.getAttribute(e[2])?n.style.backgroundImage='url("'+n.getAttribute(e[2])+'")':n.dataset.src&&(n.style.backgroundImage='url("'+n.dataset.src+'")')}))}),t}function xs_bF(t,e){return t.forEach(function(i){i.innerHTML=i.innerHTML.replace(e[0],e[1])}),t}function getNextE_(t){t||(t=curSite.pager.nextL);let e=getOne(t);if(e&&e.nodeType===1&&e.href&&e.href.slice(0,4)==="http"&&e.getAttribute("href").slice(0,1)!=="#"){if(e.href!=curSite.pageUrl)if(curSite.pager.forceHTTPS&&location.protocol==="https:"){if(e.href.replace(/^http:/,"https:")===curSite.pageUrl)return!1;curSite.pageUrl=e.href.replace(/^http:/,"https:")}else curSite.pageUrl=e.href;else return!1;return!0}return!1}function getNextE(t){if(!t)if(typeof curSite.pager.nextL=="string"&&curSite.pager.nextL.match(/^js;/i)===null)t=curSite.pager.nextL;else return"";let e=getOne(t);return e&&e.nodeType===1&&e.href&&e.href.slice(0,4)==="http"&&e.getAttribute("href").slice(0,1)!=="#"&&e.href!=curSite.pageUrl?curSite.pager.forceHTTPS&&location.protocol==="https:"?e.href.replace(/^http:/,"https:")===curSite.pageUrl?"":e.href.replace(/^http:/,"https:"):e.href:""}function getNextEP(t,e,i){let n=getOne(t),r="";return n&&n.textContent&&(n=n.textContent.replaceAll(" ",""),location.search?indexOF(e,"s")?r=location.search.replace(i,e+n):r=location.search+"&"+e+n:r="?"+e+n,r=location.origin+location.pathname+r),r}function getNextSP(t,e,i){let n="";return t?(typeof t=="number"&&(t=t.toString()),location.search?indexOF(e,"s")?n=location.search.replace(i,e+t):n=location.search+"&"+e+t:n="?"+e+t,location.origin+location.pathname+n):n}function getNextEPN(t,e,i,n=""){let r=getOne(t),a="";return r&&r.textContent&&(r=r.textContent.replaceAll(" ",""),location.pathname&&indexOF(e)?a=location.pathname.replace(e,i+r+n):a=location.pathname+i+r+n,a=location.origin+a+location.search),a}function getNextUPN(t,e,i,n="",r="2",a){let o=t.exec(location.pathname);if(o){if(o.length>1?o=String(parseInt(o[1])+1):o=String(parseInt(o[0])+1),a&&parseInt(o)>parseInt(a))return""}else if(o=r,a&&parseInt(o)>parseInt(a))return"";let l="";return location.pathname&&indexOF(e)?l=location.pathname.replace(e,i+o+n):l=location.pathname+i+o+n,l=location.origin+l+location.search,l}function getNextUP(t,e,i=location.pathname,n="2",r){let a=getSearch(t.replace("=",""));if(a){if(a=String(parseInt(a)+1),r&&parseInt(a)>parseInt(r))return""}else if(a=n,r&&parseInt(a)>parseInt(r))return"";let o="";return location.search?indexOF(t,"s")?o=location.search.replace(e,t+a):o=location.search+"&"+t+a:o="?"+t+a,o=location.origin+i+o,o}function getNextF(t){let e=getOne(t),i="";return e&&(e.querySelectorAll("input[name]").forEach(function(n){i+=n.name+"="+n.value+"&"}),i=encodeURI(i.replace(/&$/,"")),e.action&&i)?e.action+"?"+i:""}function checkURL(t){if(curSite.pager.nextL)if(typeof curSite.pager.nextL=="function"){let e=curSite.pager.nextL();if(!e||e===curSite.pageUrl||e.slice(0,4)!=="http")return;curSite.pageUrl=e,t(curSite.pageUrl)}else if(curSite.pager.nextL.search(/^js;/i)===0)try{let e=new Function("fun",curSite.pager.nextL.slice(3))(window.autoPage);if(!e||e===curSite.pageUrl||e.slice(0,4)!=="http")return;curSite.pageUrl=e,t(curSite.pageUrl)}catch(e){console.error(`[\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875] - \u5F53\u524D\u7F51\u9875\u89C4\u5219 "nextL" \u5185 JS \u4EE3\u7801\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\uFF1A
`,curSite.pager.nextL+`

`,e)}else getNextE_()&&t(curSite.pageUrl)}function replaceElems(t,e=curSite.pager.replaceE,i=curSite.pager.replaceE){let n,r;if(curSite.pager.replaceE===void 0&&curSite.pager.nextL&&curSite.pager.nextL.search(/^js;/i)!==0){let a=getOne(curSite.pager.nextL);a.nextElementSibling&&a.nextElementSibling.tagName===a.tagName||a.previousElementSibling&&a.previousElementSibling.tagName===a.tagName?curSite.pager.nextL.slice(0,1)==="/"||curSite.pager.nextL.slice(0,2)==="./"||curSite.pager.nextL.slice(0,2)==="(/"||curSite.pager.nextL.slice(0,3)==="id("?e=i=curSite.pager.nextL+"/..":(n=getAllParentElement(curSite.pager.nextL),r=getAllParentElement(curSite.pager.nextL,t,t)):e=i=curSite.pager.nextL}if(!n&&!r&&e&&i&&(n=getAll(e),r=getAll(i,t,t)),n&&r&&n.length!=0&&r.length!=0&&n.length===r.length){for(let a=0;a<n.length;a++)n[a].outerHTML=r[a].outerHTML;return!0}else curSite.pager.replaceE!==void 0&&console.log(t,n,r);return!1}function addHistory(t,e,i){curSite.pageUrl&&window.top.history.toString()==="[object History]"&&(e=e||(t.querySelector("title")?t.querySelector("title").textContent:window.top.document.title),i=i||curSite.pageUrl,window.top.document.Autopage_nowUrl=curSite.pageUrl,i.indexOf(window.top.location.protocol)===-1&&(i=i.replace(/^https?:/,window.top.location.protocol)),window.top.history.pushState("Autopage_history",e,i),window.top.document.title=e)}function insScript(t,e=document,i=document.body){let n=e;t&&(e instanceof Array?(n=[],e.forEach(function(r){n=n.concat(getAll(t,r,r))})):n=getAll(t,e,e)),n.forEach(function(r){r.tagName==="SCRIPT"&&(r.src?i.appendChild(document.createElement("script")).src=r.src:i.appendChild(document.createElement("script")).textContent=r.textContent)})}function insStyle(t){t.indexOf("{")===-1&&(t+="{display: none !important;}"),document.documentElement.appendChild(document.createElement("style")).textContent=t}function getCSS(t,e=document){return e.querySelector(t)}function getAllCSS(t,e=document){return[].slice.call(e.querySelectorAll(t))}function getXpath(t,e,i=document){e=e||i;try{const n=i.evaluate(t,e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return n.singleNodeValue&&n.singleNodeValue.nodeType===1&&n.singleNodeValue}catch{throw new Error(`\u65E0\u6548 Xpath: ${t}`)}}function getAllXpath(t,e,i=document){e=e||i;const n=[];try{const r=i.evaluate(t,e,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(let a=0;a<r.snapshotLength;a++){const o=r.snapshotItem(a);o.nodeType===1&&n.push(o)}}catch{throw new Error(`\u65E0\u6548 Xpath: ${t}`)}return n}function getOne(t,e=void 0,i=document){if(t)return e=e||i,t.slice(0,1)==="/"||t.slice(0,2)==="./"||t.slice(0,2)==="(/"||t.slice(0,3)==="id("?getXpath(t,e,i):getCSS(t,e)}function getAll(t,e=void 0,i=document){return t?(e=e||i,t.slice(0,1)==="/"||t.slice(0,2)==="./"||t.slice(0,2)==="(/"||t.slice(0,3)==="id("?getAllXpath(t,e,i):getAllCSS(t,e)):[]}function getAllParentElement(t,e=void 0,i=document){e=e||i;const n=[];return getAll(t,e,i).forEach(r=>{const a=r.parentElement;n.includes(a)||n.push(a)}),n}function createDocumentByString(t){if(t){if(document.documentElement.nodeName!=="HTML")return new DOMParser().parseFromString(t,"application/xhtml+xml");var e;try{e=new DOMParser().parseFromString(t,"text/html")}catch{}if(e)return e;if(document.implementation.createHTMLDocument)e=document.implementation.createHTMLDocument("ADocument");else try{(e=document.cloneNode(!1)).appendChild(e.importNode(document.documentElement,!1)),e.documentElement.appendChild(e.createElement("head")),e.documentElement.appendChild(e.createElement("body"))}catch{}if(e){var i=document.createRange(),n=i.createContextualFragment(t);i.selectNodeContents(document.body),e.body.appendChild(n);for(var r,a={TITLE:!0,META:!0,LINK:!0,STYLE:!0,BASE:!0},o=e.body,l=o.childNodes,s=l.length-1;s>=0;s--)a[(r=l[s]).nodeName]&&o.removeChild(r);return e}}else console.error("\u6CA1\u6709\u627E\u5230\u8981\u8F6C\u6210 DOM \u7684\u5B57\u7B26\u4E32",t)}function openInTab(t,e){window.open(t)}function forceTarget(t){if(curSite.blank===1)document.head.appendChild(document.createElement("base")).target="_blank";else{if(curSite.blank===5||curSite.blank===6)return t||(t=getAll(curSite.pager.pageE)),t.forEach(function(e){getAllCSS('a[href]:not([target="_blank"]):not([href^="#"]):not([href^="javascript:"])',e).forEach(function(i){if(i.href.slice(0,4)=="http"){const n=i.cloneNode(!0);n.target="_blank",curSite.blank===6&&n.addEventListener("click",function(r){r.stopPropagation()}),i.insertAdjacentElement("afterend",n),i.remove()}})}),t;if(curSite.blank===4)return t||(t=getAll(curSite.pager.pageE)),t.forEach(function(e){getAllCSS('a[href]:not([target="_blank"]):not([onclick]):not([href^="#"]):not([href^="javascript:"])',e).forEach(function(i){i.href.slice(0,4)=="http"&&(i.target="_blank")})}),t;{let i=function(n,r){n.href&&n.target!="_blank"&&!n.getAttribute("onclick")&&n.href.slice(0,4)=="http"&&n.getAttribute("href").slice(0,1)!="#"&&(r.stopPropagation(),r.preventDefault(),GM_openInTab(n.href,{active:!0,insert:!0,setParent:!0}))},e;if(curSite.blank===2)e=document.body;else if(curSite.blank===3){let n=toE5pop(getAll(curSite.pager.pageE));n&&n.parentElement!=null&&(e=n.parentElement)}if(!e)return;e.addEventListener("click",function(n){if(n.target.tagName==="A")i(n.target,n);else{let r=n.path||n.composedPath();for(let a=1;a<r.length-4;a++)if(r[a].tagName==="A"){i(r[a],n);break}}})}}}function cleanuEvent(t,e=0,i=-1){setTimeout(()=>{getAll(t).forEach(function(n){const r=n.cloneNode(!0);(i==0||i==1)&&r.getAttribute("onclick")!=null&&r.removeAttribute("onclick"),(i==0||i==2)&&r.addEventListener("click",function(a){a.stopPropagation()}),n.insertAdjacentElement("afterend",r),n.remove()},e)})}function isHidden(t){return t.offsetParent===null}function isMobile(){return/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|MicroMessenger|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(navigator.userAgent)||window.screen.width<500&&window.screen.height<800}function isUrlC(){urlC=!0}function indexOF(t,e="p",i=!0){switch(e){case"h":e=location.href;break;case"p":e=location.pathname;break;case"s":e=location.search;break}if(t instanceof RegExp){if(t.test(e))return!0}else if(i&&(t=t.toLowerCase(),e=e.toLowerCase()),e.indexOf(t)!=-1)return!0;return!1}function isTitle(t){return document.title.indexOf(t)>-1}function isPager(t){if(!t){if(!DBSiteNow.pager)return!1;if(DBSiteNow.pager.type===void 0||DBSiteNow.pager.type===1||DBSiteNow.pager.type===3||DBSiteNow.pager.type===6)typeof DBSiteNow.pager.nextL=="string"&&DBSiteNow.pager.nextL.match(/^js;/i)===null&&(t="n"),DBSiteNow.pager.pageE&&(t?t="n,p":t="p");else if(DBSiteNow.pager.type===2||DBSiteNow.pager.type===5)typeof DBSiteNow.pager.nextL=="string"&&DBSiteNow.pager.nextL.match(/^js;/i)===null&&(t="n");else if(DBSiteNow.pager.type===4)return!1;if(!t)return!1}const e=t.split(",");for(let i=0;i<e.length;i++)switch(e[i]){case"n":if(!getOne(DBSiteNow.pager.nextL))return!1;break;case"p":if(!getOne(DBSiteNow.pager.pageE))return!1;break;case"i":if(!getOne(DBSiteNow.pager.insertP[0]))return!1;break;case"r":if(!getOne(DBSiteNow.pager.replaceE))return!1;break}return!0}function getSearch(t){let e=window.location.search.substring(1),i=e.split("&");for(var n=0;n<i.length;n++){var r=i[n].split("=");if(r[0]==t)return r[1]}return""}function menu_disable(t){switch(t){case"check":return e();case"add":i();break;case"del":n();break}function e(){return GM_getValue("menu_disable").indexOf(location.hostname)!=-1}function i(){if(e())return;let r=GM_getValue("menu_disable");r.push(location.hostname),GM_setValue("menu_disable",r),location.reload()}function n(){if(!e())return;let r=GM_getValue("menu_disable"),a=r.indexOf(location.hostname);r.splice(a,1),GM_setValue("menu_disable",r),location.reload()}}function pausePageEvent(){GM_getValue("menu_pause_page")&&curSite.SiteTypeID!==0&&(curSite.pager&&curSite.pager.type==5&&(window.top.document.xiu_pausePage=pausePage),document.body.addEventListener("dblclick",function(){pausePage?GM_notification({text:`\u274C \u5DF2\u6682\u505C\u672C\u9875 [\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875]
    \uFF08\u518D\u6B21\u53CC\u51FB\u53EF\u6062\u590D\uFF09`,timeout:2e3}):GM_notification({text:`\u2705 \u5DF2\u6062\u590D\u672C\u9875 [\u81EA\u52A8\u65E0\u7F1D\u7FFB\u9875]
    \uFF08\u518D\u6B21\u53CC\u51FB\u53EF\u6682\u505C\uFF09`,timeout:2e3}),document.querySelector("#Autopage_number")?document.querySelector("#Autopage_number").shadowRoot.querySelector("#Autopage_number_button").click():(pausePage=!pausePage,curSite.pager&&curSite.pager.type==5&&(window.top.document.xiu_pausePage=pausePage))}))}function customRules(){if(getCSS("#Autopage_customRules"))return;let t=customStringify(GM_getValue("menu_customRules",{}));t=="{}"&&(t=`{
    
}`);let e=`<style>* {font-family: system-ui !important;}</style><div style="left: 0; right: 0; top: 0; bottom: 0; width: 100%; height: 100%; margin: auto; padding: 25px 10px 10px 10px; position: fixed; opacity: 0.95; z-index: 9999999; background-color: #eee; color: #222; font-size: 14px; overflow: scroll; text-align: left;-webkit-touch-callout: text !important;-webkit-user-select: text !important;-khtml-user-select: text !important;-moz-user-select: text !important;-ms-user-select: text !important;user-select: text !important;">
<h3 style="font-size: 22px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"><strong># \u81EA\u5B9A\u4E49\u7FFB\u9875\u89C4\u5219\uFF08\u4F18\u5148\u7EA7\u6700\u9AD8\uFF0C\u4F1A\u8986\u76D6\u540C\u540D\u7684\u5916\u7F6E\u7FFB\u9875\u89C4\u5219\uFF09-\u3010\u5C06\u89C4\u5219\u63D2\u5165\u9ED8\u8BA4\u7684 <code>{ }</code> \u4E2D\u95F4\u3011</strong></h3>
<details><summary style="cursor: pointer;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"><kbd><strong>\u300C \u70B9\u51FB\u5C55\u5F00 \u67E5\u770B\u89C4\u5219\u793A\u4F8B \u300D\uFF08\u4E3A\u4E86\u907F\u514D\u9700\u8981\u7684\u65F6\u5019\u8FD8\u8981\u627E\uFF0C\u6211\u5E72\u8106\u628A\u5E38\u7528\u89C4\u5219\u90FD\u4E00\u80A1\u8111\u585E\u8FDB\u53BB\u4E86\uFF09</strong></kbd></summary>
<ul style="list-style: disc; margin-left: 35px;">
<li>\u7FFB\u9875\u89C4\u5219\u4E3A JSON \u683C\u5F0F\uFF0C\u56E0\u6B64\u5927\u5BB6\u9700\u8981\u591A\u5C11<strong>\u4E86\u89E3\u4E00\u70B9 JSON \u7684\u57FA\u672C\u683C\u5F0F</strong>\uFF08\u4E3B\u8981\u5C31\u662F\u672B\u5C3E\u9017\u53F7\u3001\u8F6C\u4E49\u3001\u53CC\u5F15\u53F7\u7B49\uFF09\u3002</li>
<li>\u5177\u4F53\u7684\u7FFB\u9875\u89C4\u5219\u8BF4\u660E\u3001\u793A\u4F8B\uFF0C\u4E3A\u4E86\u65B9\u4FBF\u66F4\u65B0\u53CA\u8865\u5145\uFF0C\u6211\u90FD\u5199\u5230 <strong><a href="https://github.com/XIU2/UserScript/issues/176" target="_blank">Github Issues</a></strong> \u91CC\u9762\u4E86\u3002</li>
<li>\u811A\u672C\u4F1A\u81EA\u52A8\u683C\u5F0F\u5316\u89C4\u5219\uFF0C\u56E0\u6B64<strong>\u65E0\u9700\u624B\u52A8\u7F29\u8FDB\u3001\u6362\u884C</strong>\uFF0C\u53EA\u9700\u628A\u89C4\u5219<strong>\u63D2\u5165\u9ED8\u8BA4\u7684 { } \u4E2D\u95F4</strong>\u5373\u53EF\u3002</li>
</ul>
<pre class="notranslate" style="white-space: pre-wrap;user-select: auto;">
// \u4E0B\u9762\u793A\u4F8B\u662F\u628A\u6240\u6709\u89C4\u5219\u90FD\u585E\u8FDB\u53BB\u4E86\uFF0C\u4F46\u5B9E\u9645\u4E0A\u5927\u90E8\u5206\u90FD\u7528\u4E0D\u4E0A\uFF0C\u5927\u591A\u6570\u7F51\u7AD9\u53EA\u9700\u8981\u50CF\u7B2C\u4E00\u4E2A "aaa" \u8FD9\u6837\u7684\u89C4\u5219\uFF08\u4E0B\u65B9 \u793A\u4F8B\u4E00 \u4E2D url\u3001replaceE\u3001scrollD \u5747\u53EF\u6309\u9700\u7701\u7565\uFF09\uFF1A

// "aaa"       \u662F\u89C4\u5219\u540D\uFF0C\u552F\u4E00\uFF0C\u56E0\u4E3A \u81EA\u5B9A\u4E49\u7FFB\u9875\u89C4\u5219 \u4F18\u5148\u7EA7\u6700\u9AD8\uFF0C\u6240\u4EE5\u4F1A\u8986\u76D6\u540C\u540D\u7684 \u5916\u7F6E\u7FFB\u9875\u89C4\u5219
// "host"      \u662F\u57DF\u540D\uFF0C\u652F\u6301\u6B63\u5219\u8868\u8FBE\u5F0F\uFF08\u5982 \u793A\u4F8B\u56DB\uFF09\uFF0C\u4E5F\u53EF\u4EE5\u50CF\u8FD9\u6837 \u793A\u4F8B\u4E09 \u90A3\u6837\u5199\u591A\u4E2A\u57DF\u540D\u6216\u6B63\u5219\u8868\u8FBE\u5F0F\uFF08\u5F53\u7136\u4E5F\u53EF\u4EE5\u6DF7\u7528\uFF09\uFF0C\u5982\u679C\u7701\u7565\uFF0C\u5219\u9ED8\u8BA4\u5339\u914D\u6240\u6709\u57DF\u540D\uFF08\u4F1A\u5BF9\u6240\u6709\u57DF\u540D\u5339\u914D url \u89C4\u5219\u5224\u65AD\uFF0C\u53EF\u4EE5\u5F53\u6210\u4E00\u4E2A\u7B80\u5355\u7684\u5916\u7F6E/\u81EA\u5B9A\u4E49\u901A\u7528\u89C4\u5219\u7684\u65B9\u6848\uFF09
// "url"       \u662F\u7528\u6765\u63A7\u5236\u54EA\u4E9B\u7F51\u7AD9\u4E2D\u9875\u9762\u9002\u7528\u8BE5\u89C4\u5219\uFF0C\u7701\u7565\u540E\u4EE3\u8868\u8BE5\u89C4\u5219\u5E94\u7528\u4E8E\u5168\u7AD9\uFF08\u5982\u679C\u4E0D\u77E5\u9053\u5199\u4EC0\u4E48\uFF0C\u90A3\u4E48\u5C31\u5199 return fun.isPager() \u8FD9\u6837\u811A\u672C\u4F1A\u9ED8\u8BA4\u81EA\u52A8\u5339\u914D\u5F53\u524D\u7F51\u7AD9\u4E0B\u5B58\u5728 nextL \u53CA pageE \u5143\u7D20\u7684\u7F51\u9875\uFF0C\u5927\u90E8\u5206\u7F51\u7AD9\u662F\u6CA1\u95EE\u9898\u7684\uFF0C\u5982\u679C\u6539\u4E3A\u5339\u914D replaceE \u6216\u8005\u5176\u4ED6\u7EC4\u5408\uFF0C\u90A3\u4E48\u8BF7\u53BB\u4E0A\u9762\u7684 Github Issues \u91CC\u7684 \u5185\u7F6E\u51FD\u6570 \u4E2D\u67E5\u770B\u5177\u4F53\u4F7F\u7528\u65B9\u6CD5\uFF1B\u53E6\u5916\uFF0Curl \u89C4\u5219\u4E2D\u53EF\u901A\u8FC7\u64CD\u4F5C rule \u8FD9\u4E2A\u5BF9\u8C61\u53D8\u91CF\u6765\u4FEE\u6539\u5F53\u524D\u7F51\u9875\u5B9E\u9645\u5E94\u7528\u7684\u89C4\u5219\uFF0C\u5982 rule.pager.pageE='#a' \u5177\u4F53\u793A\u4F8B\u4E5F\u89C1 Github Issues \u91CC\uFF09

// "nextL"     \u662F\u7528\u6765\u6307\u5B9A\u542B\u6709\u4E0B\u4E00\u9875\u5730\u5740\u7684\u5143\u7D20\u9009\u62E9\u5668\uFF08CSS \u6216 XPath \u90FD\u884C\uFF0C\u4E00\u822C\u90FD\u662F &lt;a&gt; \u5143\u7D20\uFF09
// "pageE"     \u662F\u6307\u5B9A\u8981\u4ECE\u4E0B\u4E00\u9875\u83B7\u53D6\u7684\u5143\u7D20\u9009\u62E9\u5668\uFF08\u4E5F\u5C31\u662F\u7F51\u9875\u4E3B\u4F53\u5185\u5BB9\uFF09\uFF0C\u5E76\u5C06\u5176\u63D2\u5165\u5F53\u524D\u7F51\u9875\u4E2D\u540C\u6837\u5143\u7D20\u7684\u672B\u5C3E
// "replaceE"  \u7528\u4E8E\u5C06\u5F53\u524D\u7F51\u9875\u4E2D\u7684\u9875\u7801\u5143\u7D20\u66FF\u6362\u4E3A\u4E0B\u4E00\u9875\u7684\u9875\u7801\u5143\u7D20\u9009\u62E9\u5668\uFF08\u8FD9\u6837\u624D\u80FD\u65E0\u9650\u7FFB\u9875\u4E0B\u53BB\uFF09\uFF0C\u7701\u7565\u540E\u5C06\u4F1A\u81EA\u52A8\u5224\u65AD\u662F\u66FF\u6362 nextL \u5143\u7D20\u81EA\u8EAB\u8FD8\u662F nextL \u5143\u7D20\u7684\u7236\u5143\u7D20\uFF08\u5F53 nextL \u5143\u7D20\u540E\u9762\u6216\u524D\u9762\u6709\u5176\u81EA\u8EAB &lt;a&gt; \u5143\u7D20\u7684\u76F8\u90BB\u5144\u5F1F\u5143\u7D20\u65F6\u811A\u672C\u4F1A\u66FF\u6362\u5176\u7236\u5143\u7D20\uFF0C\u53CD\u4E4B\u6CA1\u6709\u76F8\u90BB\u5144\u5F1F\u5143\u7D20\u5219\u66FF\u6362\u5176\u81EA\u8EAB\uFF0C\u4EC5\u9650\u6A21\u5F0F1/3/6\uFF0C\u4E14 "js;" \u5F00\u5934\u7684 nextL \u89C4\u5219\u9664\u5916\uFF09\uFF0C\u503C\u4E3A\u7A7A "" \u65F6\u5219\u5B8C\u5168\u4E0D\u66FF\u6362
// "scrollD"   \u662F\u7528\u6765\u6307\u5B9A\u89E6\u53D1\u7FFB\u9875\u7684\u6EDA\u52A8\u6761\u4E0E\u5E95\u90E8\u4E4B\u95F4\u7684\u8DDD\u79BB\uFF0C\u5F53\u6EDA\u52A8\u6761\u5E95\u90E8\u8DDD\u79BB\u7F51\u9875\u5E95\u90E8\u4E4B\u95F4\u7684\u8DDD\u79BB\u7B49\u4E8E\u6216\u5C0F\u4E8E\u8BE5\u503C\u65F6\uFF0C\u5C06\u89E6\u53D1\u7FFB\u9875\uFF0C\u56E0\u6B64\u503C\u8D8A\u5927\u5C31\u8D8A\u65E9\u89E6\u53D1\u7FFB\u9875\uFF0C\u8BBF\u95EE\u901F\u5EA6\u6162\u7684\u7F51\u7AD9\u9700\u8981\u8C03\u5927\uFF0C\u53EF\u7701\u7565(\u8BB0\u5F97\u79FB\u9664\u4E0A\u4E00\u884C\u672B\u5C3E\u9017\u53F7)\uFF0C\u7701\u7565\u540E\u9ED8\u8BA4 2000

// "inherits"  \u662F\u7EE7\u627F\u6807\u8BC6\uFF0C\u5F53\u4F60\u53EA\u9700\u8981\u5BF9\u67D0\u4E2A\u5916\u7F6E\u89C4\u5219\u4E2D \u589E\u5220\u6539 \u90E8\u5206\u89C4\u5219\u5185\u5BB9\u65F6\uFF08\u6BD4\u5982\u53EA\u662F\u4FEE\u6539\u57DF\u540D\uFF09\uFF0C\u90A3\u4E48\u5C31\u53EF\u4EE5\u50CF\u4E0B\u9762\u7B2C\u4E8C\u4E2A "aaa" \u89C4\u5219\u4E00\u6837\u5199\u4E00\u4E2A\u540C\u540D\u89C4\u5219\uFF0C\u89C4\u5219\u5185\u53EA\u9700\u8981\u6709\u8981\u4FEE\u6539\u7684 host \u5185\u5BB9\uFF0C\u4EE5\u53CA inherits \u6807\u8BC6\uFF0C\u8FD9\u6837\u811A\u672C\u5C31\u4F1A\u5C06\u8FD9\u4E2A\u81EA\u5B9A\u4E49\u7FFB\u9875\u89C4\u5219\u4E2D\u7684 host \u8986\u76D6\u6389\u5916\u7F6E\u7FFB\u9875\u89C4\u5219\u4E2D\u7684 host\uFF0C\u800C\u8BE5\u7FFB\u9875\u89C4\u5219\u5185\u7684\u5176\u4ED6\u89C4\u5219\u5185\u5BB9\u5219\u4E0D\u53D8\u3002\u5373\u66F4\u7075\u6D3B\u4E86\uFF0C\u65E0\u9700\u6BCF\u6B21\u4E3A\u4E86\u4FEE\u6539\u90E8\u5206\u89C4\u5219\u800C\u53BB\u590D\u5236\u5168\u90E8\u89C4\u5219\u4E86\uFF0C\u4E5F\u4E0D\u7528\u62C5\u5FC3\u6211\u540E\u7EED\u66F4\u65B0\u8FD9\u4E2A\u5916\u7F6E\u89C4\u5219\u540E\uFF0C\u4F60\u8FD8\u9700\u8981\u518D\u6B21\u590D\u5236\u4E00\u904D\u6765\u4FEE\u6539\u3002\u3002\u3002

{
    "aaa": {
        "host": "aaaa",
        "url": "return fun.isPager()",
        "pager": {
            "nextL": "xxxx",
            "pageE": "xxxx",
            "replaceE": "xxxx",
            "scrollD": 2000
        }
    },
    "aaa": {
        "host": "cccc",
        "inherits": true
    },
    "bbb": {
        "host": ["bbb1.com", "bbb2.com"],
        "url": "/^\\\\/s$/",
        "style": ".aaaa {xxx: xxx}\uFF08\u5982\u679C\u53EA\u662F\u4E3A\u4E86\u5355\u7EAF\u5C4F\u853D\u9690\u85CF\u67D0\u4E9B\u5143\u7D20\uFF0C\u90A3\u4E48\u8FD9\u91CC\u53EA\u9700\u8981\u5199 CSS \u9009\u62E9\u5668\u5373\u53EF\uFF0C\u811A\u672C\u4F1A\u81EA\u52A8\u5728\u672B\u5C3E\u52A0\u4E0A {display: none !important;} \u7684\uFF09",
        "blank": 3,
        "hiddenPN": true,
        "history": false,
        "thread": true,
        "iframe": true,
        "pager": {
            "type": 1,
            "nextL": "id('page')//a[contains(text(),'\u4E0B\u4E00\u9875')] || id('page2')//a[text()='\u4E0B\u4E00\u9875']",
            "pageE": "aaa",
            "insertP": [".bbb",3],
            "replaceE": ".page",
            "scriptT": 1,
            "forceHTTPS": true,
            "interval": 500,
            "scrollD": 2000
        },
        "function": {
            "bF": "return fun.src_bF(pageE, [0,'img[data-src]','data-src'])",
            "bFp": "\u5173\u4E8E\u4E0A\u9762\u8FD9\u4E2A\u89E3\u51B3\u56FE\u7247\u61D2\u52A0\u8F7D\u7684 bF\uFF0C\u5982\u679C\u4F60\u8981\u9009\u62E9\u7684\u56FE\u7247\u662F img[data-original] \u6216 img[data-src]\uFF0C\u90A3\u4E48\u662F\u53EF\u4EE5\u76F4\u63A5\u7701\u7565\u4E3A\uFF1Areturn fun.src_bF(pageE)",
            "aF": "document.body.appendChild(document.createElement('script')).textContent = 'xxx'"
        }
    },
    "\u8FD9\u91CC\u4E5F\u53EF\u4EE5\u7528\u4E2D\u6587": {
        "host": "/\\\\.ccc\\\\.com/",
        "url": "fun.isUrlC(); return (fun.lp() == '/' || fun.indexOF('/s') || fun.isMobile())",
        "pager": {
            "type": 2,
            "nextL": "#autopbn",
            "nextText": "\u4E0B\u4E00\u9875",
            "nextTextOf": "\u4E0B\u4E00\u9875",
            "isHidden": true,
            "interval": 1000,
            "scrollD": 2000
        }
    }
}
</pre></details>
<details><summary style="cursor: pointer;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"><kbd><strong>\u300C \u70B9\u51FB\u5C55\u5F00 \u67E5\u770B\u6240\u6709\u89C4\u5219 \u300D\uFF08\u53EF\u6309 Ctrl+F \u641C\u7D22\u89C4\u5219\uFF0C\u811A\u672C\u5185\u7F6E\u7684\u901A\u7528\u89C4\u5219\u56E0\u683C\u5F0F\u9650\u5236\u65E0\u6CD5\u5217\u51FA\uFF09</strong></kbd></summary>
<pre id="Autopage_customRules_all" class="notranslate" style="overflow-y: scroll; overflow-x: hidden; height: 500px; word-break: break-all; white-space: pre-wrap;user-select: auto;"> </pre></details>

<textarea id="Autopage_customRules_textarea" style="min-width:95%; min-height:70%; display: block; margin: 10px 0 10px 0; white-space:pre; overflow:scroll; resize: revert; text-transform: initial;" placeholder="\u7559\u7A7A\u7B49\u4E8E\u9ED8\u8BA4\u7684 {}\uFF0C\u8BF7\u628A\u89C4\u5219\u63D2\u5165 {} \u4E4B\u95F4"></textarea>
<button id="Autopage_customRules_save" style="margin-right: 20px;">\u4FDD\u5B58\u5E76\u5237\u65B0</button><button id="Autopage_customRules_cancel">\u53D6\u6D88\u4FEE\u6539</button>
</div>`;document.documentElement.insertAdjacentHTML("beforeend",'<div id="Autopage_customRules" style="display: initial !important;position: fixed !important;z-index: 9999999 !important;"></div>');let i=getCSS("#Autopage_customRules"),n=i.attachShadow({mode:"open"});n.innerHTML=e,document.documentElement.style.overflow=document.body.style.overflow="hidden",getCSS("#Autopage_customRules_textarea",n).textContent=t,getCSS("#Autopage_customRules_all",n).textContent=customStringify(DBSite2),getCSS("#Autopage_customRules_save",n).onclick=function(){let r=getCSS("#Autopage_customRules_textarea",n);t=r.value,t||(t="{}");try{t=JSON.parse(t),GM_setValue("menu_customRules",t),location.reload()}catch(a){const o=a.message.match(/at position (\d+)/),l=parseInt(o[1]);console.error(`\u81EA\u5B9A\u4E49\u89C4\u5219\u5B58\u5728\u683C\u5F0F\u9519\u8BEF\uFF1A
`+a.message+`
\u9519\u8BEF\u4F4D\u7F6E\u4E3A\u8BE5\u533A\u57DF\u4E2D\u95F4\uFF1A
------
`+t.slice(l<30?0:l-30,l+29)+`
------

\u5E38\u89C1\u683C\u5F0F\u9519\u8BEF\uFF1A
1. \u9017\u53F7\uFF1A\u6BCF\u7EC4 { } \u4E2D\u7684\u6700\u540E\u4E00\u4E2A\u503C\u672B\u5C3E\u4E0D\u80FD\u52A0\u9017\u53F7
2. \u8F6C\u4E49\uFF1A\u5982\u679C\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\u542B\u6709\u8F6C\u4E49\u7B26 \\ \u90A3\u5C31\u8981\u5BF9\u5176\u518D\u6B21\u8F6C\u4E49\u4E3A \\\\
3. \u5F15\u53F7\uFF1A\u89C4\u5219\u4E2D\u5192\u53F7\u5DE6\u53F3\u7684\u5185\u5BB9\u90FD\u9700\u8981\u52A0\u4E0A\u53CC\u5F15\u53F7\uFF0C\u5982\u679C\u5185\u5BB9\u4E2D\u542B\u6709\u53CC\u5F15\u53F7\u5219\u9700\u8981\u5BF9\u53CC\u5F15\u53F7\u8F6C\u4E49\uFF08\u5373 \\" \u8FD9\u6837\uFF09\uFF0C\u6216\u6539\u4E3A\u5355\u5F15\u53F7`),window.alert(`\u81EA\u5B9A\u4E49\u89C4\u5219\u5B58\u5728\u683C\u5F0F\u9519\u8BEF\uFF1A
`+a.message+`
\u9519\u8BEF\u4F4D\u7F6E\u4E3A\u8BE5\u533A\u57DF\u4E2D\u95F4\uFF1A
------
`+t.slice(l<30?0:l-30,l+29)+`
------
\u70B9\u51FB\u3010\u786E\u5B9A\u3011\u540E\u811A\u672C\u4F1A\u4E3A\u4F60\u5B9A\u4F4D\u5E76\u9009\u4E2D\u7F16\u8F91\u6846\u4E2D\u683C\u5F0F\u9519\u8BEF\u7684\u6587\u672C\uFF08\u90E8\u5206\u683C\u5F0F\u9519\u8BEF\u5B9A\u4F4D\u53EF\u80FD\u4E0D\u592A\u7CBE\u786E\uFF0C\u4F46\u9519\u8BEF\u4E00\u5B9A\u662F\u5728\u9009\u4E2D\u6587\u672C\u7684\u9644\u8FD1\uFF0C\u5982\u679C\u662F\u9009\u4E2D\u4E86\u884C\u9996\u7684\u7A7A\u683C\uFF0C\u5219\u8BF4\u660E\u683C\u5F0F\u9519\u8BEF\u6765\u81EA\u4E0A\u4E00\u884C\u672B\u5C3E\u9017\u53F7\uFF09

\u5E38\u89C1\u683C\u5F0F\u9519\u8BEF\uFF1A
1. \u9017\u53F7\uFF1A\u6BCF\u7EC4 { } \u4E2D\u7684\u6700\u540E\u4E00\u4E2A\u503C\u672B\u5C3E\u4E0D\u80FD\u52A0\u9017\u53F7
2. \u8F6C\u4E49\uFF1A\u5982\u679C\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\u542B\u6709\u8F6C\u4E49\u7B26 \\ \u90A3\u5C31\u8981\u5BF9\u5176\u518D\u6B21\u8F6C\u4E49\u4E3A \\\\
3. \u5F15\u53F7\uFF1A\u89C4\u5219\u4E2D\u5192\u53F7\u5DE6\u53F3\u7684\u5185\u5BB9\u90FD\u9700\u8981\u52A0\u4E0A\u53CC\u5F15\u53F7\uFF0C\u5982\u679C\u5185\u5BB9\u4E2D\u542B\u6709\u53CC\u5F15\u53F7\u5219\u9700\u8981\u5BF9\u53CC\u5F15\u53F7\u8F6C\u4E49\uFF08\u5373 \\" \u8FD9\u6837\uFF09\uFF0C\u6216\u6539\u4E3A\u5355\u5F15\u53F7`),r.selectionStart=l-1,r.selectionEnd=l,r.focus()}},getCSS("#Autopage_customRules_cancel",n).onclick=function(){document.documentElement.style.overflow=document.body.style.overflow="",getCSS("#Autopage_customRules").remove()}}function customStringify(t){return JSON.stringify(t,null,4).replace(/(: \[)([\s\S]*?)(\],?\n)/g,(e,i,n,r)=>i+n.replace(/\n/g,"").replace(/\s{4}/g,"")+r)}function pageNumber(t){if(curSite.SiteTypeID===0||curSite.hiddenPN||curSite.pager&&curSite.pager.type==5&&self!=top){getCSS("#Autopage_number")&&getCSS("#Autopage_number").shadowRoot&&(getCSS("#Autopage_number_button",getCSS("#Autopage_number").shadowRoot).style.display="none");return}let e;switch(getCSS("#Autopage_number")&&getCSS("#Autopage_number").shadowRoot&&(e=getCSS("#Autopage_number_button",getCSS("#Autopage_number").shadowRoot)),t){case"add":i();break;case"del":r();break;case"set":n();break}function i(){if(e){e.style.display==="none"&&(e.style.display="flex");return}let a="<style>#Autopage_number_button {top: calc(75vh);left: 0;width: 32px;height: 32px;padding: 6px;display: flex;position: fixed;opacity: 0.3;transition: .2s;z-index: 9999998;cursor: pointer;user-select: none;flex-direction: column;align-items: center;justify-content: center;box-sizing: content-box;border-radius: 0 50% 50% 0;transform-origin: center;transform: translateX(-8px);background-color: #eee;-webkit-tap-highlight-color: transparent;box-shadow: 1px 1px 3px 0px #aaa;color: #000;font-size: medium;font-family: system-ui;} @media (any-hover: none) {#Autopage_number_button:active {opacity: 0.8;transform: translateX(0);}}@media (any-hover: hover) {#Autopage_number_button:hover {opacity: 0.8;transform: translateX(0);}}</style>",o=`<div id="Autopage_number_button" title="1. \u6B64\u4E3A\u3010\u5F53\u524D\u9875\u7801\u3011\uFF08\u4EC5\u6307\u811A\u672C\u7FFB\u4E86\u591A\u5C11\u9875\uFF0C\u5E76\u975E\u5B9E\u9645\u9875\u7801\uFF0C\u8BE5\u9875\u7801\u53EF\u5728\u811A\u672C\u83DC\u5355\u4E2D\u5173\u95ED\uFF09&#10;&#10;2. \u9F20\u6807\u3010\u5DE6\u952E\u3011\u70B9\u51FB\u6B64\u5904\u53EF\u3010\u4E34\u65F6\u6682\u505C\u7FFB\u9875\u3011\uFF08\u518D\u6B21\u70B9\u51FB\u53EF\u6062\u590D\uFF09&#10;&#10;3. \u9F20\u6807\u3010\u53F3\u952E\u3011\u70B9\u51FB\u6B64\u5904\u53EF\u3010\u56DE\u5230\u9876\u90E8\u3011">${pageNum._now}</div>`;document.documentElement.insertAdjacentHTML("beforeend",'<div id="Autopage_number" style="display: flex !important;position: fixed !important;z-index: 9999998 !important;"></div>');let l=getCSS("#Autopage_number"),s=l.attachShadow({mode:"open"});s.innerHTML=a+o,curSite.pager&&curSite.pager.type==5&&(window.top.document.xiu_pausePage=pausePage),e=getCSS("#Autopage_number_button",s),e.onclick=function(c){return pausePage?(this.style.color="#FF5722",this.style.fontStyle="italic"):this.style="",pausePage=!pausePage,curSite.pager&&curSite.pager.type==5&&(window.top.document.xiu_pausePage=pausePage),c.preventDefault(),c.stopPropagation(),!1},e.oncontextmenu=function(c){return window.scrollTo(0,0),c.preventDefault(),c.stopPropagation(),!1},n()}function n(){Object.defineProperty(pageNum,"now",{set:function(a){this._now=a,e&&(e.textContent=a)}})}function r(){e&&(e.style.display="none")}}function pageNumIncrement(t=1){pageNum.now=pageNum._now+t}function menu_switch(t,e,i){t===!0?GM_setValue(e,!1):GM_setValue(e,!0),e==="menu_page_number"?(pageNumber(t===!0?"del":"add"),registerMenuCommand(),curSite.SiteTypeID!==0&&curSite.pager&&(curSite.pager.type===void 0&&(curSite.pager.type=1),curSite.pager.scrollD===void 0&&(curSite.pager.scrollD=2e3),curSite.pager.interval===void 0&&(curSite.pager.interval=500))):location.reload()}function setSiteTypeID(){let t=0;for(let e in DBSite)DBSite[e].SiteTypeID=++t}function loadMoreExclude(t){for(let e=0;e<t.length;e++)if(location.hostname.indexOf(t[e])!=-1)return!1;return!0}function getCookie(t){if(!t)return"";let e=document.cookie.split(";");t+="=";for(let i=0;i<e.length;i++){let n=e[i].trim();if(n.indexOf(t)==0)return n.substring(t.length,n.length)}return""}function getAddTo(t){switch(t){case 1:return"beforebegin";case 2:return"afterbegin";case 3:case 6:return"beforeend";case 4:case 5:return"afterend"}}function toE5pop(t){if(t.length===0)return;let e=t.pop();return e.tagName==="SCRIPT"||e.tagName==="STYLE"||e.tagName==="LINK"?toE5pop(t):e}function windowScroll(t){var e=document.documentElement.scrollTop||document.body.scrollTop,i=t||function(){};setTimeout(function(){let n=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,r=window.innerHeight||document.documentElement.clientHeight;n===0&&document.documentElement.scrollHeight===r&&insStyle(`html, body {min-height: ${document.documentElement.scrollHeight+10}px;}`),window.addEventListener("scroll",function(a){var o=document.documentElement.scrollTop||document.body.scrollTop,l=o-e;if(l==0)return!1;i(l>0?"down":"up",a),e=o},!1)},1e3)}function addUrlChangeEvent(){history.pushState=(t=>function(){var i=t.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("urlchange")),i})(history.pushState),history.replaceState=(t=>function(){var i=t.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("urlchange")),i})(history.replaceState),window.addEventListener("popstate",()=>{window.dispatchEvent(new Event("urlchange"))})}})();
