// ==UserScript==
// @name               Pixiv Downloader
// @namespace          https://greasyfork.org/zh-CN/scripts/432150
// @version            1.10.0
// @author             ruaruarua
// @license            MIT
// @icon               https://www.pixiv.net/favicon.ico
// @supportURL         https://github.com/drunkg00se/Pixiv-Downloader/issues
// @match              https://www.pixiv.net/*
// @match              https://rule34.xxx/*
// @match              https://danbooru.donmai.us/*
// @match              https://yande.re/*
// @match              https://booru.allthefallen.moe/*
// @match              https://konachan.com/*
// @match              https://konachan.net/*
// @match              https://www.sakugabooru.com/*
// @match              https://safebooru.org/*
// @match              https://gelbooru.com/*
// @match              https://e621.net/*
// @match              https://e926.net/*
// @match              https://e6ai.net/*
// @match              https://nijie.info/*
// @match              https://rule34vault.com/*
// @match              https://rule34.paheal.net/*
// @match              https://rule34.us/*
// @require            https://unpkg.com/dexie@3.2.7/dist/dexie.min.js
// @require            https://unpkg.com/jszip@3.9.1/dist/jszip.min.js
// @require            https://unpkg.com/gif.js@0.2.0/dist/gif.js
// @require            https://unpkg.com/dayjs@1.11.13/dayjs.min.js
// @require            https://cdn.jsdelivr.net/npm/mp4-muxer@5.1.5/build/mp4-muxer.min.js
// @require            https://cdn.jsdelivr.net/npm/webm-muxer@5.0.3/build/webm-muxer.min.js
// @resource           ../wasm/toWebpWorker?raw    https://update.greasyfork.org/scripts/500281/1409041/libwebp_wasm.js
// @resource           gif.js/dist/gif.worker?raw  https://unpkg.com/gif.js@0.2.0/dist/gif.worker.js
// @resource           pako/dist/pako.js?raw       https://unpkg.com/pako@2.1.0/dist/pako.min.js
// @resource           upng-js?raw                 https://unpkg.com/upng-js@2.1.0/UPNG.js
// @connect            i.pximg.net
// @connect            source.pixiv.net
// @connect            rule34.xxx
// @connect            donmai.us
// @connect            yande.re
// @connect            allthefallen.moe
// @connect            konachan.com
// @connect            konachan.net
// @connect            sakugabooru.com
// @connect            safebooru.org
// @connect            gelbooru.com
// @connect            e621.net
// @connect            e926.net
// @connect            e6ai.net
// @connect            nijie.net
// @connect            rule34vault.com
// @connect            r34xyz.b-cdn.net
// @connect            r34i.paheal-cdn.net
// @connect            rule34.us
// @grant              GM_download
// @grant              GM_getResourceText
// @grant              GM_info
// @grant              GM_registerMenuCommand
// @grant              GM_xmlhttpRequest
// @grant              unsafeWindow
// @noframes
// @downloadURL https://raw.githubusercontent.com/FiorenMas/Userscripts/release/release/Pixiv20Downloader.user.js
// @updateURL https://raw.githubusercontent.com/FiorenMas/Userscripts/release/release/Pixiv20Downloader.meta.js
// ==/UserScript==
(_o=>{const xo=new CSSStyleSheet;xo.replaceSync(_o),window._pdlShadowStyle=xo})(` .anim-indeterminate.svelte-12wvf64{transform-origin:0% 50%;animation:svelte-12wvf64-anim-indeterminate 2s infinite linear}@keyframes svelte-12wvf64-anim-indeterminate{0%{transform:translate(0) scaleX(0)}40%{transform:translate(0) scaleX(.4)}to{transform:translate(100%) scaleX(.5)}}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}:host [data-theme=skeleton],:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}:host [data-theme=skeleton]{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h3,h4{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}dl,dd,h1,h3,h4,hr,figure,p{margin:0}fieldset{margin:0;padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}[type=text],input:where(:not([type])),[type=email],[type=url],[type=password],[type=number],[type=date],[type=datetime-local],[type=month],[type=search],[type=tel],[type=time],[type=week],[multiple],textarea,select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#6b7280;border-width:1px;border-radius:0;padding:8px 12px;font-size:16px;line-height:24px;--tw-shadow: 0 0 #0000}[type=text]:focus,input:where(:not([type])):focus,[type=email]:focus,[type=url]:focus,[type=password]:focus,[type=number]:focus,[type=date]:focus,[type=datetime-local]:focus,[type=month]:focus,[type=search]:focus,[type=tel]:focus,[type=time]:focus,[type=week]:focus,[multiple]:focus,textarea:focus,select:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset: var(--tw-empty, );--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: #2563eb;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow);border-color:#2563eb}input::-moz-placeholder,textarea::-moz-placeholder{color:#6b7280;opacity:1}input::placeholder,textarea::placeholder{color:#6b7280;opacity:1}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-date-and-time-value{min-height:1.5em;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit,::-webkit-datetime-edit-year-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute-field,::-webkit-datetime-edit-second-field,::-webkit-datetime-edit-millisecond-field,::-webkit-datetime-edit-meridiem-field{padding-top:0;padding-bottom:0}select{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right 8px center;background-repeat:no-repeat;background-size:1.5em 1.5em;padding-right:40px;-webkit-print-color-adjust:exact;print-color-adjust:exact}[multiple],[size]:where(select:not([size="1"])){background-image:initial;background-position:initial;background-repeat:unset;background-size:initial;padding-right:12px;-webkit-print-color-adjust:unset;print-color-adjust:unset}[type=checkbox],[type=radio]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;-webkit-print-color-adjust:exact;print-color-adjust:exact;display:inline-block;vertical-align:middle;background-origin:border-box;-webkit-user-select:none;-moz-user-select:none;user-select:none;flex-shrink:0;height:16px;width:16px;color:#2563eb;background-color:#fff;border-color:#6b7280;border-width:1px;--tw-shadow: 0 0 #0000}[type=checkbox]{border-radius:0}[type=radio]{border-radius:100%}[type=checkbox]:focus,[type=radio]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset: var(--tw-empty, );--tw-ring-offset-width: 2px;--tw-ring-offset-color: #fff;--tw-ring-color: #2563eb;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}[type=checkbox]:checked,[type=radio]:checked{border-color:transparent;background-color:currentColor;background-size:100% 100%;background-position:center;background-repeat:no-repeat}[type=checkbox]:checked{background-image:url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e")}@media (forced-colors: active){[type=checkbox]:checked{-webkit-appearance:auto;-moz-appearance:auto;appearance:auto}}[type=radio]:checked{background-image:url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e")}@media (forced-colors: active){[type=radio]:checked{-webkit-appearance:auto;-moz-appearance:auto;appearance:auto}}[type=checkbox]:checked:hover,[type=checkbox]:checked:focus,[type=radio]:checked:hover,[type=radio]:checked:focus{border-color:transparent;background-color:currentColor}[type=checkbox]:indeterminate{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 16 16'%3e%3cpath stroke='white' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 8h8'/%3e%3c/svg%3e");border-color:transparent;background-color:currentColor;background-size:100% 100%;background-position:center;background-repeat:no-repeat}@media (forced-colors: active){[type=checkbox]:indeterminate{-webkit-appearance:auto;-moz-appearance:auto;appearance:auto}}[type=checkbox]:indeterminate:hover,[type=checkbox]:indeterminate:focus{border-color:transparent;background-color:currentColor}[type=file]{background:unset;border-color:inherit;border-width:0;border-radius:0;padding:0;font-size:unset;line-height:inherit}[type=file]:focus{outline:1px solid ButtonText;outline:1px auto -webkit-focus-ring-color}:host [data-theme=skeleton]{background-color:rgb(var(--color-surface-50));font-size:16px;line-height:24px;font-family:var(--theme-font-family-base);color:rgba(var(--theme-font-color-base))}:host .dark [data-theme=skeleton]{background-color:rgb(var(--color-surface-900));color:rgba(var(--theme-font-color-dark))}::-moz-selection{background-color:rgb(var(--color-primary-500) / .3)}::selection{background-color:rgb(var(--color-primary-500) / .3)}:host [data-theme=skeleton]{-webkit-tap-highlight-color:rgba(128,128,128,.5);scrollbar-color:rgba(0,0,0,.2) rgba(255,255,255,.05)}:host [data-theme=skeleton]{scrollbar-color:rgba(128,128,128,.5) rgba(0,0,0,.1);scrollbar-width:thin}:host.dark{scrollbar-color:rgba(255,255,255,.1) rgba(0,0,0,.05)}hr:not(.divider){display:block;border-top-width:1px;border-style:solid;border-color:rgb(var(--color-surface-300))}.dark hr:not(.divider){border-color:rgb(var(--color-surface-600))}fieldset,label{display:block}::-moz-placeholder{color:rgb(var(--color-surface-500))}::placeholder{color:rgb(var(--color-surface-500))}.dark ::-moz-placeholder{color:rgb(var(--color-surface-400))}.dark ::placeholder{color:rgb(var(--color-surface-400))}:is(.dark input::-webkit-calendar-picker-indicator){--tw-invert: invert(100%);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}input[type=search]::-webkit-search-cancel-button{-webkit-appearance:none;background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath d='M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z'/%3E%3C/svg%3E") no-repeat 50% 50%;pointer-events:none;height:16px;width:16px;border-radius:9999px;background-size:contain;opacity:0}input[type=search]:focus::-webkit-search-cancel-button{pointer-events:auto;opacity:1}:is(.dark input[type=search]::-webkit-search-cancel-button){--tw-invert: invert(100%);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}progress{webkit-appearance:none;-moz-appearance:none;-webkit-appearance:none;appearance:none;height:8px;width:100%;overflow:hidden;border-radius:var(--theme-rounded-base);background-color:rgb(var(--color-surface-400))}.dark progress{background-color:rgb(var(--color-surface-500))}progress::-webkit-progress-bar{background-color:rgb(var(--color-surface-400))}.dark progress::-webkit-progress-bar{background-color:rgb(var(--color-surface-500))}progress::-webkit-progress-value{background-color:rgb(var(--color-surface-900))}.dark progress::-webkit-progress-value{background-color:rgb(var(--color-surface-50))}::-moz-progress-bar{background-color:rgb(var(--color-surface-900))}.dark ::-moz-progress-bar{background-color:rgb(var(--color-surface-50))}:indeterminate::-moz-progress-bar{width:0}input[type=file]:not(.file-dropzone-input)::file-selector-button:disabled{cursor:not-allowed;opacity:.5}input[type=file]:not(.file-dropzone-input)::file-selector-button:disabled:hover{--tw-brightness: brightness(1);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}input[type=file]:not(.file-dropzone-input)::file-selector-button:disabled:active{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}input[type=file]:not(.file-dropzone-input)::file-selector-button{font-size:14px;line-height:20px;padding:6px 12px;white-space:nowrap;text-align:center;display:inline-flex;align-items:center;justify-content:center;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;border-radius:var(--theme-rounded-base);background-color:rgb(var(--color-surface-900));color:rgb(var(--color-surface-50));margin-right:8px;border-width:0px}input[type=file]:not(.file-dropzone-input)::file-selector-button>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(8px * var(--tw-space-x-reverse));margin-left:calc(8px * calc(1 - var(--tw-space-x-reverse)))}input[type=file]:not(.file-dropzone-input)::file-selector-button:hover{--tw-brightness: brightness(1.15);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}input[type=file]:not(.file-dropzone-input)::file-selector-button:active{--tw-scale-x: 95%;--tw-scale-y: 95%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-brightness: brightness(.9);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.dark input[type=file]:not(.file-dropzone-input)::file-selector-button{background-color:rgb(var(--color-surface-50));color:rgb(var(--color-surface-900))}[type=range]{width:100%;accent-color:rgb(var(--color-surface-900) / 1)}:is(.dark [type=range]){accent-color:rgb(var(--color-surface-50) / 1)}[data-sort]{cursor:pointer}[data-sort]:hover:hover,.dark [data-sort]:hover:hover{background-color:rgb(var(--color-primary-500) / .1)}[data-sort]:after{margin-left:8px!important;opacity:0;--tw-content: "\u2193" !important;content:var(--tw-content)!important}[data-popup]{position:absolute;top:0;left:0;display:none;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}:host [data-theme=skeleton]{--theme-font-family-base: system-ui;--theme-font-family-heading: system-ui;--theme-font-color-base: 0 0 0;--theme-font-color-dark: 255 255 255;--theme-rounded-base: 9999px;--theme-rounded-container: 8px;--theme-border-base: 1px;--on-primary: 0 0 0;--on-secondary: 255 255 255;--on-tertiary: 0 0 0;--on-success: 0 0 0;--on-warning: 0 0 0;--on-error: 255 255 255;--on-surface: 255 255 255;--color-primary-50: 219 245 236;--color-primary-100: 207 241 230;--color-primary-200: 195 238 224;--color-primary-300: 159 227 205;--color-primary-400: 87 207 167;--color-primary-500: 15 186 129;--color-primary-600: 14 167 116;--color-primary-700: 11 140 97;--color-primary-800: 9 112 77;--color-primary-900: 7 91 63;--color-secondary-50: 229 227 251;--color-secondary-100: 220 218 250;--color-secondary-200: 211 209 249;--color-secondary-300: 185 181 245;--color-secondary-400: 132 126 237;--color-secondary-500: 79 70 229;--color-secondary-600: 71 63 206;--color-secondary-700: 59 53 172;--color-secondary-800: 47 42 137;--color-secondary-900: 39 34 112;--color-tertiary-50: 219 242 252;--color-tertiary-100: 207 237 251;--color-tertiary-200: 195 233 250;--color-tertiary-300: 159 219 246;--color-tertiary-400: 86 192 240;--color-tertiary-500: 14 165 233;--color-tertiary-600: 13 149 210;--color-tertiary-700: 11 124 175;--color-tertiary-800: 8 99 140;--color-tertiary-900: 7 81 114;--color-success-50: 237 247 220;--color-success-100: 230 245 208;--color-success-200: 224 242 197;--color-success-300: 206 235 162;--color-success-400: 169 219 92;--color-success-500: 132 204 22;--color-success-600: 119 184 20;--color-success-700: 99 153 17;--color-success-800: 79 122 13;--color-success-900: 65 100 11;--color-warning-50: 252 244 218;--color-warning-100: 251 240 206;--color-warning-200: 250 236 193;--color-warning-300: 247 225 156;--color-warning-400: 240 202 82;--color-warning-500: 234 179 8;--color-warning-600: 211 161 7;--color-warning-700: 176 134 6;--color-warning-800: 140 107 5;--color-warning-900: 115 88 4;--color-error-50: 249 221 234;--color-error-100: 246 209 228;--color-error-200: 244 198 221;--color-error-300: 238 163 200;--color-error-400: 225 94 159;--color-error-500: 212 25 118;--color-error-600: 191 23 106;--color-error-700: 159 19 89;--color-error-800: 127 15 71;--color-error-900: 104 12 58;--color-surface-50: 228 230 238;--color-surface-100: 219 222 233;--color-surface-200: 210 214 227;--color-surface-300: 182 189 210;--color-surface-400: 128 140 177;--color-surface-500: 73 90 143;--color-surface-600: 66 81 129;--color-surface-700: 55 68 107;--color-surface-800: 44 54 86;--color-surface-900: 36 44 70}[data-theme=skeleton] h1,[data-theme=skeleton] h3,[data-theme=skeleton] h4{font-weight:700}[data-theme=skeleton]{background-image:radial-gradient(at 0% 0%,rgba(var(--color-secondary-500) / .33) 0px,transparent 50%),radial-gradient(at 98% 1%,rgba(var(--color-error-500) / .33) 0px,transparent 50%);background-attachment:fixed;background-position:center;background-repeat:no-repeat;background-size:cover}*{scrollbar-color:initial;scrollbar-width:initial}.\\!container{width:100%!important}.container{width:100%}@media (min-width: 640px){.\\!container{max-width:640px!important}.container{max-width:640px}}@media (min-width: 768px){.\\!container{max-width:768px!important}.container{max-width:768px}}@media (min-width: 1024px){.\\!container{max-width:1024px!important}.container{max-width:1024px}}@media (min-width: 1280px){.\\!container{max-width:1280px!important}.container{max-width:1280px}}@media (min-width: 1536px){.\\!container{max-width:1536px!important}.container{max-width:1536px}}.hide-scrollbar::-webkit-scrollbar{display:none}.hide-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.h3{font-size:20px;line-height:28px;font-family:var(--theme-font-family-heading)}.h4{font-size:18px;line-height:28px;font-family:var(--theme-font-family-heading)}.anchor{--tw-text-opacity: 1;color:rgb(var(--color-primary-700) / var(--tw-text-opacity));text-decoration-line:underline}.anchor:hover{--tw-brightness: brightness(1.1);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}:is(.dark .anchor){--tw-text-opacity: 1;color:rgb(var(--color-primary-500) / var(--tw-text-opacity))}.time{font-size:14px;line-height:20px;--tw-text-opacity: 1;color:rgb(var(--color-surface-500) / var(--tw-text-opacity))}:is(.dark .time){--tw-text-opacity: 1;color:rgb(var(--color-surface-400) / var(--tw-text-opacity))}.code{white-space:nowrap;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:12px;line-height:16px;--tw-text-opacity: 1;color:rgb(var(--color-primary-700) / var(--tw-text-opacity));background-color:rgb(var(--color-primary-500) / .3);border-radius:4px;padding:2px 4px}:is(.dark .code){--tw-text-opacity: 1;color:rgb(var(--color-primary-400) / var(--tw-text-opacity));background-color:rgb(var(--color-primary-500) / .2)}.alert{display:flex;flex-direction:column;align-items:flex-start;padding:16px;color:rgb(var(--color-surface-900));border-radius:var(--theme-rounded-container)}.alert>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(16px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(16px * var(--tw-space-y-reverse))}.dark .alert{color:rgb(var(--color-surface-50))}.badge{display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;font-size:12px;line-height:16px;font-weight:600;padding:4px 8px;border-radius:var(--theme-rounded-base)}.badge>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(8px * var(--tw-space-x-reverse));margin-left:calc(8px * calc(1 - var(--tw-space-x-reverse)))}.\\!btn:disabled{cursor:not-allowed!important;opacity:.5!important}.btn:disabled,.btn-icon:disabled,.btn-group>*:disabled{cursor:not-allowed!important;opacity:.5!important}.\\!btn:disabled:hover{--tw-brightness: brightness(1) !important;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important}.btn:disabled:hover,.btn-icon:disabled:hover,.btn-group>*:disabled:hover{--tw-brightness: brightness(1);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.\\!btn:disabled:active{--tw-scale-x: 1 !important;--tw-scale-y: 1 !important;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))!important}.btn:disabled:active,.btn-icon:disabled:active,.btn-group>*:disabled:active{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\!btn{font-size:16px!important;line-height:24px!important;padding:9px 20px!important;white-space:nowrap!important;text-align:center!important;display:inline-flex!important;align-items:center!important;justify-content:center!important;transition-property:all!important;transition-timing-function:cubic-bezier(.4,0,.2,1)!important;transition-duration:.15s!important;border-radius:var(--theme-rounded-base)!important}.btn{font-size:16px;line-height:24px;padding:9px 20px;white-space:nowrap;text-align:center;display:inline-flex;align-items:center;justify-content:center;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;border-radius:var(--theme-rounded-base)}.\\!btn>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0 !important;margin-right:calc(8px * var(--tw-space-x-reverse))!important;margin-left:calc(8px * calc(1 - var(--tw-space-x-reverse)))!important}.btn>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(8px * var(--tw-space-x-reverse));margin-left:calc(8px * calc(1 - var(--tw-space-x-reverse)))}.\\!btn:hover{--tw-brightness: brightness(1.15) !important;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important}.btn:hover{--tw-brightness: brightness(1.15);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.\\!btn:active{--tw-scale-x: 95% !important;--tw-scale-y: 95% !important;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))!important;--tw-brightness: brightness(.9) !important;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important}.btn:active{--tw-scale-x: 95%;--tw-scale-y: 95%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-brightness: brightness(.9);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.btn-sm{padding:6px 12px;font-size:14px;line-height:20px}.btn-icon{font-size:16px;line-height:24px;white-space:nowrap;text-align:center;display:inline-flex;align-items:center;justify-content:center;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;padding:0;aspect-ratio:1 / 1;width:43px;border-radius:9999px}.btn-icon>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(8px * var(--tw-space-x-reverse));margin-left:calc(8px * calc(1 - var(--tw-space-x-reverse)))}.btn-icon:hover{--tw-brightness: brightness(1.15);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.btn-icon:active{--tw-scale-x: 95%;--tw-scale-y: 95%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-brightness: brightness(.9);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.btn-icon-sm{aspect-ratio:1 / 1;width:33px;font-size:14px;line-height:20px}.btn-group{display:inline-flex;flex-direction:row;overflow:hidden;border-radius:var(--theme-rounded-base);isolation:isolate}.btn-group>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(0px * var(--tw-space-x-reverse));margin-left:calc(0px * calc(1 - var(--tw-space-x-reverse)))}.btn-group button,.btn-group a{font-size:16px;line-height:24px;padding:9px 20px;white-space:nowrap;text-align:center;display:inline-flex;align-items:center;justify-content:center;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s;color:inherit!important;text-decoration-line:none!important}.btn-group button>:not([hidden])~:not([hidden]),.btn-group a>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(8px * var(--tw-space-x-reverse));margin-left:calc(8px * calc(1 - var(--tw-space-x-reverse)))}.btn-group button:hover,.btn-group a:hover{--tw-brightness: brightness(1.15);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);background-color:rgb(var(--color-surface-50) / 3%)}.btn-group button:active,.btn-group a:active{background-color:rgb(var(--color-surface-900) / 3%)}.btn-group>*+*{border-top-width:0px;border-left-width:1px;border-color:rgb(var(--color-surface-500) / .2)}.card{background-color:rgb(var(--color-surface-100));--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-inset: inset;--tw-ring-color: rgb(23 23 23 / .05);border-radius:var(--theme-rounded-container)}.dark .card{background-color:rgb(var(--color-surface-800));--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-inset: inset;--tw-ring-color: rgb(250 250 250 / .05)}a.card{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}a.card:hover{--tw-brightness: brightness(1.05);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.\\!chip{cursor:pointer!important;white-space:nowrap!important;padding:6px 12px!important;text-align:center!important;font-size:12px!important;line-height:16px!important;border-radius:4px!important;display:inline-flex!important;align-items:center!important;justify-content:center!important;transition-property:all!important;transition-timing-function:cubic-bezier(.4,0,.2,1)!important;transition-duration:.15s!important}.chip{cursor:pointer;white-space:nowrap;padding:6px 12px;text-align:center;font-size:12px;line-height:16px;border-radius:4px;display:inline-flex;align-items:center;justify-content:center;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.\\!chip>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0 !important;margin-right:calc(8px * var(--tw-space-x-reverse))!important;margin-left:calc(8px * calc(1 - var(--tw-space-x-reverse)))!important}.chip>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(8px * var(--tw-space-x-reverse));margin-left:calc(8px * calc(1 - var(--tw-space-x-reverse)))}a.chip:hover,button.chip:hover{--tw-brightness: brightness(1.15);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}a.\\!chip:hover,button.\\!chip:hover{--tw-brightness: brightness(1.15) !important;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important}.\\!chip:disabled{cursor:not-allowed!important;opacity:.5!important}.chip:disabled{cursor:not-allowed!important;opacity:.5!important}.\\!chip:disabled:active{--tw-scale-x: 1 !important;--tw-scale-y: 1 !important;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))!important}.chip:disabled:active{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.label>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(4px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(4px * var(--tw-space-y-reverse))}.\\!input{width:100%!important;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter!important;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter!important;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter!important;transition-timing-function:cubic-bezier(.4,0,.2,1)!important;transition-duration:.2s!important;background-color:rgb(var(--color-surface-200))!important;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)!important;border-width:var(--theme-border-base)!important;border-color:rgb(var(--color-surface-400))!important}.input,.textarea,.select,.input-group{width:100%;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s;background-color:rgb(var(--color-surface-200));--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)!important;border-width:var(--theme-border-base);border-color:rgb(var(--color-surface-400))}.dark .input,.dark .textarea,.dark .select,.dark .input-group{background-color:rgb(var(--color-surface-700));border-color:rgb(var(--color-surface-500))}.dark .\\!input{background-color:rgb(var(--color-surface-700))!important;border-color:rgb(var(--color-surface-500))!important}.\\!input:hover{--tw-brightness: brightness(1.05) !important;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important}.input:hover,.textarea:hover,.select:hover,.input-group:hover{--tw-brightness: brightness(1.05);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.\\!input:focus{--tw-brightness: brightness(1.05) !important;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important}.input:focus,.textarea:focus,.select:focus,.input-group:focus{--tw-brightness: brightness(1.05);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.\\!input:focus-within{--tw-border-opacity: 1 !important;border-color:rgb(var(--color-primary-500) / var(--tw-border-opacity))!important}.input:focus-within,.textarea:focus-within,.select:focus-within,.input-group:focus-within{--tw-border-opacity: 1;border-color:rgb(var(--color-primary-500) / var(--tw-border-opacity))}.\\!input{border-radius:var(--theme-rounded-base)!important}.input,.input-group{border-radius:var(--theme-rounded-base)}.textarea,.select{border-radius:var(--theme-rounded-container)}.select>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(4px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(4px * var(--tw-space-y-reverse))}.select{padding:8px 32px 8px 8px}.select[size]{background-image:none}.select optgroup>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(4px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(4px * var(--tw-space-y-reverse))}.select optgroup{font-weight:700}.select optgroup option{margin-left:0;padding-left:0}.select optgroup option:first-of-type{margin-top:12px}.select optgroup option:last-child{margin-bottom:12px!important}.select option{cursor:pointer;padding:8px 16px;background-color:rgb(var(--color-surface-200));border-radius:var(--theme-rounded-base)}.dark .select option{background-color:rgb(var(--color-surface-700))}.select option:checked{background:rgb(var(--color-primary-500)) linear-gradient(0deg,rgb(var(--color-primary-500)),rgb(var(--color-primary-500)));color:rgb(var(--on-primary))}.checkbox,.radio{height:20px;width:20px;cursor:pointer;border-radius:4px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)!important;background-color:rgb(var(--color-surface-200));border-width:var(--theme-border-base);border-color:rgb(var(--color-surface-400))}.dark .checkbox,.dark .radio{background-color:rgb(var(--color-surface-700));border-color:rgb(var(--color-surface-500))}.checkbox:hover,.radio:hover{--tw-brightness: brightness(1.05);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.checkbox:focus,.radio:focus{--tw-brightness: brightness(1.05);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);--tw-border-opacity: 1;border-color:rgb(var(--color-primary-500) / var(--tw-border-opacity))}.checkbox:checked,.checkbox:indeterminate,.radio:checked{--tw-bg-opacity: 1;background-color:rgb(var(--color-primary-500) / var(--tw-bg-opacity))}.checkbox:checked:hover,.checkbox:indeterminate:hover,.radio:checked:hover{--tw-bg-opacity: 1;background-color:rgb(var(--color-primary-500) / var(--tw-bg-opacity))}.checkbox:checked:focus,.checkbox:indeterminate:focus,.radio:checked:focus{--tw-bg-opacity: 1;background-color:rgb(var(--color-primary-500) / var(--tw-bg-opacity));--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.radio{border-radius:var(--theme-rounded-base)}.\\!input[type=file]{padding:4px!important}.input[type=file]{padding:4px}.\\!input[type=color]{height:40px!important;width:40px!important;cursor:pointer!important;overflow:hidden!important;border-style:none!important;border-radius:var(--theme-rounded-base)!important;-webkit-appearance:none!important}.input[type=color]{height:40px;width:40px;cursor:pointer;overflow:hidden;border-style:none;border-radius:var(--theme-rounded-base);-webkit-appearance:none}.\\!input[type=color]::-webkit-color-swatch-wrapper{padding:0!important}.input[type=color]::-webkit-color-swatch-wrapper{padding:0}.\\!input[type=color]::-webkit-color-swatch{border-style:none!important}.input[type=color]::-webkit-color-swatch{border-style:none}.\\!input[type=color]::-webkit-color-swatch:hover{--tw-brightness: brightness(1.1) !important;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important}.input[type=color]::-webkit-color-swatch:hover{--tw-brightness: brightness(1.1);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.\\!input[type=color]::-moz-color-swatch{border-style:none!important}.input[type=color]::-moz-color-swatch{border-style:none}.\\!input:disabled{cursor:not-allowed!important;opacity:.5!important}.input:disabled,.textarea:disabled,.select:disabled,.input-group>input:disabled,.input-group>textarea:disabled,.input-group>select:disabled{cursor:not-allowed!important;opacity:.5!important}.\\!input:disabled:hover{--tw-brightness: brightness(1) !important;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important}.input:disabled:hover,.textarea:disabled:hover,.select:disabled:hover,.input-group>input:disabled:hover,.input-group>textarea:disabled:hover,.input-group>select:disabled:hover{--tw-brightness: brightness(1) !important;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important}.\\!input[readonly],.input[readonly],.textarea[readonly],.select[readonly]{cursor:not-allowed!important;border-color:transparent!important}.\\!input[readonly]:hover,.input[readonly]:hover,.textarea[readonly]:hover,.select[readonly]:hover{--tw-brightness: brightness(1) !important;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important}.input-group{display:grid;overflow:hidden}.input-group input,.input-group select{border-width:0px;background-color:transparent;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)!important}.input-group select option{background-color:rgb(var(--color-surface-200))}.dark .input-group select option{background-color:rgb(var(--color-surface-700))}.input-group div,.input-group a,.input-group button{display:flex;align-items:center;justify-content:space-between;padding-left:16px;padding-right:16px}.input-group-divider input,.input-group-divider select,.input-group-divider div,.input-group-divider a{border-left-width:1px;border-color:rgb(var(--color-surface-400));--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)!important;min-width:-moz-fit-content!important;min-width:fit-content!important}.dark .input-group-divider input,.dark .input-group-divider select,.dark .input-group-divider div,.dark .input-group-divider a{border-color:rgb(var(--color-surface-500))}.input-group-divider input:focus,.input-group-divider select:focus,.input-group-divider div:focus,.input-group-divider a:focus{border-color:rgb(var(--color-surface-400))}.dark .input-group-divider input:focus,.dark .input-group-divider select:focus,.dark .input-group-divider div:focus,.dark .input-group-divider a:focus{border-color:rgb(var(--color-surface-500))}.input-group-divider *:first-child{border-left-width:0px!important}.input-group-shim{background-color:rgb(var(--color-surface-400) / .1);color:rgb(var(--color-surface-600))}.dark .input-group-shim{color:rgb(var(--color-surface-300))}.input-error{--tw-border-opacity: 1;border-color:rgb(var(--color-error-500) / var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgb(var(--color-error-200) / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(var(--color-error-500) / var(--tw-text-opacity))}:is(.dark .input-error){--tw-border-opacity: 1;border-color:rgb(var(--color-error-500) / var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgb(var(--color-error-200) / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(var(--color-error-500) / var(--tw-text-opacity))}.input-error::-moz-placeholder{--tw-text-opacity: 1;color:rgb(var(--color-error-500) / var(--tw-text-opacity))}.input-error::placeholder{--tw-text-opacity: 1;color:rgb(var(--color-error-500) / var(--tw-text-opacity))}.variant-form-material{border-radius:4px 4px 0 0/4px 4px 0px 0px!important;background-color:rgb(var(--color-surface-500) / .1);border-width:0px;border-bottom-width:2px}:is(.dark .variant-form-material){background-color:rgb(var(--color-surface-500) / .2)}.variant-form-material[type=file]{padding-top:6px!important;padding-bottom:6px!important}.list{list-style-type:none}.list>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(4px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(4px * var(--tw-space-y-reverse))}.list li{display:flex;align-items:center;border-radius:var(--theme-rounded-base)}.list li>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(16px * var(--tw-space-x-reverse));margin-left:calc(16px * calc(1 - var(--tw-space-x-reverse)))}.placeholder{height:20px;background-color:rgb(var(--color-surface-300));border-radius:var(--theme-rounded-base)}.dark .placeholder{background-color:rgb(var(--color-surface-600))}.w-modal{width:100%;max-width:640px}.modal *:focus:not([tabindex="-1"]):not(.input):not(.textarea):not(.select):not(.input-group):not(.input-group input){outline-style:auto;outline-color:-webkit-focus-ring-color}.variant-filled{background-color:rgb(var(--color-surface-900));color:rgb(var(--color-surface-50))}.dark .variant-filled{background-color:rgb(var(--color-surface-50));color:rgb(var(--color-surface-900))}.\\!variant-filled-primary{--tw-bg-opacity: 1 !important;background-color:rgb(var(--color-primary-500) / var(--tw-bg-opacity))!important;color:rgb(var(--on-primary))!important}.variant-filled-primary{--tw-bg-opacity: 1;background-color:rgb(var(--color-primary-500) / var(--tw-bg-opacity));color:rgb(var(--on-primary))}:is(.dark .variant-filled-primary){--tw-bg-opacity: 1;background-color:rgb(var(--color-primary-500) / var(--tw-bg-opacity));color:rgb(var(--on-primary))}:is(.dark .\\!variant-filled-primary){--tw-bg-opacity: 1 !important;background-color:rgb(var(--color-primary-500) / var(--tw-bg-opacity))!important;color:rgb(var(--on-primary))!important}.variant-filled-secondary{--tw-bg-opacity: 1;background-color:rgb(var(--color-secondary-500) / var(--tw-bg-opacity));color:rgb(var(--on-secondary))}:is(.dark .variant-filled-secondary){--tw-bg-opacity: 1;background-color:rgb(var(--color-secondary-500) / var(--tw-bg-opacity));color:rgb(var(--on-secondary))}.variant-filled-warning{--tw-bg-opacity: 1;background-color:rgb(var(--color-warning-500) / var(--tw-bg-opacity));color:rgb(var(--on-warning))}:is(.dark .variant-filled-warning){--tw-bg-opacity: 1;background-color:rgb(var(--color-warning-500) / var(--tw-bg-opacity));color:rgb(var(--on-warning))}.variant-filled-error{--tw-bg-opacity: 1;background-color:rgb(var(--color-error-500) / var(--tw-bg-opacity));color:rgb(var(--on-error))}:is(.dark .variant-filled-error){--tw-bg-opacity: 1;background-color:rgb(var(--color-error-500) / var(--tw-bg-opacity));color:rgb(var(--on-error))}.variant-ghost-surface{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-inset: inset;--tw-ring-opacity: 1;--tw-ring-color: rgb(var(--color-surface-500) / var(--tw-ring-opacity));background-color:rgb(var(--color-surface-500) / .2)}:is(.dark .variant-ghost-surface){--tw-ring-opacity: 1;--tw-ring-color: rgb(var(--color-surface-500) / var(--tw-ring-opacity));background-color:rgb(var(--color-surface-500) / .2)}.variant-soft-primary{background-color:rgb(var(--color-primary-400) / .2);--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)!important;color:rgb(var(--color-primary-700))}.dark .variant-soft-primary{color:rgb(var(--color-primary-200))}:is(.dark .variant-soft-primary){background-color:rgb(var(--color-primary-500) / .2)}.variant-soft-error{background-color:rgb(var(--color-error-400) / .2);--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)!important;color:rgb(var(--color-error-700))}.dark .variant-soft-error{color:rgb(var(--color-error-200))}:is(.dark .variant-soft-error){background-color:rgb(var(--color-error-500) / .2)}.variant-soft,.variant-soft-surface{background-color:rgb(var(--color-surface-400) / .2);--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)!important;color:rgb(var(--color-surface-700))}.dark .variant-soft,.dark .variant-soft-surface{color:rgb(var(--color-surface-200))}:is(.dark .variant-soft),:is(.dark .variant-soft-surface){background-color:rgb(var(--color-surface-500) / .2)}@media (min-width: 768px){.h3{font-size:24px;line-height:32px}.h4{font-size:20px;line-height:28px}}@media (min-width: 1024px){.alert{flex-direction:row;align-items:center}.alert>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse));--tw-space-x-reverse: 0;margin-right:calc(16px * var(--tw-space-x-reverse));margin-left:calc(16px * calc(1 - var(--tw-space-x-reverse)))}}.modal *:focus:not([tabindex="-1"]):not(.input):not(.textarea):not(.select):not(.input-group):not(.input-group input){outline-width:0px!important}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.static{position:static}.fixed{position:fixed}.\\!absolute{position:absolute!important}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.bottom-0{bottom:0}.bottom-24{bottom:96px}.left-0{left:0}.left-1\\/2{left:50%}.right-0{right:0}.right-2{right:8px}.right-20{right:80px}.right-4{right:16px}.top-0{top:0}.top-1\\/2{top:50%}.top-2{top:8px}.top-36{top:144px}.-z-10{z-index:-10}.z-\\[888\\]{z-index:888}.z-\\[999\\]{z-index:999}.row-span-2{grid-row:span 2 / span 2}.row-start-1{grid-row-start:1}.\\!m-0{margin:0!important}.m-auto{margin:auto}.mx-2{margin-left:8px;margin-right:8px}.my-4{margin-top:16px;margin-bottom:16px}.my-\\[1px\\]{margin-top:1px;margin-bottom:1px}.ml-1{margin-left:4px}.ml-3{margin-left:12px}.ml-4{margin-left:16px}.mr-2{margin-right:8px}.mr-6{margin-right:24px}.mt-2{margin-top:8px}.mt-4{margin-top:16px}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.contents{display:contents}.hidden{display:none}.size-14{width:56px;height:56px}.size-full{width:100%;height:100%}.h-0{height:0px}.h-10{height:40px}.h-2{height:8px}.h-4{height:16px}.h-48{height:192px}.h-6{height:24px}.h-8{height:32px}.h-\\[38px\\]{height:38px}.h-auto{height:auto}.h-fit{height:-moz-fit-content;height:fit-content}.h-full{height:100%}.h-screen{height:100vh}.max-h-80{max-height:320px}.max-h-\\[200px\\]{max-height:200px}.min-h-0{min-height:0px}.min-h-full{min-height:100%}.w-0{width:0px}.w-12{width:48px}.w-16{width:64px}.w-20{width:80px}.w-3{width:12px}.w-32{width:128px}.w-36{width:144px}.w-48{width:192px}.w-5{width:20px}.w-6{width:24px}.w-8{width:32px}.w-\\[140px\\]{width:140px}.w-\\[38px\\]{width:38px}.w-\\[50\\%\\]{width:50%}.w-\\[600px\\]{width:600px}.w-full{width:100%}.w-screen{width:100vw}.max-w-\\[640px\\]{max-width:640px}.max-w-full{max-width:100%}.flex-1{flex:1 1 0%}.flex-\\[0_0_20\\%\\]{flex:0 0 20%}.flex-\\[1\\]{flex:1}.flex-\\[3\\]{flex:3}.flex-auto{flex:1 1 auto}.flex-none{flex:none}.shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.basis-0{flex-basis:0px}.origin-\\[50\\%_50\\%\\]{transform-origin:50% 50%}.-translate-x-1\\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-full{--tw-translate-x: -100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-\\[calc\\(100\\%-44px\\)\\]{--tw-translate-x: calc(100% - 44px) ;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-full{--tw-translate-x: 100%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-rotate-90{--tw-rotate: -90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-\\[0\\.8\\]{--tw-scale-x: .8;--tw-scale-y: .8;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-\\[105\\%\\]{--tw-scale-x: 105%;--tw-scale-y: 105%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\\!transform-none{transform:none!important}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.\\!cursor-default{cursor:default!important}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.grid-cols-\\[0px_1fr\\]{grid-template-columns:0px 1fr}.grid-cols-\\[140px_1fr\\]{grid-template-columns:140px 1fr}.grid-cols-\\[auto_1fr_auto\\]{grid-template-columns:auto 1fr auto}.grid-cols-\\[auto_1fr_auto_auto\\]{grid-template-columns:auto 1fr auto auto}.grid-rows-\\[0fr\\]{grid-template-rows:0fr}.grid-rows-\\[1fr\\]{grid-template-rows:1fr}.grid-rows-\\[auto_1fr\\]{grid-template-rows:auto 1fr}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.\\!items-stretch{align-items:stretch!important}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.justify-evenly{justify-content:space-evenly}.gap-1{gap:4px}.gap-14{gap:56px}.gap-2{gap:8px}.gap-3{gap:12px}.gap-4{gap:16px}.gap-6{gap:24px}.gap-x-2{-moz-column-gap:8px;column-gap:8px}.gap-y-1{row-gap:4px}.gap-y-2{row-gap:8px}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(8px * var(--tw-space-x-reverse));margin-left:calc(8px * calc(1 - var(--tw-space-x-reverse)))}.space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(16px * var(--tw-space-x-reverse));margin-left:calc(16px * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(4px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(4px * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(8px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(8px * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(16px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(16px * var(--tw-space-y-reverse))}.divide-y-\\[1px\\]>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.self-start{align-self:flex-start}.self-center{align-self:center}.self-stretch{align-self:stretch}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.overflow-y-hidden{overflow-y:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.break-words{overflow-wrap:break-word}.rounded{border-radius:4px}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:8px}.rounded-md{border-radius:6px}.rounded-none{border-radius:0}.rounded-e-\\[4px\\]{border-start-end-radius:4px;border-end-end-radius:4px}.rounded-l-none{border-top-left-radius:0;border-bottom-left-radius:0}.rounded-r-none{border-top-right-radius:0;border-bottom-right-radius:0}.rounded-s-full{border-start-start-radius:9999px;border-end-start-radius:9999px}.border{border-width:1px}.border-0{border-width:0px}.\\!border-t-0{border-top-width:0px!important}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.\\!border-surface-700{--tw-border-opacity: 1 !important;border-color:rgb(var(--color-surface-700) / var(--tw-border-opacity, 1))!important}.border-surface-400\\/20{border-color:rgb(var(--color-surface-400) / .2)}.bg-primary-500{--tw-bg-opacity: 1;background-color:rgb(var(--color-primary-500) / var(--tw-bg-opacity, 1))}.bg-primary-500\\/30{background-color:rgb(var(--color-primary-500) / .3)}.bg-surface-400{--tw-bg-opacity: 1;background-color:rgb(var(--color-surface-400) / var(--tw-bg-opacity, 1))}.bg-surface-400\\/20{background-color:rgb(var(--color-surface-400) / .2)}.bg-surface-900{--tw-bg-opacity: 1;background-color:rgb(var(--color-surface-900) / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\\/30{background-color:#ffffff4d}.bg-white\\/75{background-color:#ffffffbf}.bg-scroll{background-attachment:scroll}.fill-current{fill:currentColor}.fill-primary-500{fill:rgb(var(--color-primary-500) / 1)}.fill-slate-700{fill:#334155}.fill-transparent{fill:transparent}.stroke-primary-500{stroke:rgb(var(--color-primary-500) / 1)}.stroke-primary-500\\/30{stroke:rgb(var(--color-primary-500) / .3)}.stroke-surface-500\\/30{stroke:rgb(var(--color-surface-500) / .3)}.stroke-surface-900{stroke:rgb(var(--color-surface-900) / 1)}.object-cover{-o-object-fit:cover;object-fit:cover}.object-center{-o-object-position:center;object-position:center}.\\!p-0{padding:0!important}.p-0{padding:0}.p-1{padding:4px}.p-2{padding:8px}.p-4{padding:16px}.\\!px-1{padding-left:4px!important;padding-right:4px!important}.\\!py-2{padding-top:8px!important;padding-bottom:8px!important}.\\!py-\\[7px\\]{padding-top:7px!important;padding-bottom:7px!important}.px-3{padding-left:12px;padding-right:12px}.px-4{padding-left:16px;padding-right:16px}.px-8{padding-left:32px;padding-right:32px}.py-1{padding-top:4px;padding-bottom:4px}.py-2{padding-top:8px;padding-bottom:8px}.py-6{padding-top:24px;padding-bottom:24px}.pb-4{padding-bottom:16px}.pb-6{padding-bottom:24px}.pl-6{padding-left:24px}.pr-0{padding-right:0}.pr-2{padding-right:8px}.pr-4{padding-right:16px}.pr-6{padding-right:24px}.pt-4{padding-top:16px}.text-center{text-align:center}.text-start{text-align:start}.text-2xl{font-size:24px;line-height:32px}.text-\\[12px\\]{font-size:12px}.text-base{font-size:16px;line-height:24px}.text-sm{font-size:14px;line-height:20px}.text-xl{font-size:20px;line-height:28px}.text-xs{font-size:12px;line-height:16px}.font-bold{font-weight:700}.italic{font-style:italic}.leading-\\[14px\\]{line-height:14px}.leading-loose{line-height:2}.\\!text-error-500{--tw-text-opacity: 1 !important;color:rgb(var(--color-error-500) / var(--tw-text-opacity, 1))!important}.text-error-400{--tw-text-opacity: 1;color:rgb(var(--color-error-400) / var(--tw-text-opacity, 1))}.text-error-500{--tw-text-opacity: 1;color:rgb(var(--color-error-500) / var(--tw-text-opacity, 1))}.text-surface-400{--tw-text-opacity: 1;color:rgb(var(--color-surface-400) / var(--tw-text-opacity, 1))}.underline-offset-2{text-underline-offset:2px}.accent-surface-900{accent-color:rgb(var(--color-surface-900) / 1)}.opacity-40{opacity:.4}.opacity-50{opacity:.5}.opacity-70{opacity:.7}.mix-blend-hard-light{mix-blend-mode:hard-light}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.-outline-offset-\\[3px\\]{outline-offset:-3px}.\\!ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)!important}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-\\[1px\\]{--tw-blur: blur(1px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-xl{--tw-drop-shadow: drop-shadow(0 20px 13px rgb(0 0 0 / .03)) drop-shadow(0 8px 5px rgb(0 0 0 / .08));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm{--tw-backdrop-blur: blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[grid-template-columns\\]{transition-property:grid-template-columns;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[grid-template-rows\\]{transition-property:grid-template-rows;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[stroke-dashoffset\\]{transition-property:stroke-dashoffset;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[transform\\]{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-\\[width\\]{transition-property:width;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.delay-100{transition-delay:.1s}.duration-100{transition-duration:.1s}.duration-\\[200ms\\]{transition-duration:.2s}.duration-\\[250ms\\]{transition-duration:.25s}.duration-\\[400ms\\]{transition-duration:.4s}.bg-surface-backdrop-token{background-color:rgb(var(--color-surface-400) / .7)}.dark .bg-surface-backdrop-token{background-color:rgb(var(--color-surface-900) / .7)}.bg-surface-100-800-token{background-color:rgb(var(--color-surface-100))}.dark .bg-surface-100-800-token{background-color:rgb(var(--color-surface-800))}.bg-surface-200-700-token{background-color:rgb(var(--color-surface-200))}.dark .bg-surface-200-700-token{background-color:rgb(var(--color-surface-700))}.bg-surface-900-50-token{background-color:rgb(var(--color-surface-900))}.dark .bg-surface-900-50-token{background-color:rgb(var(--color-surface-50))}.border-token{border-width:var(--theme-border-base)}.border-surface-400-500-token{border-color:rgb(var(--color-surface-400))}.dark .border-surface-400-500-token{border-color:rgb(var(--color-surface-500))}.border-surface-900-50-token{border-color:rgb(var(--color-surface-900))}.dark .border-surface-900-50-token{border-color:rgb(var(--color-surface-50))}.border-surface-800-100-token{border-color:rgb(var(--color-surface-800))}.dark .border-surface-800-100-token{border-color:rgb(var(--color-surface-100))}.rounded-token{border-radius:var(--theme-rounded-base)}.rounded-container-token{border-radius:var(--theme-rounded-container)}.rounded-tl-container-token{border-top-left-radius:var(--theme-rounded-container)}.rounded-tr-container-token{border-top-right-radius:var(--theme-rounded-container)}.fill-token{fill:rgba(var(--theme-font-color-base))}.dark .fill-token{fill:rgba(var(--theme-font-color-dark))}.text-surface-700-200-token{color:rgb(var(--color-surface-700))}.dark .text-surface-700-200-token{color:rgb(var(--color-surface-200))}.scrollbar-thin::-webkit-scrollbar-track{background-color:var(--scrollbar-track);border-radius:var(--scrollbar-track-radius)}.scrollbar-thin::-webkit-scrollbar-track:hover{background-color:var(--scrollbar-track-hover, var(--scrollbar-track))}.scrollbar-thin::-webkit-scrollbar-track:active{background-color:var(--scrollbar-track-active, var(--scrollbar-track-hover, var(--scrollbar-track)))}.scrollbar-thin::-webkit-scrollbar-thumb{background-color:var(--scrollbar-thumb);border-radius:var(--scrollbar-thumb-radius)}.scrollbar-thin::-webkit-scrollbar-thumb:hover{background-color:var(--scrollbar-thumb-hover, var(--scrollbar-thumb))}.scrollbar-thin::-webkit-scrollbar-thumb:active{background-color:var(--scrollbar-thumb-active, var(--scrollbar-thumb-hover, var(--scrollbar-thumb)))}.scrollbar-thin::-webkit-scrollbar-corner{background-color:var(--scrollbar-corner);border-radius:var(--scrollbar-corner-radius)}.scrollbar-thin::-webkit-scrollbar-corner:hover{background-color:var(--scrollbar-corner-hover, var(--scrollbar-corner))}.scrollbar-thin::-webkit-scrollbar-corner:active{background-color:var(--scrollbar-corner-active, var(--scrollbar-corner-hover, var(--scrollbar-corner)))}.scrollbar-thin{scrollbar-width:thin;scrollbar-color:var(--scrollbar-thumb, initial) var(--scrollbar-track, initial)}.scrollbar-thin::-webkit-scrollbar{display:block;width:8px;height:8px}.scrollbar-track-transparent{--scrollbar-track: transparent !important}.scrollbar-thumb-slate-400\\/50{--scrollbar-thumb: rgb(148 163 184 / .5) !important}.scrollbar-corner-transparent{--scrollbar-corner: transparent !important}.dark .hover\\:bg-primary-hover-token:hover:hover{background-color:rgb(var(--color-primary-500) / .1)}.has-\\[\\:checked\\]\\:\\!variant-filled-primary:has(:checked){--tw-bg-opacity: 1 !important;background-color:rgb(var(--color-primary-500) / var(--tw-bg-opacity))!important;color:rgb(var(--on-primary))!important}:is(.dark .has-\\[\\:checked\\]\\:\\!variant-filled-primary:has(:checked)){--tw-bg-opacity: 1 !important;background-color:rgb(var(--color-primary-500) / var(--tw-bg-opacity))!important;color:rgb(var(--on-primary))!important}.hover\\:variant-filled:hover{background-color:rgb(var(--color-surface-900));color:rgb(var(--color-surface-50))}.dark .hover\\:variant-filled:hover{background-color:rgb(var(--color-surface-50));color:rgb(var(--color-surface-900))}.hover\\:variant-soft:hover,.hover\\:variant-soft-surface:hover{background-color:rgb(var(--color-surface-400) / .2);--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)!important;color:rgb(var(--color-surface-700))}.dark .hover\\:variant-soft:hover,.dark .hover\\:variant-soft-surface:hover{color:rgb(var(--color-surface-200))}:is(.dark .hover\\:variant-soft:hover){background-color:rgb(var(--color-surface-500) / .2)}:is(.dark .hover\\:variant-soft-surface:hover){background-color:rgb(var(--color-surface-500) / .2)}.\\[\\&\\:not\\(\\[disabled\\]\\)\\]\\:variant-soft-primary:not([disabled]){background-color:rgb(var(--color-primary-400) / .2);--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color) !important;--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color) !important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)!important;color:rgb(var(--color-primary-700))}.dark .\\[\\&\\:not\\(\\[disabled\\]\\)\\]\\:variant-soft-primary:not([disabled]){color:rgb(var(--color-primary-200))}:is(.dark .\\[\\&\\:not\\(\\[disabled\\]\\)\\]\\:variant-soft-primary:not([disabled])){background-color:rgb(var(--color-primary-500) / .2)}.\\*\\:\\!m-0>*{margin:0!important}.\\*\\:items-center>*{align-items:center}.\\*\\:\\!rounded-none>*{border-radius:0!important}.\\*\\:py-2>*{padding-top:8px;padding-bottom:8px}.\\*\\:py-4>*{padding-top:16px;padding-bottom:16px}.\\*\\:text-sm>*{font-size:14px;line-height:20px}.\\*\\:border-surface-300-600-token>*{border-color:rgb(var(--color-surface-300))}.dark .\\*\\:border-surface-300-600-token>*{border-color:rgb(var(--color-surface-600))}.hover\\:translate-x-0:hover{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:text-xl:hover{font-size:20px;line-height:28px}.hover\\:opacity-100:hover{opacity:1}.hover\\:brightness-110:hover{--tw-brightness: brightness(1.1);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:brightness-\\[105\\%\\]:hover{--tw-brightness: brightness(105%);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:bg-primary-hover-token:hover:hover,.dark .hover\\:bg-primary-hover-token:hover:hover{background-color:rgb(var(--color-primary-500) / .1)}.focus\\:decoration-wavy:focus{text-decoration-style:wavy}.focus\\:\\!outline-none:focus{outline:2px solid transparent!important;outline-offset:2px!important}.disabled\\:cursor-wait:disabled{cursor:wait}.disabled\\:opacity-70:disabled{opacity:.7}.dark\\:\\!border-surface-200:is(.dark *){--tw-border-opacity: 1 !important;border-color:rgb(var(--color-surface-200) / var(--tw-border-opacity, 1))!important}.dark\\:border-surface-500\\/20:is(.dark *){border-color:rgb(var(--color-surface-500) / .2)}.dark\\:bg-black\\/15:is(.dark *){background-color:#00000026}.dark\\:bg-surface-300:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(var(--color-surface-300) / var(--tw-bg-opacity, 1))}.dark\\:bg-surface-500\\/20:is(.dark *){background-color:rgb(var(--color-surface-500) / .2)}.dark\\:bg-surface-700:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(var(--color-surface-700) / var(--tw-bg-opacity, 1))}.dark\\:fill-slate-200:is(.dark *){fill:#e2e8f0}.dark\\:stroke-surface-50:is(.dark *){stroke:rgb(var(--color-surface-50) / 1)}.dark\\:accent-surface-50:is(.dark *){accent-color:rgb(var(--color-surface-50) / 1)}.dark\\:hover\\:brightness-110:hover:is(.dark *){--tw-brightness: brightness(1.1);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}@media (min-width: 768px){.md\\:h-\\[600px\\]{height:600px}.md\\:max-w-screen-md{max-width:768px}.md\\:max-w-screen-sm{max-width:640px}.md\\:flex-row{flex-direction:row}.md\\:\\!items-center{align-items:center!important}.md\\:\\!items-baseline{align-items:baseline!important}}@media (min-width: 1024px){.lg\\:max-w-screen-md{max-width:768px}}@media (min-width: 1280px){.xl\\:max-w-screen-lg{max-width:1024px}}.\\[\\&\\:last-child\\]\\:\\*\\:pt-4>*:last-child{padding-top:16px}.\\[\\&\\:not\\(\\:last-child\\)\\]\\:\\*\\:py-4>*:not(:last-child){padding-top:16px;padding-bottom:16px}.\\[\\&\\:not\\(\\[disabled\\]\\)\\]\\:hover\\:bg-slate-400\\/30:hover:not([disabled]){background-color:#94a3b84d}.\\[\\&\\>input\\]\\:\\!min-w-0>input{min-width:0px!important}.\\[\\&\\>input\\]\\:\\!border-transparent>input{border-color:transparent!important} `),function(_o,xo,hl,gl,uu,fu){"use strict";var pu=Object.defineProperty,vl=r=>{throw TypeError(r)},hu=(r,t,e)=>t in r?pu(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,V=(r,t,e)=>hu(r,typeof t!="symbol"?t+"":t,e),Hi=(r,t,e)=>t.has(r)||vl("Cannot "+e),D=(r,t,e)=>(Hi(r,t,"read from private field"),e?e.call(r):t.get(r)),Tt=(r,t,e)=>t.has(r)?vl("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),Zt=(r,t,e,a)=>(Hi(r,t,"write to private field"),t.set(r,e),e),j=(r,t,e)=>(Hi(r,t,"access private method"),e),Ui=(r,t,e,a)=>({set _(n){Zt(r,t,n)},get _(){return D(r,t,a)}}),ba,Br,zn,ta,ko,Ur,qr,Eo,qi,Hn,Un,qn,Po,Ao,ml,So,Co,ea,Wn,Gn,Ua,To,Yn,Io,Mr,Vn,hr,Do,Rr,$n,ya,Bo,Le,wl,bl,yl,_l,xl,Mo,Wi,Gi,Ro,kl,Oo,No,Yi,Lo,El,Pl,Al,Sl,Cl,Vi,Tl,un,Fo,Il,$i,Dl,fn,Jn,Wr,jo,zo,Ji,pn,Bl,Ml,Qi,De,_a,xa,Qn,Rl,Ho,Ki,Ol,Or,er,Nl,Ll,Fl,jl,zl,Hl,Xi,Kn,Ul,ka,qa,kr,Ae,Uo,qo,ql,Wo,Zi,Er,Wl,hn,Xn,ts,Wa,gn,Pr,Go,Gl,es,Yl,Yo,rs,Vl,Zn,Ga,Ea,$l,Jl,as,Ql,Kl,Ya,vn,mn,Pa,Va,lr,Xl,Zl,ns,tc,os,ec,is,rc,ac;(()=>{if(/\[native code\]/.test(Array.from.toString()))return;const r=document.createElement("iframe");document.body.append(r),Array.from=r.contentWindow.Array.from,r.remove()})();const ss=!1;var wn=Array.isArray,gu=Array.prototype.indexOf,ls=Array.from,Vo=Object.keys,to=Object.defineProperty,Gr=Object.getOwnPropertyDescriptor,nc=Object.getOwnPropertyDescriptors,oc=Object.prototype,vu=Array.prototype,$o=Object.getPrototypeOf;function bn(r){return typeof r=="function"}const Ar=()=>{};function mu(r){return r()}function Jo(r){for(var t=0;t<r.length;t++)r[t]()}const cr=2,ic=4,eo=8,Qo=16,Yr=32,$a=64,Ko=128,Ja=256,Xo=512,Xe=1024,ra=2048,Qa=4096,Vr=8192,yn=16384,sc=32768,_n=65536,lc=1<<17,wu=1<<19,cc=1<<20,$r=Symbol("$state"),cs=Symbol("legacy props"),bu=Symbol(""),yu=typeof requestIdleCallback>"u"?r=>setTimeout(r,1):requestIdleCallback;let Zo=!1,ti=!1,ds=[],us=[];function dc(){Zo=!1;const r=ds.slice();ds=[],Jo(r)}function uc(){ti=!1;const r=us.slice();us=[],Jo(r)}function Ka(r){Zo||(Zo=!0,queueMicrotask(dc)),ds.push(r)}function _u(r){ti||(ti=!0,yu(uc)),us.push(r)}function xu(){Zo&&dc(),ti&&uc()}function ei(r){console.warn("https://svelte.dev/e/hydration_mismatch")}const fs=1,ps=2,fc=4,ku=8,Eu=16,Pu=1,Au=2,pc=4,Su=8,Cu=16,Tu=1,Iu=2,Du=4,Bu=1,Mu=2,hc="[",hs="[!",gs="]",xn={},rr=Symbol();function gc(r){return r===this.v}function ri(r,t){return r!=r?t==t:r!==t||r!==null&&typeof r=="object"||typeof r=="function"}function Ru(r,t){return r!==t}function vs(r){return!ri(r,this.v)}function Ou(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Nu(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Lu(r){throw new Error("https://svelte.dev/e/effect_orphan")}function Fu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ju(){throw new Error("https://svelte.dev/e/hydration_failed")}function zu(r){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Hu(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function Uu(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function qu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Wu(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Gu(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let kn=!1,Yu=!1;function Vu(){kn=!0}const $u=[];function vc(r,t=!1){return ai(r,new Map,"",$u)}function ai(r,t,e,a,n=null){if(typeof r=="object"&&r!==null){var o=t.get(r);if(o!==void 0)return o;if(r instanceof Map)return new Map(r);if(r instanceof Set)return new Set(r);if(wn(r)){var i=Array(r.length);t.set(r,i),n!==null&&t.set(n,i);for(var s=0;s<r.length;s+=1){var l=r[s];s in r&&(i[s]=ai(l,t,e,a))}return i}if($o(r)===oc){i={},t.set(r,i),n!==null&&t.set(n,i);for(var c in r)i[c]=ai(r[c],t,e,a);return i}if(r instanceof Date)return structuredClone(r);if(typeof r.toJSON=="function")return ai(r.toJSON(),t,e,a,r)}if(r instanceof EventTarget)return r;try{return structuredClone(r)}catch{return r}}function ar(r,t){var e={f:0,v:r,reactions:null,equals:gc,rv:0,wv:0};return e}function Ge(r){return mc(ar(r))}function ro(r,t=!1){var e;const a=ar(r);return t||(a.equals=vs),kn&&he!==null&&he.l!==null&&((e=he.l).s??(e.s=[])).push(a),a}function at(r,t=!1){return mc(ro(r,t))}function mc(r){return ye!==null&&(ye.f&cr)!==0&&(Qr===null?Ku([r]):Qr.push(r)),r}function S(r,t){return ye!==null&&An()&&(ye.f&(cr|Qo))!==0&&(Qr===null||!Qr.includes(r))&&Gu(),ao(r,t)}function ao(r,t){return r.equals(t)||(r.v,r.v=t,r.wv=Ac(),wc(r,ra),An()&&me!==null&&(me.f&Xe)!==0&&(me.f&(Yr|$a))===0&&(aa===null?Xu([r]):aa.push(r))),t}function wc(r,t){var e=r.reactions;if(e!==null)for(var a=An(),n=e.length,o=0;o<n;o++){var i=e[o],s=i.f;(s&ra)===0&&(!a&&i===me||(Cr(i,t),(s&(Xe|Ja))!==0&&((s&cr)!==0?wc(i,Qa):di(i))))}}function de(r){var t=cr|ra;me===null?t|=Ja:me.f|=cc;var e=ye!==null&&(ye.f&cr)!==0?ye:null;const a={children:null,ctx:he,deps:null,equals:gc,f:t,fn:r,reactions:null,rv:0,v:null,wv:0,parent:e??me};return e!==null&&(e.children??(e.children=[])).push(a),a}function Aa(r){const t=de(r);return t.equals=vs,t}function bc(r){var t=r.children;if(t!==null){r.children=null;for(var e=0;e<t.length;e+=1){var a=t[e];(a.f&cr)!==0?ms(a):Lr(a)}}}function Ju(r){for(var t=r.parent;t!==null;){if((t.f&cr)===0)return t;t=t.parent}return null}function yc(r){var t,e=me;Sr(Ju(r));try{bc(r),t=Cc(r)}finally{Sr(e)}return t}function _c(r){var t=yc(r),e=(Sa||(r.f&Ja)!==0)&&r.deps!==null?Qa:Xe;Cr(r,e),r.equals(t)||(r.v=t,r.wv=Ac())}function ms(r){bc(r),io(r,0),Cr(r,yn),r.v=r.children=r.deps=r.ctx=r.reactions=null}function ni(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}const xc=0,Qu=1;let oi=!1,ii=xc,no=!1,oo=null,En=!1,ws=!1;function kc(r){En=r}function Ec(r){ws=r}let Xa=[],Pn=0,ye=null;function Jr(r){ye=r}let me=null;function Sr(r){me=r}let Qr=null;function Ku(r){Qr=r}let dr=null,gr=0,aa=null;function Xu(r){aa=r}let Pc=1,si=0,Sa=!1,Ca=null,he=null;function Ac(){return++Pc}function An(){return!kn||he!==null&&he.l===null}function Sn(r){var t,e=r.f;if((e&ra)!==0)return!0;if((e&Qa)!==0){var a=r.deps,n=(e&Ja)!==0;if(a!==null){var o,i,s=(e&Xo)!==0,l=n&&me!==null&&!Sa,c=a.length;if(s||l){for(o=0;o<c;o++)i=a[o],(s||!((t=i?.reactions)!=null&&t.includes(r)))&&(i.reactions??(i.reactions=[])).push(r);s&&(r.f^=Xo)}for(o=0;o<c;o++)if(i=a[o],Sn(i)&&_c(i),i.wv>r.wv)return!0}(!n||me!==null&&!Sa)&&Cr(r,Xe)}return!1}function Zu(r,t){for(var e=t;e!==null;){if((e.f&Ko)!==0)try{e.fn(r);return}catch{e.f^=Ko}e=e.parent}throw oi=!1,r}function tf(r){return(r.f&yn)===0&&(r.parent===null||(r.parent.f&Ko)===0)}function li(r,t,e,a){if(oi){if(e===null&&(oi=!1),tf(t))throw r;return}e!==null&&(oi=!0);{Zu(r,t);return}}function Sc(r,t,e=0){var a=r.reactions;if(a!==null)for(var n=0;n<a.length;n++){var o=a[n];(o.f&cr)!==0?Sc(o,t,e+1):t===o&&(e===0?Cr(o,ra):(o.f&Xe)!==0&&Cr(o,Qa),di(o))}}function Cc(r){var t,e=dr,a=gr,n=aa,o=ye,i=Sa,s=Qr,l=he,c=r.f;dr=null,gr=0,aa=null,ye=(c&(Yr|$a))===0?r:null,Sa=!En&&(c&Ja)!==0,Qr=null,he=r.ctx,si++;try{var d=(0,r.fn)(),u=r.deps;if(dr!==null){var g;if(io(r,gr),u!==null&&gr>0)for(u.length=gr+dr.length,g=0;g<dr.length;g++)u[gr+g]=dr[g];else r.deps=u=dr;if(!Sa)for(g=gr;g<u.length;g++)((t=u[g]).reactions??(t.reactions=[])).push(r)}else u!==null&&gr<u.length&&(io(r,gr),u.length=gr);if(An()&&aa!==null&&(r.f&(cr|Qa|ra))===0)for(g=0;g<aa.length;g++)Sc(aa[g],r);return o!==null&&si++,d}finally{dr=e,gr=a,aa=n,ye=o,Sa=i,Qr=s,he=l}}function ef(r,t){let e=t.reactions;if(e!==null){var a=gu.call(e,r);if(a!==-1){var n=e.length-1;n===0?e=t.reactions=null:(e[a]=e[n],e.pop())}}e===null&&(t.f&cr)!==0&&(dr===null||!dr.includes(t))&&(Cr(t,Qa),(t.f&(Ja|Xo))===0&&(t.f^=Xo),io(t,0))}function io(r,t){var e=r.deps;if(e!==null)for(var a=t;a<e.length;a++)ef(r,e[a])}function ci(r){var t=r.f;if((t&yn)===0){Cr(r,Xe);var e=me,a=he;me=r;try{(t&Qo)!==0?pf(r):qc(r),Uc(r),Hc(r);var n=Cc(r);r.teardown=typeof n=="function"?n:null,r.wv=Pc;var o=r.deps,i;ss&&Yu&&r.f&ra}catch(s){li(s,r,e,a||r.ctx)}finally{me=e}}}function Tc(){if(Pn>1e3){Pn=0;try{Fu()}catch(r){if(oo!==null)li(r,oo,null);else throw r}}Pn++}function Ic(r){var t=r.length;if(t!==0){Tc();var e=En;En=!0;try{for(var a=0;a<t;a++){var n=r[a];(n.f&Xe)===0&&(n.f^=Xe);var o=[];Dc(n,o),rf(o)}}finally{En=e}}}function rf(r){var t=r.length;if(t!==0)for(var e=0;e<t;e++){var a=r[e];if((a.f&(yn|Vr))===0)try{Sn(a)&&(ci(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null?Wc(a):a.fn=null))}catch(n){li(n,a,null,a.ctx)}}}function af(){if(no=!1,Pn>1001)return;const r=Xa;Xa=[],Ic(r),no||(Pn=0,oo=null)}function di(r){ii===xc&&(no||(no=!0,queueMicrotask(af))),oo=r;for(var t=r;t.parent!==null;){t=t.parent;var e=t.f;if((e&($a|Yr))!==0){if((e&Xe)===0)return;t.f^=Xe}}Xa.push(t)}function Dc(r,t){var e=r.first,a=[];t:for(;e!==null;){var n=e.f,o=(n&Yr)!==0,i=o&&(n&Xe)!==0,s=e.next;if(!i&&(n&Vr)===0)if((n&eo)!==0){if(o)e.f^=Xe;else try{Sn(e)&&ci(e)}catch(u){li(u,e,null,e.ctx)}var l=e.first;if(l!==null){e=l;continue}}else(n&ic)!==0&&a.push(e);if(s===null){let u=e.parent;for(;u!==null;){if(r===u)break t;var c=u.next;if(c!==null){e=c;continue t}u=u.parent}}e=s}for(var d=0;d<a.length;d++)l=a[d],t.push(l),Dc(l,t)}function bs(r){var t=ii,e=Xa;try{Tc();const n=[];ii=Qu,Xa=n,no=!1,Ic(e);var a=r?.();return xu(),(Xa.length>0||n.length>0)&&bs(),Pn=0,oo=null,a}finally{ii=t,Xa=e}}async function so(){await Promise.resolve(),bs()}function f(r){var t,e=r.f,a=(e&cr)!==0;if(a&&(e&yn)!==0){var n=yc(r);return ms(r),n}if(Ca!==null&&Ca.add(r),ye!==null){Qr!==null&&Qr.includes(r)&&Wu();var o=ye.deps;r.rv<si&&(r.rv=si,dr===null&&o!==null&&o[gr]===r?gr++:dr===null?dr=[r]:dr.push(r))}else if(a&&r.deps===null)for(var i=r,s=i.parent,l=i;s!==null;)if((s.f&cr)!==0){var c=s;l=c,s=c.parent}else{var d=s;(t=d.deriveds)!=null&&t.includes(l)||(d.deriveds??(d.deriveds=[])).push(l);break}return a&&(i=r,Sn(i)&&_c(i)),r.v}function nf(r){var t=Ca;Ca=new Set;var e=Ca,a;try{if(nr(r),t!==null)for(a of Ca)t.add(a)}finally{Ca=t}return e}function of(r){var t=nf(()=>nr(r));for(var e of t)if((e.f&lc)!==0)for(const a of e.deps||[])(a.f&cr)===0&&ao(a,a.v);else ao(e,e.v)}function nr(r){const t=ye;try{return ye=null,r()}finally{ye=t}}const sf=-7169;function Cr(r,t){r.f=r.f&sf|t}function te(r){return Bc().get(r)}function Xt(r,t){return Bc().set(r,t),t}function Bc(r){return he===null&&ni(),he.c??(he.c=new Map(lf(he)||void 0))}function lf(r){let t=r.p;for(;t!==null;){const e=t.c;if(e!==null)return e;t=t.p}return null}function Mc(r,t=1){var e=f(r),a=t===1?e++:e--;return S(r,e),a}function _e(r,t=!1,e){he={p:he,c:null,e:null,m:!1,s:r,x:null,l:null},kn&&!t&&(he.l={s:null,u:null,r1:[],r2:ar(!1)})}function xe(r){const t=he;if(t!==null){r!==void 0&&(t.x=r);const i=t.e;if(i!==null){var e=me,a=ye;t.e=null;try{for(var n=0;n<i.length;n++){var o=i[n];Sr(o.effect),Jr(o.reaction),Nr(o.fn)}}finally{Sr(e),Jr(a)}}he=t.p,t.m=!0}return r||{}}function I(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if($r in r)ys(r);else if(!Array.isArray(r))for(let t in r){const e=r[t];typeof e=="object"&&e&&$r in e&&ys(e)}}}function ys(r,t=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!t.has(r)){t.add(r),r instanceof Date&&r.getTime();for(let a in r)try{ys(r[a],t)}catch{}const e=$o(r);if(e!==Object.prototype&&e!==Array.prototype&&e!==Map.prototype&&e!==Set.prototype&&e!==Date.prototype){const a=nc(e);for(let n in a){const o=a[n].get;if(o)try{o.call(r)}catch{}}}}}let Kt=!1;function na(r){Kt=r}let fe;function vr(r){if(r===null)throw ei(),xn;return fe=r}function oa(){return vr(Xr(fe))}function h(r){if(Kt){if(Xr(fe)!==null)throw ei(),xn;fe=r}}function Se(r=1){if(Kt){for(var t=r,e=fe;t--;)e=Xr(e);fe=e}}function _s(){for(var r=0,t=fe;;){if(t.nodeType===8){var e=t.data;if(e===gs){if(r===0)return t;r-=1}else(e===hc||e===hs)&&(r+=1)}var a=Xr(t);t.remove(),t=a}}function ie(r,t=null,e){if(typeof r!="object"||r===null||$r in r)return r;const a=$o(r);if(a!==oc&&a!==vu)return r;var n=new Map,o=wn(r),i=ar(0);o&&n.set("length",ar(r.length));var s;return new Proxy(r,{defineProperty(l,c,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Uu();var u=n.get(c);return u===void 0?(u=ar(d.value),n.set(c,u)):S(u,ie(d.value,s)),!0},deleteProperty(l,c){var d=n.get(c);if(d===void 0)c in l&&n.set(c,ar(rr));else{if(o&&typeof c=="string"){var u=n.get("length"),g=Number(c);Number.isInteger(g)&&g<u.v&&S(u,g)}S(d,rr),Rc(i)}return!0},get(l,c,d){var u;if(c===$r)return r;var g=n.get(c),p=c in l;if(g===void 0&&(!p||(u=Gr(l,c))!=null&&u.writable)&&(g=ar(ie(p?l[c]:rr,s)),n.set(c,g)),g!==void 0){var b=f(g);return b===rr?void 0:b}return Reflect.get(l,c,d)},getOwnPropertyDescriptor(l,c){var d=Reflect.getOwnPropertyDescriptor(l,c);if(d&&"value"in d){var u=n.get(c);u&&(d.value=f(u))}else if(d===void 0){var g=n.get(c),p=g?.v;if(g!==void 0&&p!==rr)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return d},has(l,c){var d;if(c===$r)return!0;var u=n.get(c),g=u!==void 0&&u.v!==rr||Reflect.has(l,c);if(u!==void 0||me!==null&&(!g||(d=Gr(l,c))!=null&&d.writable)){u===void 0&&(u=ar(g?ie(l[c],s):rr),n.set(c,u));var p=f(u);if(p===rr)return!1}return g},set(l,c,d,u){var g,p=n.get(c),b=c in l;if(o&&c==="length")for(var w=d;w<p.v;w+=1){var y=n.get(w+"");y!==void 0?S(y,rr):w in l&&(y=ar(rr),n.set(w+"",y))}p===void 0?(!b||(g=Gr(l,c))!=null&&g.writable)&&(p=ar(void 0),S(p,ie(d,s)),n.set(c,p)):(b=p.v!==rr,S(p,ie(d,s)));var _=Reflect.getOwnPropertyDescriptor(l,c);if(_?.set&&_.set.call(u,d),!b){if(o&&typeof c=="string"){var k=n.get("length"),x=Number(c);Number.isInteger(x)&&x>=k.v&&S(k,x+1)}Rc(i)}return!0},ownKeys(l){f(i);var c=Reflect.ownKeys(l).filter(g=>{var p=n.get(g);return p===void 0||p.v!==rr});for(var[d,u]of n)u.v!==rr&&!(d in l)&&c.push(d);return c},setPrototypeOf(){qu()}})}function Rc(r,t=1){S(r,r.v+t)}function Oc(r){return r!==null&&typeof r=="object"&&$r in r?r[$r]:r}function Nc(r,t){return Object.is(Oc(r),Oc(t))}var ui,Lc,Fc;function xs(){if(ui===void 0){ui=window;var r=Element.prototype,t=Node.prototype;Lc=Gr(t,"firstChild").get,Fc=Gr(t,"nextSibling").get,r.__click=void 0,r.__className="",r.__attributes=null,r.__styles=null,r.__e=void 0,Text.prototype.__t=void 0}}function Ta(r=""){return document.createTextNode(r)}function Kr(r){return Lc.call(r)}function Xr(r){return Fc.call(r)}function v(r,t){if(!Kt)return Kr(r);var e=Kr(fe);if(e===null)e=fe.appendChild(Ta());else if(t&&e.nodeType!==3){var a=Ta();return e?.before(a),vr(a),a}return vr(e),e}function ee(r,t){if(!Kt){var e=Kr(r);return e instanceof Comment&&e.data===""?Xr(e):e}return fe}function E(r,t=1,e=!1){let a=Kt?fe:r;for(var n;t--;)n=a,a=Xr(a);if(!Kt)return a;var o=a?.nodeType;if(e&&o!==3){var i=Ta();return a===null?n?.after(i):a.before(i),vr(i),i}return vr(a),a}function jc(r){r.textContent=""}function zc(r){me===null&&ye===null&&Lu(),ye!==null&&(ye.f&Ja)!==0&&Nu(),ws&&Ou()}function cf(r,t){var e=t.last;e===null?t.last=t.first=r:(e.next=r,r.prev=e,t.last=r)}function Za(r,t,e,a=!0){var n=(r&$a)!==0,o=me,i={ctx:he,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:r|ra,first:null,fn:t,last:null,next:null,parent:n?null:o,prev:null,teardown:null,transitions:null,wv:0};if(e){var s=En;try{kc(!0),ci(i),i.f|=sc}catch(d){throw Lr(i),d}finally{kc(s)}}else t!==null&&di(i);var l=e&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&(cc|Ko))===0;if(!l&&!n&&a&&(o!==null&&cf(i,o),ye!==null&&(ye.f&cr)!==0)){var c=ye;(c.children??(c.children=[])).push(i)}return i}function df(){return ye===null?!1:!Sa}function lo(r){const t=Za(eo,null,!1);return Cr(t,Xe),t.teardown=r,t}function Tr(r){zc();var t=me!==null&&(me.f&Yr)!==0&&he!==null&&!he.m;if(t){var e=he;(e.e??(e.e=[])).push({fn:r,effect:me,reaction:ye})}else{var a=Nr(r);return a}}function uf(r){return zc(),Ir(r)}function co(r){const t=Za($a,r,!0);return()=>{Lr(t)}}function ff(r){const t=Za($a,r,!0);return(e={})=>new Promise(a=>{e.outro?Cn(t,()=>{Lr(t),a(void 0)}):(Lr(t),a(void 0))})}function Nr(r){return Za(ic,r,!1)}function ht(r,t){var e=he,a={effect:null,ran:!1};e.l.r1.push(a),a.effect=Ir(()=>{r(),!a.ran&&(a.ran=!0,S(e.l.r2,!0),nr(t))})}function $e(){var r=he;Ir(()=>{if(f(r.l.r2)){for(var t of r.l.r1){var e=t.effect;(e.f&Xe)!==0&&Cr(e,Qa),Sn(e)&&ci(e),t.ran=!1}r.l.r2.v=!1}})}function Ir(r){return Za(eo,r,!0)}function C(r){return tn(r)}function tn(r,t=0){return Za(eo|Qo|t,r,!0)}function ia(r,t=!0){return Za(eo|Yr,r,!0,t)}function Hc(r){var t=r.teardown;if(t!==null){const e=ws,a=ye;Ec(!0),Jr(null);try{t.call(null)}finally{Ec(e),Jr(a)}}}function Uc(r){var t=r.deriveds;if(t!==null){r.deriveds=null;for(var e=0;e<t.length;e+=1)ms(t[e])}}function qc(r,t=!1){var e=r.first;for(r.first=r.last=null;e!==null;){var a=e.next;Lr(e,t),e=a}}function pf(r){for(var t=r.first;t!==null;){var e=t.next;(t.f&Yr)===0&&Lr(t),t=e}}function Lr(r,t=!0){var e=!1;if((t||(r.f&wu)!==0)&&r.nodes_start!==null){for(var a=r.nodes_start,n=r.nodes_end;a!==null;){var o=a===n?null:Xr(a);a.remove(),a=o}e=!0}qc(r,t&&!e),Uc(r),io(r,0),Cr(r,yn);var i=r.transitions;if(i!==null)for(const l of i)l.stop();Hc(r);var s=r.parent;s!==null&&s.first!==null&&Wc(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function Wc(r){var t=r.parent,e=r.prev,a=r.next;e!==null&&(e.next=a),a!==null&&(a.prev=e),t!==null&&(t.first===r&&(t.first=a),t.last===r&&(t.last=e))}function Cn(r,t){var e=[];ks(r,e,!0),Gc(e,()=>{Lr(r),t&&t()})}function Gc(r,t){var e=r.length;if(e>0){var a=()=>--e||t();for(var n of r)n.out(a)}else t()}function ks(r,t,e){if((r.f&Vr)===0){if(r.f^=Vr,r.transitions!==null)for(const i of r.transitions)(i.is_global||e)&&t.push(i);for(var a=r.first;a!==null;){var n=a.next,o=(a.f&_n)!==0||(a.f&Yr)!==0;ks(a,t,o?e:!1),a=n}}}function fi(r){Yc(r,!0)}function Yc(r,t){if((r.f&Vr)!==0){r.f^=Vr,(r.f&Xe)===0&&(r.f^=Xe),Sn(r)&&(Cr(r,ra),di(r));for(var e=r.first;e!==null;){var a=e.next,n=(e.f&_n)!==0||(e.f&Yr)!==0;Yc(e,n?t:!1),e=a}if(r.transitions!==null)for(const o of r.transitions)(o.is_global||t)&&o.in()}}function hf(r){return r.endsWith("capture")&&r!=="gotpointercapture"&&r!=="lostpointercapture"}const gf=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function vf(r){return gf.includes(r)}const mf={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function wf(r){return r=r.toLowerCase(),mf[r]??r}const bf=["touchstart","touchmove"];function yf(r){return bf.includes(r)}function _f(r,t){if(t){const e=document.body;r.autofocus=!0,Ka(()=>{document.activeElement===e&&r.focus()})}}let Vc=!1;function $c(){Vc||(Vc=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var t;if(!r.defaultPrevented)for(const e of r.target.elements)(t=e.__on_r)==null||t.call(e)})},{capture:!0}))}function xf(r,t,e,a=!0){a&&e();for(var n of t)r.addEventListener(n,e);lo(()=>{for(var o of t)r.removeEventListener(o,e)})}function Es(r){var t=ye,e=me;Jr(null),Sr(null);try{return r()}finally{Jr(t),Sr(e)}}function uo(r,t,e,a=e){r.addEventListener(t,()=>Es(e));const n=r.__on_r;n?r.__on_r=()=>{n(),a(!0)}:r.__on_r=()=>a(!0),$c()}const Jc=new Set,Ps=new Set;function As(r,t,e,a){function n(o){if(a.capture||fo.call(t,o),!o.cancelBubble)return Es(()=>e.call(this,o))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Ka(()=>{t.addEventListener(r,n,a)}):t.addEventListener(r,n,a),n}function Qc(r,t,e,a={}){var n=As(t,r,e,a);return()=>{r.removeEventListener(t,n,a)}}function ut(r,t,e,a,n){var o={capture:a,passive:n},i=As(r,t,e,o);(t===document.body||t===window||t===document)&&lo(()=>{t.removeEventListener(r,i,o)})}function sa(r){for(var t=0;t<r.length;t++)Jc.add(r[t]);for(var e of Ps)e(r)}function fo(r){var t,e=this,a=e.ownerDocument,n=r.type,o=((t=r.composedPath)==null?void 0:t.call(r))||[],i=o[0]||r.target,s=0,l=r.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){r.__root=e;return}var d=o.indexOf(e);if(d===-1)return;c<=d&&(s=c)}if(i=o[s]||r.target,i!==e){to(r,"currentTarget",{configurable:!0,get(){return i||a}});var u=ye,g=me;Jr(null),Sr(null);try{for(var p,b=[];i!==null;){var w=i.assignedSlot||i.parentNode||i.host||null;try{var y=i["__"+n];if(y!==void 0&&!i.disabled)if(wn(y)){var[_,...k]=y;_.apply(i,[r,...k])}else y.call(i,r)}catch(x){p?b.push(x):p=x}if(r.cancelBubble||w===e||w===null)break;i=w}if(p){for(let x of b)queueMicrotask(()=>{throw x});throw p}}finally{r.__root=e,delete r.currentTarget,Jr(u),Sr(g)}}}function Ss(r){var t=document.createElement("template");return t.innerHTML=r,t.content}function Dr(r,t){var e=me;e.nodes_start===null&&(e.nodes_start=r,e.nodes_end=t)}function q(r,t){var e=(t&Bu)!==0,a=(t&Mu)!==0,n,o=!r.startsWith("<!>");return()=>{if(Kt)return Dr(fe,null),fe;n===void 0&&(n=Ss(o?r:"<!>"+r),e||(n=Kr(n)));var i=a?document.importNode(n,!0):n.cloneNode(!0);if(e){var s=Kr(i),l=i.lastChild;Dr(s,l)}else Dr(i,i);return i}}function kf(r,t,e="svg"){var a=!r.startsWith("<!>"),n=`<${e}>${a?r:"<!>"+r}</${e}>`,o;return()=>{if(Kt)return Dr(fe,null),fe;if(!o){var i=Ss(n),s=Kr(i);o=Kr(s)}var l=o.cloneNode(!0);return Dr(l,l),l}}function Pe(r=""){if(!Kt){var t=Ta(r+"");return Dr(t,t),t}var e=fe;return e.nodeType!==3&&(e.before(e=Ta()),vr(e)),Dr(e,e),e}function Me(){if(Kt)return Dr(fe,null),fe;var r=document.createDocumentFragment(),t=document.createComment(""),e=Ta();return r.append(t,e),Dr(t,e),r}function A(r,t){if(Kt){me.nodes_end=fe,oa();return}r!==null&&r.before(t)}let Cs=!0;function Q(r,t){var e=t==null?"":typeof t=="object"?t+"":t;e!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=e,r.nodeValue=e==null?"":e+"")}function Kc(r,t){return Xc(r,t)}function Ef(r,t){xs(),t.intro=t.intro??!1;const e=t.target,a=Kt,n=fe;try{for(var o=Kr(e);o&&(o.nodeType!==8||o.data!==hc);)o=Xr(o);if(!o)throw xn;na(!0),vr(o),oa();const i=Xc(r,{...t,anchor:o});if(fe===null||fe.nodeType!==8||fe.data!==gs)throw ei(),xn;return na(!1),i}catch(i){if(i===xn)return t.recover===!1&&ju(),xs(),jc(e),na(!1),Kc(r,t);throw i}finally{na(a),vr(n)}}const Tn=new Map;function Xc(r,{target:t,anchor:e,props:a={},events:n,context:o,intro:i=!0}){xs();var s=new Set,l=u=>{for(var g=0;g<u.length;g++){var p=u[g];if(!s.has(p)){s.add(p);var b=yf(p);t.addEventListener(p,fo,{passive:b});var w=Tn.get(p);w===void 0?(document.addEventListener(p,fo,{passive:b}),Tn.set(p,1)):Tn.set(p,w+1)}}};l(ls(Jc)),Ps.add(l);var c=void 0,d=ff(()=>{var u=e??t.appendChild(Ta());return ia(()=>{if(o){_e({});var g=he;g.c=o}n&&(a.$$events=n),Kt&&Dr(u,null),Cs=i,c=r(u,a)||{},Cs=!0,Kt&&(me.nodes_end=fe),o&&xe()}),()=>{var g;for(var p of s){t.removeEventListener(p,fo);var b=Tn.get(p);--b===0?(document.removeEventListener(p,fo),Tn.delete(p)):Tn.set(p,b)}Ps.delete(l),u!==e&&((g=u.parentNode)==null||g.removeChild(u))}});return Ts.set(c,d),c}let Ts=new WeakMap;function Pf(r,t){const e=Ts.get(r);return e?(Ts.delete(r),e(t)):Promise.resolve()}function bt(r,t,e=!1){Kt&&oa();var a=r,n=null,o=null,i=rr,s=e?_n:0,l=!1;const c=(u,g=!0)=>{l=!0,d(g,u)},d=(u,g)=>{if(i===(i=u))return;let p=!1;if(Kt){const b=a.data===hs;!!i===b&&(a=_s(),vr(a),na(!1),p=!0)}i?(n?fi(n):g&&(n=ia(()=>g(a))),o&&Cn(o,()=>{o=null})):(o?fi(o):g&&(o=ia(()=>g(a))),n&&Cn(n,()=>{n=null})),p&&na(!0)};tn(()=>{l=!1,t(c),l||d(null,null)},s),Kt&&(a=fe)}function Af(r,t,e){Kt&&oa();var a=r,n=rr,o,i=An()?Ru:ri;tn(()=>{i(n,n=t())&&(o&&Cn(o),o=ia(()=>e(a)))}),Kt&&(a=fe)}let pi=null;function la(r,t){return t}function Sf(r,t,e,a){for(var n=[],o=t.length,i=0;i<o;i++)ks(t[i].e,n,!0);var s=o>0&&n.length===0&&e!==null;if(s){var l=e.parentNode;jc(l),l.append(e),a.clear(),Ia(r,t[0].prev,t[o-1].next)}Gc(n,()=>{for(var c=0;c<o;c++){var d=t[c];s||(a.delete(d.k),Ia(r,d.prev,d.next)),Lr(d.e,!s)}})}function ur(r,t,e,a,n,o=null){var i=r,s={flags:t,items:new Map,first:null},l=(t&fc)!==0;if(l){var c=r;i=Kt?vr(Kr(c)):c.appendChild(Ta())}Kt&&oa();var d=null,u=!1,g=Aa(()=>{var p=e();return wn(p)?p:p==null?[]:ls(p)});tn(()=>{var p=f(g),b=p.length;if(u&&b===0)return;u=b===0;let w=!1;if(Kt){var y=i.data===hs;y!==(b===0)&&(i=_s(),vr(i),na(!1),w=!0)}if(Kt){for(var _=null,k,x=0;x<b;x++){if(fe.nodeType===8&&fe.data===gs){i=fe,w=!0,na(!1);break}var T=p[x],P=a(T,x);k=Zc(fe,s,_,null,T,P,x,n,t),s.items.set(P,k),_=k}b>0&&vr(_s())}if(!Kt){var L=ye;Cf(p,s,i,n,t,(L.f&Vr)!==0,a)}o!==null&&(b===0?d?fi(d):d=ia(()=>o(i)):d!==null&&Cn(d,()=>{d=null})),w&&na(!0),f(g)}),Kt&&(i=fe)}function Cf(r,t,e,a,n,o,i,s){var l,c,d,u,g=(n&ku)!==0,p=(n&(fs|ps))!==0,b=r.length,w=t.items,y=t.first,_=y,k,x=null,T,P=[],L=[],R,z,B,F;if(g)for(F=0;F<b;F+=1)R=r[F],z=i(R,F),B=w.get(z),B!==void 0&&((l=B.a)==null||l.measure(),(T??(T=new Set)).add(B));for(F=0;F<b;F+=1){if(R=r[F],z=i(R,F),B=w.get(z),B===void 0){var J=_?_.e.nodes_start:e;x=Zc(J,t,x,x===null?t.first:x.next,R,z,F,a,n),w.set(z,x),P=[],L=[],_=x.next;continue}if(p&&Tf(B,R,F,n),(B.e.f&Vr)!==0&&(fi(B.e),g&&((c=B.a)==null||c.unfix(),(T??(T=new Set)).delete(B))),B!==_){if(k!==void 0&&k.has(B)){if(P.length<L.length){var K=L[0],Y;x=K.prev;var ft=P[0],lt=P[P.length-1];for(Y=0;Y<P.length;Y+=1)td(P[Y],K,e);for(Y=0;Y<L.length;Y+=1)k.delete(L[Y]);Ia(t,ft.prev,lt.next),Ia(t,x,ft),Ia(t,lt,K),_=K,x=lt,F-=1,P=[],L=[]}else k.delete(B),td(B,_,e),Ia(t,B.prev,B.next),Ia(t,B,x===null?t.first:x.next),Ia(t,x,B),x=B;continue}for(P=[],L=[];_!==null&&_.k!==z;)(o||(_.e.f&Vr)===0)&&(k??(k=new Set)).add(_),L.push(_),_=_.next;if(_===null)continue;B=_}P.push(B),x=B,_=B.next}if(_!==null||k!==void 0){for(var Ot=k===void 0?[]:ls(k);_!==null;)(o||(_.e.f&Vr)===0)&&Ot.push(_),_=_.next;var jt=Ot.length;if(jt>0){var ot=(n&fc)!==0&&b===0?e:null;if(g){for(F=0;F<jt;F+=1)(d=Ot[F].a)==null||d.measure();for(F=0;F<jt;F+=1)(u=Ot[F].a)==null||u.fix()}Sf(t,Ot,ot,w)}}g&&Ka(()=>{var it;if(T!==void 0)for(B of T)(it=B.a)==null||it.apply()}),me.first=t.first&&t.first.e,me.last=x&&x.e}function Tf(r,t,e,a){(a&fs)!==0&&ao(r.v,t),(a&ps)!==0?ao(r.i,e):r.i=e}function Zc(r,t,e,a,n,o,i,s,l,c){var d=pi,u=(l&fs)!==0,g=(l&Eu)===0,p=u?g?ro(n):ar(n):n,b=(l&ps)===0?i:ar(i),w={i:b,v:p,k:o,a:null,e:null,prev:e,next:a};pi=w;try{return w.e=ia(()=>s(r,p,b),Kt),w.e.prev=e&&e.e,w.e.next=a&&a.e,e===null?t.first=w:(e.next=w,e.e.next=w.e),a!==null&&(a.prev=w,a.e.prev=w.e),w}finally{pi=d}}function td(r,t,e){for(var a=r.next?r.next.e.nodes_start:e,n=t?t.e.nodes_start:e,o=r.e.nodes_start;o!==a;){var i=Xr(o);n.before(o),o=i}}function Ia(r,t,e){t===null?r.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function Ee(r,t,e,a,n){var o=r,i="",s;tn(()=>{if(i===(i=t()??"")){Kt&&oa();return}s!==void 0&&(Lr(s),s=void 0),i!==""&&(s=ia(()=>{if(Kt){fe.data;for(var l=oa(),c=l;l!==null&&(l.nodeType!==8||l.data!=="");)c=l,l=Xr(l);if(l===null)throw ei(),xn;Dr(fe,c),o=vr(l);return}var d=i+"",u=Ss(d);Dr(Kr(u),u.lastChild),o.before(u)}))})}function Te(r,t,e,a,n){var o;Kt&&oa();var i=(o=t.$$slots)==null?void 0:o[e],s=!1;i===!0&&(i=t[e==="default"?"children":e],s=!0),i===void 0?n!==null&&n(r):i(r,s?()=>a:a)}function Da(r){const t={};r.children&&(t.default=!0);for(const e in r.$$slots)t[e]=!0;return t}function If(r,t,...e){var a=r,n=Ar,o;tn(()=>{n!==(n=t())&&(o&&(Lr(o),o=null),o=ia(()=>n(a,...e)))},_n),Kt&&(a=fe)}function Is(r,t,e){Kt&&oa();var a=r,n,o;tn(()=>{n!==(n=t())&&(o&&(Cn(o),o=null),n&&(o=ia(()=>e(a,n))))},_n),Kt&&(a=fe)}function ca(r,t,e){Nr(()=>{var a=nr(()=>t(r,e?.())||{});if(e&&a?.update){var n=!1,o={};Ir(()=>{var i=e();I(i),n&&ri(o,i)&&(o=i,a.update(i))}),n=!0}if(a?.destroy)return()=>a.destroy()})}function ed(r){var t,e,a="";if(typeof r=="string"||typeof r=="number")a+=r;else if(typeof r=="object")if(Array.isArray(r)){var n=r.length;for(t=0;t<n;t++)r[t]&&(e=ed(r[t]))&&(a&&(a+=" "),a+=e)}else for(e in r)r[e]&&(a&&(a+=" "),a+=e);return a}function Df(){for(var r,t,e=0,a="",n=arguments.length;e<n;e++)(r=arguments[e])&&(t=ed(r))&&(a&&(a+=" "),a+=t);return a}function Ft(r){return typeof r=="object"?Df(r):r??""}function mr(r){if(Kt){var t=!1,e=()=>{if(!t){if(t=!0,r.hasAttribute("value")){var a=r.value;Mt(r,"value",null),r.value=a}if(r.hasAttribute("checked")){var n=r.checked;Mt(r,"checked",null),r.checked=n}}};r.__on_r=e,_u(e),$c()}}function Bf(r,t){t?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}function Mt(r,t,e,a){var n=r.__attributes??(r.__attributes={});Kt&&(n[t]=r.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&r.nodeName==="LINK")||n[t]!==(n[t]=e)&&(t==="style"&&"__styles"in r&&(r.__styles={}),t==="loading"&&(r[bu]=e),e==null?r.removeAttribute(t):typeof e!="string"&&ad(r).includes(t)?r[t]=e:r.setAttribute(t,e))}function en(r,t,e,a,n=!1,o=!1,i=!1){var s=t||{},l=r.tagName==="OPTION";for(var c in t)c in e||(e[c]=null);e.class&&(e.class=Ft(e.class));var d=ad(r),u=r.__attributes??(r.__attributes={});for(const _ in e){let k=e[_];if(l&&_==="value"&&k==null){r.value=r.__value="",s[_]=k;continue}var g=s[_];if(k!==g){s[_]=k;var p=_[0]+_[1];if(p!=="$$"){if(p==="on"){const x={},T="$$"+_;let P=_.slice(2);var b=vf(P);if(hf(P)&&(P=P.slice(0,-7),x.capture=!0),!b&&g){if(k!=null)continue;r.removeEventListener(P,s[T],x),s[T]=null}if(k!=null)if(b)r[`__${P}`]=k,sa([P]);else{let L=function(R){s[_].call(this,R)};s[T]=As(P,r,L,x)}else b&&(r[`__${P}`]=void 0)}else if(_==="style"&&k!=null)r.style.cssText=k+"";else if(_==="autofocus")_f(r,!!k);else if(_==="__value"||_==="value"&&k!=null)r.value=r[_]=r.__value=k;else if(_==="selected"&&l)Bf(r,k);else{var w=_;n||(w=wf(w));var y=w==="defaultValue"||w==="defaultChecked";if(k==null&&!o&&!y)if(u[_]=null,w==="value"||w==="checked"){let x=r;if(w==="value"){let T=x.defaultValue;x.removeAttribute(w),x.defaultValue=T}else{let T=x.defaultChecked;x.removeAttribute(w),x.defaultChecked=T}}else r.removeAttribute(_);else y||d.includes(w)&&(o||typeof k!="string")?r[w]=k:typeof k!="function"&&(Kt&&(w==="src"||w==="href"||w==="srcset")||Mt(r,w,k))}_==="style"&&"__styles"in r&&(r.__styles={})}}}return s}var rd=new Map;function ad(r){var t=rd.get(r.nodeName);if(t)return t;rd.set(r.nodeName,t=[]);for(var e,a=r,n=Element.prototype;n!==a;){e=nc(a);for(var o in e)e[o].set&&t.push(o);a=$o(a)}return t}function Ds(r,t,e){var a=r.__className,n=nd(t);Kt&&r.getAttribute("class")===n?r.__className=n:(a!==n||Kt&&r.getAttribute("class")!==n)&&(n===""?r.removeAttribute("class"):r.setAttribute("class",n),r.__className=n)}function U(r,t,e){var a=r.__className,n=nd(t);Kt&&r.className===n?r.__className=n:(a!==n||Kt&&r.className!==n)&&(t==null?r.removeAttribute("class"):r.className=n,r.__className=n)}function nd(r,t){return(r??"")+""}function Ba(r,t,e){if(e){if(r.classList.contains(t))return;r.classList.add(t)}else{if(!r.classList.contains(t))return;r.classList.remove(t)}}function Bs(r,t,e,a){var n=r.__styles??(r.__styles={});n[t]!==e&&(n[t]=e,e==null?r.style.removeProperty(t):r.style.setProperty(t,e,""))}const Mf=()=>performance.now(),da={tick:r=>requestAnimationFrame(r),now:()=>Mf(),tasks:new Set};function od(){const r=da.now();da.tasks.forEach(t=>{t.c(r)||(da.tasks.delete(t),t.f())}),da.tasks.size!==0&&da.tick(od)}function Rf(r){let t;return da.tasks.size===0&&da.tick(od),{promise:new Promise(e=>{da.tasks.add(t={c:r,f:e})}),abort(){da.tasks.delete(t)}}}function hi(r,t){r.dispatchEvent(new CustomEvent(t))}function Of(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(e=>e[0].toUpperCase()+e.slice(1)).join("")}function id(r){const t={},e=r.split(";");for(const a of e){const[n,o]=a.split(":");if(!n||o===void 0)break;const i=Of(n.trim());t[i]=o.trim()}return t}const Nf=r=>r;function sd(r,t,e){var a=pi,n,o,i,s=null;a.a??(a.a={element:r,measure(){n=this.element.getBoundingClientRect()},apply(){if(i?.abort(),o=this.element.getBoundingClientRect(),n.left!==o.left||n.right!==o.right||n.top!==o.top||n.bottom!==o.bottom){const l=t()(this.element,{from:n,to:o},e?.());i=gi(this.element,l,void 0,1,()=>{i?.abort(),i=void 0})}},fix(){if(!r.getAnimations().length){var{position:l,width:c,height:d}=getComputedStyle(r);if(l!=="absolute"&&l!=="fixed"){var u=r.style;s={position:u.position,width:u.width,height:u.height,transform:u.transform},u.position="absolute",u.width=c,u.height=d;var g=r.getBoundingClientRect();if(n.left!==g.left||n.top!==g.top){var p=`translate(${n.left-g.left}px, ${n.top-g.top}px)`;u.transform=u.transform?`${u.transform} ${p}`:p}}}},unfix(){if(s){var l=r.style;l.position=s.position,l.width=s.width,l.height=s.height,l.transform=s.transform}}}),a.a.element=r}function Fe(r,t,e,a){var n=(r&Tu)!==0,o=(r&Iu)!==0,i=n&&o,s=(r&Du)!==0,l=i?"both":n?"in":"out",c,d=t.inert,u=t.style.overflow,g,p;function b(){var x=ye,T=me;Jr(null),Sr(null);try{return c??(c=e()(t,a?.()??{},{direction:l}))}finally{Jr(x),Sr(T)}}var w={is_global:s,in(){var x;if(t.inert=d,!n){p?.abort(),(x=p?.reset)==null||x.call(p);return}o||g?.abort(),hi(t,"introstart"),g=gi(t,b(),p,1,()=>{hi(t,"introend"),g?.abort(),g=c=void 0,t.style.overflow=u})},out(x){if(!o){x?.(),c=void 0;return}t.inert=!0,hi(t,"outrostart"),p=gi(t,b(),g,0,()=>{hi(t,"outroend"),x?.()})},stop:()=>{g?.abort(),p?.abort()}},y=me;if((y.transitions??(y.transitions=[])).push(w),n&&Cs){var _=s;if(!_){for(var k=y.parent;k&&(k.f&_n)!==0;)for(;(k=k.parent)&&(k.f&Qo)===0;);_=!k||(k.f&sc)!==0}_&&Nr(()=>{nr(()=>w.in())})}}function gi(r,t,e,a,n){var o=a===1;if(bn(t)){var i,s=!1;return Ka(()=>{if(!s){var y=t({direction:o?"in":"out"});i=gi(r,y,e,a,n)}}),{abort:()=>{s=!0,i?.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(e?.deactivate(),!t?.duration)return n(),{abort:Ar,deactivate:Ar,reset:Ar,t:()=>a};const{delay:l=0,css:c,tick:d,easing:u=Nf}=t;var g=[];if(o&&e===void 0&&(d&&d(0,1),c)){var p=id(c(0,1));g.push(p,p)}var b=()=>1-a,w=r.animate(g,{duration:l});return w.onfinish=()=>{var y=e?.t()??1-a;e?.abort();var _=a-y,k=t.duration*Math.abs(_),x=[];if(k>0){var T=!1;if(c)for(var P=Math.ceil(k/16.666666666666668),L=0;L<=P;L+=1){var R=y+_*u(L/P),z=id(c(R,1-R));x.push(z),T||(T=z.overflow==="hidden")}T&&(r.style.overflow="hidden"),b=()=>{var B=w.currentTime;return y+_*u(B/k)},d&&Rf(()=>{if(w.playState!=="running")return!1;var B=b();return d(B,1-B),!0})}w=r.animate(x,{duration:k,fill:"forwards"}),w.onfinish=()=>{b=()=>a,d?.(a,1-a),n()}},{abort:()=>{w&&(w.cancel(),w.effect=null,w.onfinish=Ar)},deactivate:()=>{n=Ar},reset:()=>{a===0&&d?.(1,0)},t:()=>b()}}function In(r,t,e=t){var a=An();uo(r,"input",n=>{var o=n?r.defaultValue:r.value;if(o=Rs(r)?Os(o):o,e(o),a&&o!==(o=t())){var i=r.selectionStart,s=r.selectionEnd;r.value=o??"",s!==null&&(r.selectionStart=i,r.selectionEnd=Math.min(s,r.value.length))}}),(Kt&&r.defaultValue!==r.value||nr(t)==null&&r.value)&&e(Rs(r)?Os(r.value):r.value),Ir(()=>{var n=t();Rs(r)&&n===Os(r.value)||r.type==="date"&&!n&&!r.value||n!==r.value&&(r.value=n??"")})}const Ms=new Set;function vi(r,t,e,a,n=a){var o=e.getAttribute("type")==="checkbox",i=r;let s=!1;if(t!==null)for(var l of t)i=i[l]??(i[l]=[]);i.push(e),uo(e,"change",()=>{var c=e.__value;o&&(c=cd(i,c,e.checked)),n(c)},()=>n(o?[]:null)),Ir(()=>{var c=a();if(Kt&&e.defaultChecked!==e.checked){s=!0;return}o?(c=c||[],e.checked=c.includes(e.__value)):e.checked=Nc(e.__value,c)}),lo(()=>{var c=i.indexOf(e);c!==-1&&i.splice(c,1)}),Ms.has(i)||(Ms.add(i),Ka(()=>{i.sort((c,d)=>c.compareDocumentPosition(d)===4?-1:1),Ms.delete(i)})),Ka(()=>{if(s){var c;if(o)c=cd(i,c,e.checked);else{var d=i.find(u=>u.checked);c=d?.__value}n(c)}})}function ld(r,t,e=t){uo(r,"change",a=>{var n=a?r.defaultChecked:r.checked;e(n)}),(Kt&&r.defaultChecked!==r.checked||nr(t)==null)&&e(r.checked),Ir(()=>{var a=t();r.checked=!!a})}function cd(r,t,e){for(var a=new Set,n=0;n<r.length;n+=1)r[n].checked&&a.add(r[n].__value);return e||a.delete(t),Array.from(a)}function Rs(r){var t=r.type;return t==="number"||t==="range"}function Os(r){return r===""?null:+r}function Lf(r,t,e=t){uo(r,"change",()=>{e(r.files)}),Ir(()=>{r.files=t()})}function dd(r,t,e){var a=Gr(r,t);a&&a.set&&(r[t]=e,lo(()=>{r[t]=null}))}function ud(r,t,e){if(r.multiple)return jf(r,t);for(var a of r.options){var n=po(a);if(Nc(n,t)){a.selected=!0;return}}(!e||t!==void 0)&&(r.selectedIndex=-1)}function Ff(r,t){Nr(()=>{var e=new MutationObserver(()=>{var a=r.__value;ud(r,a)});return e.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{e.disconnect()}})}function mi(r,t,e=t){var a=!0;uo(r,"change",n=>{var o=n?"[selected]":":checked",i;if(r.multiple)i=[].map.call(r.querySelectorAll(o),po);else{var s=r.querySelector(o)??r.querySelector("option:not([disabled])");i=s&&po(s)}e(i)}),Nr(()=>{var n=t();if(ud(r,n,a),a&&n===void 0){var o=r.querySelector(":checked");o!==null&&(n=po(o),e(n))}r.__value=n,a=!1}),Ff(r)}function jf(r,t){for(var e of r.options)e.selected=~t.indexOf(po(e))}function po(r){return"__value"in r?r.__value:r.value}function fd(r,t){return r===t||r?.[$r]===t}function Ze(r={},t,e,a){return Nr(()=>{var n,o;return Ir(()=>{n=o,o=[],nr(()=>{r!==e(...o)&&(t(r,...o),n&&fd(e(...n),r)&&t(null,...n))})}),()=>{Ka(()=>{o&&fd(e(...o),r)&&t(null,...o)})}}),r}function zf(r,t){xf(window,["resize"],()=>Es(()=>t(window[r])))}function Je(r=!1){const t=he,e=t.l.u;if(!e)return;let a=()=>I(t.s);if(r){let n=0,o={};const i=de(()=>{let s=!1;const l=t.s;for(const c in l)l[c]!==o[c]&&(o[c]=l[c],s=!0);return s&&n++,n});a=()=>f(i)}e.b.length&&uf(()=>{pd(t,a),Jo(e.b)}),Tr(()=>{const n=nr(()=>e.m.map(mu));return()=>{for(const o of n)typeof o=="function"&&o()}}),e.a.length&&Tr(()=>{pd(t,a),Jo(e.a)})}function pd(r,t){if(r.l.s)for(const e of r.l.s)f(e);t()}function Jt(r,t){var e,a=(e=r.$$events)==null?void 0:e[t.type],n=wn(a)?a.slice():a==null?[]:[a];for(var o of n)o.call(this,t)}let ho=!1,Ns=Symbol();function wr(r,t,e){const a=e[t]??(e[t]={store:null,source:ro(void 0),unsubscribe:Ar});if(a.store!==r&&!(Ns in e))if(a.unsubscribe(),a.store=r??null,r==null)a.source.v=void 0,a.unsubscribe=Ar;else{var n=!0;a.unsubscribe=bd(r,o=>{n?a.source.v=o:S(a.source,o)}),n=!1}return r&&Ns in e?yd(r):f(a.source)}function Hf(r,t){return r.set(t),t}function Ma(){const r={};function t(){lo(()=>{for(var e in r)r[e].unsubscribe();to(r,Ns,{enumerable:!1,value:!0})})}return[r,t]}function Uf(){ho=!0}function qf(r){var t=ho;try{return ho=!1,[r(),ho]}finally{ho=t}}const Wf={get(r,t){if(!r.exclude.includes(t))return f(r.version),t in r.special?r.special[t]():r.props[t]},set(r,t,e){return t in r.special||(r.special[t]=m({get[t](){return r.props[t]}},t,pc)),r.special[t](e),Mc(r.version),!0},getOwnPropertyDescriptor(r,t){if(!r.exclude.includes(t)&&t in r.props)return{enumerable:!0,configurable:!0,value:r.props[t]}},deleteProperty(r,t){return r.exclude.includes(t)||(r.exclude.push(t),Mc(r.version)),!0},has(r,t){return r.exclude.includes(t)?!1:t in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(t=>!r.exclude.includes(t))}};function Re(r,t){return new Proxy({props:r,exclude:t,special:{},version:ar(0)},Wf)}const Gf={get(r,t){let e=r.props.length;for(;e--;){let a=r.props[e];if(bn(a)&&(a=a()),typeof a=="object"&&a!==null&&t in a)return a[t]}},set(r,t,e){let a=r.props.length;for(;a--;){let n=r.props[a];bn(n)&&(n=n());const o=Gr(n,t);if(o&&o.set)return o.set(e),!0}return!1},getOwnPropertyDescriptor(r,t){let e=r.props.length;for(;e--;){let a=r.props[e];if(bn(a)&&(a=a()),typeof a=="object"&&a!==null&&t in a){const n=Gr(a,t);return n&&!n.configurable&&(n.configurable=!0),n}}},has(r,t){if(t===$r||t===cs)return!1;for(let e of r.props)if(bn(e)&&(e=e()),e!=null&&t in e)return!0;return!1},ownKeys(r){const t=[];for(let e of r.props){bn(e)&&(e=e());for(const a in e)t.includes(a)||t.push(a)}return t}};function hd(...r){return new Proxy({props:r},Gf)}function gd(r){for(var t=me,e=me;t!==null&&(t.f&(Yr|$a))===0;)t=t.parent;try{return Sr(t),r()}finally{Sr(e)}}function m(r,t,e,a){var n,o=(e&Pu)!==0,i=!kn||(e&Au)!==0,s=(e&Su)!==0,l=(e&Cu)!==0,c=!1,d;s?[d,c]=qf(()=>r[t]):d=r[t];var u=$r in r||cs in r,g=s&&(((n=Gr(r,t))==null?void 0:n.set)??(u&&t in r&&(z=>r[t]=z)))||void 0,p=a,b=!0,w=!1,y=()=>(w=!0,b&&(b=!1,l?p=nr(a):p=a),p);d===void 0&&a!==void 0&&(g&&i&&Hu(),d=y(),g&&g(d));var _;if(i)_=()=>{var z=r[t];return z===void 0?y():(b=!0,w=!1,z)};else{var k=gd(()=>(o?de:Aa)(()=>r[t]));k.f|=lc,_=()=>{var z=f(k);return z!==void 0&&(p=void 0),z===void 0?p:z}}if((e&pc)===0)return _;if(g){var x=r.$$legacy;return function(z,B){return arguments.length>0?((!i||!B||x||c)&&g(B?_():z),z):_()}}var T=!1,P=!1,L=ro(d),R=gd(()=>de(()=>{var z=_(),B=f(L);return T?(T=!1,P=!0,B):(P=!1,L.v=z)}));return o||(R.equals=vs),function(z,B){if(Ca!==null&&(T=P,_(),f(L)),arguments.length>0){const F=B?f(R):i&&s?ie(z):z;return R.equals(F)||(T=!0,S(L,F),w&&p!==void 0&&(p=F),nr(()=>f(R))),z}return f(R)}}function Yf(r){return new Vf(r)}class Vf{constructor(t){Tt(this,ba),Tt(this,Br);var e,a=new Map,n=(i,s)=>{var l=ro(s);return a.set(i,l),l};const o=new Proxy({...t.props||{},$$events:{}},{get(i,s){return f(a.get(s)??n(s,Reflect.get(i,s)))},has(i,s){return s===cs?!0:(f(a.get(s)??n(s,Reflect.get(i,s))),Reflect.has(i,s))},set(i,s,l){return S(a.get(s)??n(s,l),l),Reflect.set(i,s,l)}});Zt(this,Br,(t.hydrate?Ef:Kc)(t.component,{target:t.target,anchor:t.anchor,props:o,context:t.context,intro:t.intro??!1,recover:t.recover})),(!((e=t?.props)!=null&&e.$$host)||t.sync===!1)&&bs(),Zt(this,ba,o.$$events);for(const i of Object.keys(D(this,Br)))i==="$set"||i==="$destroy"||i==="$on"||to(this,i,{get(){return D(this,Br)[i]},set(s){D(this,Br)[i]=s},enumerable:!0});D(this,Br).$set=i=>{Object.assign(o,i)},D(this,Br).$destroy=()=>{Pf(D(this,Br))}}$set(t){D(this,Br).$set(t)}$on(t,e){D(this,ba)[t]=D(this,ba)[t]||[];const a=(...n)=>e.call(this,...n);return D(this,ba)[t].push(a),()=>{D(this,ba)[t]=D(this,ba)[t].filter(n=>n!==a)}}$destroy(){D(this,Br).$destroy()}}ba=new WeakMap,Br=new WeakMap;let vd;typeof HTMLElement=="function"&&(vd=class extends HTMLElement{constructor(r,t,e){super(),V(this,"$$ctor"),V(this,"$$s"),V(this,"$$c"),V(this,"$$cn",!1),V(this,"$$d",{}),V(this,"$$r",!1),V(this,"$$p_d",{}),V(this,"$$l",{}),V(this,"$$l_u",new Map),V(this,"$$me"),this.$$ctor=r,this.$$s=t,e&&this.attachShadow({mode:"open"})}addEventListener(r,t,e){if(this.$$l[r]=this.$$l[r]||[],this.$$l[r].push(t),this.$$c){const a=this.$$c.$on(r,t);this.$$l_u.set(t,a)}super.addEventListener(r,t,e)}removeEventListener(r,t,e){if(super.removeEventListener(r,t,e),this.$$c){const a=this.$$l_u.get(t);a&&(a(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let r=function(a){return n=>{const o=document.createElement("slot");a!=="default"&&(o.name=a),A(n,o)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const t={},e=$f(this);for(const a of this.$$s)a in e&&(a==="default"&&!this.$$d.children?(this.$$d.children=r(a),t.default=!0):t[a]=r(a));for(const a of this.attributes){const n=this.$$g_p(a.name);n in this.$$d||(this.$$d[n]=wi(n,a.value,this.$$p_d,"toProp"))}for(const a in this.$$p_d)!(a in this.$$d)&&this[a]!==void 0&&(this.$$d[a]=this[a],delete this[a]);this.$$c=Yf({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$host:this}}),this.$$me=co(()=>{Ir(()=>{var a;this.$$r=!0;for(const n of Vo(this.$$c)){if(!((a=this.$$p_d[n])!=null&&a.reflect))continue;this.$$d[n]=this.$$c[n];const o=wi(n,this.$$d[n],this.$$p_d,"toAttribute");o==null?this.removeAttribute(this.$$p_d[n].attribute||n):this.setAttribute(this.$$p_d[n].attribute||n,o)}this.$$r=!1})});for(const a in this.$$l)for(const n of this.$$l[a]){const o=this.$$c.$on(a,n);this.$$l_u.set(n,o)}this.$$l={}}}attributeChangedCallback(r,t,e){var a;this.$$r||(r=this.$$g_p(r),this.$$d[r]=wi(r,e,this.$$p_d,"toProp"),(a=this.$$c)==null||a.$set({[r]:this.$$d[r]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(r){return Vo(this.$$p_d).find(t=>this.$$p_d[t].attribute===r||!this.$$p_d[t].attribute&&t.toLowerCase()===r)||r}});function wi(r,t,e,a){var n;const o=(n=e[r])==null?void 0:n.type;if(t=o==="Boolean"&&typeof t!="boolean"?t!=null:t,!a||!e[r])return t;if(a==="toAttribute")switch(o){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t??null;default:return t}else switch(o){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}function $f(r){const t={};return r.childNodes.forEach(e=>{t[e.slot||"default"]=!0}),t}function Jf(r,t,e,a,n,o){let i=class extends vd{constructor(){super(r,e,n),this.$$p_d=t}static get observedAttributes(){return Vo(t).map(s=>(t[s].attribute||s).toLowerCase())}};return Vo(t).forEach(s=>{to(i.prototype,s,{get(){return this.$$c&&s in this.$$c?this.$$c[s]:this.$$d[s]},set(l){var c;l=wi(s,l,t),this.$$d[s]=l;var d=this.$$c;if(d){var u=(c=Gr(d,s))==null?void 0:c.get;u?d[s]=l:d.$set({[s]:l})}}})}),a.forEach(s=>{to(i.prototype,s,{get(){var l;return(l=this.$$c)==null?void 0:l[s]}})}),i=o(i),r.element=i,i}function Ls(r){he===null&&ni(),kn&&he.l!==null?wd(he).m.push(r):Tr(()=>{const t=nr(r);if(typeof t=="function")return t})}function Qf(r,t,{bubbles:e=!1,cancelable:a=!1}={}){return new CustomEvent(r,{detail:t,bubbles:e,cancelable:a})}function bi(){const r=he;return r===null&&ni(),(t,e,a)=>{var n;const o=(n=r.s.$$events)==null?void 0:n[t];if(o){const i=wn(o)?o.slice():[o],s=Qf(t,e,a);for(const l of i)l.call(r.x,s);return!s.defaultPrevented}return!0}}function md(r){he===null&&ni(),he.l===null&&zu(),wd(he).a.push(r)}function wd(r){var t=r.l;return t.u??(t.u={a:[],b:[],m:[]})}function bd(r,t,e){if(r==null)return t(void 0),Ar;const a=nr(()=>r.subscribe(t,e));return a.unsubscribe?()=>a.unsubscribe():a}const Dn=[];function Kf(r,t){return{subscribe:Ra(r,t).subscribe}}function Ra(r,t=Ar){let e=null;const a=new Set;function n(s){if(ri(r,s)&&(r=s,e)){const l=!Dn.length;for(const c of a)c[1](),Dn.push(c,r);if(l){for(let c=0;c<Dn.length;c+=2)Dn[c][0](Dn[c+1]);Dn.length=0}}}function o(s){n(s(r))}function i(s,l=Ar){const c=[s,l];return a.add(c),a.size===1&&(e=t(n,o)||Ar),s(r),()=>{a.delete(c),a.size===0&&e&&(e(),e=null)}}return{set:n,update:o,subscribe:i}}function yd(r){let t;return bd(r,e=>t=e)(),t}function Xf(r){S(r,r.v+1)}function _d(r){let t=0,e=ar(0),a;return()=>{df()&&(f(e),Ir(()=>(t===0&&(a=nr(()=>r(()=>Xf(e)))),t+=1,()=>{so().then(()=>{t-=1,t===0&&(a?.(),a=void 0)})})))}}function rn(r,t){let e=r();const a=Ra(e,n=>{let o=e!==r();const i=co(()=>{Ir(()=>{const s=r();o&&n(s)})});return o=!0,i});return t?{set:t,update:n=>t(n(r())),subscribe:a.subscribe}:{subscribe:a.subscribe}}function Zf(){const r=["info","warn","error"],t=["color: green;","color: orange;","color: red;"],a="[Pixiv Downlaoder] ";function n(o,i){2<=o&&console[r[o]]("%c[Pixiv Downloader]",t[o],...i)}return{info(...o){n(0,o)},warn(...o){n(1,o)},error(...o){n(2,o)},time(o){console.time(a+o)},timeLog(o){console.timeLog(a+o)},timeEnd(o){console.timeEnd(a+o)},throw(o,i){throw i?new i(`${a}${o}`):new Error(`${a}${o}`)}}}const Ct=Zf();function tp(r){return new Promise(t=>{setTimeout(t,r)})}function Fs(r){if(typeof r!="string")throw new TypeError("expect string but got "+typeof r);return r?r.replace(new RegExp("\\p{C}","gu"),"").replace(/\\/g,"\uFF3C").replace(/\//g,"\uFF0F").replace(/:/g,"\uFF1A").replace(/\*/g,"\uFF0A").replace(/\?/g,"\uFF1F").replace(/\|/g,"\uFF5C").replace(/"/g,"\uFF02").replace(/</g,"\uFE64").replace(/>/g,"\uFE65").replace(/~/g,"\uFF5E").trim().replace(/^\.|\.$/g,"\uFF0E"):""}function ep(r){if(typeof r!="string")throw new TypeError("expect string but got "+typeof r);if(!r)return"";const t=document.createElement("p");return t.innerHTML=r,t.innerText}function rp(r){const t=r.map(e=>e.map(a=>'"'+a.replace(/"/g,'""')+'"').join(",")).join(`\r
`);return new Blob(["\uFEFF"+t],{type:"text/csv"})}function ap(r){const t=document.createElement("script");t.text=r,document.head.appendChild(t).parentNode.removeChild(t)}function np(r){return new Promise(t=>{const e=new FileReader;e.onload=()=>{t(e.result)},e.readAsDataURL(r)})}async function js(r){r.adoptedStyleSheets=[window._pdlShadowStyle]}function yi(r){if(r.normalize(),r.childNodes.length===0)return"";const t=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","TABLE","UL"];let e="";for(let a=0;a<r.childNodes.length;a++){const n=r.childNodes[a];if(n.nodeType===Node.TEXT_NODE){const o=n.nodeValue;o?.trim()&&(e+=o)}else if(n.nodeType===Node.ELEMENT_NODE){if(n.nodeName==="BR"){e+=`
`;continue}if(t.includes(n.nodeName)){const o=yi(n);o&&(e?e+=`
`+o:e+=o)}else{const o=yi(n);o&&(e+=o)}}}return e}function xd(r,t){const e=document.createElement("a");e.href=URL.createObjectURL(r),e.download=t,e.click(),URL.revokeObjectURL(e.href)}function op(r,t){const e=new Set(r),a=[];return t.forEach(n=>{e.has(n)&&a.push(n)}),a}function kd(r){if(typeof r!="object"||Object.prototype.toString.call(r)!=="[object Object]")return!1;const t=Object.getPrototypeOf(r);if(t===null)return!0;const e=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)}function ip(r,t=3e3){const e=document.querySelector(r);return e?Promise.resolve(e):new Promise(a=>{let n;const o=new MutationObserver(()=>{const i=document.querySelector(r);i&&(a(i),o.disconnect(),n&&clearTimeout(n))});o.observe(document,{childList:!0,subtree:!0}),n=setTimeout(()=>{a(null),o.disconnect()},t)})}class sp{constructor(t){Tt(this,zn),Tt(this,ta),Zt(this,zn,new BroadcastChannel(t)),Zt(this,ta,{}),D(this,zn).onmessage=e=>{const{eventName:a,args:n}=e.data;D(this,ta)[a]&&D(this,ta)[a].forEach(o=>o(...n))}}on(t,e){var a;(a=D(this,ta))[t]??(a[t]=new Set),D(this,ta)[t].add(e)}off(t,e){D(this,ta)[t]&&D(this,ta)[t].delete(e)}emit(t,...e){const a={eventName:t,args:e};D(this,zn).postMessage(a)}once(t,e){const a=(...n)=>{e(...n),this.off(t,a)};this.on(t,a)}}zn=new WeakMap,ta=new WeakMap;const ke=new sp("pixiv-downloader"),lp=class pl extends _o{constructor(){super("PdlHistory"),V(this,"history"),V(this,"imageEffect"),V(this,"filehandle"),Tt(this,ko,"directory-handle"),this.version(4).stores({history:"pid, userId, user, title, *tags",imageEffect:"id",filehandle:""})}throwIfInvalidNumber(t){if(typeof t=="string")if(t!=="")t=+t;else return Ct.throw('Invalid argument: can not be "".',RangeError);return(t<0||!Number.isSafeInteger(t))&&Ct.throw(`Invalid number: ${t}, must be a non-negative integer.`,RangeError),t}async add(t){const{pid:e,page:a}=t;return this.transaction("rw",this.history,async()=>{if(a!==void 0){this.throwIfInvalidNumber(a);const n=await this.get(e);if(n&&n.page===void 0)delete t.page,this.history.put(t);else{const o=pl.updatePageData(a,n?.page);this.history.put({...t,page:o})}}else this.history.put(t)})}import(t){const e=t.map(a=>a.page?{...a,page:new Uint8Array(Object.values(a.page))}:a);return this.history.bulkPut(e)}async has(t,e){if(e===void 0)return!!await this.get(t);{this.throwIfInvalidNumber(e);const a=await this.get(t);return a?a.page?pl.isPageInData(e,a.page):!0:!1}}get(t){return t=this.throwIfInvalidNumber(t),this.history.get(t)}getAll(){return this.history.toArray()}generateCsv(){return this.getAll().then(t=>{const e=t.map(a=>{const{pid:n,userId:o="",user:i="",title:s="",tags:l="",comment:c=""}=a;return[String(n),String(o),i,s,c,l&&l.join(",")]});return e.unshift(["id","userId","user","title","comment","tags"]),rp(e)})}clear(){return this.history.clear()}async getImageEffect(t){return await this.imageEffect.get(t)}addImageEffect(t){return this.imageEffect.put(t)}getDirectoryHandle(){return this.filehandle.get(D(this,ko))}setDirectoryHandle(t){return this.filehandle.put(t,D(this,ko))}static updatePageData(t,e){const a=Math.floor(t/8),n=t%8;if(e)if(a>e.length-1){const o=new Uint8Array(a+1);return o.set(e),o[a]|=1<<n,o}else return e[a]|=1<<n,e;else{const o=new Uint8Array(a+1);return o[a]|=1<<n,o}}static isPageInData(t,e){const a=Math.floor(t/8),n=t%8;return!(a>e.length-1)&&(e[a]&1<<n)!==0}};ko=new WeakMap;let zs=lp;class cp extends zs{constructor(){super(),V(this,"cache",new Map),V(this,"initCachePromise"),this.initCachePromise=this.initCache(),this.initChannel()}async initCache(){Ct.time("loadDb");const t=await this.getAll();let e;for(let a=0;e=t[a++];){const{pid:n,page:o=null}=e;this.cache.set(n,o)}Ct.timeEnd("loadDb")}initChannel(){ke.on("db.sync",t=>{Array.isArray(t)?(t.forEach(e=>{this.cache.set(e.pid,e.page)}),Ct.info("Sync database cache:",t.length)):this.cache.set(t.pid,t.page)}),ke.on("db.clear",()=>{this.cache.clear(),Ct.info("clear database cache")})}updateCache(t){Array.isArray(t)?t.forEach(e=>{this.cache.set(e.pid,e.page)}):this.cache.set(t.pid,t.page),ke.emit("db.sync",t)}clearCache(){this.cache.clear(),ke.emit("db.clear")}async getCache(t){return t=this.throwIfInvalidNumber(t),await this.initCachePromise,this.cache.get(t)}async add(t){const{pid:e,page:a}=t;if(a===void 0)!await this.has(e)&&this.updateCache({pid:e,page:null});else{this.throwIfInvalidNumber(a);const n=await this.getCache(e);n!==null?this.updateCache({pid:e,page:zs.updatePageData(a,n)}):this.updateCache({pid:e,page:null})}return super.add(t)}import(t){const e=t.map(a=>({pid:a.pid,page:a.page?new Uint8Array(Object.values(a.page)):null}));return this.updateCache(e),super.import(t)}async has(t,e){if(t=this.throwIfInvalidNumber(t),await this.initCachePromise,e===void 0)return this.cache.has(t);{this.throwIfInvalidNumber(e);const a=await this.getCache(t);return a===void 0?!1:a===null?!0:zs.isPageInData(e,a)}}clear(){return this.clearCache(),super.clear()}}class dp extends cp{constructor(){super(...arguments),V(this,"subscribers",new Set)}runSubscription(){Ct.info("runSubscription",this.subscribers.size),this.subscribers.forEach(t=>{t(this.cache)})}async initCache(){await super.initCache(),this.runSubscription()}initChannel(){super.initChannel();const t=this.runSubscription.bind(this);ke.on("db.sync",t),ke.on("db.clear",t)}updateCache(t){super.updateCache(t),this.runSubscription()}clearCache(){super.clearCache(),this.runSubscription()}subscribe(t){return this.subscribers.add(t),t(this.cache),()=>{this.subscribers.delete(t)}}}const se=new dp,up=".pdl-thumbnail{position:absolute;display:flex;justify-content:center;align-items:center;margin:0;padding:0;height:32px;width:32px;top:calc((100% - 32px) * var(--pdl-btn-top-percent) / 100 + var(--pdl-btn-top-px));left:calc((100% - 32px) * var(--pdl-btn-left-percent) / 100 + var(--pdl-btn-left-px));border:none;border-radius:4px;overflow:hidden;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-family:system-ui;font-size:13px;font-weight:700;color:#262626;background-color:#ffffff80;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1;pointer-events:auto;cursor:pointer}.pdl-thumbnail:disabled{cursor:not-allowed}.pdl-thumbnail>svg{position:absolute;width:85%;height:85%;fill:currentColor;stroke:currentColor}.pdl-thumbnail>span{opacity:0;transition:opacity .2s}.pdl-thumbnail>span.show{opacity:1}:host([data-type=gallery]) .pdl-thumbnail{--pdl-sticky-safe-area-top: 0px;--pdl-sticky-safe-area-bottom: 0px;position:sticky;top:var(--pdl-sticky-safe-area-top);left:0;right:0}:host([data-type=gallery].bottom) .pdl-thumbnail{top:calc(100% - 32px - var(--pdl-sticky-safe-area-bottom))}:host([data-type=gallery].pixiv) .pdl-thumbnail{--pdl-sticky-safe-area-top: 40px;--pdl-sticky-safe-area-bottom: 48px}:host([data-type=gallery].nijie) .pdl-thumbnail{--pdl-sticky-safe-area-top: 36px;--pdl-sticky-safe-area-bottom: 70px}:host([data-type=pixiv-my-bookmark]) .pdl-thumbnail{top:calc((100% - 32px) * var(--pdl-btn-pixiv-bookmark-top-percent) / 100 + var(--pdl-btn-pixiv-bookmark-top-px));left:calc((100% - 32px) * var(--pdl-btn-pixiv-bookmark-left-percent) / 100 + var(--pdl-btn-pixiv-bookmark-left-px))}:host([data-type=pixiv-history]) .pdl-thumbnail{z-index:auto}:host([data-type=pixiv-presentation]) .pdl-thumbnail{position:fixed;top:50px;right:20px;left:auto}:host([data-type=pixiv-toolbar]) .pdl-thumbnail{position:relative;top:auto;left:auto;color:inherit;background-color:transparent}:host([data-type=pixiv-manga-viewer]) .pdl-thumbnail{top:80%;right:4px;left:auto}:host([data-type=yande-browse]) .pdl-thumbnail{top:320px;right:4px;left:auto}:host([data-type=nijie-illust]) .pdl-thumbnail{display:inline-flex;position:static;height:44px;width:44px;top:auto;left:auto;border-radius:8px;margin:0 8px;vertical-align:top}:host([data-type=nijie-illust]) .pdl-thumbnail>svg{width:70%;height:70%}:host([data-type=rule34vault-post-action]) .pdl-thumbnail{position:relative;top:auto;left:auto;color:inherit;background-color:inherit;width:4em;height:36px}:host([data-type=rule34vault-post-action]) .pdl-thumbnail>svg{height:28px;width:28px}:host([data-type=rule34vault-post-action]) .pdl-thumbnail:hover{filter:brightness(1.2)}:host([data-status]) .pdl-thumbnail{color:#16a34a}:host([data-status=error]) .pdl-thumbnail{color:#ef4444}",fp=`<svg xmlns="http://www.w3.org/2000/svg" style="display: none">
  <symbol id="pdl-download" viewBox="0 0 512 512">
    <path
      d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm-32-316v116h-67c-10.7 0-16 12.9-8.5 20.5l99 99c4.7 4.7 12.3 4.7 17 0l99-99c7.6-7.6 2.2-20.5-8.5-20.5h-67V140c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12z"
    ></path>
  </symbol>

  <symbol id="pdl-loading" viewBox="0 0 512 512">
    <style>
      @keyframes pdl-loading {
        0% {
          transform: rotate3d(0, 0, 1, -90deg) rotate3d(1, 0, 0, 0deg);
          stroke-dashoffset: 1407.43;
        }

        49.99% {
          transform: rotate3d(0, 0, 1, 90deg) rotate3d(1, 0, 0, 0deg);
        }

        50% {
          transform: rotate3d(0, 0, 1, 90deg) rotate3d(1, 0, 0, 180deg);
          stroke-dashoffset: 0;
        }

        100% {
          transform: rotate3d(0, 0, 1, 270deg) rotate3d(1, 0, 0, 180deg);
          stroke-dashoffset: 1407.43;
        }
      }

      circle.rotate {
        transform-origin: 50% 50%;
        animation: 2.5s infinite ease-in-out pdl-loading;
      }
    </style>
    <circle
      class="rotate"
      cx="256"
      cy="256"
      r="224"
      stroke-width="48"
      fill="none"
      stroke-dasharray="1407.43"
      stroke-dashoffset="1055.57"
      stroke-linecap="round"
    ></circle>
  </symbol>

  <symbol id="pdl-progress" viewBox="0 0 512 512">
    <style>
      circle.progress {
        transition: stroke-dashoffset 0.2s ease;
      }
    </style>
    <circle
      class="progress"
      cx="256"
      cy="256"
      r="224"
      stroke-width="48"
      fill="none"
      stroke-dasharray="1407.43"
      stroke-linecap="round"
      transform="rotate(-90 256 256)"
    ></circle>
  </symbol>

  <symbol id="pdl-error" viewBox="0 0 512 512">
    <path
      d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm101.8-262.2L295.6 256l62.2 62.2c4.7 4.7 4.7 12.3 0 17l-22.6 22.6c-4.7 4.7-12.3 4.7-17 0L256 295.6l-62.2 62.2c-4.7 4.7-12.3 4.7-17 0l-22.6-22.6c-4.7-4.7-4.7-12.3 0-17l62.2-62.2-62.2-62.2c-4.7-4.7-4.7-12.3 0-17l22.6-22.6c4.7-4.7 12.3-4.7 17 0l62.2 62.2 62.2-62.2c4.7-4.7 12.3-4.7 17 0l22.6 22.6c4.7 4.7 4.7 12.3 0 17z"
    ></path>
  </symbol>

  <symbol id="pdl-complete" viewBox="0 0 512 512">
    <path
      d="M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z"
    ></path>
  </symbol>
</svg>
`,Hs={init:"#pdl-download",loading:"#pdl-loading",progress:"#pdl-progress",complete:"#pdl-complete",error:"#pdl-error"};var Us=(r=>(r.Init="init",r.Loading="loading",r.Progress="progress",r.Complete="complete",r.Error="error",r))(Us||{}),Qe=(r=>(r.Gallery="gallery",r.PixivMyBookmark="pixiv-my-bookmark",r.PixivHistory="pixiv-history",r.PixivPresentation="pixiv-presentation",r.PixivToolbar="pixiv-toolbar",r.PixivMangaViewer="pixiv-manga-viewer",r.YandeBrowse="yande-browse",r.NijieIllust="nijie-illust",r.Rule34VaultPostAction="rule34vault-post-action",r))(Qe||{});class le extends HTMLElement{constructor(t){if(super(),Tt(this,Eo),V(this,"btn"),V(this,"status","init"),V(this,"mediaId"),V(this,"page"),V(this,"type"),V(this,"onClick"),V(this,"unsubscriber"),V(this,"connectedFlag",!1),V(this,"shouldObserveDb",!0),V(this,"progress",0),V(this,"dirty",!1),Tt(this,Ur,null),Tt(this,qr,null),this.dispatchDownload=this.dispatchDownload.bind(this),this.onClick=t.onClick,this.mediaId=this.toValidatedNumber(t.id),this.dataset.id=String(this.mediaId),t.type&&(this.dataset.type=this.type=t.type),t.page!==void 0&&(this.page=this.toValidatedNumber(t.page),this.dataset.page=String(this.page)),t.shouldObserveDb!==void 0&&(this.shouldObserveDb=t.shouldObserveDb),t.extraData)for(const e in t.extraData)this.dataset[e]=t.extraData[e]}static get tagNameLowerCase(){return"pdl-button"}static get observedAttributes(){return["data-id","data-status","data-page","data-type","disabled"]}attributeChangedCallback(t,e,a){switch(t){case"data-id":this.updateId(a);break;case"data-status":this.updateIcon(a);break;case"data-page":this.updatePage(a);break;case"data-type":this.resetType(a);break;case"disabled":this.updateDisableStatus(a);break}}toValidatedNumber(t){if(typeof t=="string")if(t!=="")t=+t;else return Ct.throw('Invalid argument: can not be "".',RangeError);return t<0||!Number.isSafeInteger(t)?Ct.throw(`Invalid number: ${t}, must be a non-negative integer.`,RangeError):t}resetType(t){t===null&&this.type===void 0||t!==this.type&&(this.type===void 0?delete this.dataset.type:this.dataset.type=this.type,Ct.error('Changes to "data-type" is not allowed.'))}updateId(t){try{if(t===null)throw new Error('Attribute "data-id" is required.');this.mediaId=this.toValidatedNumber(t),j(this,Eo,qi).call(this),D(this,Ur)&&Zt(this,Ur,null),this.connectedFlag&&this.shouldObserveDb&&this.observeDb()()}catch(e){Ct.error(e),this.dataset.id=String(this.mediaId)}}updateDisableStatus(t){if(!this.connectedFlag){this.dirty=!0;return}typeof t=="string"?this.btn.setAttribute("disabled",""):this.btn.removeAttribute("disabled")}updatePage(t){try{this.page=t===null?void 0:this.toValidatedNumber(t),D(this,qr)&&Zt(this,qr,null),j(this,Eo,qi).call(this),this.connectedFlag&&this.shouldObserveDb&&this.observeDb()()}catch(e){Ct.error(e),this.page===void 0?delete this.dataset.page:this.dataset.page=String(this.page)}}updateIcon(t){if(t===null)t="init";else if(t==="init"){delete this.dataset.status;return}else if(!(t in Hs)){this.dataset.status=this.status;return}if(this.status=t,!this.connectedFlag){this.dirty=!0;return}const e=this.shadowRoot.querySelector("use");e.setAttribute("xlink:href",Hs[t]),e.animate([{opacity:.5},{opactiy:1}],{duration:200})}render(){let t;if((t=this.shadowRoot)&&!this.dirty)return;const e=this.status==="progress";t??(t=this.attachShadow({mode:"open"})),t.innerHTML=`<style>${up}</style>${fp}<button class="pdl-thumbnail" ${this.hasAttribute("disabled")?"disabled":""}>
      <svg xmlns="http://www.w3.org/2000/svg" class="pdl-icon" ${e?`style="stroke-dashoffset: ${this.clacProgressRadial(this.progress)};"`:""}>
        <use xlink:href="${Hs[this.status]}"></use>
      </svg>
      ${e?`<span class="show">${this.progress}</span>`:"<span></span>"}
    </button>`}dispatchDownload(t){t?.preventDefault(),t?.stopPropagation(),this.setAttribute("disabled",""),this.setStatus("loading");const e=Zt(this,Ur,this.mediaId),a=Zt(this,qr,this.page);Promise.resolve(this.onClick(this)).then(()=>{e===D(this,Ur)&&a===D(this,qr)&&(this.setStatus("complete"),this.removeAttribute("disabled"))},n=>{n&&Ct.error(n),e===D(this,Ur)&&a===D(this,qr)&&(this.setStatus("error"),this.removeAttribute("disabled"))}).finally(()=>{e===D(this,Ur)&&Zt(this,Ur,null),a===D(this,qr)&&Zt(this,qr,null)})}observeDb(){return se.subscribe(async()=>{const t=this.mediaId,e=this.page,a=await se.has(t,e);t!==this.mediaId||e!==this.page||(this.status==="complete"?!a&&this.setStatus("init"):a&&this.setStatus("complete"))})}connectedCallback(){this.render(),this.dirty&&(this.dirty=!1),this.connectedFlag=!0,this.btn=this.shadowRoot.querySelector("button"),this.btn.addEventListener("click",this.dispatchDownload),this.shouldObserveDb&&(this.unsubscriber=this.observeDb())}disconnectedCallback(){var t,e;this.connectedFlag=!1,(t=this.btn)==null||t.removeEventListener("click",this.dispatchDownload),(e=this.unsubscriber)==null||e.call(this)}clacProgressRadial(t){const a=2*Math.PI*224;return a-t/100*a}setProgress(t,e=!0){if(t<0||t>100)throw new RangeError('Value "progress" must between 0-100');if(this.mediaId!==D(this,Ur)||this.page!==D(this,qr))return;if(this.progress=Math.floor(t),this.status!=="progress"&&(this.dataset.status="progress"),!this.connectedFlag){this.dirty=!0;return}const a=this.shadowRoot,n=a.querySelector("span");if(n.classList.add("show"),n.textContent=String(this.progress),!e)return;const o=a.querySelector("svg.pdl-icon");o.style.strokeDashoffset=String(this.clacProgressRadial(t))}removeProgress(){if(this.progress=0,!this.connectedFlag){this.dirty=!0;return}const t=this.shadowRoot,e=t.querySelector("span"),a=t.querySelector("svg.pdl-icon");e.classList.contains("show")&&(e.classList.remove("show"),e.addEventListener("transitionend",()=>{e.textContent=""},{once:!0}),a.style.removeProperty("stroke-dashoffset"))}setStatus(t){if(t!==this.status){if(t==="init"){delete this.dataset.status;return}if(t==="progress"){this.setProgress(0);return}this.removeProgress(),this.dataset.status=t}}}Ur=new WeakMap,qr=new WeakMap,Eo=new WeakSet,qi=function(){this.hasAttribute("disabled")&&this.removeAttribute("disabled"),this.setStatus("init")},customElements.define(le.tagNameLowerCase,le);const pp=".button-wrapper{--pdl-sticky-container-safe-area-top: 0px;--pdl-sticky-container-safe-area-bottom: 0px;--pdl-sticky-container-safe-area-right: 8px;--pdl-sticky-container-safe-area-left: 8px;inset:var(--pdl-sticky-container-safe-area-top) var(--pdl-sticky-container-safe-area-right) var(--pdl-sticky-container-safe-area-bottom) var(--pdl-sticky-container-safe-area-left);position:absolute;direction:ltr;pointer-events:none}.button-wrapper.rtl{direction:rtl}.button-wrapper.pixiv{--pdl-sticky-container-safe-area-top: 40px}.button-wrapper.gelbooru{--pdl-sticky-container-safe-area-bottom: calc(1em + 22px) }.button-wrapper.moebooru_image{--pdl-sticky-container-safe-area-right: calc(5em + 8px) }.button-wrapper.native_video{--pdl-sticky-container-safe-area-bottom: 70px}.button-wrapper.vjs_video{--pdl-sticky-container-safe-area-bottom: 32px}.button-wrapper.fluid_video{--pdl-sticky-container-safe-area-bottom: 56px}",hp=GM_getResourceText("gif.js/dist/gif.worker?raw"),gp=URL.createObjectURL(new Blob([hp],{type:"text/javascript"}));function vp(r){return r[0]instanceof Blob}async function mp(r,t,e,a,n){a?.throwIfAborted(),vp(r)&&(r=await Promise.all(r.map(p=>createImageBitmap(p)))),a?.throwIfAborted();const o=document.createElement("canvas"),i=o.width=r[0].width,s=o.height=r[0].height,l=o.getContext("2d",{willReadFrequently:!0});let c,d;const u=new Promise((p,b)=>{c=p,d=b}),g=new xo({workers:2,quality:e,width:i,height:s,workerScript:gp});return g.on("progress",p=>{n?.(p*100)}),g.on("abort",()=>{d(a?.reason)}),g.on("finished",p=>{c(p)}),a?.addEventListener("abort",()=>{g.abort()},{once:!0}),r.forEach((p,b)=>{l.drawImage(p,0,0),g.addFrame(l,{copy:!0,delay:t[b]}),p.close()}),g.render(),u}const wp=`function isBlobArray(frames) {
    return frames[0] instanceof Blob;
}
async function encodeAPNG(frames, delays, cnum) {
    if (isBlobArray(frames)) {
        frames = await Promise.all(frames.map((frame) => createImageBitmap(frame)));
    }
    const width = frames[0].width;
    const height = frames[0].height;
    const canvas = new OffscreenCanvas(width, height);
    const ctx = canvas.getContext("2d", { willReadFrequently: true });
    const u8arrs = [];
    for (const frame of frames) {
        ctx.drawImage(frame, 0, 0);
        frame.close();
        u8arrs.push(ctx.getImageData(0, 0, width, height).data);
    }
    const png = UPNG.encode(u8arrs, width, height, cnum, delays, { loop: 0 });
    if (!png)
        throw new Error("Failed to encode apng.");
    return png;
}
function decodeApng(ab) {
    const img = UPNG.decode(ab);
    const rgba = UPNG.toRGBA8(img);
    const { width, height } = img;
    const delays = img.frames.map((frame) => frame.delay);
    return { frames: rgba, delays, width, height };
}
async function appendEffect(illustBlob, effect) {
    const illustBitmap = await createImageBitmap(illustBlob);
    const { frames: effectFrames, delays, width, height } = decodeApng(effect);
    const effectBitmaps = await Promise.all(effectFrames.map((buf) => createImageBitmap(new ImageData(new Uint8ClampedArray(buf), width, height))));
    const { width: illustWidth, height: illustHeight } = illustBitmap;
    const illustAspectRatio = illustWidth / illustHeight;
    const effectAspectRatio = width / height;
    let dx;
    let dy;
    let dWidth;
    let dHeight;
    if (effectAspectRatio > illustAspectRatio) {
        dWidth = illustHeight * effectAspectRatio;
        dHeight = illustHeight;
        dx = (illustWidth - dWidth) / 2;
        dy = 0;
    }
    else {
        dWidth = illustWidth;
        dHeight = illustWidth / effectAspectRatio;
        dx = 0;
        dy = (illustHeight - dHeight) / 2;
    }
    const canvas = new OffscreenCanvas(illustWidth, illustHeight);
    const ctx = canvas.getContext("2d", { willReadFrequently: true });
    const finalDatas = [];
    for (const effectBitmap of effectBitmaps) {
        ctx.drawImage(illustBitmap, 0, 0);
        ctx.drawImage(effectBitmap, dx, dy, dWidth, dHeight);
        finalDatas.push(ctx.getImageData(0, 0, illustWidth, illustHeight));
        effectBitmap.close();
    }
    illustBitmap.close();
    const result = finalDatas.map((data) => createImageBitmap(data));
    return {
        frames: await Promise.all(result),
        delays
    };
}
self.onmessage = async (evt) => {
    try {
        const data = evt.data;
        if ("effect" in data) {
            const { illust, effect } = data;
            const result = await appendEffect(illust, effect);
            self.postMessage(result, [...result.frames]);
        }
        else {
            const { frames, delays, cnum = 256 } = data;
            const apng = await encodeAPNG(frames, delays, cnum);
            self.postMessage(apng, [apng]);
        }
    }
    catch (error) {
        console.error(error);
        self.postMessage(void 0);
    }
};
`,bp=GM_getResourceText("upng-js?raw"),yp=GM_getResourceText("pako/dist/pako.js?raw"),Ed=URL.createObjectURL(new Blob([wp+yp+bp.replace("window.UPNG","self.UPNG").replace("window.pako","self.pako")],{type:"text/javascript"})),go=[];async function _p(r,t,e,a){a?.throwIfAborted();let n,o;const i=new Promise((c,d)=>{n=c,o=d});let s;go.length?(s=go.shift(),Ct.info("Reuse apng workers.")):s=new Worker(Ed),a?.addEventListener("abort",()=>{s.terminate(),o(a?.reason)},{once:!0}),s.onmessage=function(c){if(go.push(s),a?.aborted)return;if(!c.data)return o(new TypeError("Failed to get png data."));const d=new Blob([c.data],{type:"image/png"});n(d)};const l={frames:r,delays:t,cnum:e};return s.postMessage(l,l.frames[0]instanceof ImageBitmap?l.frames:[]),i}function xp(r,t,e){e?.throwIfAborted();let a,n;const o=new Promise((l,c)=>{a=l,n=c});let i;go.length?(i=go.shift(),Ct.info("Reuse apng workers.")):i=new Worker(Ed),e?.addEventListener("abort",()=>{i.terminate(),n(e?.reason)}),i.onmessage=function(l){if(i.terminate(),!l.data)return n(new Error("Mix Effect convert Failed."));a(l.data)};const s={illust:r,effect:t};return i.postMessage(s,[t]),o}const kp=`let resolveModule;
const moduleLoaded = new Promise((resolve) => {
    resolveModule = resolve;
});
let webpApi = {};
Module.onRuntimeInitialized = () => {
    webpApi = {
        init: Module.cwrap("init", "", ["number", "number", "number"]),
        createBuffer: Module.cwrap("createBuffer", "number", ["number"]),
        addFrame: Module.cwrap("addFrame", "number", ["number", "number", "number"]),
        generate: Module.cwrap("generate", "number", []),
        freeResult: Module.cwrap("freeResult", "", []),
        getResultPointer: Module.cwrap("getResultPointer", "number", []),
        getResultSize: Module.cwrap("getResultSize", "number", [])
    };
    resolveModule();
};
function isBlobArray(frames) {
    return frames[0] instanceof Blob;
}
onmessage = async (evt) => {
    await moduleLoaded;
    const { frames, delays, lossless = 0, quality = 95, method = 4 } = evt.data;
    webpApi.init(lossless, quality, method);
    const bitmaps = isBlobArray(frames) ? await Promise.all(frames.map((frame) => createImageBitmap(frame))) : frames;
    const width = bitmaps[0].width;
    const height = bitmaps[0].height;
    const canvas = new OffscreenCanvas(width, height);
    const ctx = canvas.getContext("2d");
    for (let i = 0; i < bitmaps.length; i++) {
        ctx?.drawImage(bitmaps[i], 0, 0);
        bitmaps[i].close();
        const webpBlob = await canvas.convertToBlob({
            type: "image/webp",
            quality: lossless ? 1 : quality / 100
        });
        const buffer = await webpBlob.arrayBuffer();
        const u8a = new Uint8Array(buffer);
        const pointer = webpApi.createBuffer(u8a.length);
        Module.HEAPU8.set(u8a, pointer);
        webpApi.addFrame(pointer, u8a.length, delays[i]);
        postMessage((i + 1) / bitmaps.length * 100);
    }
    webpApi.generate();
    const resultPointer = webpApi.getResultPointer();
    const resultSize = webpApi.getResultSize();
    const result = new Uint8Array(Module.HEAP8.buffer, resultPointer, resultSize);
    postMessage(result);
    webpApi.freeResult();
};
`,Ep=GM_getResourceText("../wasm/toWebpWorker?raw"),Pp=URL.createObjectURL(new Blob([Ep+kp],{type:"text/javascript"})),qs=[];async function Ap(r,t,e,a,n,o,i){o?.throwIfAborted();let s;qs.length?(s=qs.shift(),Ct.info("Reuse webp workers.")):s=new Worker(Pp);let l,c;const d=new Promise((u,g)=>{l=u,c=g});return o?.addEventListener("abort",()=>{s.terminate(),c(o?.reason)},{once:!0}),s.onmessage=u=>{if(o?.aborted)return;typeof u.data!="object"?i?.(u.data):(qs.push(s),l(new Blob([u.data],{type:"image/webp"})))},s.postMessage({frames:r,delays:t,lossless:Number(e),quality:a,method:n},r[0]instanceof ImageBitmap?r:[]),d}function Sp(r){return r[0]instanceof Blob}async function Cp(r,t,e,a){a?.throwIfAborted(),Sp(r)&&(r=await Promise.all(r.map(u=>createImageBitmap(u)))),a?.throwIfAborted();const n=r[0].width,o=r[0].height,i=new hl.Muxer({target:new hl.ArrayBufferTarget,video:{codec:"V_VP9",width:n,height:o}}),s=new VideoEncoder({output:(u,g)=>i.addVideoChunk(u,g),error:u=>Ct.error(u)});s.configure({codec:"vp09.00.51.08.01.01.01.01.00",width:n,height:o,bitrate:e*1e6});let l=0;t=t.map(u=>u*=1e3);const c=[];a?.addEventListener("abort",()=>{c.forEach(u=>u.close())},{once:!0});for(const[u,g]of r.entries()){const p=new VideoFrame(g,{duration:t[u],timestamp:l});s.encode(p),c.push(p),g.close(),l+=t[u]}await s.flush(),s.close(),c.forEach(u=>u.close()),a?.throwIfAborted(),i.finalize();const{buffer:d}=i.target;return new Blob([d],{type:"video/webm"})}function Tp(r){return r[0]instanceof Blob}async function Ip(r,t,e,a){a?.throwIfAborted(),Tp(r)&&(r=await Promise.all(r.map(u=>createImageBitmap(u)))),a?.throwIfAborted();let n=r[0].width,o=r[0].height;n%2!==0&&(n+=1),o%2!==0&&(o+=1);const i=new gl.Muxer({target:new gl.ArrayBufferTarget,video:{codec:"avc",width:n,height:o},fastStart:"in-memory"}),s=new VideoEncoder({output:(u,g)=>i.addVideoChunk(u,g),error:u=>Ct.error(u)});s.configure({codec:"avc1.420034",width:n,height:o,bitrate:e*1e6});let l=0;t=t.map(u=>u*=1e3);const c=[];a?.addEventListener("abort",()=>{c.forEach(u=>u.close())},{once:!0});for(const[u,g]of r.entries()){const p=new VideoFrame(g,{duration:t[u],timestamp:l});s.encode(p),c.push(p),g.close(),l+=t[u]}await s.flush(),s.close(),c.forEach(u=>u.close()),a?.throwIfAborted(),i.finalize();const{buffer:d}=i.target;return new Blob([d],{type:"video/mp4"})}var Ke=(r=>(r.GIF="gif",r.WEBP="webp",r.PNG="png",r.WEBM="webm",r.MP4="mp4",r))(Ke||{});const Pd={getAdapter(r){switch(r.format){case"gif":return(t,e,a,n)=>mp(t,e,r.quality,a,n);case"png":return(t,e,a)=>_p(t,e,r.cnum,a);case"mp4":return(t,e,a)=>Ip(t,e,r.bitrate,a);case"webm":return(t,e,a)=>Cp(t,e,r.bitrate,a);case"webp":return(t,e,a,n)=>{const{lossless:o,quality:i,method:s}=r;return Ap(t,e,o,i,s,a,n)};default:throw new Error("Unspported format.")}},getMixEffectFn(){return xp}},Ws=localStorage.getItem("pdlSetting");Ws&&localStorage.removeItem("pdlSetting");const Ut=Ws?JSON.parse(Ws):{};function Ad(r,t){for(const e of Object.keys(r)){if(!(e in t))continue;const a=r[e],n=t[e];kd(a)&&kd(n)?Ad(a,n):a!==void 0&&(t[e]=a)}return t}function Oa(r,t,e){let a=0,n=0;const o=localStorage.getItem(r);let i=Ge(ie(o?Ad(JSON.parse(o),Object.assign({},t)):t));const s=rn(()=>f(i),c=>S(i,ie(c)));co(()=>{Tr(()=>{a===0?a=Date.now():a<n?a=n:(a=Date.now(),ke.emit(`sync:${r}`,{version:a,data:vc(f(i))})),localStorage.setItem(r,JSON.stringify(f(i)))})}),ke.on(`sync:${r}`,({version:c,data:d})=>{c<=a||(n=c,S(i,ie(d)))});const l=Object.create(e||null);Object.defineProperties(l,{$state:{get(){return f(i)}},$subscribe:{value:s.subscribe},$update:{value:s.update}});for(const c of Object.keys(f(i)))Object.defineProperty(l,c,{enumerable:!0,get(){return f(i)[c]},set(d){f(i)[c]=d}});return l}var Fr=(r=>(r.LEFT_PERCENT="--pdl-btn-left-percent",r.TOP_PERCENT="--pdl-btn-top-percent",r.PIXIV_BOOKMARK_LEFT_PERCENT="--pdl-btn-pixiv-bookmark-left-percent",r.PIXIV_BOOKMARK_TOP_PERCENT="--pdl-btn-pixiv-bookmark-top-percent",r.LEFT_PX="--pdl-btn-left-px",r.TOP_PX="--pdl-btn-top-px",r.PIXIV_BOOKMARK_LEFT_PX="--pdl-btn-pixiv-bookmark-left-px",r.PIXIV_BOOKMARK_TOP_PX="--pdl-btn-pixiv-bookmark-top-px",r))(Fr||{}),Na=(r=>(r[r.PERCENT=0]="PERCENT",r[r.PX=1]="PX",r))(Na||{}),_i=(r=>(r[r.LEFT=0]="LEFT",r[r.RIGHT=1]="RIGHT",r))(_i||{}),xi=(r=>(r[r.TOP=0]="TOP",r[r.BOTTOM=1]="BOTTOM",r))(xi||{});const Vt=Oa("pdl-button-position",{"--pdl-btn-left-percent":Ut["pdl-btn-left"]??0,"--pdl-btn-left-px":0,"--pdl-btn-top-percent":Ut["pdl-btn-top"]??100,"--pdl-btn-top-px":0,"--pdl-btn-pixiv-bookmark-left-percent":Ut["pdl-btn-self-bookmark-left"]??100,"--pdl-btn-pixiv-bookmark-left-px":0,"--pdl-btn-pixiv-bookmark-top-percent":Ut["pdl-btn-self-bookmark-top"]??76,"--pdl-btn-pixiv-bookmark-top-px":0,thumbnailBtnUnitX:0,thumbnailBtnUnitY:0,pixivBookmarkBtnUnitX:0,pixivBookmarkBtnUnitY:0,artworkBtnAlignX:1,artworkBtnAlignY:0},{setPosition(r,t){const e=document.documentElement,a=getComputedStyle(e).getPropertyValue(r);(!a||a!==t)&&e.style.setProperty(r,t)}});co(()=>{[[()=>Vt.thumbnailBtnUnitX,"--pdl-btn-left-px","--pdl-btn-left-percent"],[()=>Vt.thumbnailBtnUnitY,"--pdl-btn-top-px","--pdl-btn-top-percent"],[()=>Vt.pixivBookmarkBtnUnitX,"--pdl-btn-pixiv-bookmark-left-px","--pdl-btn-pixiv-bookmark-left-percent"],[()=>Vt.pixivBookmarkBtnUnitY,"--pdl-btn-pixiv-bookmark-top-px","--pdl-btn-pixiv-bookmark-top-percent"]].forEach(([t,e,a])=>{Tr(()=>{let n,o;t()===1?(n=Vt[e]+"px",o="0"):(n="0px",o=String(Vt[a])),Vt.setPosition(e,n),Vt.setPosition(a,o)})})});class or extends HTMLElement{constructor(t){super(),V(this,"props"),Tt(this,Hn),Tt(this,Un),Tt(this,qn,[]),this.props=t}static get tagNameLowerCase(){return"pdl-artwork-button"}render(){if(this.shadowRoot)return;const t=this.attachShadow({mode:"open"}),e={...this.props},a=e.site;t.innerHTML=`<style>${pp}</style><div class="button-wrapper${a?" "+a:""}"></div>`,delete e.site;const n=new le({type:Qe.Gallery,...e});a&&n.classList.add(a);const o=t.querySelector(".button-wrapper");o.appendChild(n),Zt(this,Un,n),Zt(this,Hn,o)}connectedCallback(){this.render();const t=rn(()=>Vt.artworkBtnAlignX).subscribe(a=>{var n,o;a===_i.LEFT?(n=D(this,Hn))==null||n.classList.remove("rtl"):(o=D(this,Hn))==null||o.classList.add("rtl")}),e=rn(()=>Vt.artworkBtnAlignY).subscribe(a=>{var n,o;a===xi.TOP?(n=D(this,Un))==null||n.classList.remove("bottom"):(o=D(this,Un))==null||o.classList.add("bottom")});D(this,qn).push(t,e)}disconnectedCallback(){for(const t of D(this,qn))t();D(this,qn).length=0}}Hn=new WeakMap,Un=new WeakMap,qn=new WeakMap,customElements.define(or.tagNameLowerCase,or);var Sd=typeof GM_download<"u"?GM_download:void 0,an=typeof GM_info<"u"?GM_info:void 0,Dp=typeof GM_registerMenuCommand<"u"?GM_registerMenuCommand:void 0,Cd=typeof GM_xmlhttpRequest<"u"?GM_xmlhttpRequest:void 0,ua=typeof unsafeWindow<"u"?unsafeWindow:void 0;const Bp="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Bp);const Mp="drawerStore";function Rp(){const r=Op();return Xt(Mp,r)}function Op(){const{subscribe:r,set:t,update:e}=Ra({});return{subscribe:r,set:t,update:e,open:a=>e(()=>({open:!0,...a})),close:()=>e(a=>(a.open=!1,a))}}const Td="modalStore";function Gs(){const r=te(Td);if(!r)throw new Error("modalStore is not initialized. Please ensure that `initializeStores()` is invoked in the root layout file of this app!");return r}function Np(){const r=Lp();return Xt(Td,r)}function Lp(){const{subscribe:r,set:t,update:e}=Ra([]);return{subscribe:r,set:t,update:e,trigger:a=>e(n=>(n.push(a),n)),close:()=>e(a=>(a.length>0&&a.shift(),a)),clear:()=>t([])}}const Fp={message:"Missing Toast Message",autohide:!0,timeout:5e3},Id="toastStore";function Dd(){const r=te(Id);if(!r)throw new Error("toastStore is not initialized. Please ensure that `initializeStores()` is invoked in the root layout file of this app!");return r}function jp(){const r=Hp();return Xt(Id,r)}function zp(){const r=Math.random();return Number(r).toString(32)}function Hp(){const{subscribe:r,set:t,update:e}=Ra([]),a=o=>e(i=>{if(i.length>0){const s=i.findIndex(c=>c.id===o),l=i[s];l&&(l.callback&&l.callback({id:o,status:"closed"}),l.timeoutId&&clearTimeout(l.timeoutId),i.splice(s,1))}return i});function n(o){if(o.autohide===!0)return setTimeout(()=>{a(o.id)},o.timeout)}return{subscribe:r,close:a,trigger:o=>{const i=zp();return e(s=>{o&&o.callback&&o.callback({id:i,status:"queued"}),o.hideDismiss&&(o.autohide=!0);const l={...Fp,...o,id:i};return l.timeoutId=n(l),s.push(l),s}),i},freeze:o=>e(i=>(i.length>0&&clearTimeout(i[o].timeoutId),i)),unfreeze:o=>e(i=>(i.length>0&&(i[o].timeoutId=n(i[o])),i)),clear:()=>t([])}}function Up(){Np(),jp(),Rp()}const Ys={};function Bd(r){return r==="local"?localStorage:sessionStorage}function Vs(r,t,e){const a=JSON,n="local";function o(i,s){Bd(n).setItem(i,a.stringify(s))}if(!Ys[r]){const i=Ra(t,c=>{const d=Bd(n).getItem(r);d&&c(a.parse(d));{const u=g=>{g.key===r&&c(g.newValue?a.parse(g.newValue):null)};return window.addEventListener("storage",u),()=>window.removeEventListener("storage",u)}}),{subscribe:s,set:l}=i;Ys[r]={set(c){o(r,c),l(c)},update(c){const d=c(yd(i));o(r,d),l(d)},subscribe:s}}return Ys[r]}Vs("modeOsPrefers",!1),Vs("modeUserPrefers",void 0),Vs("modeCurrent",!1);const Md="(prefers-reduced-motion: reduce)";function qp(){return window.matchMedia(Md).matches}const ki=Kf(qp(),r=>{{const t=a=>{r(a.matches)},e=window.matchMedia(Md);return e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}}});function Rd(r,t){const e='a[href]:not([tabindex="-1"]), button:not([tabindex="-1"]), input:not([tabindex="-1"]), textarea:not([tabindex="-1"]), select:not([tabindex="-1"]), details:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])';let a,n;function o(p){p.shiftKey&&p.code==="Tab"&&(p.preventDefault(),n.focus())}function i(p){!p.shiftKey&&p.code==="Tab"&&(p.preventDefault(),a.focus())}const s=p=>p.filter(b=>b.tabIndex>=0).sort((b,w)=>b.tabIndex===0&&w.tabIndex>0?1:b.tabIndex>0&&w.tabIndex===0?-1:b.tabIndex-w.tabIndex),l=p=>{const b=[...r.querySelectorAll("[data-focusindex]")];return!b||b.length===0?p:b.sort((w,y)=>+w.dataset.focusindex-+y.dataset.focusindex)[0]||p},c=p=>{if(t===!1)return;const b=s(Array.from(r.querySelectorAll(e)));b.length&&(a=b[0],n=b[b.length-1],p||l(a).focus(),a.addEventListener("keydown",o),n.addEventListener("keydown",i))};c(!1);function d(){a&&a.removeEventListener("keydown",o),n&&n.removeEventListener("keydown",i)}const u=(p,b)=>(p.length&&(d(),c(!0)),b),g=new MutationObserver(u);return g.observe(r,{childList:!0,subtree:!0}),{update(p){t=p,p?c(!1):d()},destroy(){d(),g.disconnect()}}}Vu();const Wp=r=>r;function $s(r){const t=r-1;return t*t*t+1}function Od(r){const t=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[r,"px"]}function Bn(r,{delay:t=0,duration:e=400,easing:a=Wp}={}){const n=+getComputedStyle(r).opacity;return{delay:t,duration:e,easing:a,css:o=>`opacity: ${o*n}`}}function La(r,{delay:t=0,duration:e=400,easing:a=$s,x:n=0,y:o=0,opacity:i=0}={}){const s=getComputedStyle(r),l=+s.opacity,c=s.transform==="none"?"":s.transform,d=l*(1-i),[u,g]=Od(n),[p,b]=Od(o);return{delay:t,duration:e,easing:a,css:(w,y)=>`
			transform: ${c} translate(${(1-w)*u}${g}, ${(1-w)*p}${b});
			opacity: ${l-d*y}`}}function vo(r,{delay:t=0,duration:e=400,easing:a=$s,axis:n="y"}={}){const o=getComputedStyle(r),i=+o.opacity,s=n==="y"?"height":"width",l=parseFloat(o[s]),c=n==="y"?["top","bottom"]:["left","right"],d=c.map(_=>`${_[0].toUpperCase()}${_.slice(1)}`),u=parseFloat(o[`padding${d[0]}`]),g=parseFloat(o[`padding${d[1]}`]),p=parseFloat(o[`margin${d[0]}`]),b=parseFloat(o[`margin${d[1]}`]),w=parseFloat(o[`border${d[0]}Width`]),y=parseFloat(o[`border${d[1]}Width`]);return{delay:t,duration:e,easing:a,css:_=>`overflow: hidden;opacity: ${Math.min(_*20,1)*i};${s}: ${_*l}px;padding-${c[0]}: ${_*u}px;padding-${c[1]}: ${_*g}px;margin-${c[0]}: ${_*p}px;margin-${c[1]}: ${_*b}px;border-${c[0]}-width: ${_*w}px;border-${c[1]}-width: ${_*y}px;min-${s}: 0`}}function Nd(r,{delay:t=0,duration:e=400,easing:a=$s,start:n=0,opacity:o=0}={}){const i=getComputedStyle(r),s=+i.opacity,l=i.transform==="none"?"":i.transform,c=1-n,d=s*(1-o);return{delay:t,duration:e,easing:a,css:(u,g)=>`
			transform: ${l} scale(${1-c*g});
			opacity: ${s-d*g}
		`}}var Gp=q('<div data-testid="accordion"><!></div>');function Yp(r,t){const e=Re(t,["children","$$slots","$$events","$$legacy"]);_e(t,!1);const[a,n]=Ma(),o=()=>wr(ki,"$prefersReducedMotionStore",a),i=at();let s=m(t,"autocollapse",8,!1),l=m(t,"width",8,"w-full"),c=m(t,"spacing",8,"space-y-1"),d=m(t,"disabled",8,!1),u=m(t,"padding",8,"py-2 px-4"),g=m(t,"hover",8,"hover:bg-primary-hover-token"),p=m(t,"rounded",8,"rounded-container-token"),b=m(t,"caretOpen",8,"rotate-180"),w=m(t,"caretClosed",8,""),y=m(t,"regionControl",8,""),_=m(t,"regionPanel",8,"space-y-4"),k=m(t,"regionCaret",8,""),x=m(t,"transitions",24,()=>!o()),T=m(t,"transitionIn",8,vo),P=m(t,"transitionInParams",24,()=>({duration:200})),L=m(t,"transitionOut",8,vo),R=m(t,"transitionOutParams",24,()=>({duration:200}));const z=Ra(null);Xt("active",z),Xt("autocollapse",s()),Xt("disabled",d()),Xt("padding",u()),Xt("hover",g()),Xt("rounded",p()),Xt("caretOpen",b()),Xt("caretClosed",w()),Xt("regionControl",y()),Xt("regionPanel",_()),Xt("regionCaret",k()),Xt("transitions",x()),Xt("transitionIn",T()),Xt("transitionInParams",P()),Xt("transitionOut",L()),Xt("transitionOutParams",R()),ht(()=>(I(l()),I(c()),I(e)),()=>{S(i,`${l()} ${c()} ${e.class??""}`)}),$e(),Je();var B=Gp(),F=v(B);Te(F,t,"default",{},null),h(B),C(()=>U(B,`accordion ${f(i)??""}`)),A(r,B),xe(),n()}function jr(r,t){const{transition:e,params:a,enabled:n}=t;return n?e(r,a):"duration"in a?e(r,{duration:0}):{duration:0}}var Vp=q('<div class="accordion-lead"><!></div>'),$p=q("<div><!></div>"),Jp=q("<div><!></div>"),Qp=q('<div role="region"><!></div>'),Kp=q('<div data-testid="accordion-item"><button type="button"><!> <div class="accordion-summary flex-1"><!></div> <!></button> <!></div>');function Xp(r,t){const e=Da(t),a=Re(t,["children","$$slots","$$events","$$legacy"]);_e(t,!1);const[n,o]=Ma(),i=()=>wr(L(),"$active",n),s=at(),l=at(),c=at(),d=at(),u=at(),g=at(),p=at(),b=bi();let w=m(t,"open",12,!1),y=m(t,"id",24,()=>String(Math.random()));const _="",k="text-start w-full flex items-center space-x-4",x="fill-current w-3 transition-transform duration-[200ms]",T="";let P=m(t,"autocollapse",24,()=>te("autocollapse")),L=m(t,"active",24,()=>te("active")),R=m(t,"disabled",24,()=>te("disabled")),z=m(t,"padding",24,()=>te("padding")),B=m(t,"hover",24,()=>te("hover")),F=m(t,"rounded",24,()=>te("rounded")),J=m(t,"caretOpen",24,()=>te("caretOpen")),K=m(t,"caretClosed",24,()=>te("caretClosed")),Y=m(t,"regionControl",24,()=>te("regionControl")),ft=m(t,"regionPanel",24,()=>te("regionPanel")),lt=m(t,"regionCaret",24,()=>te("regionCaret")),Ot=m(t,"transitions",24,()=>te("transitions")),jt=m(t,"transitionIn",24,()=>te("transitionIn")),ot=m(t,"transitionInParams",24,()=>te("transitionInParams")),it=m(t,"transitionOut",24,()=>te("transitionOut")),W=m(t,"transitionOutParams",24,()=>te("transitionOutParams"));const nt=`
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
			<path d="M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z" />
		</svg>`;function M(H){P()===!0?L().set(y()):w(!w()),G(H)}function G(H){const tt=P()?i()===y():w();b("toggle",{event:H,id:y(),panelId:`accordion-panel-${y()}`,open:tt,autocollapse:P()})}P()&&w()&&M(),ht(()=>(I(w()),I(P())),()=>{w()&&P()&&M()}),ht(()=>(I(P()),i(),I(y()),I(w())),()=>{S(s,P()?i()===y():w())}),ht(()=>I(a),()=>{S(l,`${_} ${a.class??""}`)}),ht(()=>(I(z()),I(B()),I(F()),I(Y())),()=>{S(c,`${k} ${z()} ${B()} ${F()} ${Y()}`)}),ht(()=>(f(s),I(J()),I(K())),()=>{S(d,f(s)?J():K())}),ht(()=>(I(lt()),f(d)),()=>{S(u,`${x} ${lt()} ${f(d)}`)}),ht(()=>I(lt()),()=>{S(g,`${x} ${lt()}`)}),ht(()=>(I(z()),I(F()),I(ft())),()=>{S(p,`${T} ${z()} ${F()} ${ft()}`)}),$e(),Je();var Z=Kp(),rt=v(Z),mt=v(rt);{var kt=H=>{var tt=Vp(),ct=v(tt);Te(ct,t,"lead",{},null),h(tt),A(H,tt)};bt(mt,H=>{e.lead&&H(kt)})}var yt=E(mt,2),wt=v(yt);Te(wt,t,"summary",{},H=>{var tt=Pe("(summary)");A(H,tt)}),h(yt);var St=E(yt,2);{var qt=H=>{var tt=$p(),ct=v(tt);{var Qt=vt=>{var Et=Me(),_t=ee(Et);Te(_t,t,"iconClosed",{},Dt=>{var O=Me(),pt=ee(O);Ee(pt,()=>nt),A(Dt,O)}),A(vt,Et)},dt=vt=>{var Et=Me(),_t=ee(Et);Te(_t,t,"iconOpen",{},Dt=>{var O=Me(),pt=ee(O);Ee(pt,()=>nt),A(Dt,O)}),A(vt,Et)};bt(ct,vt=>{f(s)?vt(Qt):vt(dt,!1)})}h(tt),C(()=>U(tt,`accordion-summary-icons ${f(g)??""}`)),A(H,tt)},zt=H=>{var tt=Jp(),ct=v(tt);Ee(ct,()=>nt),h(tt),C(()=>U(tt,`accordion-summary-caret ${f(u)??""}`)),A(H,tt)};bt(St,H=>{e.iconClosed||e.iconOpen?H(qt):H(zt,!1)})}h(rt);var Yt=E(rt,2);{var $=H=>{var tt=Qp(),ct=v(tt);Te(ct,t,"content",{},Qt=>{var dt=Pe("(content)");A(Qt,dt)}),h(tt),C(()=>{U(tt,`accordion-panel ${f(p)??""}`),Mt(tt,"id",`accordion-panel-${y()??""}`),Mt(tt,"aria-hidden",!f(s)),Mt(tt,"aria-labelledby",y())}),Fe(1,tt,()=>jr,()=>({transition:jt(),params:ot(),enabled:Ot()})),Fe(2,tt,()=>jr,()=>({transition:it(),params:W(),enabled:Ot()})),A(H,tt)};bt(Yt,H=>{f(s)&&H($)})}h(Z),C(()=>{U(Z,`accordion-item ${f(l)??""}`),U(rt,`accordion-control ${f(c)??""}`),Mt(rt,"id",y()),Mt(rt,"aria-expanded",f(s)),Mt(rt,"aria-controls",`accordion-panel-${y()??""}`),rt.disabled=R()}),ut("click",rt,M),ut("click",rt,function(H){Jt.call(this,t,H)}),ut("keydown",rt,function(H){Jt.call(this,t,H)}),ut("keyup",rt,function(H){Jt.call(this,t,H)}),ut("keypress",rt,function(H){Jt.call(this,t,H)}),A(r,Z),xe(),o()}var Zp=q("<div><!></div>"),th=q("<div><!></div>"),eh=q("<div><!></div>"),rh=q('<div data-testid="app-bar" role="toolbar"><div><!> <div><!></div> <!></div> <!></div>');function ah(r,t){const e=Da(t),a=Re(t,["children","$$slots","$$events","$$legacy"]);_e(t,!1);const n=at(),o=at(),i=at(),s=at(),l=at(),c=at();let d=m(t,"background",8,"bg-surface-100-800-token"),u=m(t,"border",8,""),g=m(t,"padding",8,"p-4"),p=m(t,"shadow",8,""),b=m(t,"spacing",8,"space-y-4"),w=m(t,"gridColumns",8,"grid-cols-[auto_1fr_auto]"),y=m(t,"gap",8,"gap-4"),_=m(t,"regionRowMain",8,""),k=m(t,"regionRowHeadline",8,""),x=m(t,"slotLead",8,""),T=m(t,"slotDefault",8,""),P=m(t,"slotTrail",8,""),L=m(t,"label",8,""),R=m(t,"labelledby",8,"");const z="flex flex-col",B="grid items-center",F="",J="flex-none flex justify-between items-center",K="flex-auto",Y="flex-none flex items-center space-x-4";ht(()=>(I(d()),I(u()),I(b()),I(g()),I(p()),I(a)),()=>{S(n,`${z} ${d()} ${u()} ${b()} ${g()} ${p()} ${a.class??""}`)}),ht(()=>(I(w()),I(y()),I(_())),()=>{S(o,`${B} ${w()} ${y()} ${_()}`)}),ht(()=>I(k()),()=>{S(i,`${F} ${k()}`)}),ht(()=>I(x()),()=>{S(s,`${J} ${x()}`)}),ht(()=>I(T()),()=>{S(l,`${K} ${T()}`)}),ht(()=>I(P()),()=>{S(c,`${Y} ${P()}`)}),$e(),Je();var ft=rh(),lt=v(ft),Ot=v(lt);{var jt=Z=>{var rt=Zp(),mt=v(rt);Te(mt,t,"lead",{},null),h(rt),C(()=>U(rt,`app-bar-slot-lead ${f(s)??""}`)),A(Z,rt)};bt(Ot,Z=>{e.lead&&Z(jt)})}var ot=E(Ot,2),it=v(ot);Te(it,t,"default",{},null),h(ot);var W=E(ot,2);{var nt=Z=>{var rt=th(),mt=v(rt);Te(mt,t,"trail",{},null),h(rt),C(()=>U(rt,`app-bar-slot-trail ${f(c)??""}`)),A(Z,rt)};bt(W,Z=>{e.trail&&Z(nt)})}h(lt);var M=E(lt,2);{var G=Z=>{var rt=eh(),mt=v(rt);Te(mt,t,"headline",{},null),h(rt),C(()=>U(rt,`app-bar-row-headline ${f(i)??""}`)),A(Z,rt)};bt(M,Z=>{e.headline&&Z(G)})}h(ft),C(()=>{U(ft,`app-bar ${f(n)??""}`),Mt(ft,"aria-label",L()),Mt(ft,"aria-labelledby",R()),U(lt,`app-bar-row-main ${f(o)??""}`),U(ot,`app-bar-slot-default ${f(l)??""}`)}),A(r,ft),xe()}var nh=q('<div data-testid="file-button"><div class="w-0 h-0 overflow-hidden"><input></div> <button type="button"><!></button></div>');function oh(r,t){const e=Re(t,["children","$$slots","$$events","$$legacy"]),a=Re(e,["files","fileInput","name","width","button"]);_e(t,!1);const n=at(),o=at();let i=m(t,"files",28,()=>{}),s=m(t,"fileInput",28,()=>{}),l=m(t,"name",8),c=m(t,"width",8,""),d=m(t,"button",8,"btn variant-filled");function u(){s()&&s().click()}function g(){return delete a.class,a}ht(()=>I(e),()=>{S(n,`${e.class??""}`)}),ht(()=>(I(d()),I(c())),()=>{S(o,`${d()} ${c()}`)}),$e(),Je();var p=nh(),b=v(p),w=v(b);mr(w);const y=Aa(g);let _;Ze(w,T=>s(T),()=>s()),h(b);var k=E(b,2),x=v(k);Te(x,t,"default",{},T=>{var P=Pe("Select a File");A(T,P)}),h(k),h(p),C(()=>{U(p,`file-button ${f(n)??""}`),_=en(w,_,{type:"file",name:l(),...f(y)}),U(k,`file-button-btn ${f(o)??""}`),k.disabled=a.disabled}),Lf(w,i),ut("change",w,function(T){Jt.call(this,t,T)}),ut("click",k,u),ut("keydown",k,function(T){Jt.call(this,t,T)}),ut("keyup",k,function(T){Jt.call(this,t,T)}),ut("keypress",k,function(T){Jt.call(this,t,T)}),A(r,p),xe()}function ih(r){const t=r-1;return t*t*t+1}function Ld(r,{from:t,to:e},a={}){var{delay:n=0,duration:o=L=>Math.sqrt(L)*120,easing:i=ih}=a,s=getComputedStyle(r),l=s.transform==="none"?"":s.transform,[c,d]=s.transformOrigin.split(" ").map(parseFloat);c/=r.clientWidth,d/=r.clientHeight;var u=sh(r),g=r.clientWidth/e.width/u,p=r.clientHeight/e.height/u,b=t.left+t.width*c,w=t.top+t.height*d,y=e.left+e.width*c,_=e.top+e.height*d,k=(b-y)*g,x=(w-_)*p,T=t.width/e.width,P=t.height/e.height;return{delay:n,duration:typeof o=="function"?o(Math.sqrt(k*k+x*x)):o,easing:i,css:(L,R)=>{var z=R*k,B=R*x,F=L+R*T,J=L+R*P;return`transform: ${l} translate(${z}px, ${B}px) scale(${F}, ${J});`}}}function sh(r){if("currentCSSZoom"in r)return r.currentCSSZoom;for(var t=r,e=1;t!==null;)e*=+getComputedStyle(t).zoom,t=t.parentElement;return e}var lh=q("<option> </option>"),ch=q('<div><button type="button"><span> </span> <span>\u2715</span></button></div>'),dh=q("<div></div>"),uh=q('<div><div class="h-0 overflow-hidden"><select multiple tabindex="-1"></select></div> <div><input> <!></div></div>');function Fd(r,t){var e;const a=Re(t,["children","$$slots","$$events","$$legacy"]),n=Re(a,["addChip","removeChip","input","name","value","whitelist","max","minlength","maxlength","allowUpperCase","allowDuplicates","validation","duration","required","chips","invalid","padding","rounded","regionChipWrapper","regionChipList","regionInput","label","transitions","listTransitionIn","listTransitionInParams","listTransitionOut","listTransitionOutParams","chipTransitionIn","chipTransitionInParams","chipTransitionOut","chipTransitionOutParams"]);_e(t,!1);const[o,i]=Ma(),s=()=>wr(ki,"$prefersReducedMotionStore",o),l=at(),c=at(),d=at(),u=at(),g=at(),p=bi();let b=m(t,"input",12,""),w=m(t,"name",8),y=m(t,"value",28,()=>[]),_=m(t,"whitelist",24,()=>[]),k=m(t,"max",24,()=>-1),x=m(t,"minlength",24,()=>-1),T=m(t,"maxlength",24,()=>-1),P=m(t,"allowUpperCase",8,!1),L=m(t,"allowDuplicates",8,!1),R=m(t,"validation",8,()=>!0),z=m(t,"duration",8,150),B=m(t,"required",8,!1),F=m(t,"chips",8,"variant-filled"),J=m(t,"invalid",8,"input-error"),K=m(t,"padding",8,"p-2"),Y=m(t,"rounded",8,"rounded-container-token"),ft=m(t,"regionChipWrapper",8,""),lt=m(t,"regionChipList",8,""),Ot=m(t,"regionInput",8,""),jt=m(t,"label",8,"Chips select"),ot=m(t,"transitions",24,()=>!s()),it=m(t,"listTransitionIn",8,La),W=m(t,"listTransitionInParams",24,()=>({duration:150,opacity:0,y:-20})),nt=m(t,"listTransitionOut",8,La),M=m(t,"listTransitionOutParams",24,()=>({duration:150,opacity:0,y:-20})),G=m(t,"chipTransitionIn",8,Nd),Z=m(t,"chipTransitionInParams",24,()=>({duration:150,opacity:0})),rt=m(t,"chipTransitionOut",8,Nd),mt=m(t,"chipTransitionOutParams",24,()=>({duration:150,opacity:0}));const kt="textarea cursor-pointer",yt="space-y-4",wt="flex flex-wrap gap-2",St="unstyled bg-transparent border-0 !ring-0 p-0 w-full";let qt=at(!0),zt=at(((e=y())==null?void 0:e.map(X=>({val:X,id:Math.random()})))||[]);function Yt(){y([])}let $=at();Ls(()=>{if(!f($).form)return;const X=f($).form;return X.addEventListener("reset",Yt),()=>{X.removeEventListener("reset",Yt)}});function H(X){return R()===void 0||R()(X)}function tt(){return k()===-1||y().length<k()}function ct(X){return(x()===-1||X.length>=x())&&(T()===-1||X.length<=T())}function Qt(X){return _().length===0||_().includes(X)}function dt(X){return L()||!y().includes(X)}function vt(X=""){return!X&&!b()?!1:(X=X!==""?X.trim():b().trim(),H(X)&&tt()&&ct(X)&&Qt(X)&&dt(X))}function Et(X){X=P()?X:X.toLowerCase(),y().push(X),y(y()),f(zt).push({val:X,id:Math.random()}),S(zt,f(zt))}function _t(X){let $t=y().indexOf(X);y().splice($t,1),y(y()),f(zt).splice($t,1),S(zt,f(zt))}function Dt(X){if(X.key==="Enter"){if(X.preventDefault(),S(qt,vt()),f(qt)===!1){p("invalid",{event:X,input:b()});return}Et(b()),p("add",{event:X,chipIndex:y().length-1,chipValue:b()}),b("")}}function O(X,$t,Bt){n.disabled||(_t(Bt),p("remove",{event:X,chipIndex:$t,chipValue:Bt}))}function pt(X){if(S(qt,vt(X)),f(qt)===!1){p("invalidManually",{input:X});return}Et(X),p("addManually",{chipIndex:y().length-1,chipValue:X})}function st(X){n.disabled||(_t(X),p("removeManually",{chipValue:X}))}function Rt(){return delete n.class,n}ht(()=>(f(qt),I(J())),()=>{S(l,f(qt)===!1?J():"")}),ht(()=>(I(K()),I(Y()),I(a),f(l)),()=>{S(c,`${kt} ${K()} ${Y()} ${a.class??""} ${f(l)}`)}),ht(()=>I(ft()),()=>{S(d,`${yt} ${ft()}`)}),ht(()=>I(lt()),()=>{S(u,`${wt} ${lt()}`)}),ht(()=>I(Ot()),()=>{S(g,`${St} ${Ot()}`)}),ht(()=>(f(zt),I(y())),()=>{var X;S(zt,((X=y())==null?void 0:X.map(($t,Bt)=>{var Wt;return((Wt=f(zt)[Bt])==null?void 0:Wt.val)===$t?f(zt)[Bt]:{id:Math.random(),val:$t}}))||[])}),$e(),Je();var Nt=uh(),Gt=v(Nt),xt=v(Gt);C(()=>{y(),of(()=>{f($),w(),B(),jt()})}),ur(xt,5,y,la,(X,$t)=>{var Bt=lh(),Wt={},re=v(Bt,!0);h(Bt),C(()=>{Wt!==(Wt=f($t))&&(Bt.value=(Bt.__value=f($t))==null?"":f($t)),Q(re,f($t))}),A(X,Bt)}),h(xt),Ze(xt,X=>S($,X),()=>f($)),h(Gt);var Ht=E(Gt,2),et=v(Ht);mr(et);const gt=Aa(Rt);let At;var ne=E(et,2);{var be=X=>{var $t=dh();ur($t,15,()=>f(zt),({id:Bt,val:Wt})=>Bt,(Bt,Wt,re)=>{let Ce=()=>f(Wt).val;var ae=ch(),Lt=v(ae),oe=v(Lt),ue=v(oe,!0);h(oe),Se(2),h(Lt),h(ae),C(()=>{U(Lt,`chip ${F()??""}`),Q(ue,Ce())}),ut("click",Lt,ve=>O(ve,f(re),Ce())),ut("click",Lt,function(ve){Jt.call(this,t,ve)}),ut("keypress",Lt,function(ve){Jt.call(this,t,ve)}),ut("keydown",Lt,function(ve){Jt.call(this,t,ve)}),ut("keyup",Lt,function(ve){Jt.call(this,t,ve)}),Fe(1,Lt,()=>jr,()=>({transition:G(),params:Z(),enabled:ot()})),Fe(2,Lt,()=>jr,()=>({transition:rt(),params:mt(),enabled:ot()})),sd(ae,()=>Ld,()=>({duration:z()})),A(Bt,ae)}),h($t),C(()=>U($t,`input-chip-list ${f(u)??""}`)),Fe(1,$t,()=>jr,()=>({transition:it(),params:W(),enabled:ot()})),Fe(2,$t,()=>jr,()=>({transition:nt(),params:M(),enabled:ot()})),A(X,$t)};bt(ne,X=>{f(zt).length&&X(be)})}h(Ht),h(Nt),C(()=>{U(Nt,`input-chip ${f(c)??""}`),Ba(Nt,"opacity-50",n.disabled),Mt(xt,"name",w()),xt.required=B(),Mt(xt,"aria-label",jt()),U(Ht,`input-chip-wrapper ${f(d)??""}`),At=en(et,At,{type:"text",placeholder:n.placeholder??"Enter values...",class:`input-chip-field ${f(g)??""}`,disabled:n.disabled,...f(gt)})}),mi(xt,y),In(et,b),ut("keydown",et,Dt),ut("input",et,function(X){Jt.call(this,t,X)}),ut("focus",et,function(X){Jt.call(this,t,X)}),ut("blur",et,function(X){Jt.call(this,t,X)}),A(r,Nt),dd(t,"addChip",pt),dd(t,"removeChip",st);var ge=xe({addChip:pt,removeChip:st});return i(),ge}var fh=q('<div role="listbox" data-testid="listbox"><!></div>');function ph(r,t){const e=Re(t,["children","$$slots","$$events","$$legacy"]);_e(t,!1);const a=at();let n=m(t,"multiple",8,!1),o=m(t,"disabled",8,!1),i=m(t,"spacing",8,"space-y-1"),s=m(t,"rounded",8,"rounded-token"),l=m(t,"active",8,"variant-filled"),c=m(t,"hover",8,"hover:variant-soft"),d=m(t,"padding",8,"px-4 py-2"),u=m(t,"regionLead",8,""),g=m(t,"regionDefault",8,""),p=m(t,"regionTrail",8,""),b=m(t,"labelledby",8,"");Xt("disabled",o()),Xt("multiple",n()),Xt("rounded",s()),Xt("active",l()),Xt("hover",c()),Xt("padding",d()),Xt("regionLead",u()),Xt("regionDefault",g()),Xt("regionTrail",p());const w="";ht(()=>(I(i()),I(s()),I(e)),()=>{S(a,`${w} ${i()} ${s()} ${e.class??""}`)}),$e(),Je();var y=fh(),_=v(y);Te(_,t,"default",{},null),h(y),C(()=>{U(y,`listbox ${f(a)??""}`),Mt(y,"aria-labelledby",b())}),A(r,y),xe()}var hh=q('<input type="checkbox" tabindex="-1">'),gh=q('<input type="radio" tabindex="-1">'),vh=q("<div><!></div>"),mh=q("<div><!></div>"),wh=q('<label><div data-testid="listbox-item" role="option" tabindex="0"><div class="h-0 w-0 overflow-hidden"><!></div> <div><!> <div><!></div> <!></div></div></label>');function bh(r,t){const e=Da(t),a=Re(t,["children","$$slots","$$events","$$legacy"]);_e(t,!1);const n=at(),o=at(),i=at(),s=at(),l=at(),c=at(),d=at(),u=at(),g=[];let p=m(t,"group",12),b=m(t,"name",8),w=m(t,"value",8),y=m(t,"disabled",24,()=>te("disabled")),_=m(t,"multiple",24,()=>te("multiple")),k=m(t,"rounded",24,()=>te("rounded")),x=m(t,"active",24,()=>te("active")),T=m(t,"hover",24,()=>te("hover")),P=m(t,"padding",24,()=>te("padding")),L=m(t,"regionLead",24,()=>te("regionLead")),R=m(t,"regionDefault",24,()=>te("regionDefault")),z=m(t,"regionTrail",24,()=>te("regionTrail"));const B="cursor-pointer -outline-offset-[3px]",F="opacity-50 !cursor-default",J="flex items-center space-x-4";let K=at(),Y=at();function ft($,H){if($===H)return!0;if(!($ instanceof Object)||!(H instanceof Object))return!1;const tt=Object.keys($),ct=Object.keys(H);if(tt.length!==ct.length)return!1;for(const Qt of tt){const dt=$[Qt],vt=H[Qt];if(!ft(dt,vt))return!1}return!0}function lt($){S(K,$.indexOf(w())>=0)}function Ot($){const H=p().indexOf(w());$?H<0&&(p().push(w()),p(p())):H>=0&&(p().splice(H,1),p(p()))}function jt($){["Enter","Space"].includes($.code)&&($.preventDefault(),f(Y).click())}const ot="",it="flex-1",W="";ht(()=>(I(_()),I(p())),()=>{_()&&lt(p())}),ht(()=>(I(_()),f(K)),()=>{_()&&Ot(f(K))}),ht(()=>(I(_()),I(p()),I(w())),()=>{S(n,_()?p().some($=>ft(w(),$)):ft(p(),w()))}),ht(()=>(f(n),I(x()),I(y()),I(T())),()=>{S(o,f(n)?x():y()?"":T())}),ht(()=>I(y()),()=>{S(i,y()?F:"")}),ht(()=>(f(i),I(k()),I(P()),f(o),I(a)),()=>{S(s,`${B} ${f(i)} ${k()} ${P()} ${f(o)} ${a.class??""}`)}),ht(()=>{},()=>{S(l,`${J}`)}),ht(()=>I(L()),()=>{S(c,`${ot} ${L()}`)}),ht(()=>I(R()),()=>{S(d,`${it} ${R()}`)}),ht(()=>I(z()),()=>{S(u,`${W} ${z()}`)}),$e(),Je();var nt=wh(),M=v(nt),G=v(M),Z=v(G);{var rt=$=>{var H=hh();mr(H);var tt;Ze(H,ct=>S(Y,ct),()=>f(Y)),C(()=>{H.disabled=y(),Mt(H,"name",b()),tt!==(tt=w())&&(H.value=(H.__value=w())==null?"":w())}),ld(H,()=>f(K),ct=>S(K,ct)),ut("click",H,function(ct){Jt.call(this,t,ct)}),ut("change",H,function(ct){Jt.call(this,t,ct)}),A($,H)},mt=$=>{var H=gh();mr(H);var tt;Ze(H,ct=>S(Y,ct),()=>f(Y)),C(()=>{H.disabled=y(),Mt(H,"name",b()),tt!==(tt=w())&&(H.value=(H.__value=w())==null?"":w())}),vi(g,[],H,()=>(w(),p()),p),ut("click",H,function(ct){Jt.call(this,t,ct)}),ut("change",H,function(ct){Jt.call(this,t,ct)}),A($,H)};bt(Z,$=>{_()?$(rt):$(mt,!1)})}h(G);var kt=E(G,2),yt=v(kt);{var wt=$=>{var H=vh(),tt=v(H);Te(tt,t,"lead",{},null),h(H),C(()=>U(H,`listbox-label-lead ${f(c)??""}`)),A($,H)};bt(yt,$=>{e.lead&&$(wt)})}var St=E(yt,2),qt=v(St);Te(qt,t,"default",{},null),h(St);var zt=E(St,2);{var Yt=$=>{var H=mh(),tt=v(H);Te(tt,t,"trail",{},null),h(H),C(()=>U(H,`listbox-label-trail ${f(u)??""}`)),A($,H)};bt(zt,$=>{e.trail&&$(Yt)})}h(kt),h(M),h(nt),C(()=>{U(M,`listbox-item ${f(s)??""}`),Mt(M,"aria-selected",f(n)),U(kt,`listbox-label ${f(l)??""}`),U(St,`listbox-label-content ${f(d)??""}`)}),ut("keydown",M,jt),ut("keydown",M,function($){Jt.call(this,t,$)}),ut("keyup",M,function($){Jt.call(this,t,$)}),ut("keypress",M,function($){Jt.call(this,t,$)}),A(r,nt),xe()}var yh=q('<div data-testid="progress-bar" role="progressbar"><div></div></div>');function _h(r,t){const e=Re(t,["children","$$slots","$$events","$$legacy"]);_e(t,!1);const a=at(),n=at(),o=at(),i=at(),s=at();let l=m(t,"value",24,()=>{}),c=m(t,"min",8,0),d=m(t,"max",8,100),u=m(t,"height",8,"h-2"),g=m(t,"rounded",8,"rounded-token"),p=m(t,"transition",8,"transition-[width]"),b=m(t,"animIndeterminate",8,"anim-indeterminate"),w=m(t,"meter",8,"bg-surface-900-50-token"),y=m(t,"track",8,"bg-surface-200-700-token"),_=m(t,"labelledby",8,"");const k="w-full overflow-hidden",x="h-full";ht(()=>(I(l()),I(c()),I(d())),()=>{S(a,l()?100*(l()-c())/(d()-c()):0)}),ht(()=>I(l()),()=>{S(n,l()===void 0||l()<0)}),ht(()=>(f(n),I(b())),()=>{S(o,f(n)?b():"")}),ht(()=>(I(y()),I(u()),I(g()),I(e)),()=>{S(i,`${k} ${y()} ${u()} ${g()} ${e.class??""}`)}),ht(()=>(I(w()),I(g()),f(o),I(p())),()=>{S(s,`${x} ${w()} ${g()} ${f(o)} ${p()}`)}),$e(),Je();var T=yh(),P=v(T);h(T),C(()=>{U(T,`progress-bar ${f(i)??""} svelte-12wvf64`),Mt(T,"aria-labelledby",_()),Mt(T,"aria-valuenow",l()),Mt(T,"aria-valuemin",c()),Mt(T,"aria-valuemax",d()-c()),U(P,`progress-bar-meter ${f(s)??""} svelte-12wvf64`),Bs(P,"width",`${(f(n)?100:f(a))??""}%`)}),A(r,T),xe()}var xh=kf('<text x="50%" y="50%" text-anchor="middle" dominant-baseline="middle" font-weight="bold"><!></text>'),kh=q('<figure data-testid="progress-radial" role="meter"><svg class="rounded-full"><circle cx="50%" cy="50%"></circle><circle cx="50%" cy="50%"></circle><!></svg></figure>');function mo(r,t){const e=Da(t),a=Re(t,["children","$$slots","$$events","$$legacy"]);_e(t,!1);const n=at();let o=m(t,"value",24,()=>{}),i=m(t,"stroke",8,40),s=m(t,"font",8,56),l=m(t,"strokeLinecap",8,"butt"),c=m(t,"transition",8,"transition-[stroke-dashoffset]"),d=m(t,"width",8,"w-36"),u=m(t,"meter",8,"stroke-surface-900 dark:stroke-surface-50"),g=m(t,"track",8,"stroke-surface-500/30"),p=m(t,"fill",8,"fill-token"),b=m(t,"labelledby",8,"");const w="progress-radial relative overflow-hidden",y="fill-transparent",_="fill-transparent -rotate-90 origin-[50%_50%]",k=512,x=k/2-i()/2;let T=at(x),P=at();function L(Y){S(T,x*2*Math.PI),S(P,f(T)-Y/100*f(T))}L(0),md(()=>{L(o()===void 0?25:o())}),ht(()=>(I(d()),I(a)),()=>{S(n,`${w} ${d()} ${a.class??""}`)}),$e(),Je();var R=kh();Mt(R,"aria-valuemin",0),Mt(R,"aria-valuemax",100);var z=v(R);Mt(z,"viewBox",`0 0 ${k} ${k}`);var B=v(z);Mt(B,"r",x);var F=E(B);Mt(F,"r",x);var J=E(F);{var K=Y=>{var ft=xh(),lt=v(ft);Te(lt,t,"default",{},null),h(ft),C(()=>{Mt(ft,"font-size",s()),Ds(ft,`progress-radial-text ${p()??""}`)}),A(Y,ft)};bt(J,Y=>{o()!=null&&o()>=0&&e.default&&Y(K)})}h(z),h(R),C(()=>{U(R,`progress-radial ${f(n)??""}`),Mt(R,"aria-labelledby",b()),Mt(R,"aria-valuenow",o()||0),Mt(R,"aria-valuetext",o()?`${o()}%`:"Indeterminate Spinner"),Ba(z,"animate-spin",o()===void 0),Ds(B,`progress-radial-track ${y} ${g()??""}`),Mt(B,"stroke-width",i()),Ds(F,`progress-radial-meter ${_} ${u()??""} ${c()??""}`),Mt(F,"stroke-width",i()),Mt(F,"stroke-linecap",l()),Bs(F,"stroke-dasharray",`${f(T)??""}
			${f(T)??""}`),Bs(F,"stroke-dashoffset",f(P))}),A(r,R),xe()}var Eh=q('<div data-testid="radio-group" role="radiogroup"><!></div>');function Fa(r,t){const e=Re(t,["children","$$slots","$$events","$$legacy"]);_e(t,!1);const a=at();let n=m(t,"display",8,"inline-flex"),o=m(t,"flexDirection",8,"flex-row"),i=m(t,"gap",8,"gap-1"),s=m(t,"background",8,"bg-surface-200-700-token"),l=m(t,"border",8,"border-token border-surface-400-500-token"),c=m(t,"rounded",8,"rounded-token"),d=m(t,"padding",8,"px-4 py-1"),u=m(t,"active",8,"variant-filled"),g=m(t,"hover",8,"hover:variant-soft"),p=m(t,"color",8,""),b=m(t,"fill",8,""),w=m(t,"regionLabel",8,""),y=m(t,"labelledby",8,"");Xt("rounded",c()),Xt("padding",d()),Xt("active",u()),Xt("hover",g()),Xt("color",p()),Xt("fill",b()),Xt("regionLabel",w());const _="p-1";ht(()=>(I(n()),I(o()),I(i()),I(s()),I(l()),I(c()),I(e)),()=>{S(a,`${_} ${n()} ${o()} ${i()} ${s()} ${l()} ${c()} ${e.class??""}`)}),$e(),Je();var k=Eh(),x=v(k);Te(x,t,"default",{},null),h(k),C(()=>{U(k,`radio-group ${f(a)??""}`),Mt(k,"aria-labelledby",y())}),A(r,k),xe()}var Ph=q('<label><div data-testid="radio-item" role="radio" tabindex="0"><div class="h-0 w-0 overflow-hidden"><input></div> <!></div></label>');function Oe(r,t){const e=Re(t,["children","$$slots","$$events","$$legacy"]),a=Re(e,["group","name","value","title","label","rounded","padding","active","hover","color","fill","regionLabel"]);_e(t,!1);const n=at(),o=at(),i=at(),s=at(),l=at(),c=[];let d=m(t,"group",12),u=m(t,"name",8),g=m(t,"value",8),p=m(t,"title",8,""),b=m(t,"label",8,""),w=m(t,"rounded",24,()=>te("rounded")),y=m(t,"padding",24,()=>te("padding")),_=m(t,"active",24,()=>te("active")),k=m(t,"hover",24,()=>te("hover")),x=m(t,"color",24,()=>te("color")),T=m(t,"fill",24,()=>te("fill")),P=m(t,"regionLabel",24,()=>te("regionLabel"));const L="flex-auto",R="text-base text-center cursor-pointer",z="opacity-50 cursor-not-allowed";let B=at();function F(it){["Enter","Space"].includes(it.code)&&(it.preventDefault(),f(B).click())}function J(){return delete a.class,a}ht(()=>(I(g()),I(d())),()=>{S(n,g()===d())}),ht(()=>(f(n),I(_()),I(x()),I(T()),I(k())),()=>{S(o,f(n)?`${_()} ${x()} ${T()}`:k())}),ht(()=>I(e),()=>{S(i,e.disabled?z:"")}),ht(()=>{},()=>{S(s,`${L}`)}),ht(()=>(I(y()),I(w()),f(o),f(i),I(e)),()=>{S(l,`${R} ${y()} ${w()} ${f(o)} ${f(i)} ${e.class??""}`)}),$e(),Je();var K=Ph(),Y=v(K),ft=v(Y),lt=v(ft);mr(lt);const Ot=Aa(J);let jt;Ze(lt,it=>S(B,it),()=>f(B)),h(ft);var ot=E(ft,2);Te(ot,t,"default",{},null),h(Y),h(K),C(()=>{U(K,`radio-label ${f(s)??""} ${P()??""}`),U(Y,`radio-item ${f(l)??""}`),Mt(Y,"aria-checked",f(n)),Mt(Y,"aria-label",b()),Mt(Y,"title",p()),jt=en(lt,jt,{type:"radio",name:u(),value:g(),...f(Ot),tabindex:"-1"})}),vi(c,[],lt,()=>(g(),d()),d),ut("click",lt,function(it){Jt.call(this,t,it)}),ut("change",lt,function(it){Jt.call(this,t,it)}),ut("keydown",Y,F),ut("keydown",Y,function(it){Jt.call(this,t,it)}),ut("keyup",Y,function(it){Jt.call(this,t,it)}),ut("keypress",Y,function(it){Jt.call(this,t,it)}),A(r,K),xe()}var Ah=q("<label><!></label>"),Sh=q("<option></option>"),Ch=q('<datalist class="range-slider-ticks"></datalist>'),Th=q('<div class="range-slider-trail"><!></div>'),Ih=q('<div data-testid="range-slider"><!> <div><input> <!></div> <!></div>');function Ei(r,t){const e=Da(t),a=Re(t,["children","$$slots","$$events","$$legacy"]),n=Re(a,["name","id","value","min","max","step","ticked","accent","label"]);_e(t,!1);const o=at(),i=at();let s=m(t,"name",8),l=m(t,"id",24,()=>String(Math.random())),c=m(t,"value",12,0),d=m(t,"min",8,0),u=m(t,"max",8,100),g=m(t,"step",8,1),p=m(t,"ticked",8,!1),b=m(t,"accent",8,"accent-surface-900 dark:accent-surface-50"),w=m(t,"label",8,"");const y="space-y-2",_="",k="flex justify-center py-2",x="w-full h-2";let T=at();function P(){p()!=!1&&S(T,Array.from({length:u()-d()+1},(ot,it)=>it+d()))}p()&&P(),md(()=>{P()});function L(){return delete n.class,n}ht(()=>I(a),()=>{S(o,`${y} ${a.class??""}`)}),ht(()=>I(b()),()=>{S(i,`${x} ${b()}`)}),$e(),Je();var R=Ih(),z=v(R);{var B=ot=>{var it=Ah();U(it,`range-slider-label ${_}`);var W=v(it);Te(W,t,"default",{},null),h(it),C(()=>Mt(it,"for",l())),A(ot,it)};bt(z,ot=>{e.default&&ot(B)})}var F=E(z,2);U(F,`range-content ${k}`);var J=v(F);mr(J);const K=Aa(L);let Y;var ft=E(J,2);{var lt=ot=>{var it=Ch();ur(it,5,()=>f(T),la,(W,nt)=>{var M=Sh(),G={};C(()=>{G!==(G=f(nt))&&(M.value=(M.__value=f(nt))==null?"":f(nt)),Mt(M,"label",f(nt))}),A(W,M)}),h(it),C(()=>Mt(it,"id",`tickmarks-${l()??""}`)),A(ot,it)};bt(ft,ot=>{p()&&f(T)&&f(T).length&&ot(lt)})}h(F);var Ot=E(F,2);{var jt=ot=>{var it=Th(),W=v(it);Te(W,t,"trail",{},null),h(it),A(ot,it)};bt(Ot,ot=>{e.trail&&ot(jt)})}h(R),C(()=>{U(R,`range-slider ${f(o)??""}`),Y=en(J,Y,{type:"range",id:l(),name:s(),class:`range-slider-input ${f(i)??""}`,list:`tickmarks-${l()??""}`,"aria-label":w(),min:d(),max:u(),step:g(),...f(K)})}),In(J,c),ut("click",J,function(ot){Jt.call(this,t,ot)}),ut("change",J,function(ot){Jt.call(this,t,ot)}),ut("blur",J,function(ot){Jt.call(this,t,ot)}),A(r,R),xe()}var Dh=q('<div class="slide-toggle-text ml-3"><!></div>'),Bh=q('<div data-testid="slide-toggle" role="switch" tabindex="0"><label><input> <div><div></div></div> <!></label></div>');function zr(r,t){const e=Da(t),a=Re(t,["children","$$slots","$$events","$$legacy"]),n=Re(a,["name","checked","size","background","active","border","rounded","label"]);_e(t,!1);const o=at(),i=at(),s=at(),l=at(),c=at(),d=at(),u=at(),g=at(),p=bi();let b=m(t,"name",8),w=m(t,"checked",12,!1),y=m(t,"size",8,"md"),_=m(t,"background",8,"bg-surface-400 dark:bg-surface-700"),k=m(t,"active",8,"bg-surface-900 dark:bg-surface-300"),x=m(t,"border",8,""),T=m(t,"rounded",8,"rounded-full"),P=m(t,"label",8,"");const L="inline-block",R="unstyled flex items-center",z="flex transition-all duration-[200ms] cursor-pointer",B="w-[50%] h-full scale-[0.8] transition-all duration-[200ms] shadow";let F=at();switch(y()){case"sm":S(F,"w-12 h-6");break;case"lg":S(F,"w-20 h-10");break;default:S(F,"w-16 h-8")}function J(M){["Enter","Space"].includes(M.code)&&(M.preventDefault(),p("keyup",M),M.currentTarget.firstChild.click())}function K(){return delete n.class,n}ht(()=>(I(w()),I(k()),I(_())),()=>{S(o,w()?k():`${_()} cursor-pointer`)}),ht(()=>I(w()),()=>{S(i,w()?"bg-white/75":"bg-white")}),ht(()=>I(w()),()=>{S(s,w()?"translate-x-full":"")}),ht(()=>I(a),()=>{S(l,a.disabled===!0?"opacity-50":"hover:brightness-[105%] dark:hover:brightness-110 cursor-pointer")}),ht(()=>(I(T()),f(l),I(a)),()=>{S(c,`${L} ${T()} ${f(l)} ${a.class??""}`)}),ht(()=>{},()=>{S(d,`${R}`)}),ht(()=>(I(x()),I(T()),f(F),f(o)),()=>{S(u,`${z} ${x()} ${T()} ${f(F)} ${f(o)}`)}),ht(()=>(I(T()),f(i),f(s)),()=>{S(g,`${B} ${T()} ${f(i)} ${f(s)}`)}),$e(),Je();var Y=Bh(),ft=v(Y),lt=v(ft);mr(lt);const Ot=Aa(K);let jt;var ot=E(lt,2),it=v(ot);h(ot);var W=E(ot,2);{var nt=M=>{var G=Dh(),Z=v(G);Te(Z,t,"default",{},null),h(G),A(M,G)};bt(W,M=>{e.default&&M(nt)})}h(ft),h(Y),C(()=>{Mt(Y,"id",P()),U(Y,`slide-toggle ${f(c)??""}`),Mt(Y,"aria-label",P()),Mt(Y,"aria-checked",w()),U(ft,`slide-toggle-label ${f(d)??""}`),jt=en(lt,jt,{type:"checkbox",class:"slide-toggle-input hidden",name:b(),...f(Ot),disabled:a.disabled}),U(ot,`slide-toggle-track ${f(u)??""}`),Ba(ot,"cursor-not-allowed",a.disabled),U(it,`slide-toggle-thumb ${f(g)??""}`),Ba(it,"cursor-not-allowed",a.disabled)}),ld(lt,w),ut("click",lt,function(M){Jt.call(this,t,M)}),ut("keydown",lt,function(M){Jt.call(this,t,M)}),ut("keyup",lt,function(M){Jt.call(this,t,M)}),ut("keypress",lt,function(M){Jt.call(this,t,M)}),ut("mouseover",lt,function(M){Jt.call(this,t,M)}),ut("change",lt,function(M){Jt.call(this,t,M)}),ut("focus",lt,function(M){Jt.call(this,t,M)}),ut("blur",lt,function(M){Jt.call(this,t,M)}),ut("keydown",Y,J),A(r,Y),xe()}var Mh=q('<div role="tabpanel" tabindex="0"><!></div>'),Rh=q('<div data-testid="tab-group"><div role="tablist"><!></div> <!></div>');function Oh(r,t){const e=Da(t),a=Re(t,["children","$$slots","$$events","$$legacy"]);_e(t,!1);const n=at(),o=at(),i=at();let s=m(t,"justify",8,"justify-start"),l=m(t,"border",8,"border-b border-surface-400-500-token"),c=m(t,"active",8,"border-b-2 border-surface-900-50-token"),d=m(t,"hover",8,"hover:variant-soft"),u=m(t,"flex",8,"flex-none"),g=m(t,"padding",8,"px-4 py-2"),p=m(t,"rounded",8,"rounded-tl-container-token rounded-tr-container-token"),b=m(t,"spacing",8,"space-y-1"),w=m(t,"regionList",8,""),y=m(t,"regionPanel",8,""),_=m(t,"labelledby",8,""),k=m(t,"panel",8,"");Xt("active",c()),Xt("hover",d()),Xt("flex",u()),Xt("padding",g()),Xt("rounded",p()),Xt("spacing",b());const x="space-y-4",T="flex overflow-x-auto hide-scrollbar",P="";ht(()=>I(a),()=>{S(n,`${x} ${a.class??""}`)}),ht(()=>(I(s()),I(l()),I(w())),()=>{S(o,`${T} ${s()} ${l()} ${w()}`)}),ht(()=>I(y()),()=>{S(i,`${P} ${y()}`)}),$e(),Je();var L=Rh(),R=v(L),z=v(R);Te(z,t,"default",{},null),h(R);var B=E(R,2);{var F=J=>{var K=Mh(),Y=v(K);Te(Y,t,"panel",{},null),h(K),C(()=>{U(K,`tab-panel ${f(i)??""}`),Mt(K,"aria-labelledby",k())}),A(J,K)};bt(B,J=>{e.panel&&J(F)})}h(L),C(()=>{U(L,`tab-group ${f(n)??""}`),U(R,`tab-list ${f(o)??""}`),Mt(R,"aria-labelledby",_())}),A(r,L),xe()}var Nh=q('<div class="tab-lead"><!></div>'),Lh=q('<label><div data-testid="tab" role="tab"><div class="h-0 w-0 overflow-hidden"><input></div> <div><!> <div class="tab-label"><!></div></div></div></label>');function Js(r,t){const e=Da(t),a=Re(t,["children","$$slots","$$events","$$legacy"]),n=Re(a,["group","name","value","title","controls","regionTab","active","hover","flex","padding","rounded","spacing"]);_e(t,!1);const o=at(),i=at(),s=at(),l=at(),c=at(),d=[];let u=m(t,"group",12),g=m(t,"name",8),p=m(t,"value",8),b=m(t,"title",8,""),w=m(t,"controls",8,""),y=m(t,"regionTab",8,""),_=m(t,"active",24,()=>te("active")),k=m(t,"hover",24,()=>te("hover")),x=m(t,"flex",24,()=>te("flex")),T=m(t,"padding",24,()=>te("padding")),P=m(t,"rounded",24,()=>te("rounded")),L=m(t,"spacing",24,()=>te("spacing"));const R="text-center cursor-pointer transition-colors duration-100",z="";let B=at();function F(G){if(["Enter","Space"].includes(G.code))G.preventDefault(),f(B).click();else if(G.code==="ArrowRight"){const Z=f(B).closest(".tab-list");if(!Z)return;const rt=Array.from(Z.querySelectorAll(".tab")),mt=f(B).closest(".tab");if(!mt)return;const kt=rt.indexOf(mt),yt=kt+1>=rt.length?0:kt+1,wt=rt[yt],St=wt?.querySelector("input");wt&&St&&(St.click(),wt.focus())}else if(G.code==="ArrowLeft"){const Z=f(B).closest(".tab-list");if(!Z)return;const rt=Array.from(Z.querySelectorAll(".tab")),mt=f(B).closest(".tab");if(!mt)return;const kt=rt.indexOf(mt),yt=kt-1<0?rt.length-1:kt-1,wt=rt[yt],St=wt?.querySelector("input");wt&&St&&(St.click(),wt.focus())}}function J(){return delete n.class,n}ht(()=>(I(p()),I(u())),()=>{S(o,p()===u())}),ht(()=>(f(o),I(_()),I(k())),()=>{S(i,f(o)?_():k())}),ht(()=>(I(x()),I(T()),I(P()),f(i),I(a)),()=>{S(s,`${R} ${x()} ${T()} ${P()} ${f(i)} ${a.class??""}`)}),ht(()=>I(L()),()=>{S(l,`${z} ${L()}`)}),ht(()=>I(y()),()=>{S(c,`${y()}`)}),$e(),Je();var K=Lh(),Y=v(K),ft=v(Y),lt=v(ft);mr(lt);const Ot=Aa(J);let jt;Ze(lt,G=>S(B,G),()=>f(B)),h(ft);var ot=E(ft,2),it=v(ot);{var W=G=>{var Z=Nh(),rt=v(Z);Te(rt,t,"lead",{},null),h(Z),A(G,Z)};bt(it,G=>{e.lead&&G(W)})}var nt=E(it,2),M=v(nt);Te(M,t,"default",{},null),h(nt),h(ot),h(Y),h(K),C(()=>{U(K,Ft(f(s))),Mt(K,"title",b()),U(Y,`tab ${f(c)??""}`),Mt(Y,"aria-controls",w()),Mt(Y,"aria-selected",f(o)),Mt(Y,"tabindex",f(o)?0:-1),jt=en(lt,jt,{type:"radio",name:g(),value:p(),...f(Ot),tabindex:"-1"}),U(ot,`tab-interface ${f(l)??""}`)}),vi(d,[],lt,()=>(p(),u()),u),ut("click",lt,function(G){Jt.call(this,t,G)}),ut("change",lt,function(G){Jt.call(this,t,G)}),ut("keydown",Y,F),ut("keydown",Y,function(G){Jt.call(this,t,G)}),ut("keyup",Y,function(G){Jt.call(this,t,G)}),ut("keypress",Y,function(G){Jt.call(this,t,G)}),A(r,K),xe()}var Fh=q("<header><!></header>"),jh=q("<article><!></article>"),zh=q('<img alt="Modal">'),Hh=q('<footer><button type="button"> </button></footer>'),Uh=q('<footer><button type="button"> </button> <button type="button"> </button></footer>'),qh=q('<form class="space-y-4"><input> <footer><button type="button"> </button> <button type="submit"> </button></footer></form>'),Wh=q('<div data-testid="modal" role="dialog" aria-modal="true"><!> <!> <!> <!></div>'),Gh=q('<div data-testid="modal-component" role="dialog" aria-modal="true"><!></div>'),Yh=q('<div data-testid="modal-backdrop"><div><!></div></div>');function Vh(r,t){const e=Re(t,["children","$$slots","$$events","$$legacy"]);_e(t,!1);const[a,n]=Ma(),o=()=>wr(ki,"$prefersReducedMotionStore",a),i=()=>wr(zt,"$modalStore",a),s=at(),l=at(),c=at(),d=at(),u=at(),g=bi();let p=m(t,"components",24,()=>({})),b=m(t,"position",8,"items-center"),w=m(t,"background",8,"bg-surface-100-800-token"),y=m(t,"width",8,"w-modal"),_=m(t,"height",8,"h-auto"),k=m(t,"padding",8,"p-4"),x=m(t,"spacing",8,"space-y-4"),T=m(t,"rounded",8,"rounded-container-token"),P=m(t,"shadow",8,"shadow-xl"),L=m(t,"zIndex",8,"z-[999]"),R=m(t,"buttonNeutral",8,"variant-ghost-surface"),z=m(t,"buttonPositive",8,"variant-filled"),B=m(t,"buttonTextCancel",12,"Cancel"),F=m(t,"buttonTextConfirm",12,"Confirm"),J=m(t,"buttonTextSubmit",12,"Submit"),K=m(t,"regionBackdrop",8,""),Y=m(t,"regionHeader",8,"text-2xl font-bold"),ft=m(t,"regionBody",8,"max-h-[200px] overflow-hidden"),lt=m(t,"regionFooter",8,"flex justify-end space-x-2"),Ot=m(t,"transitions",24,()=>!o()),jt=m(t,"transitionIn",8,La),ot=m(t,"transitionInParams",24,()=>({duration:150,opacity:0,x:0,y:100})),it=m(t,"transitionOut",8,La),W=m(t,"transitionOutParams",24,()=>({duration:150,opacity:0,x:0,y:100}));const nt="fixed top-0 left-0 right-0 bottom-0 bg-surface-backdrop-token p-4",M="w-full h-fit min-h-full overflow-y-auto flex justify-center",G="block overflow-y-auto",Z="w-full h-auto";let rt=at();const mt={buttonTextCancel:B(),buttonTextConfirm:F(),buttonTextSubmit:J()};let kt=at(),yt=!1,wt=at(),St=at(),qt=at("overflow-y-hidden");const zt=Gs();function Yt(O){O[0].type==="prompt"&&S(rt,O[0].value),B(O[0].buttonTextCancel||mt.buttonTextCancel),F(O[0].buttonTextConfirm||mt.buttonTextConfirm),J(O[0].buttonTextSubmit||mt.buttonTextSubmit),S(kt,typeof O[0].component=="string"?p()[O[0].component]:O[0].component)}function $(O){var pt;let st=O?.clientHeight;st||(st=(pt=O?.firstChild)==null?void 0:pt.clientHeight),st&&(st>f(St)?S(qt,"overflow-y-auto"):S(qt,"overflow-y-hidden"))}function H(O){if(!(O.target instanceof Element))return;const pt=O.target.classList;(pt.contains("modal-backdrop")||pt.contains("modal-transition"))&&(yt=!0)}function tt(O){if(!(O.target instanceof Element))return;const pt=O.target.classList;(pt.contains("modal-backdrop")||pt.contains("modal-transition"))&&yt&&(i()[0].response&&i()[0].response(void 0),zt.close(),g("backdrop",O)),yt=!1}function ct(){i()[0].response&&i()[0].response(!1),zt.close()}function Qt(){i()[0].response&&i()[0].response(!0),zt.close()}function dt(O){O.preventDefault(),i()[0].response&&(i()[0].valueAttr!==void 0&&"type"in i()[0].valueAttr&&i()[0].valueAttr.type==="number"?i()[0].response(parseInt(f(rt))):i()[0].response(f(rt))),zt.close()}function vt(O){i().length&&O.code==="Escape"&&ct()}ht(()=>i(),()=>{i().length&&Yt(i())}),ht(()=>f(wt),()=>{$(f(wt))}),ht(()=>(i(),I(b())),()=>{var O;S(s,((O=i()[0])==null?void 0:O.position)??b())}),ht(()=>(I(K()),I(L()),I(e),i()),()=>{var O;S(l,`${nt} ${K()} ${L()} ${e.class??""} ${((O=i()[0])==null?void 0:O.backdropClasses)??""}`)}),ht(()=>f(s),()=>{S(c,`${M} ${f(s)??""}`)}),ht(()=>(I(w()),I(y()),I(_()),I(k()),I(x()),I(T()),I(P()),i()),()=>{var O;S(d,`${G} ${w()} ${y()} ${_()} ${k()} ${x()} ${T()} ${P()} ${((O=i()[0])==null?void 0:O.modalClasses)??""}`)}),ht(()=>(I(b()),I(w()),I(y()),I(_()),I(k()),I(x()),I(T()),I(P()),I(R()),I(z()),I(B()),I(F()),I(J()),I(K()),I(Y()),I(ft()),I(lt())),()=>{S(u,{position:b(),background:w(),width:y(),height:_(),padding:k(),spacing:x(),rounded:T(),shadow:P(),buttonNeutral:R(),buttonPositive:z(),buttonTextCancel:B(),buttonTextConfirm:F(),buttonTextSubmit:J(),regionBackdrop:K(),regionHeader:Y(),regionBody:ft(),regionFooter:lt(),onClose:ct})}),$e(),Je();var Et=Me();ut("keydown",ui,vt);var _t=ee(Et);{var Dt=O=>{var pt=Me(),st=ee(pt);Af(st,i,Rt=>{var Nt=Yh(),Gt=v(Nt),xt=v(Gt);{var Ht=gt=>{var At=Wh(),ne=v(At);{var be=ae=>{var Lt=Fh(),oe=v(Lt);Ee(oe,()=>i()[0].title),h(Lt),C(()=>U(Lt,`modal-header ${Y()??""}`)),A(ae,Lt)};bt(ne,ae=>{var Lt;(Lt=i()[0])!=null&&Lt.title&&ae(be)})}var ge=E(ne,2);{var X=ae=>{var Lt=jh(),oe=v(Lt);Ee(oe,()=>i()[0].body),h(Lt),C(()=>U(Lt,`modal-body ${ft()??""}`)),A(ae,Lt)};bt(ge,ae=>{var Lt;(Lt=i()[0])!=null&&Lt.body&&ae(X)})}var $t=E(ge,2);{var Bt=ae=>{var Lt=zh();U(Lt,`modal-image ${Z}`),C(()=>{var oe;return Mt(Lt,"src",(oe=i()[0])==null?void 0:oe.image)}),A(ae,Lt)};bt($t,ae=>{var Lt,oe;(Lt=i()[0])!=null&&Lt.image&&typeof((oe=i()[0])==null?void 0:oe.image)=="string"&&ae(Bt)})}var Wt=E($t,2);{var re=ae=>{var Lt=Hh(),oe=v(Lt),ue=v(oe,!0);h(oe),h(Lt),C(()=>{U(Lt,`modal-footer ${lt()??""}`),U(oe,`btn ${R()??""}`),Q(ue,B())}),ut("click",oe,ct),A(ae,Lt)},Ce=ae=>{var Lt=Me(),oe=ee(Lt);{var ue=Ne=>{var Ve=Uh(),Ie=v(Ve),_r=v(Ie,!0);h(Ie);var He=E(Ie,2),xr=v(He,!0);h(He),h(Ve),C(()=>{U(Ve,`modal-footer ${lt()??""}`),U(Ie,`btn ${R()??""}`),Q(_r,B()),U(He,`btn ${z()??""}`),Q(xr,F())}),ut("click",Ie,ct),ut("click",He,Qt),A(Ne,Ve)},ve=Ne=>{var Ve=Me(),Ie=ee(Ve);{var _r=He=>{var xr=qh(),cn=v(xr);mr(cn);let zi;var jn=E(cn,2),dn=v(jn),Be=v(dn,!0);h(dn);var Hr=E(dn,2),ma=v(Hr,!0);h(Hr),h(jn),h(xr),C(()=>{zi=en(cn,zi,{class:"modal-prompt-input input",name:"prompt",type:"text",...i()[0].valueAttr}),U(jn,`modal-footer ${lt()??""}`),U(dn,`btn ${R()??""}`),Q(Be,B()),U(Hr,`btn ${z()??""}`),Q(ma,J())}),In(cn,()=>f(rt),wa=>S(rt,wa)),ut("click",dn,ct),ut("submit",xr,dt),A(He,xr)};bt(Ie,He=>{i()[0].type==="prompt"&&He(_r)},!0)}A(Ne,Ve)};bt(oe,Ne=>{i()[0].type==="confirm"?Ne(ue):Ne(ve,!1)},!0)}A(ae,Lt)};bt(Wt,ae=>{i()[0].type==="alert"?ae(re):ae(Ce,!1)})}h(At),Ze(At,ae=>S(wt,ae),()=>f(wt)),C(()=>{U(At,`modal ${f(d)??""}`),Mt(At,"aria-label",i()[0].title??"")}),A(gt,At)},et=gt=>{var At=Gh(),ne=v(At);{var be=X=>{var $t=Me(),Bt=ee($t);Is(Bt,()=>{var Wt;return(Wt=f(kt))==null?void 0:Wt.ref},(Wt,re)=>{re(Wt,hd(()=>{var Ce;return(Ce=f(kt))==null?void 0:Ce.props},{get parent(){return f(u)},children:(Ce,ae)=>{var Lt=Me(),oe=ee(Lt);Ee(oe,()=>{var ue;return(ue=f(kt))==null?void 0:ue.slot}),A(Ce,Lt)},$$slots:{default:!0}}))}),A(X,$t)},ge=X=>{var $t=Me(),Bt=ee($t);Is(Bt,()=>{var Wt;return(Wt=f(kt))==null?void 0:Wt.ref},(Wt,re)=>{re(Wt,hd(()=>{var Ce;return(Ce=f(kt))==null?void 0:Ce.props},{get parent(){return f(u)}}))}),A(X,$t)};bt(ne,X=>{var $t;($t=f(kt))!=null&&$t.slot?X(be):X(ge,!1)})}h(At),Ze(At,X=>S(wt,X),()=>f(wt)),C(()=>{var X;U(At,`modal contents ${((X=i()[0])==null?void 0:X.modalClasses)??""??""}`),Mt(At,"aria-label",i()[0].title??"")}),A(gt,At)};bt(xt,gt=>{i()[0].type!=="component"?gt(Ht):gt(et,!1)})}h(Gt),h(Nt),Nr(()=>ut("mousedown",Nt,H)),Nr(()=>ut("mouseup",Nt,tt)),Nr(()=>ut("touchstart",Nt,function(gt){Jt.call(this,t,gt)},void 0,!0)),Nr(()=>ut("touchend",Nt,function(gt){Jt.call(this,t,gt)},void 0,!0)),ca(Nt,(gt,At)=>Rd?.(gt,At),()=>!0),C(()=>{U(Nt,`modal-backdrop ${f(l)??""} ${f(qt)??""}`),U(Gt,`modal-transition ${f(c)??""}`)}),Fe(5,Gt,()=>jr,()=>({transition:jt(),params:ot(),enabled:Ot()})),Fe(6,Gt,()=>jr,()=>({transition:it(),params:W(),enabled:Ot()})),Fe(7,Nt,()=>jr,()=>({transition:Bn,params:{duration:150},enabled:Ot()})),A(Rt,Nt)}),A(O,pt)};bt(_t,O=>{i().length>0&&O(Dt)})}zf("innerHeight",O=>S(St,O)),A(r,Et),xe(),n()}var $h=q("<button><!></button>"),Jh=q('<button aria-label="Dismiss toast"> </button>'),Qh=q("<div><!> <!></div>"),Kh=q('<div aria-live="polite"><div data-testid="toast"><div class="text-base"><!></div> <!></div></div>'),Xh=q('<div data-testid="snackbar-wrapper"><div></div></div>');function Zh(r,t){const e=Re(t,["children","$$slots","$$events","$$legacy"]);_e(t,!1);const[a,n]=Ma(),o=()=>wr(ki,"$prefersReducedMotionStore",a),i=()=>wr(u,"$toastStore",a),s=at(),l=at(),c=at(),d=at(),u=Dd();let g=m(t,"position",8,"b"),p=m(t,"max",8,3),b=m(t,"background",8,"variant-filled-secondary"),w=m(t,"width",8,"max-w-[640px]"),y=m(t,"color",8,""),_=m(t,"padding",8,"p-4"),k=m(t,"spacing",8,"space-x-4"),x=m(t,"rounded",8,"rounded-container-token"),T=m(t,"shadow",8,"shadow-lg"),P=m(t,"zIndex",8,"z-[888]"),L=m(t,"buttonAction",8,"btn variant-filled"),R=m(t,"buttonDismiss",8,"btn-icon btn-icon-sm variant-filled"),z=m(t,"buttonDismissLabel",8,"\u2715"),B=m(t,"transitions",24,()=>!o()),F=m(t,"transitionIn",8,La),J=m(t,"transitionInParams",24,()=>({duration:250})),K=m(t,"transitionOut",8,La),Y=m(t,"transitionOutParams",24,()=>({duration:250}));const ft="flex fixed top-0 left-0 right-0 bottom-0 pointer-events-none",lt="flex flex-col gap-y-2",Ot="flex justify-between items-center pointer-events-auto",jt="flex items-center space-x-2";let ot=at(),it=at(),W=at({x:0,y:0});switch(g()){case"t":S(ot,"justify-center items-start"),S(it,"items-center"),S(W,{x:0,y:-100});break;case"b":S(ot,"justify-center items-end"),S(it,"items-center"),S(W,{x:0,y:100});break;case"l":S(ot,"justify-start items-center"),S(it,"items-start"),S(W,{x:-100,y:0});break;case"r":S(ot,"justify-end items-center"),S(it,"items-end"),S(W,{x:100,y:0});break;case"tl":S(ot,"justify-start items-start"),S(it,"items-start"),S(W,{x:-100,y:0});break;case"tr":S(ot,"justify-end items-start"),S(it,"items-end"),S(W,{x:100,y:0});break;case"bl":S(ot,"justify-start items-end"),S(it,"items-start"),S(W,{x:-100,y:0});break;case"br":S(ot,"justify-end items-end"),S(it,"items-end"),S(W,{x:100,y:0});break}function nt(yt){var wt,St;(St=(wt=i()[yt])==null?void 0:wt.action)==null||St.response(),u.close(i()[yt].id)}function M(yt){var wt;(wt=i()[yt])!=null&&wt.hoverable&&(u.freeze(yt),S(l,f(l)+" scale-[105%]"))}function G(yt){var wt;(wt=i()[yt])!=null&&wt.hoverable&&(u.unfreeze(yt),S(l,f(l).replace(" scale-[105%]","")))}let Z=at(!1);ht(()=>(f(ot),I(P()),I(e)),()=>{S(s,`${ft} ${f(ot)} ${P()} ${e.class||""}`)}),ht(()=>(f(it),I(_())),()=>{S(l,`${lt} ${f(it)} ${_()}`)}),ht(()=>(I(w()),I(y()),I(_()),I(k()),I(x()),I(T())),()=>{S(c,`${Ot} ${w()} ${y()} ${_()} ${k()} ${x()} ${T()}`)}),ht(()=>(i(),I(p())),()=>{S(d,Array.from(i()).slice(0,p()))}),ht(()=>f(d),()=>{f(d).length&&S(Z,!0)}),$e(),Je();var rt=Me(),mt=ee(rt);{var kt=yt=>{var wt=Xh(),St=v(wt);ur(St,15,()=>f(d),qt=>qt,(qt,zt,Yt)=>{var $=Kh(),H=v($),tt=v(H),ct=v(tt);Ee(ct,()=>f(zt).message),h(tt);var Qt=E(tt,2);{var dt=vt=>{var Et=Qh();U(Et,`toast-actions ${jt}`);var _t=v(Et);{var Dt=st=>{var Rt=$h(),Nt=v(Rt);Ee(Nt,()=>f(zt).action.label),h(Rt),C(()=>U(Rt,Ft(L()))),ut("click",Rt,()=>nt(f(Yt))),A(st,Rt)};bt(_t,st=>{f(zt).action&&st(Dt)})}var O=E(_t,2);{var pt=st=>{var Rt=Jh(),Nt=v(Rt,!0);h(Rt),C(()=>{U(Rt,Ft(R())),Q(Nt,z())}),ut("click",Rt,()=>u.close(f(zt).id)),A(st,Rt)};bt(O,st=>{f(zt).hideDismiss||st(pt)})}h(Et),A(vt,Et)};bt(Qt,vt=>{(f(zt).action||!f(zt).hideDismiss)&&vt(dt)})}h(H),h($),C(()=>{Mt($,"role",f(zt).hideDismiss?"alert":"alertdialog"),U(H,`toast ${f(c)??""} ${f(zt).background??b()??""} ${f(zt).classes??""??""}`)}),sd($,()=>Ld,()=>({duration:B()?250:0})),Fe(5,$,()=>jr,()=>({transition:F(),params:{x:f(W).x,y:f(W).y,...J()},enabled:B()})),Fe(6,$,()=>jr,()=>({transition:K(),params:{x:f(W).x,y:f(W).y,...Y()},enabled:B()})),ut("outroend",$,()=>{f(d).length===0&&S(Z,!1)}),ut("mouseenter",$,()=>M(f(Yt))),ut("mouseleave",$,()=>G(f(Yt))),A(qt,$)}),h(St),h(wt),C(()=>{U(wt,`snackbar-wrapper ${f(s)??""}`),U(St,`snackbar ${f(l)??""}`)}),A(yt,wt)};bt(mt,yt=>{(f(d).length>0||f(Z))&&yt(kt)})}A(r,rt),xe(),n()}const jd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxMAAAsTAQCanBgAADzWSURBVHhe7Z0HnBRF9sdrMyxZoiCegKCCOZ3xzKcCgp56CoqKohj+6pmznBGMGM+cQDALBgwneuZ4nieGU5KKIoqAIrCEDf1/3zddQ29vd09P2oD++BQzW93TXV316uWqLvhZUCowv8P8+OOP5uOPPzY9evQwvXr1MoWFhe6RYDiOY2bPnm2+/vprs+WWW5p27dq5R37bWCEwNTU1K6WDfvNYvny5M2LECKd58+bOjjvu6Hz77bfukXB88803zuabb+60aNHCueqqq5xVq1a5R+JB+t79tmZBnms5U7IqQWdrHhYvXmymTZvm/hWNlStXmpkzZxohMOVCcK9UKCkpMT/88INZtmyZqa6uNgUFBe6RaHzxxRdm6dKl7l9rJKqieX0Txi+//GKGDh1qhKOYs846y1RVRc+fsrIy0759eyWOyspK2Ll7JBxrr722ef31182ECRPMyJEjTXFxsXskHOeee67p27ev+b//+79Y92iqWGMJCy4yb9481YNeeOGFlBwINbNbt26qV8G94g567969lYDXWmsttyYatIM2iWqLGuLWrnlYYwmrdevWyoHATz/9ZL777jv9HgYIqmPHjqaoqEg5FmIUAsg1xo4dax588EFz/fXXm/Lycrd2zUOTIiy4CDqNKMluTThatmxpNt54YxVPiMXvv/8+JaF07dpVCYvrw1nywVHatm1rDjvsMLU64+hk6G60Jc4zNyY0GcJCPI0ePdoMGjTIiAWmXCUKDNr+++9vNthgA7PeeuupmEs1kB06dFDCgqDgcg0tqrj/zTffbAYPHmzGjRuXUk9sVJDGL5OZ3OghHMfZZpttYDmO6DXOl19+6R4JhwyEI7PdmTNnjn5PhX/9619Oq1at9B4nn3yyuiDiQvrR/ZY7VFRUOMJFtT177723s2TJEvdI44b0xZImw7FQjvv166cc5auvvjJTp05VMREFzu3UqZPp3r27fk8FxJQ9LxXH4t633Xab2XrrrVVfSsVBM0GzZs3MlVdeaf70pz+Z4cOHm+bNm7tHmgCaCscC77//vtOmTRudwZtuuqkjg+8eiQYz/7PPPnNk8N2aYMyePdvp3LmzXn+PPfZwfv31V/dIXcyfP9/Zbrvt9Ny+ffsqV4xC3DYEAU4lhOz+1fjRpDiWtNdstdVWZt9999W/P/30UzNlyhT9ngrXXHON2XHHHdWHFAUh2mRYZtGiRZEcCwcnliOAy6XyYV133XXahlGjRrk18dGiRYuU4aVGh8bAscTaiz0jZ8yYoSEUabrqWmLxuUfCIaJEzxcCcObNm+fW1gXtsHrcH/7wh0iO+MUXXzg9evTQc//4xz86QojukbrgulZXEmPCrQ0HoaFrr73WkYngiBUcW3+jD9PRC/OFRsGx3nvvPXPUUUeZ++67L5aesv7665tjjjlGvwuRmXvuuUe/R0EGXj/Ri15++WX9HgS87zvttJN+h3NFcSFcHzhhgYjPSP1HjAJ1kwARsfoZhaefflq565gxY8xTTz0Vyy1BKOqGG25QVwb6Z4OjoTnWgQce6EjHafD3zTffdGuj8c477ziiaMfiFkBEpiNEo+eLEhzKHeEMIt6cCy+8UC3EKC767rvvOq1bt9ZrCqG7tcE47rjj9DzKs88+69YGg/tvttlmei5t5j5xMHPmTGejjTbSvtxnn30y0uVyhUbBsbB40FGYccOGDdMwTCrgm8IaYyb/73//M//+97/dI8HgfOl09XSjR4VxAOrx2F922WVm1113jeQUePJFIdfv1sMfBvxjOGy32GILs+2227q1wXj44YfNl19+qd+HDBlixEjR76lAG0jd6dmzp+qhcazgvKKhORbWkrDv5Iw++OCDI60xi0cffVR1LazEl156ya0NBj6s//znP8ot0tFZoiDErHqTEIxytygsXLjQefHFF9UqTKVL3nXXXcq9hRidV155Ja22LliwQP176HQNCThWAYQlM7NBg1b//e9/zX777adcoFWrVkaIxuy99956LIxr4IV+5plnVNfBw17fPh70tY8++kitVThFrjgEz/PEE08ohxswYECsjInGBumTpQ3OsZiRzOKLLrrIKSkpUa5Fot3PP//snpFbYOkxo9PhBL8jPcCxGlzHgiPhozn99NONKPJah2ed2GBcEGT+8MMPk7E0eTb99IPcKeJuf//732OnxdQnPvnkkzUnAbChOZYX0qnO3/72N+eBBx5QX04criImv3PEEUeolYjfB+4X9jtSj+WRndLSUmfatGlubV288MILzvHHH+98+umnbk1dfPzxx3rOk08+6dZkDtorBoM+A5xbJpV7JByiPqi1+fLLL6fU2+obcKx6JSzcAjgWGRQGdvr06UlXgZ8Y+NtfFwQcntapKRaRI1aie6QurrvuOj2Pcs0117i1tcEg9evXT88R68qtrYujjz5az0HRZkJkA4wL3CZcb+DAgSmDzfRfly5d9Pw999yzjrGDGuHtZxR6FPv6Qr0RFlzl/vvvVw/4euutp51CWX/99bVu/Pjxah1mAjgbXE6UXC1XXHFF6KIGvPbWn7XTTju5tbUBMW+88cZ6Dt73MO7x8MMPKzFw7ziZE6mAxSgi2nn77bcjORA6IgQv6oOW8847L9lGnnvixIka5yQqYPuZCcfz3n333VlPgjioF8KCqE488UQ1yxmsoIKjcezYsaEEkQrMTBuchtuEKf4MWJ8+ffQ8wjuk4gRh11131XNoc1AICOLDAYkzkxAKf+cCccT/PffcoxOI9jEx4UwAg+Tss89OOm2DCu6ZSy+9NJaozQb1QljEvNBpmF277LKLM2HCBEcUbc1UuOOOO3TWYw3SWRCXv2MhTEQmeVVRIH/KdiDXCcMJJ5yQPI+2BAHvPMchrKBlYLkiJIAYw7cWR0/6/PPP1b9F2+C89957r3vEce68804VyxzDqkZPxdf2wQcf6HnUWW6NHpdPz3zeCeutt97SGSSWn3POOedoqokfyP4zzzxTCYuO8TobETFXX321cpn99tsvMjUFztKtWzftOJTgr7/+2j1SGyjbEDrnocwHEQmDwbH77rsvp0TkB4P717/+VScXYaooMLG22morbTflggsuSIpgOHb79u21HukQxGXh4qNGjdJnp6+feeYZ90jukXfC2n///fVhIYoovxQEs+WWW+q5WHh2MGHvgwYN0npEFwp31ExD3+BcyujRo93a2hCT3llnnXX0HJT+oDgj3AOdLxe6UxQgcjg5bbnkkkvc2mCghNv46IABA2q121q7iPCojAw44/bbb6/nDh48OG8iMa+EhQhBcYT9ouhaYqFDCFs8+OCDSUWSY6eddprOJBL46ACLJ554wmnXrp12BmIgKigL6+/YsaOeS/JdkBjj2tYC6969u5rtuQTPgni76aabnIsvvtj57rvv3CO1AQFsuOGG2g7SoVHao4D+dfvtt2vA25uWzb1IxaHvUC3sZCCdCIMJkYiVafsfAkb1IGAdxtWzhdwrf4SFlcMMo7z66qturePceuutTrNmzVTZJhZmgV4EEdLZX331lVubEBdXXnmlDgAF300YUKSJO8IFYPnoUH7dhQEaMmRIMqMCrmE7PR0Q+8O1EfRbYpLoZ3BZxGmQ/mSfl2fCH5Yqj8rex3+tuXPn6gTmfvjfLCAqng+F3VuP8k99r169Yq0byAQQVt487zbGJ/eBePU7YMMNmV0aE/RuoiEzzf1WG5x7xhlnmIMOOkhz0v/85z+7R+qCHHEbNxQCMo899phmTXjBsvjttttOc684hrc77N5heOihh7Q95JHZLFIvyEiQCaLrFMmqEEJ3jyRApECIT6ML9ANtpu1BIDfrueeeS7bRfy3bz/SxEJ1+B6xMsv3sXUyb7rNmDGlQxhwLvQmrLQhE9FG6mbU4Jr26EfqC15GJrB82bJhyGnSAIH2MGY0Ca2duGGjPzjvvrJyA602ePNk9shrc34pXIdRY2RReYFDAdfEVhek0tCNsYxE4NeKP+2OtBel5cNbLL79cuRoqQFiuGn2HaIcD+732WJFED+gzCmOAcs+YbLHFFrVUDgvOoz+ycajKNTIXhVgiuA8OPfTQ0Ie2IgxHY5QO8c9//jO5iIFdW3i4bADRwu65HjqbX8xgFDCgHIfArC8oLvBfCTdUq9fqNOlg6NChem+K12XgBVaiTWfu1KlTpG6JbsV5iET6Mgy011rOGDpBbcdyx92CQzVu4qUfWREWpisNhCvgUkCx9DeUAcSJx3kQznvvveceWQ3ypNZdd12dcXRgutwjDFhO3Jfr4o32gyxRe/y2225za+MD4s9kAjAhbRYHHC/MMkNXpG2c95e//CVSB+Ma1qpGd33ttdfcI6vB5EHJ55pw2zDnMD5G67o49dRT3dr0kBVhwWZRtLFGaASNxfloRZztdIKkmPc8EIo8pjFugzFjxqgSDavnGGIzlWWUDlCurbd/9913rxN/gwMgEuzABSGKG2XCqRBvpGJzT4jr8ccfd4/UhSUULNco6832M8+DQk5fMtFF/1PuT0HNKC8v1+sxib3KvB+I9iOPPFJVklS+tTBkRVhg1qxZGiuzDkcKK2fGjRuXtF6Q6zg9Ca7C3ex53oJPhZkSZD1lAjobcxuuRUfjR/MTFoNswzvMUL+uRGQAfQQrystVaCOW3imnnJK2CBVFPKlbsbI5ijvDdYh7wtHjgHZBCGJUJCe7vxBj5JxU/YwbKM7qpzBkRVgMHgUWjb6BGLMPwEJOq4Db8xhYTHs8zdtuu62zww476KyaNGmSPgjn5Ar2WiwwIPCK+yLo+taxSPHOYgiJFGk4GlyZkJIFDlbEOoOHcg2BesHAMeH89+OaPDuEznW9ky8I/N5/7ShwPoW+xKuONGAc6OfDDz9cU7m9/qx8Qu6RHcfygswBvOTIcYKhYbpDYwLOQ8tF4by20xkAVrpQj0IM97J46qmnkusa0UHQIy2YONQj+ukPLyBIxBDHcd6y6npNBYSVMz8W6/3YEQWfCxmaIh61njVud955p5HB0r8bAiKOjYgUXYfoxSabbKJ7OwAhnqRPCh8XPighOv2tTBKtB8uWLUtmqLL6hnOA6Fzm1ltv1e8iVutkggrRJffoEp3OiKWs3+sTCxcuNP/4xz/Uh5Z35Ipj2dnuBWwZ5RPFHo97QwGzGW6BCEM8WmAZ2cAuFhoGCeBZTj/9dBV3KL1wKft8N998sz4Pv7nhhhuSSjz6ls08QPx4fXH49KzrAA7pbUN9ggwI2o5Rw8a8+UJOOZboDu631aBOxIYWy8HSBVxERJaZOHFich1fupBO1PWKcBUv58Tzzzo82sl36XSt52/pfOVG1Nl6AAezx+E6lmNNmzZNPd88p+hSetxCLDYjirpywvPOO083XWsIcH/WVvKsoue5tflB3pd/CRfQDTZYrAmBEUZ59dVXVQSxbIpBigJiVPQfHdzJkyfrAtd0wY54hEZE/9Ml9JYYAEvPWGQh5nWtZVxz5swxzz//vIpElqLRdgCBIu7FpDeih2nIBPCMr7zyihIQCza8i1h5ZlQCjrGki9BUQ4BJxZI1Fu1uttlmbm3uIUwr3vKvVOZpOsCRinkv+k2sICieZEx0RBnOxUwR5ndCxIUdoz7o2cPqo67FsVz2Y0PBa6yEQZ41tShkI1Z2BmbZuVeJzRTsBcoMRrn1K7hB2GuvvXRp10svvaTB3UwRxvrhmGHHqPdyN4uw+qhrcSzoN00BGCMywZVzY6RhAAj9uEdDkIpj4c+R0yI3ImM2xgWBz4ceekgDsXGoPwjc77dUGhKkPBET9ubS9+/fP9LHJm1O7cciRIMjU/SNJJvHYUhiHp7hTKLgiIRMO4zf8fvfUmlIEKYTTpskKpyuXr9eECCsSOVdzqmjXFN34oknmrvuukutIPKNjjjiCM0pItcKq8j/m7hAuUXZR/ENe0kS96f8lhAmQul/Xs8iUkDfduE1GDIBfi728kL1wcfHfTFszj//fLUoMaLYyYY8ryjI+GS2dwMhHGKCXMMWUmPI7iQ9OFOwrg6Wy7VZphQketc0jhXnecLAWgF8ZkQCiAJwrTgIO48FL/ju8O15Y4Xki5EqBOLcQ87JzI8Fd3rzzTd11znMboCviN312LFu7ty5WpcuRNQq18JDfvnll5vDDz9clf01DdL37rfa39MFv8WFQDQgHcMKicJvRcetdf+uXbvqGODn8nJJ/rbjHFsaCXVl7HmHeslKIDYIl8FLjXfbG7TFAw21x6F0YnRwPa+iiEwn9cbmI3GdoFm9JpcwcIwsCBZuBGWDekG/UcjiQCE/5JBDNCrCekw7Nnzi3onzSr0oyHVyG4QmDZjovm0oYQNyobAsUy04tWDZFYl5drtECnlchE+4LsXf8WtyCfOLxYEdB0BYiUxTxsOuGqeQiMl9cgm5b+4Iyw66Fyz7ovFYFXGT+LgGnQmns2sKKaxRpJ7j/s7PZeEeQfUNUWhLNoQFcOmMGzdOtx4gXVtEmfYnn7vttlvGyXxRkDHK745+ONZ4Lx8ymh2ACWWgCxBWwAIhrIBcD7N6iBPy9gfOP+WUU3SfdGl3VnpJKnDt2HpEPYD20D/ptgldVcSkZlywU7QQqF6DscDJecIJJ2hMk9hhriFtzv+OfswYrzONhDoi/cweXnvLnlbkKsGJwkAWqkW6HCtzDiS/q1klpTLgWP2WqL4Jw4033phMzabwna2Xpk6dqmIxn5D21rUKpdLMnz/f/St74P9gLZ8Ff2PJENYhAMwbGwjbXHLJJWrdAGmbflqk8ptEISvuY4elnuB/7mxAaAkuxSf7u+KPuuWWW4zoWLFf2ulHUPuQPGR81IEQUpJjsfSH/HCsO5TnkSNHqnwmryqXIJzDEiiyM2Xg7fApJwtaB+hFuhwru8K96u9+Ydw1DFjK+JuCOBpGEH3JHveZ7j0WBO7JIhCW+rM2EQuexReso7SAY9UiLHLD7W52tuAwI7aXa9BAQgM4Re0eBhQWMEShfgmrcRQ/ICYWZrCmkxhuPhRwwBiRwOhVRQjtwXi8NMKCWetABXUIi4dgcQPuAbuAlJJqH/VsgP6FW+L888/XZUreFdJwNlH+nTfeeMOt+Z2wRKSpNUcqEdY240O2az7A/hIiNtUjb4HfUsSr3pdjLGfzv8WjDmF5gVh87rnnMl4NmwvYvUVpvMVvnbDsNpYU0VdVZWGFcz7AUjLuwzI5LyAumE2YbxLCKho1atQFoues1q5dkDFJMHLdddd1a+ofdvHBWWedpQHu+gDKfqYlX/BeG2WcV+rheqFfLr74Yg1A5+P+bCxCYJut0vlusfbaa2tKt82qDcCqenszxbfffmtEXus7cPClACFu/QzrFHxeIir1Aayvi9/Y32UK+2vvXblmJv4iP6Q/3W+5g9fPhwVG/JQ+pF/CEgu94NlEnVCfIT6suOB33A+rPp1+kd8trRfCEr1JXQoEp8l1J/cc5xyvhyOXPc1Ga4kDrht0rpiiUmTAalYf41wyVVmmhSPXO2Ac81/L2w7Meghq+PDhOptzTVxewvKC+8fpO17/izuHxR/k66dDXJlA2rU0uMU5Bg9vBwofGbPniiuu0L2pbMcsWLDAvP322xlnRgTBSwheFDAgvmO0A9FL+8hx+uyzz8z06dM1a4M2UViUAbfgO2/P4DhiyZ5HpCGX8BJvEGzf0Sbe++hdgeSFPY9P+z3fqBeOxQxGDLIRGoslCdEgEh9//HGzzjrraIeMGDHCvPjii7qChNxqVuPwySoZL1J1dqagwy2h3HTTTZpSUlpSagqLCk1hgZRCGRQpYjvo89AGUaz1O8mNJD+i93Tr1i1nHMs+pxXR/G0Jg1VB9BeFkA0hHPqQCetdrgZ4lhdeeEH7mpVIYRwwV5B21o8o9IJOZ3azitgunWLGsWTK/95BiIz3+9FhiE5A59oOzyUYMJZ2jRs3TnfsIwpguaxTzf3kvgWO1BXrM9iBBhDWcccdZ0aOHKmRhVwRloWXEPCe83Ywoha//PKLW5vALrvsom9Es/3aUICw6kUUekEnYeF5Hx69i2X5EBAWjg0BEYRmdQ5rAusDtA2FGEsIwiGURCkpKzGlzcrke4mGQyAerXfbybNQ5yW2fIFkStZlWqKiDeisRx99tK6kykdQORPUO8cKA7McKxCxyMphcq9ZAAo3YJb+0X2vcz45FiutH3roYfPIow+br0WHKi0tc48m2oeIsZmacDPqsFoRfyeddJI54IADIsWMbTf3Sgfea7IqnMxdOD5xP3LQt9lmGyWodA2hfAGOpYQlnKH8wgsvVKUUC4IFEoAAI0vH6RAsJWYlM4TBZmbzcPl8EKwt7m05A+BvO0C5BgM4ZcpzZuzY682cb78xRYWY2QlCIGi+1VZbqdKOmKTO1tNfo0aNUr0xCrbd6faZn1jRr0gVziY4nwq01bYTyYFhw8TjO/dFV7Ppyh988IG59NJL1beF5BFaSaTNkPpLiEAupPtJ4e0lIMrWPgQZOcb+6WzPw65xbMPDjm9kevo9w4AwDd5gPPd4aYVg1WOeCnHPsR7pXBeuzersQYMGO336bKDP2r37OhrL5JlZvY2neyP5m33S+/btp3t6EoTlGUHQdbMpjEOcfkkF0pdYqkcCZdj1OM7e9GzvJJxZ60hAYMdDxp4QDuk3ZKCSDm1jiKSmC7E5a6+9ti6mkesnQjqswmBzLgKadscVHoj9x4XlM80CC7sTB2U+EOPjJrYRNIo1iF6Qo024iMal03GcGzQAuShcm8Ar+6uutVZ7JZ6BA/dTwiI9muwLCIy3aXXp3MVp224tp43UswEbgeGga+aiZAN2BCT2y9oB0cU0yYB9vILAjkAiHXQLBLs9JWEb/vaPPVt9WsIiCG430oOWIKxIHQufDoozPh18NBSheGX/cj3N6kTh9rNqdobBWYj+YYHoxA/Ep9xT91qHhY4ePVp1BsC1zznnHDX7cTNgFaIsH3roocp6Afel5AOwfgrPjIXYv/8AEcPF5pJLLhXrdBszc+YsscgeN7379DEbbriBaVHeQp2OGB/sP+91qoaBtlsRExfe/sVtgO6J8o5IZIwIt+Bm6N69u3vWatAuDCAvcOWQXeoHm6CQWUoYD1eQ3TsMp/H999+fHA+2OmCPLxtB8UOeMX4GKRyMvB5YKWyfV3kwwyl+2MR99ulk91/y1WGvdvbxG1ItpMOU8i14vQnt8hdmnAW/9c/oXBauz7ORUcGMRKwjIsjLYoXLpElP6r5anEtfIO6pz2e7vPCnNdkiBo57Rm3Qv0Igym0JYLM6x/umEC+4F/vCs0rHP66IRmjAC/85FlKfu8UUftAI5DoJYIhLf6NYbEmaLMdsA8moYBWJcLVanebdtI1z/R2f68I9yBVj52UL2g/BkdYDwTHJSKJjEzXOz2e7vDj22GNr9Q3qBmLIvzWlBWPAtpSoHkwExsO2N1+Qa+d3MUVcSFuS4kE6Utk7bgdEJ+IFJ6m1gDiXkm8gfnDYYgnh6uCeDzwwzgwdOkSPsfWkjfJ7258PeEUhHnYWC+M769Kli4on1IZ07p/v9sr169/zni3oFEoYctlpDCjuBfZGwJWAzgjBE/bBKUm2QD4HyMJLWE0BayRh5RLch0HFyBArSTmY6Clmzz33VG5VX+34nbBiQHQVLcx+0VWSn3i0bYHd45wV/UstUbZXJNQD6pOwLMfCInrkkUe0TbRj6NCh5sADD8x4tUu68BIWFiEE3rlzZxWHhJ9wVOJExvNundh84tSuD47qR84JC4Ih/QXPNCID/YTBgDggFnQmvmMm48H1EhMuDM6H0IjG84m+RcHdQGAY1Cdh4WYhc4ClU7SfZyNhEZcJbcLVEie3ifZmM8BewmKRL9EQdE8KBARBEQ0hrMMr9ajjk3DPmWeemdRP6XtcOUQQvBkQjBt9znPlghCThCXfy1NdMFXnQCxnn322+kzgNBAEv5HrJ9NL7Cf1lLi45pprtINAur/NBDznO++8o23Ff0a7AUSF4swxJsbAgQPNzjvvrMTFuUH9Y9uazYB5CYsdeCZMmOD+FQ2IDX2QFHPAPmZPPfWUxjUJ3QEmMz5H6zvEF0Z6DRyR52Iz4HQD2/LMCcKSL+XsEmw38YJImJ1QOE5Lsj+HDBlSi8r9INGMLYzgVn7QqcwuZg7FsmquR6P5zmwh9oiVA3u3qbcoydzfxgvzTVi0FQIitYedlO1sDwJcmb05xdxXCy1f7fISFuNBFqiVAvxtvzNu9L/l+JtvvrmKcUQm4HnQF8lzmzJlitaRgsNLPYPAfSFGlukzTkiWcePGaUYw3JoYKf2FtIF24JI4a6UuQViffPJJOWkX/IAf2xlqgUlNQzbccEO3pi4gyAsuuECzQvHYQiA8ELMAIkHeU4c+YIkKwuFvGkRhhkGA3o70I5+EZbkKxIKLgfYG3cuexycDChfbbbfd9Lks+J09L134fxvVHwBuafVWOBAF4iIqQL9aoJuRZLnrrrsmuRjjduqpp5qPP/44SZzQgAWrqImktGzZUrkfHBqvP4s4GG/G7I477lAOSJYH2RfC6RKed2J7BJrlOoGFhZE416Ig11HnGzEzmcn6nbibNFIdikKssZ1yUedxjGvlo3DtefPm6Tq5uPcBeLL5XdDxTIoQiRb7t0Xc/guDfSY/GCvGl4iKcDR9EwfbphPfxfFq7yuEp0vx8OITcbDXsjsBeoPQyrHkIcqR21A04oiCOQ17t7JWfp/xDEwXzD5mDso+XBRRg9wHtIOSD/B8KOtwUmKZce4DN0HJ5zeIAelP90jmsPe1/W05FvUo7l9++aXp16+fSgPUBrh8fQKOhQSiPbSRlJq7775b9TN0QOFi9e9uSAX0luuvv15zuWUGKatGzrOZLuBh4gx4phg/frym+CJG4tyHQaed6GSIz3xMPq8oRE/C68+EZ7IdfPDBmm/vFcMNDem3+k9NToVZs2bpBvVYXhgU6A1ePSFfgCCw9CBsBi0dwDHgriIa3Jr8gb6gTzAw6CN2NIZjeAGhc05Dot4IC2sFpTIVYO2kZcBW4QBXXXWVZidmg7gcDhYPkaRDyFwbyxGCRAzmg2N5wUZ0p512mvqiSG+BuyKWAAo71nufPn00BMUCj4cffjjQUs838ioK4QDobTgY+cRkJXUV/SAMDBQzEB0LPc8fYOV4XEJJB9yDJWoUcte99wi6n7dNDByWJA5JrN1cty/IKsTFgJqABU4fcQ7EjW7IXvkW9DmWGvlT9jo2Lw5LLx+Q58/Pjn7PPvus7p9ExiLWJlmJ3E8erNY7/jKBtDdpLeWycF32SSUtJl3wW3aBsa/sDbp+NiUuuDdWGTlXZLzS56J76V6wtl2kILEnP3u5X3LJJWoBC6dzr5C95QnkGrlPm2EpN1zJC2YKMwSF+MYbb1Sfj3fG+yFtc7/V5gyAY97juQJtnPTkk+app59WHw/3QCxyf45R+C69ZqTrTZVTY5xqKfwtBb2G/VZ5owN/5xLcG9Am2sD1bV0YSD1ipRN+Jl5/h3iHs7I+EwerF1izOLeJydpzgb2f/YwLOX9p6G4zFuledNKkSeqF5zc4VskEOOqoozSNmbRXYl12kMLAMQpeYgiRB0f3yivkfhXLl5v5IiYYDPQm66y17bFt5rOQIsdsQWzjPIyKTsSFv8+998UdIlxfnZhMAO4dBCYymRh4x23UgmfCIY3IpBB6A+iWOE4J96CmWFUFAwDXBvflemlgVSxRiJMTJ+B0z4sBwoCz7d5779WEfTJCyRDFQZoJeOsUjjc2ZbWQ9tYRFbkqlSKiEQs8byYlX23zYtttt9UFLjLQzuDBg9Wh6T8nCqghQlS6eyNikRU4pC4LMWjhhQQWvKZYJrTuBX/SSSfpixzijKX0Q+3UZDpGFG71wHr1IGS0zETVl0hzzTW4ryiUqqMwQBZ0XIcOHXQZmkW+Bs8W//X52xZvfapjuSxeDBw4UPUmSwiinCtxsHUkfWjbkw7EEHBIw2ZFjxd42e19KBD0+PHj3aMJiAFRZ6WW3L82YYkl5owYMUIVu0cffdStdXQzU3KrcdnbZUG5BB3CggmUfdY1WpDUzxIxOJ9FPgeRyRRU39DFC/Lu77vvPkdUjFqve2N8WOI1evTorF9ZYgE3ZEnXpptuqoyFezzyyCPuUUdz/uGgbKlO+M6iDmFhEYk+ow0dMmSI1jGQFRUVujUgaw75O9dgA1XW6nFf1jdGIZ+E1ViLH0wA4nZMeAZddKAkgYl+qGsfWSic7VjZsSf+i/WImPRakMSQuScLe2FKFvK72ltFEhbAmkBpJeJt37aO8oci7vcpZQIi6Dj5ePk2KTH4UlAMpT2qoLP9ITHK37Ea/j5HYWesyGY97LDDNGcMZRwl3Gbd4mAmxspYZgruy9hjkGBAYdVjAFiQ80/KNpYmhovn2OqtIhlYYNOEbQ5PrsHiR2J/WBy8b5pYFw/A/WV21mp4EDjPtvW3gjDLzwsIi9QX8qvI2uWllVtssUXWjCAMjAHXxoUBkXvHTY7VfxAaz/agQYN0ZrHiONVGGn40NsKyHZwO0v1NHMKygCkwQeEy3CPoPpm0OR3I9es/CE2yIHt9UtIlqsaKdAk900HFz4QD9thjj03uAuQH3IMwDsQYdR8kBqEz4ovptj8OckpYiNE4jUTM4lBcExDGFfIBUonI4iT3Ca7Pe4jQWdMF7RXLUrND2b4qL0AUCjFkDRyivDHhjDPOCLRkcgUsFWsteb83tKsgn/e3IJuTHXBk2LTgzyImi1M6XfTv31+vgaPVe49cQMYlu70bcGby4vF99tkn+bAUNpbIBOxNxbt0uGaYhzcXxNSYCDJO8YINSXBcQhC2v/E74nNKB7zejxeN3nPPPW6No+nVV111lboW6JdMkTVhsSEGr8OwD4iX/IQTTtCQQSYgbMB18M3gOwmClygaY8kHofpBfjoSgk3gbN/jU6Jv4oJz8Ul5f8M7ebgWu9KkWuMQBblm/LfYy/nut9XAB0V+PCBjgb2bSCumPgpcK+h6LEvCl8UqEpTQ3xEMEvv2339/8+ijj2pWAjor+2Clo+txLn3s/Q3LxQBrHGzgOlOkdDfIDNQ0WJyjQQSDQ5WEM6w9sgLiAKLCGmHPd3wuhxxySHITL/6mo8KuFUaUDQ3bJjtQfOaqnVHuBtwLJFTaTdKyBYtXWMZFFoQfrGEkAZPjUVkc8typE/2IgKMw8to3bzwoWxByIHJOO3jNbDqAfTe24hVdYfX+Y0El6LzGAFQTm7zJsrAoHUzanFoUwm6hYkxdZke2kPvqJ9yPBaGAUEE6gBs0tgJXsSWs3n8sqASdFwekFlaLupX4lH6m0gfq7HE+00lHhFPxShrys1B5kGRRSCkKyVVnn1A2wSAXPFXIJQy8fYIYFkRkCYpl2YQEWDyRLeQ5VCQgRjNtY2MGkQry6nnO/v37qxPUC1EQEp+Vy82qioVm1YpfTOWyn0xNNe9rdkxRSUtT2rKDKW3W1hRLKShupr8REtbfpQIOVfxn7FNKuAjdLgzCPOKFdHB8MlhxZ48XNAiud/PNN2vAkpUjOOVyqZzDBdlfgA1Zhw8froFZL3Ghz/GKEN6I4V/ahY6I0xGPNnqkBdz5/fffV+OELEwL6lnXhw7iXxTCwlUIgBid1RFpG/02Y8YM3eOA32QSGGZBMesHuRbxVl4e4MWqigXmp88nm4q575jlC6YbZ+UvcnN4E0LJ5V8Fxaa4RWdTttb6plXPvUz73nuZ4tL0FlTw/KnGDsKKZRVmSlSA1OKTTz5ZB4lBZDdiZl0csHSJVGcIOwoQ77XXXqs7AU+ePLmOyIZw2M8KTzOeaiuOAS9k4hhhEq8Xm5Ut1BMk9656oT1wbgoEZkG2BlYt9exhZe9BvxEfJUUbTsNayUxgNx0hH71lqwQx2FWMi2a9Yr58/Ejz/WuXmyVfv2mcFUuED5WYgsIyEavFUkq0SGNM5dIfzOJZU82cF880s6acZpb+9IWSHYINDpbgfKv7xwvuH5chxCKsdIlKlE/lEOxiwtZGpHMwS1kDx5q4OOv2kOeskeMabLoRBR6W+/DqD5Y5+R+eTSsQxeTQs8DAPg8ZAeTn0z6OzZw5U+sBxIAVBKeBsCyhsOLZ1vMbO0m4PvVMHF6U5CVuFpYSl2PBBZtneAk7LhA977z9jnle9BsbY61e9qOZPfUCM2PS0WbVohmmtEUHU9SstSkoEm4pBAWHqqpxzMqqai1VMi4FUl/SvI0pLW9rfv1qqvl84gFm3gd3moJVdu2hFap1kQ4dxCKsdEGHQxCwbMDCyquvvlo3T4taU+gFsUQWXtCJ5P2kwvHHH69KJcToFTWIJ3bjA+SUsce5BVs1MdgA0WYXbKCYwr0gGnLFEIe2U2mXFbMQkiUsBt6KUjiWl/vRF4haQKoQ7wrKBP027mc2ZzFKQaFZsWSucJxTzC+fPiL6luiVQlAgQbSJUlW5zJS27Wm6/+l8s96frzRt199XdC72KBMCk39l5e1N85JCM+/ta8yc10ebmiomA8+ZHiMJQl4Ii8FEMech2V8AgmKVTtzAM78jsYwVKWyfxMreVMCSYutGv9geM2aMcibAu429m94jmuE0AOK3viAIC0OAdthENwsIzV4fw8MSFsRvX3LAJmb0gQUGBaIWoO8hZjPhWoBfVS5faGZPOdlUfPu+KS5ra5zCZkoo/EMZr5GzqqtXiKgsNt33uMx02vSvpkOfAWa93S4wrXvsaqqEO+lbZrleYbkpKW1tFnw03nzz2hVSw++zR04IC7bP4NnOQuQhkthzi1egkcnIgHMOBIf7goJYsYPu7Wg7cHAQ69nPBIgg+0o6xCQ7oXgBZ4WAADvXWRGNTod4pE2IVa8FBvFCxIBzLGHRZvQrQB2rv71A/4IDcy0v4acLp3ql+fbN64Wo3jMl5WvJjWsPIb3I1WsqV5hW62xjWnfpZ37874Pm8ydHCrdaaTpscqj8pLm00aO3FhSJGG1nFvz7djP/v+NMgXC0bJE1YeGOgIAYNPQqBoOQACyfHWJIb0bn4u2qpLDaRZEsR+c7BIhC7PeLeDvfPxCcm8oIgNjZXAQrDQsNa9QfOfC+CgTl2oLfYsEBfuvV2XCVWMLCt+NtA8q5nQgYEd7JgkVKqgrqwUUXXZQWcSlnSXw1i4Wgfv7iGVPaMvFOxdVHErBXdZwaIbz2xhECWv7jf8yCjx80i6Y/b5p37Guate8hs2eFnGt/K5ar6F7NW3U0c9/9h1m+aLZb6796fGRFWKyoxb+F9YbCyiy1HY34YAAYJNwLI0aMUB0IpRjLCG6FuMCa4hjbB0Ew3sEIA0SK7sW+pGHnoyxjidIe8r/RrfxmvrXQEGPepEMmgrVE+Y03bublOP4kOTis3d3Z7mNlwXVwQ8C54uiMXnifcP7HE02BU2lqCspEZAUTJ+o377wuKipTAnOkD0plclQvX2AKy1qK+GxjatQVsRrco1rEorNqsfl55vNKkNkgY8JC/yEQyrZDDB6ciY6zs9mCWYrLAWWW3WPwN+EW4PfsJINegkhhw1V0jzgzGQJFN2J/TfScIEDoWG4An49dGOIFjj7ENi4HL/F4OZaa9x5OB0ey23AT1/RzTd4LDahHiQ8C4p+Vx8Rg48D2yK/zPjSLv3rVFJag8wnxJKp9gERExxLCKm3dVURnlalZ9av0a6EQS5VwJplcxeWmGiuxcqXUJQiMa2kpKjE/f/mcqVqxOFmXCVIusQ8D3Am2DmfCEhs7dqzOei9hocMMHz5cOxJfFk5SBhnvO6KBQSATEuLgXAaCzAY4TBT4PVYcyjhWpp8Y8WsdeeSRKqpoH2LZq6tZLoOlRgAcz7/3GhAZ+7tjMSLiyRywz8X14KxMKByxPIOXE/KdfqENXAdR7+eUqAhwaYgfP5nfix4EWvzjh3eYiu8+EI7TWgacfxC1o9ZctViANdWr5PsKU7VymSnvurVZZ4dTVdea/5/7jVNVYYqEU7Xtubtp3W1r0w7naMsupmL+Z/qbQghOrojFWbl0vilbq6cp75Sw4DMgrtWrdNyK2GBWw2Gw9EiZCcp8QKdCbMH+2SA1bMN9PPJwP1aZoK8ROojiXBCGHTg/hwRwSPxlnAeBwTWjrucHv0PMwUlps1fH4hhiEg6Mtef3meELQ3fEMoRgibH6l7OhGvAaOODdajwMENVKEWPTHx1qqhfPMUWldgWVcB2x8ApL25jmbbooR0KZb9ahr+m8zfGmebse5vuPJph5b44xJcVFprKmwHTa+gTTfoOBpqxNV1Mo5y+Y8az5+oVzTVmpcMHCRLRg1bIFpnXvP5veg+7Qe6cr1qSPMl9MQYeiEOPNDiIqRNVbb72lyu+wYcOSm4NhhUFkzGq7ERscCJHEzGaRBTHFKEAk3D+IqOAyiFgIAPcBg+gnKtqAbgeXDPLqcz4ikEnjJxyO8UxwQP8xgJ5ldSivn8wLDAWblkKohvOiQOsrF8811UvnSh+tTieCQzXr+kfT+6CJZoMhk80GQ5/Rsu6eo01hcXOxBseZH96+NsExC4pNUYFjfnjrWjN9Yn/zxcRBpmLRLNNxwwNEod9IRPdq46mwuMRULf5Kro+CnxkyJqxUYPAgHNg8+TuWCFD08ekgChhYwGBBXLgk4IRxdv7zA0Ki8JZ3dB9wzDHHqH/KC85BbBOuQcx5wzW5AFYjnIpnwU8GF/brYezGh74JmIBej38YVi37yTiiExV4JhNKeefNDjEt2vcyi2b80/z40QMi9u4zc1670syYNMLMff0qUyzEVFhULM9dJdytwrTrtYtp1WUTs+z7j8yyH7DiRbFvs45cbLUyX4jHvmKRqVq+yK1JH3kjLAsG0gvEAoSErhLE6TIF14TTodgjJhFhiGAbDLZAn8O/hShD1FklPVdgAkE4iGl0MZR02uMFInTkyJHqbIUrxnIcJ/vR8hA+xfIrFq4pX38UPeqbqRebb4WoFk0bb1b+MlvaUmCcQmmHcOUVi380HfodaNr3PcAs/1msYRR4wjhCWMWlLTzXF0hfJqKGtccuHeSNsAhvIBYYSILA1k81ePBgdZpCANZTjTjiHD6Z8Tatht/ce++9mjLL3lreMEkQEKOY+QAL1abaeoFCjw8M0Ea7zXeuwETCALHPQJwziAPDMXnZAr40uHVK1BljKshSTXDDwpLmpqRZay2kyJS139CUdugnivxSU1DWzvQYcJMQ1UHmuzeuFm40XwiyNGEh6jXIwNDLJJG4XSMkLHQQRA3EgTLtFTlYj15LjEAwSi4iA8XX6mN0PLsDIk5wTyBaooDVad0PKO92cL1ARFudho3L0t0h2QJxCyHbCWPBM2HV8vJOgGESJtqxjL2pOlEguFwoCrglpNVI9CH3JUyjnyLWSsrbmV4DbzI9B99lNjjwPrEIW5lZz55sKpctNMUlhICE27WQe4uyj9jzOi/4Pek0q42E9JFXUcgGH3AETHPCHXAlP9Av0LfgIhAC/ixLcKNGjUpuNc3udOhqYcBQsJ50fFaIwSAgduBkED7iyOu/Sge4Ogg833LLLW7NatB+tsmmvbzIyRufzATwjZIWHeS/lkm/U11In2m3FahOtfjr183MZ/9m2v5hB1Mx/1Mz+7nTTM2qJeoDSwi5QlNW3onGCrHNl4/VpFBTXWWKytsLcdXNe4+LvO/dQBAZFwLchsHErwWnwLsNR8LHhIhjluPwxM8FFyAcw443gAF64403dIaHAX8UCYVYaoRTCBuFAQ6C3mM5Y7pAdGAUQPToUxghdjJ4wX1Q4i3xBp0TBxAWsb3Zz55olsx8WdSjRBYGvqv1Btxo2vXc00yfdIxZ8t17ci/inRAOBLPQtOy2uan8VSxK0acKSsqlvsY4K381JW16mt5/ud9Urlxs/vfQX00ZUrEQK9cRQ2Gh6bTdiab7jmfpvdPlPtI/+d+7AecifilCKogg/DZwCrIhIR6ICmIiAwLdBLBjCi8BArgMMMmjiAoQZEanY79TXBdRwFLNlKgABGIzIbDqwkQd98F44PwoorIGDiEm/GdBIFGv7fp7m6qaKiUOMhjcI/o/3MhZschUr1go5WdTI9+LigrNsu/e1+Q+p3q5qVm+wFRjXRaVm7V3OMUUCxec/+G9ouRWqJIPOdaI9VjcqrPpsMEgZYCZTYV64Fh0GoVgMHlRcBXEHtYTSiued+KNWEjUsQc53mosN3532WWXmXPOOSelyMJNAQdBZwlaupRrMAkITdFm9KhU0YJUuP3221Wf5FnZfdn7vJaEqqsqzKcPDFACKSJnXYipx363mTY9djPfvD7aLP/hE9HDiA/S5wmvvCUM5WFCPM3ar286bnygad6ut1k04znz1T/PEQJM+AQ5t7JypWn1hx1Nr33HihGQGVnI/RvmXTpYf8xgxIQfODfPO+887Rx8PXjusx20dMG9QRSX4ZVqcFzENMYHEyNToBbwrBgD6GRwb68rhtZQ4E3ff3iP+f6ta01JaQvjVC0z7Tc/yqy9zfEarllNROFwCPmsWGyWzP1AXRNO5ZIEkeoz18jYrDK99rvFtFtvF/mL/K700WCEFQb0Md63jHhEV8IStEHd+gSZFliicA4SDv1gELAKMUYwTkgTyhZwaJzHcHC4oT++aLFSRNmMycea6oWfmQKx3ETNNq26bqOcKEEcQl7JCSGfLpVRhbW3aslcs2LBdP0slIOFbhiHE6ukrnW/Q0yPva7MmFuBRkVYiBP0MBvxv/zyy9WyAlGcIy4QlXfeeafqPYSY/I5TC9wRiGjcFhAWXno/GMA4bUoMdCLDA2OBuGVYvj/n0kbahVgKAyJt0eyXzcwnjjKlzRPLuKoqlwsnWmUcaRLpMom7EqTWHySBO6KosEh+wz0SmbaJs0TRX77QOCWtzSZHTjGlrbomfpshIKy8K+9xgPebmB5xNR6WiD8pLfrgMQYwDnAL4P4499xzNTkxDOSIQVxYpnwGIW6bOA8LlbRsAs24Qyyx+cG5NocNfTTMIEBrWkuswJ4Db9I3ZJCwV1ZSZsqatzTNm7U0zZq3ksJba/mUv8vlU0oZn/J3aVlz4Ybe9O0asRiXmpK2PUyfg+5XovJ7yjJBoyAsMkhJIRbuqdwCIstGZ/EDSws/lw2thA0uwMqziPKbxQX6E4AD0oagoLcXED3qAItDrA/PCxybkFfHjf5ieg64yRQ0byNGnVh6Ul0jYrFGh7RIzqAUu5+I1UThu8vLDKnKlUu+N2UdN5Jr3Whad95UjwQL4fTQ4IRFh+NasLnvOEtxhuYSrKbBlIegcDNEbaDh9e7HCrWkABEGK3bRo8LcCRbkaBHuIgOEpWpMtrpA3NWYdmIN9trvH6a02w5m+a/zVSRCesKOEp8BJcGpakSB/9WsWlFhWvUbYnrvf5dp0amvHOZYbtDghEX+N555wNvqsQijdAzA4OCURGxZjhAFjAFihABlOyroi1UGMWA0RDlZ44IoAIsoAOnYqTgWDlf0QJ4LhzGTwovE0CeIpLqg0LTovJnpd8gjwnFuMM1If6mGaJaqeMOB6lRWmBopfKeucuVS5Wwt19vZbHjQA6b3vteY4uZrCaHmjqgUKO8ykxsM7FwiFpBuM8n7XeKAjfOF6zjdu3d33n//fbc2HMINdbecPfbYw+HVHmGQvtBP0fV0dzv7d7bgdXX77ruvM2bMmFob8AdB9E1n+PDhKu+Ki4udCRMmuEeiUSP/VlUsdJb+MM354ZOJzjf/GuXMnHKCM+PpEVpmP3+KM+eNK52F059zlv30P6dqZWab48WB9Ft2O/rlAnQkb70QURV7IHfYYYeEoiFl6tSpbm00uI9wLt0iqL7Bc0HcYvW5NdFgr1EmG8/32GOPubXR4Klq5H96sKamyqmuWuFUV1Y41auWJYp8r6mS+0tb9Bz33HwAwmpUfqw4YGUQGRAA0YnvK9NAcrawS+rJkCCclEuQWoT4RjSHuUa8gAot+B4m2PzHciwAFUJb+XnDar6wYMGC5L6bLVu2dN599133SDTGjx+v4qgqiw1b/UCknXzyyc66667rDBs2LON9V4MQl3M3VsCxGoW7IS7Ym8ku6SItJs4+ECQKEvQmP9+mLOcCGAS4BrA22YuBGGeusNrHlAAuEH/eV2NHkyEsnIbE0HCm4uMiiTCVrwsLDG87zkb2SQ1zOmYCnJn2/vjHaFeuITNfExYJGRFDtX64poAmQ1gQCcQlnFY5VZwYIu4Iy+FI7gtbfpYJ0HtI4IO7MOCEY3INuBS+L4iW5WRNiWs1GcLCscmsxStPVgFJg36R4QdZB5ZLkQ4Nl8kVMBggLHxuEFYqx2cm4B7kopFJSygqzr5ijQVNhrAgou22207zs3AipiIqHIzsuAeng7vAsVJZj+hNbBHOmsNUhAJBYQnyybn8Ni6wJmkX3DcVcLCSp8V2lameuTGhSSnv6YDBs555uBvp0KkGhjAKcTrep8jOOamAaIWwEIO4HdCJUsFuNYnul0q0NSVC8mONJSxEoOUicZZ5McjsTkPs0pZUIFMVwoJ4SbuOQ1iIczJPCdfk0phobFhjCQsuxSoaRCB5VamWWaEnseAV8USSIfG6VEDvg6vwG/9eWWFgFRLrKVlX2JR0prQhndFkHKTpQjiCviFfntGtCcfixYud3XffXZ2vOD2nTZvmHgnH66+/7gjX0t/wginCRnGAozdueKcpQvq7aTlI0wUcgRSZOLoKy95JC4ZTbb/99roRbiqwKJVd/BCJrDSKE3oBKP1xz22qaHKxwnwDJRyxGbTQIwzkcEXleP3WIExraYEorVVFYZn7v+N3ZABoCo7FZlS58xz+jt9hTMX/A/eR72+RaQ9jAAAAAElFTkSuQmCC",tg='<svg viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"/></svg>';var eg=q('<div data-theme="skeleton"><section class="overflow-hidden h-full"><!></section> <div class="absolute top-2 right-2 z-1 select-none flex items-center gap-1"><a target="_blank" href="https://github.com/drunkg00se/Pixiv-Downloader" class="w-5 fill-current"><!></a> <button class="btn-icon btn-icon-sm bg-transparent font-bold hover:text-xl">\u2715</button></div></div>');function zd(r,t){_e(t,!0);const[e,a]=Ma(),n=()=>wr(d,"$modalStore",e);let o=m(t,"padding",3,"py-6 px-8"),i=m(t,"width",3,"w-full md:max-w-screen-sm lg:max-w-screen-md xl:max-w-screen-lg"),s=m(t,"height",3,""),l=m(t,"class",3,"");const c=de(()=>`${o()} ${i()} ${s()} ${l()}`),d=Gs();var u=Me(),g=ee(u);{var p=b=>{var w=eg(),y=v(w),_=v(y);If(_,()=>t.children),h(y);var k=E(y,2),x=v(k),T=v(x);Ee(T,()=>tg),h(x);var P=E(x,2);P.__click=function(...L){var R;(R=t.parent.onClose)==null||R.apply(this,L)},h(k),h(w),C(()=>U(w,`relative rounded-container-token shadow-xl bg-scroll ${f(c)??""}`)),A(b,w)};bt(g,b=>{n()[0]&&b(p)})}A(r,u),xe(),a()}sa(["click"]);const rg={setting:{save_to:{title:"Save To",label:{directory:"Save Path",filename:"Filename"},options:{use_fsa:"Use FileSystemAccess API",fsa_directory:"Select directory",fsa_filename_conflict:"When filename conflicts",tag_language:"Tag Language",tag_language_tips:"Tags without translation may still be in another language"},button:{choose_fsa_directory:"Browse"},radio:{filename_conflict_option_uniquify:"Uniquify",filename_conflict_option_overwrite:"Overwrite",filename_conflict_option_prompt:"Prompt"},placeholder:{sub_directory_unused:"Leave folder name blank if not saving to a subdirectory",vm_not_supported:"Not supported by Violentmonkey",need_browser_api:"Browser API required",filename_requried:"Required"}},ugoira:{title:"Ugoira",label:{format:"Ugoira Format",quality:"Ugoira Quality"},options:{select_format:"Convert Ugoira to selected format",gif_tips:"Lower values produce better colors, but slow processing significantly",webm_tips:"0 (worst) to 99 (best)",webp_lossy:"Lossless Webp",webp_quality:"Image Quality",webp_quality_tips:"For lossy, 0 gives the smallest size and 100 the largest. For lossless, 0 is the fastest but gives larger files compared to the slowest, but best, 100.",webp_method:"Compression Method",webp_method_tips:"Quality/speed trade-off (0=fast, 6=slower-better)",png_tips:"Number of colors in the result; 0: all colors (lossless PNG)"}},history:{title:"History",label:{scheduled_backups:"Scheduled Backups",export:"Export",import:"Import",clear:"Clear"},options:{scheduled_backups:"Automatically back up download history at selected intervals.",export_as_json:"Export download history as JSON file",export_as_csv:"Export download history as CSV file",import_json:"Import JSON format download history",clear_history:"Clear download history"},button:{export:"Export",import:"Import",clear:"Clear"},select:{backup_interval_never:"Never",backup_interval_every_day:"Every day",backup_interval_every_7_day:"7 days",backup_interval_every_30_day:"30 days"},text:{confirm_clear_history:"Do you really want to clear history?"}},button_position:{title:"Button",label:{common:"Common",my_bookmark:"My Bookmark",gallery:"Gallery"},options:{horizontal_position:"Horizontal Position",vertical_position:"Vertical Position",horizontal_alignment:"Horizontal Alignment",vertical_alignment:"Vertical Alignment"}},authorization:{title:"Auth"},others:{title:"Others",options:{show_setting_button:"Show Setting Button",bundle_multipage_illust:"Bundle multipage illustrations into a zip file",bundle_manga:"Bundle manga into a zip file",like_illust_when_downloading:"Like the artwork when downloading",add_bookmark_when_downloading:"Bookmark artwork when downloading",add_bookmark_with_tags:"Add tags when bookmarking",add_bookmark_private_r18:"Bookmark R-18 artwork as private",option_does_not_apply_to_batch_download:"This option does not apply to batch download"}},feedback:{title:"Feedback",label:{feedback:"Feedback",donate:"Donate"},text:{feedback_desc:'If you encounter any issues or have suggestions for improvements, feel free to provide feedback <a href="https://github.com/drunkg00se/Pixiv-Downloader/issues" target="_blank" class=" anchor">here.</a>',give_me_a_star:'If the script is helpful to you, please <a href="https://github.com/drunkg00se/Pixiv-Downloader" target="_blank" class="anchor">click here and give me a \u2B50Star on GitHub.</a>',donate_desc:"Or, buy me a cola. ^_^"}}},downloader:{category:{tab_name:"Category",filter:{exclude_downloaded:"Exclude Downloaded",exclude_blacklist:"Exclude Blacklist",image:"Image",video:"Video",download_all_pages:"All Pages",download_selected_pages:"Custom Pages",pixiv_illust:"Illustration",pixiv_manga:"Manga",pixiv_ugoira:"Ugoira"}},tag_filter:{tab_name:"Tags",placeholder:{blacklist_tag:"Blacklist: Exclude works with these tags.",whitelist_tag:"Whitelist: Only download works with these tags."}},others:{tab_name:"others",options:{retry_failed:"Retry failed image downloads."}},download_type:{stop:"Stop",pixiv_works:"Works",pixiv_bookmark:"Bookmarks",pixiv_bookmark_public:"Public",pixiv_bookmark_private:"Private",pixiv_follow_latest_all:"All",pixiv_follow_latest_r18:"R-18",pixiv_series:"Series",moebooru_posts:"Posts",moebooru_pool:"Pool",moebooru_popular_1d:"1d",moebooru_popular_1w:"1w",moebooru_popular_1m:"1m",moebooru_popular_1y:"1y",moebooru_popular_date:"Popular"},file_handle_not_found:{title:"Duplicate / Invalid File Name",button:{save:"Save",cancel:"Cancel"}},failed_downloads:"Failed downloads"},button:{setting:"Setting"},changelog:{feedback:"Feedback / Report an issue",credit:"Click here to support me!",give_me_a_star:"Give me a \u2B50Star on GitHub.",buy_me_a_drink:"Or, buy me a vanilla-flavored iced cola. ^_^"},toast:{message:{pick_directory_handle:"Select a folder to save",file_handle_not_found:"The file name is duplicated or invalid. Please save it manually.",request_directory_handle_permission:"Please allow permission to edit files and folders."},actionLabel:{browse:"Browse",save:"Save",allow_permission:"Allow"}}},ag={setting:{save_to:{title:"\u4FDD\u5B58\u81F3",label:{directory:"\u4FDD\u5B58\u4F4D\u7F6E",filename:"\u6587\u4EF6\u540D"},options:{use_fsa:"\u4F7F\u7528FileSystemAccess API",fsa_directory:"\u9009\u62E9\u4FDD\u5B58\u6587\u4EF6\u5939",fsa_filename_conflict:"\u5F53\u6587\u4EF6\u540D\u91CD\u590D\u65F6",tag_language:"\u4F7F\u7528\u7684\u6807\u7B7E\u8BED\u8A00",tag_language_tips:"\u65E0\u7FFB\u8BD1\u7684\u6807\u7B7E\u4ECD\u53EF\u80FD\u662F\u5176\u4ED6\u8BED\u8A00"},button:{choose_fsa_directory:"\u6D4F\u89C8"},radio:{filename_conflict_option_uniquify:"\u91CD\u547D\u540D",filename_conflict_option_overwrite:"\u8986\u76D6",filename_conflict_option_prompt:"\u63D0\u793A"},placeholder:{sub_directory_unused:"\u5982\u4E0D\u9700\u8981\u4FDD\u5B58\u5230\u5B50\u76EE\u5F55\uFF0C\u6B64\u884C\u7559\u7A7A\u5373\u53EF",vm_not_supported:"Violentmonkey\u4E0D\u652F\u6301",need_browser_api:'\u8BF7\u5C06\u4E0B\u8F7D\u6A21\u5F0F\u8BBE\u7F6E\u4E3A"Browser Api"',filename_requried:"\u5FC5\u586B"}},ugoira:{title:"\u52A8\u56FE\u8F6C\u6362",label:{format:"\u52A8\u56FE\u683C\u5F0F",quality:"\u52A8\u56FE\u8D28\u91CF"},options:{select_format:"\u5C06\u52A8\u56FE\u8F6C\u6362\u5230\u6240\u9009\u683C\u5F0F",gif_tips:"\u6570\u503C\u8D8A\u4F4E\u989C\u8272\u8D8A\u597D\uFF0C\u4F46\u5904\u7406\u901F\u5EA6\u663E\u8457\u51CF\u6162",webm_tips:"0\u6700\u5DEE\uFF0C99\u6700\u597D",webp_lossy:"\u65E0\u635F\u8F6C\u6362",webp_quality:"\u56FE\u7247\u8D28\u91CF",webp_quality_tips:"\u6709\u635F\uFF1A0\u8868\u793A\u6587\u4EF6\u6700\u5C0F\uFF0C100\u8868\u793A\u6587\u4EF6\u6700\u5927\u3002\u65E0\u635F\uFF1A0\u6700\u5FEB\uFF0C\u4F46\u6587\u4EF6\u8F83\u5927\uFF0C100\u6700\u6162\uFF0C\u4F46\u8D28\u91CF\u6700\u597D\u3002",webp_method:"\u538B\u7F29\u65B9\u6CD5",webp_method_tips:"0=\u5FEB\uFF0C6=\u6162\u4F46\u6548\u679C\u66F4\u597D",png_tips:"\u989C\u8272\u6570\u91CF\u30020\uFF1A\u6240\u6709\u989C\u8272\uFF08\u65E0\u635FPNG\uFF09"}},history:{title:"\u4E0B\u8F7D\u5386\u53F2",label:{scheduled_backups:"\u5B9A\u671F\u5907\u4EFD",export:"\u5BFC\u51FA",import:"\u5BFC\u5165",clear:"\u6E05\u7406"},options:{scheduled_backups:"\u4EE5\u9009\u5B9A\u7684\u65F6\u95F4\u95F4\u9694\u81EA\u52A8\u5907\u4EFD\u4E0B\u8F7D\u5386\u53F2",export_as_json:"\u5C06\u4E0B\u8F7D\u5386\u53F2\u5BFC\u51FA\u4E3AJSON\u6587\u4EF6",export_as_csv:"\u5C06\u4E0B\u8F7D\u5386\u53F2\u5BFC\u51FA\u4E3ACSV\u6587\u4EF6",import_json:"\u5BFC\u5165JSON\u683C\u5F0F\u4E0B\u8F7D\u5386\u53F2",clear_history:"\u6E05\u9664\u4E0B\u8F7D\u5386\u53F2"},button:{export:"\u5BFC\u51FA\u8BB0\u5F55",import:"\u5BFC\u5165\u8BB0\u5F55",clear:"\u6E05\u9664\u8BB0\u5F55"},select:{backup_interval_never:"\u4E0D\u5907\u4EFD",backup_interval_every_day:"\u6BCF\u5929",backup_interval_every_7_day:"\u6BCF7\u5929",backup_interval_every_30_day:"\u6BCF30\u5929"},text:{confirm_clear_history:"\u771F\u7684\u8981\u6E05\u9664\u5386\u53F2\u8BB0\u5F55\u5417\uFF1F"}},button_position:{title:"\u6309\u94AE\u4F4D\u7F6E",label:{common:"\u901A\u7528",my_bookmark:"\u6211\u7684\u6536\u85CF",gallery:"\u753B\u5ECA"},options:{horizontal_position:"\u6C34\u5E73\u4F4D\u7F6E",vertical_position:"\u5782\u76F4\u4F4D\u7F6E",horizontal_alignment:"\u6C34\u5E73\u5BF9\u9F50",vertical_alignment:"\u5782\u76F4\u5BF9\u9F50"}},authorization:{title:"\u7F51\u7AD9\u8BA4\u8BC1"},others:{title:"\u5176\u5B83",options:{show_setting_button:"\u663E\u793A\u8BBE\u7F6E\u6309\u94AE",bundle_multipage_illust:"\u5C06\u591A\u9875\u63D2\u56FE\u6253\u5305\u4E3Azip\u538B\u7F29\u5305",bundle_manga:"\u5C06\u6F2B\u753B\u4F5C\u54C1\u6253\u5305\u4E3Azip\u538B\u7F29\u5305",like_illust_when_downloading:"\u4E0B\u8F7D\u4F5C\u54C1\u65F6\u70B9\u8D5E",add_bookmark_when_downloading:"\u4E0B\u8F7D\u4F5C\u54C1\u65F6\u6536\u85CF",add_bookmark_with_tags:"\u6536\u85CF\u65F6\u6DFB\u52A0\u4F5C\u54C1\u6807\u7B7E",add_bookmark_private_r18:"\u5C06R-18\u4F5C\u54C1\u6536\u85CF\u5230\u4E0D\u516C\u5F00\u7C7B\u522B",option_does_not_apply_to_batch_download:"\u6279\u91CF\u4E0B\u8F7D\u4E0D\u9002\u7528"}},feedback:{title:"\u53CD\u9988 / \u8D5E\u8D4F",label:{feedback:"\u53CD\u9988",donate:"\u8D5E\u8D4F"},text:{feedback_desc:'\u5982\u679C\u4F60\u5728\u4F7F\u7528\u4E2D\u53D1\u73B0\u4E86\u95EE\u9898\u6216\u6709\u6539\u8FDB\u5EFA\u8BAE\uFF0C\u6B22\u8FCE\u5230<a href="https://github.com/drunkg00se/Pixiv-Downloader/issues" target="_blank" class="anchor">\u6B64\u94FE\u63A5</a>\u53CD\u9988\u3002',give_me_a_star:'\u5982\u679C\u811A\u672C\u6709\u5E2E\u52A9\u5230\u4F60\uFF0C<a href="https://github.com/drunkg00se/Pixiv-Downloader" target="_blank" class="anchor">\u6B22\u8FCE\u70B9\u6B64\u5728GitHub\u4E2D\u7ED9\u6211\u4E00\u4E2A \u2B50Star\u3002</a>',donate_desc:"\u6216\u8005\uFF0C\u626B\u7801\u8BF7\u6211\u559D\u676F\u53EF\u4E50 ^_^"}}},downloader:{category:{tab_name:"\u7C7B\u522B",filter:{exclude_downloaded:"\u6392\u9664\u5DF2\u4E0B\u8F7D",exclude_blacklist:"\u6392\u9664\u9ED1\u540D\u5355",image:"\u56FE\u7247",video:"\u89C6\u9891",download_all_pages:"\u4E0B\u8F7D\u6240\u6709\u9875",download_selected_pages:"\u81EA\u5B9A\u4E49\u9875\u6570",pixiv_illust:"\u63D2\u753B",pixiv_manga:"\u6F2B\u753B",pixiv_ugoira:"\u52A8\u56FE"}},tag_filter:{tab_name:"\u6807\u7B7E",placeholder:{blacklist_tag:"\u9ED1\u540D\u5355\uFF0C\u5C06\u6392\u9664\u542B\u6709\u4EE5\u4E0B\u6807\u7B7E\u7684\u4F5C\u54C1\u3002",whitelist_tag:"\u767D\u540D\u5355\uFF0C\u53EA\u4E0B\u8F7D\u5305\u542B\u4EE5\u4E0B\u6807\u7B7E\u7684\u4F5C\u54C1\u3002"}},others:{tab_name:"\u5176\u5B83",options:{retry_failed:"\u5BF9\u9996\u6B21\u4E0B\u8F7D\u5931\u8D25\u7684\u56FE\u7247\u8FDB\u884C\u91CD\u8BD5"}},download_type:{stop:"\u505C\u6B62",pixiv_works:"\u4F5C\u54C1",pixiv_bookmark:"\u6536\u85CF",pixiv_bookmark_public:"\u516C\u5F00\u6536\u85CF",pixiv_bookmark_private:"\u4E0D\u516C\u5F00\u6536\u85CF",pixiv_follow_latest_all:"\u5168\u90E8",pixiv_follow_latest_r18:"R-18",pixiv_series:"\u7CFB\u5217",moebooru_posts:"\u6295\u7A3F",moebooru_pool:"\u56FE\u96C6",moebooru_popular_1d:"\u65E5",moebooru_popular_1w:"\u5468",moebooru_popular_1m:"\u6708",moebooru_popular_1y:"\u5E74",moebooru_popular_date:"\u4EBA\u6C14"},file_handle_not_found:{title:"\u91CD\u590D\u6587\u4EF6\u540D / \u65E0\u6548\u6587\u4EF6\u540D",button:{save:"\u4FDD\u5B58",cancel:"\u53D6\u6D88"}},failed_downloads:"\u4E0B\u8F7D\u5931\u8D25"},button:{setting:"\u8BBE\u7F6E"},changelog:{feedback:"\u6709\u95EE\u9898or\u60F3\u5EFA\u8BAE\uFF1F\u8FD9\u91CC\u53CD\u9988",credit:"\u811A\u672C\u8FD8\u884C\uFF1F\u8BF7\u70B9\u8FD9\u91CC\u652F\u6301\u6211\uFF01",give_me_a_star:"\u5728GitHub\u4E2D\u7ED9\u6211\u4E00\u4E2A \u2B50Star\uFF0C",buy_me_a_drink:"\u6216\u8005\uFF0C\u626B\u7801\u8BF7\u6211\u559D\u676F\u9999\u8349\u5473\u51B0\u53EF\u4E50\u3002^_^"},toast:{message:{pick_directory_handle:"\u8BF7\u9009\u62E9\u4FDD\u5B58\u6587\u4EF6\u5939",file_handle_not_found:"\u6587\u4EF6\u540D\u91CD\u590D\u6216\u65E0\u6548\uFF0C\u8BF7\u624B\u52A8\u4FDD\u5B58",request_directory_handle_permission:"\u8BF7\u6388\u4E88\u6743\u9650\u4EE5\u4FEE\u6539\u6587\u4EF6/\u6587\u4EF6\u5939"},actionLabel:{browse:"\u6D4F\u89C8",save:"\u4FDD\u5B58",allow_permission:"\u540C\u610F"}}};function ng(r){let t=Ge(ie(r.locale));return{t:n=>{const o=n.split(".");let i=r.message[f(t)];for(const s of o)if(i=i[s],i===void 0)return"null";return i},setlocale:n=>{n===f(t)||!Object.keys(r.message).includes(n)||S(t,ie(n))},locale:{get current(){return f(t)}},get availableLocales(){return Object.keys(r.message)}}}const Hd={zh:ag,en:rg},Ud=navigator.language.split("-")[0],{t:N,setlocale:og,locale:ig,availableLocales:Dw}=ng({locale:Ud in Hd?Ud:"en",message:Hd});var sg=(r,t)=>S(t,!f(t)),lg=q(`<header class="modal-header text-2xl font-bold"></header> <article class="modal-body mt-4"><p>\u672C\u6B21\u66F4\u65B0\u63D0\u9AD8\u4E86FileSystemAccess
      API\u4FDD\u5B58\u6587\u4EF6\u7684\u53EF\u7528\u6027\uFF0C\u73B0\u5728\u5E94\u8BE5\u53EF\u4EE5\u66FF\u4EE3\u7BE1\u6539\u7334"\u6D4F\u89C8\u5668API"\u4E0B\u8F7D\u6A21\u5F0F\uFF0C\u8BF7\u5927\u5BB6\u5C1D\u8BD5\u4E00\u4E0B\uFF0C\u53CD\u9988\u95EE\u9898\u3002</p> <h4 class=" text-xl mt-2">\u65B0\u589E</h4> <ul class="list-disc list-inside leading-loose"><li>\u73B0\u5728\u542F\u7528\u201C\u4F7F\u7528FileSystemAccess API\u201D\uFF0C\u6388\u4E88\u6D4F\u89C8\u5668\u6587\u4EF6\u6743\u9650\u540E\uFF0C\u4E0D\u9700\u8981\u518D\u6B21\u9009\u62E9\u6587\u4EF6\u5939\u3002</li> <li>\u542F\u7528\u201C\u4F7F\u7528FileSystemAccess
        API\u201D\u540E\uFF0C\u5F53\u56FE\u7247\u6587\u4EF6\u540D\u65E0\u6548\u65F6\uFF0C\u811A\u672C\u73B0\u5728\u4F1A\u5F39\u51FA\u63D0\u793A\uFF0C\u800C\u4E0D\u662F\u9ED8\u8BA4\u5931\u8D25\uFF08\u8BF7\u5728\u6587\u4EF6\u4FDD\u5B58\u6846\u4E2D\u4FEE\u6539\u6587\u4EF6\u540D\uFF0C\u76F4\u63A5\u4FDD\u5B58\u4ECD\u7136\u4F1A\u629B\u51FA\u9519\u8BEF\uFF09\u3002</li> <li>\u542F\u7528\u201C\u4F7F\u7528FileSystemAccess API\u201D\u540E\uFF0C\u6279\u91CF\u4E0B\u8F7D\u65F6\uFF0C\u4F1A\u5217\u51FA\u65E0\u6CD5\u4FDD\u5B58\u7684\u56FE\u7247\uFF0C\u8BF7\u624B\u52A8\u4FDD\u5B58\u6216\u53D6\u6D88\u3002</li> <li>\u6279\u91CF\u4E0B\u8F7D\u5B8C\u6210\u540E\uFF0C\u4F1A\u5217\u51FA\u4E0B\u8F7D\u5931\u8D25\u7684\u56FE\u7247\u53CA\u5176\u539F\u56E0\u3002</li> <li>\u4E3A\u811A\u672C\u7684\u4E00\u4E9B\u64CD\u4F5C\u589E\u52A0\u4E86\u63D0\u793A\u4FE1\u606F\u3002</li></ul> <h4 class=" text-xl mt-2">\u4FEE\u590D</h4> <ul class="list-disc list-inside leading-loose"><li>Large files throw security error (<a href="https://github.com/drunkg00se/Pixiv-Downloader/issues/39" target="_blank" class="anchor">#39</a>)</li> <li>\u4FEE\u590D\u5728rule34vault\u4E2D\u8FDB\u884C\u524D\u8FDB/\u540E\u9000\u5BFC\u822A\u65F6\uFF0C\u5934\u50CF/\u6279\u91CF\u4E0B\u8F7D\u9879\u672A\u6B63\u786E\u66F4\u65B0\u7684\u95EE\u9898\u3002</li></ul> <h4 class=" text-xl mt-2">\u5DF2\u77E5\u95EE\u9898</h4> <ul class="list-disc list-inside leading-loose"><li>\u4F7F\u7528\u7BE1\u6539\u7334\u5E76\u542F\u7528\u6D4F\u89C8\u5668API\u65F6\uFF0CFirefox
        137\u4E0B\u8F7D\u8F83\u5927\u56FE\u7247\u4F1A\u51FA\u73B0\u4E0B\u8F7D\u6210\u529F\u4F46\u65E0\u6CD5\u4FDD\u5B58\u7684\u95EE\u9898\u3002\u5982\u60A8\u5728\u4F7F\u7528\u4E2D\u9047\u5230\u6B64\u95EE\u9898\uFF0C\u8BF7\u56DE\u6EDA\u5230\u7248\u672C136\u76F4\u81F3\u7BE1\u6539\u7334\u6B63\u5F0F\u7248\u66F4\u65B0\u81F3v5.4\u6216\u5F00\u53D1\u7248\u66F4\u65B0\u81F3v5.4.6226\u3002</li> <li>\u4F7F\u7528\u7BE1\u6539\u7334\u5F00\u53D1\u7248v5.4.6226\u5E76\u542F\u7528\u6D4F\u89C8\u5668API\u65F6\uFF0C\u65E0\u6CD5\u521B\u5EFA\u5B50\u6587\u4EF6\u5939\uFF0C\u8BF7\u5C1D\u8BD5\u4F7F\u7528FileSystemAccess
        API\u3002</li></ul></article> <footer class="modal-footer mt-4"><div class="flex justify-between items-center text-sm"><button> </button> <a target="_blank" href="https://github.com/drunkg00se/Pixiv-Downloader/issues"> </a></div> <div><div class="flex justify-center items-center min-h-0 gap-14 overflow-hidden"><img alt="credit" class="rounded-full"> <p class="flex flex-col h-full justify-evenly"><a href="https://github.com/drunkg00se/Pixiv-Downloader" target="_blank" class="anchor"> </a> <span> </span></p></div></div></footer>`,1);function cg(r,t){_e(t,!0);const a="leading-loose anchor underline-offset-2 focus:!outline-none focus:decoration-wavy";let n=Ge(!1);const o=de(()=>f(n)?"grid-rows-[1fr] mt-2":"grid-rows-[0fr]");zd(r,{get parent(){return t.parent},children:(i,s)=>{var l=lg(),c=ee(l);c.textContent="Pixiv Downloader 1.10.0";var d=E(c,4),u=v(d),g=v(u);U(g,Ft(a)),g.__click=[sg,n];var p=v(g,!0);C(()=>Q(p,N("changelog.credit"))),h(g);var b=E(g,2);U(b,Ft(a));var w=v(b,!0);C(()=>Q(w,N("changelog.feedback"))),h(b),h(u);var y=E(u,2),_=v(y),k=v(_);Mt(k,"src",jd);var x=E(k,2),T=v(x),P=v(T,!0);C(()=>Q(P,N("changelog.give_me_a_star"))),h(T);var L=E(T,2),R=v(L,!0);C(()=>Q(R,N("changelog.buy_me_a_drink"))),h(L),h(x),h(_),h(y),h(d),C(()=>U(y,`grid transition-[grid-template-rows] duration-[400ms] ${f(o)??""}`)),A(i,l)},$$slots:{default:!0}}),xe()}sa(["click"]);const Pi='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm-32-316v116h-67c-10.7 0-16 12.9-8.5 20.5l99 99c4.7 4.7 12.3 4.7 17 0l99-99c7.6-7.6 2.2-20.5-8.5-20.5h-67V140c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12z"></path></svg>',dg=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm101.8-262.2L295.6 256l62.2 62.2c4.7 4.7 4.7 12.3 0 17l-22.6 22.6c-4.7 4.7-12.3 4.7-17 0L256 295.6l-62.2 62.2c-4.7 4.7-12.3 4.7-17 0l-22.6-22.6c-4.7-4.7-4.7-12.3 0-17l62.2-62.2-62.2-62.2c-4.7-4.7-4.7-12.3 0-17l22.6-22.6c4.7-4.7 12.3-4.7 17 0l62.2 62.2 62.2-62.2c4.7-4.7 12.3-4.7 17 0l22.6 22.6c4.7 4.7 4.7 12.3 0 17z"></path></svg>
`,ug='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z" /></svg>',fg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,9V15H15V9" /></svg>',pg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9,1V7H5L12,14L19,7H15V1H9M5,16V18H19V16H5M5,20V22H19V20H5Z" /></svg>',tr=(r,t)=>{Tr(()=>{r.value=String(t.get())}),Tr(()=>{const e=Qc(r,"input",function(){this.reportValidity()?(this.classList.remove("input-error"),t.set(+this.value)):this.classList.add("input-error")});return()=>{e()}})},Qs=localStorage.getItem("pdl-downloader_option");Qs&&localStorage.removeItem("pdl-downloader_option");const nn=Qs?JSON.parse(Qs):{},je=Oa("pdl-batch-downloader",{selectedFilters:nn.selectedFilters??null,blacklistTag:nn.blacklistTag??[],whitelistTag:nn.whitelistTag??[],downloadAllPages:nn.downloadAllPages??!0,pageStart:nn.pageStart??1,pageEnd:nn.pageEnd??1,retryFailed:nn.retryFailed??!1});let hg=(ml=class{constructor(r,t){Tt(this,Po),Tt(this,Ao),Zt(this,Po,r),Zt(this,Ao,_d(t))}get current(){return D(this,Ao).call(this),D(this,Po).call(this)}},Po=new WeakMap,Ao=new WeakMap,ml);const gg=/\(.+\)/;class vg extends hg{constructor(t,e){let a=gg.test(t)?t:`(${t})`;const n=window.matchMedia(a);super(()=>n.matches,o=>Qc(n,"change",o))}}class Ks{constructor(t,e){Tt(this,So),Tt(this,Co),Zt(this,So,t),Zt(this,Co,_d(e))}get current(){return D(this,Co).call(this),D(this,So).call(this)}}So=new WeakMap,Co=new WeakMap;const Ai="event-file-handle-not-fount",qd="event-dir-handle-not-fount",Wd="event-request-user-activation";class ir extends Error{constructor(t,e){super(e+" "+t),V(this,"url"),V(this,"status"),this.name="RequestError",this.url=t,this.status=e}}class Si extends Error{constructor(){super("User aborted."),this.name="CancelError"}}class Ci extends Error{constructor(t){super(t),this.name="JsonDataError"}}class Xs extends Error{constructor(t){super(t),this.name="TimoutError"}}class wo extends Error{constructor(){super("Permission denied."),this.name="PermissionError"}}class Ti extends Error{constructor(t){super(`Invalid post id: ${t}.`),this.name="InvalidPostError"}}var mg=q("<!> <!> <!>",1),wg=q('<label class="btn !py-2 rounded-none !transform-none cursor-pointer variant-soft-surface has-[:checked]:!variant-filled-primary text-sm w-full"><div class="w-0 h-0 overflow-hidden hidden"><input type="checkbox"></div> <div class="!m-0"> </div></label>'),bg=q('<div class="flex justify-end items-center my-4"><div class="btn-group w-full"></div></div>'),yg=q("<!> <!>",1),_g=q('<!> <div class="flex justify-between items-center my-4 gap-4"><div class="flex-grow w-full"><!></div> <div class="flex justify-between items-center gap-4 w-full"><label class="input-group input-group-divider flex [&amp;>input]:!min-w-0 [&amp;>input]:!border-transparent border-surface-400/20 dark:border-surface-500/20 bg-surface-400/20 dark:bg-surface-500/20"><div class="input-group-shim !px-1 flex-none"><i class="w-6 fill-current"><!></i></div> <input class="w-20 pr-0 text-surface-700-200-token text-sm" type="number" min="1" step="1" required></label> <label class="input-group input-group-divider flex [&amp;>input]:!min-w-0 [&amp;>input]:!border-transparent border-surface-400/20 dark:border-surface-500/20 bg-surface-400/20 dark:bg-surface-500/20"><div class="input-group-shim !px-1 flex-none"><i class="w-6 fill-current"><!></i></div> <input class="w-20 pr-0 text-surface-700-200-token text-sm" type="number" min="1" step="1" required></label></div></div>',1),xg=q("<!> <!>",1),kg=q('<div class="flex justify-between items-center text-base text-surface-700-200-token"><p> </p> <!></div>'),Eg=q('<div class="downloader-filter"><!> <hr class="!border-t-1 my-4"></div>'),Pg=(r,t,e)=>{t(e())},Ag=q('<button class="btn rounded-none !transform-none !variant-filled-primary"><i class="w-5"><!></i> <span> </span></button>'),Sg=q('<div class=" flex-none btn-group self-start"></div>'),Cg=(r,t,e)=>{var a;t(((a=f(e))==null?void 0:a[0][0])??"")},Tg=q('<button class="btn variant-filled-primary self-start"><i class="w-5"><!></i> <span> </span></button>'),Ig=q('<div class="flex justify-end flex-grow w-full gap-4"><div class="flex flex-grow flex-col justify-between overflow-hidden text-surface-700-200-token"><p class="truncate"> </p> <p class="break-words"> </p></div> <!></div>'),Dg=(r,t)=>{t()},Bg=q('<div class="flex flex-grow w-full gap-6 items-center"><div class="flex flex-grow flex-col justify-between h-full overflow-hidden"><!> <div class="flex items-center justify-between gap-4 basis-0 text-surface-700-200-token"><p class="truncate"> </p> <p class=" flex-none"> </p></div></div> <button class="btn variant-filled-primary"><i class="w-5"><!></i> <span> </span></button></div>'),Mg=q('<li><div class="flex-1 flex flex-col overflow-hidden"><span class="text-base truncate"> </span> <span class="text-sm text-surface-400 truncate"> </span></div> <div><button class="btn variant-soft-surface"> </button> <button class="btn variant-soft-primary"> </button></div></li>'),Rg=q('<div class="text-surface-700-200-token mt-4"><h3 class="text-sm"> </h3> <ul class="relative list px-4 *:py-2 mt-2 bg-white/30 dark:bg-black/15 rounded-container-token *:!rounded-none max-h-80 scrollbar-track-transparent scrollbar-thumb-slate-400/50 scrollbar-corner-transparent scrollbar-thin overflow-y-auto divide-y-[1px] *:border-surface-300-600-token" style="scrollbar-gutter: stable"></ul></div>'),Og=q('<span class="badge variant-soft-error"> </span>'),Ng=q('<li><span class="flex-[0_0_20%] truncate"> </span> <span class="text-error-400"> </span></li>'),Lg=q('<ul class="list max-h-80 scrollbar-track-transparent scrollbar-thumb-slate-400/50 scrollbar-corner-transparent scrollbar-thin overflow-y-auto" style="scrollbar-gutter: stable"></ul>'),Fg=q('<div data-theme="skeleton" class="card px-4 pb-4 fixed right-20 top-36 w-[600px] *:text-sm shadow-xl bg-scroll"><!> <div class="flex flex-col relative mt-4 gap-4"><!></div> <!> <!></div>'),jg=(r,t)=>{S(t,!f(t))},zg=q('<img alt="batch download" class="object-cover object-center size-full">'),Hg=q('<div class="!absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"><!></div>'),Ug=q('<div class="flex flex-col justify-center items-center px-3 font-bold text-[12px] leading-[14px] overflow-hidden text-surface-700-200-token"><span class=" truncate max-w-full"> </span> <hr class="!border-t-1 my-[1px] self-stretch !border-surface-700 dark:!border-surface-200"> <span class=" truncate max-w-full"> </span></div>'),qg=q('<i class="w-6 fill-slate-700 dark:fill-slate-200 mix-blend-hard-light mt-4"><!></i>'),Wg=q('<div class="size-14 rounded-full fixed right-4 top-36 drop-shadow-xl cursor-pointer hover:brightness-110 backdrop-blur-sm"><div data-theme="skeleton" class="avatar absolute -z-10 size-14 rounded-full overflow-hidden bg-scroll transition-opacity duration-[250ms]"><!></div> <!> <div class="size-14 flex justify-center items-center relative"><!></div></div>'),Gg=q("<!> <!>",1);function Yg(r,t){_e(t,!0);const e=[],{artworkCount:a,successd:n,failed:o,excluded:i,downloading:s,log:l,hasTask:c,batchDownload:d,abort:u,getConcurrency:g,setConcurrency:p}=t.useBatchDownload(),b=new Ks(()=>location.href,M=>{if("navigation"in window){let G,Z;navigation.addEventListener("navigatesuccess",()=>{G!==Z&&M()}),navigation.addEventListener("navigate",rt=>{G=location.href,Z=rt.destination.url})}else{const G=Z=>{const rt=history[Z];return function(...mt){const kt=location.href,yt=rt.apply(this,mt),wt=location.href;return kt!==wt&&M(),yt}};history.pushState=G("pushState"),history.replaceState=G("replaceState")}});Y();let w,y,_,k,x=Ge(ie([]));const T={};let P=Ge(""),L=Ge(0),R=Ge(!1);const z=de(()=>{if(!t.downloaderConfig)return null;const M=b.current;Ct.info("Navigating to ",M);const{pageOption:G}=t.downloaderConfig,Z=[];for(const rt in G){const mt=G[rt],{match:kt}=mt;typeof kt=="string"?M.match(kt)&&Z.push([rt,mt]):typeof kt=="function"?kt(M)&&Z.push([rt,mt]):kt.test(M)&&Z.push([rt,mt])}return Z.length?Z:null}),B=de(()=>s.current||!!f(z)),F=de(()=>n.current.length+o.current.length+i.current.length),J=de(()=>a.current?f(F)/a.current*100:void 0),K=de(()=>!s.current&&a.current?`Completed: ${n.current.length}. Failed: ${o.current.length}. Excluded: ${i.current.length}.`:"");Tr(()=>{if(!t.downloaderConfig.avatar)return;if(typeof t.downloaderConfig.avatar=="string"){S(P,ie(t.downloaderConfig.avatar));return}const M=b.current;if(s.current)return;if(M in T){const Z=T[M];f(P)!==Z&&S(P,ie(Z));return}const G=t.downloaderConfig.avatar(M);if(typeof G=="string"){T[M]=G,f(P)!==G&&S(P,ie(G));return}G.then(Z=>{T[M]=Z,f(P)!==Z&&S(P,ie(Z))})}),Tr(()=>{f(B)||S(R,!1)}),Tr(()=>{s.current?globalThis.addEventListener("beforeunload",ft):globalThis.removeEventListener("beforeunload",ft)}),Tr(()=>{s.current?globalThis.addEventListener(Ai,lt):(globalThis.removeEventListener(Ai,lt),nr(()=>{f(x).length!==0&&(f(x).forEach(M=>M.abort()),S(x,ie([])),p())}))});function Y(){je.selectedFilters===null&&(je.selectedFilters=t.downloaderConfig.filterOption.filters.filter(M=>M.checked).map(M=>M.id))}function ft(M){M.preventDefault(),M.returnValue=!0}function lt(M){if(!s.current)return;const G=M,{signal:Z}=G.detail;!Z||!c(Z)||(f(x).push(G.detail),p(g()+1))}function Ot(M){return d(M).catch(Ct.error)}var jt=Gg(),ot=ee(jt);{var it=M=>{var G=Fg(),Z=v(G);{var rt=$=>{var H=Eg(),tt=v(H);Oh(tt,{regionList:"text-surface-700-200-token",class:"text-sm",children:(ct,Qt)=>{var dt=mg(),vt=ee(dt);Js(vt,{name:"category",value:0,get group(){return f(L)},set group(O){S(L,ie(O))},children:(O,pt)=>{Se();var st=Pe();C(()=>Q(st,N("downloader.category.tab_name"))),A(O,st)},$$slots:{default:!0}});var Et=E(vt,2);{var _t=O=>{Js(O,{name:"tag_filter",value:1,get group(){return f(L)},set group(pt){S(L,ie(pt))},children:(pt,st)=>{Se();var Rt=Pe();C(()=>Q(Rt,N("downloader.tag_filter.tab_name"))),A(pt,Rt)},$$slots:{default:!0}})};bt(Et,O=>{t.downloaderConfig.filterOption.enableTagFilter&&O(_t)})}var Dt=E(Et,2);Js(Dt,{name:"tag_filter",value:2,get group(){return f(L)},set group(O){S(L,ie(O))},children:(O,pt)=>{Se();var st=Pe();C(()=>Q(st,N("downloader.others.tab_name"))),A(O,st)},$$slots:{default:!0}}),A(ct,dt)},$$slots:{default:!0,panel:(ct,Qt)=>{var dt=Me(),vt=ee(dt);{var Et=Dt=>{var O=_g(),pt=ee(O);{var st=Wt=>{var re=bg(),Ce=v(re);ur(Ce,21,()=>t.downloaderConfig.filterOption.filters,la,(ae,Lt)=>{let oe=()=>f(Lt).id,ue=()=>f(Lt).name;var ve=wg(),Ne=v(ve),Ve=v(Ne);mr(Ve);var Ie;h(Ne);var _r=E(Ne,2),He=v(_r,!0);C(()=>Q(He,typeof ue()=="function"?ue()():ue())),h(_r),h(ve),C(()=>{Ie!==(Ie=oe())&&(Ve.value=(Ve.__value=oe())==null?"":oe())}),vi(e,[],Ve,()=>(oe(),je.selectedFilters),xr=>je.selectedFilters=xr),A(ae,ve)}),h(Ce),h(re),A(Wt,re)};bt(pt,Wt=>{t.downloaderConfig.filterOption.filters.length&&Wt(st)})}var Rt=E(pt,2),Nt=v(Rt),Gt=v(Nt);Fa(Gt,{regionLabel:"text-surface-700-200-token",active:"variant-filled-primary",background:"bg-surface-400/20 dark:bg-surface-500/20",border:"",display:"flex",children:(Wt,re)=>{var Ce=yg(),ae=ee(Ce);Oe(ae,{class:"text-sm !py-[7px]",name:"justify",value:!0,get group(){return je.downloadAllPages},set group(oe){je.downloadAllPages=oe},children:(oe,ue)=>{Se();var ve=Pe();C(()=>Q(ve,N("downloader.category.filter.download_all_pages"))),A(oe,ve)},$$slots:{default:!0}});var Lt=E(ae,2);Oe(Lt,{class:"text-sm !py-[7px]",name:"justify",value:!1,get group(){return je.downloadAllPages},set group(oe){je.downloadAllPages=oe},children:(oe,ue)=>{Se();var ve=Pe();C(()=>Q(ve,N("downloader.category.filter.download_selected_pages"))),A(oe,ve)},$$slots:{default:!0}}),A(Wt,Ce)},$$slots:{default:!0}}),h(Nt);var xt=E(Nt,2),Ht=v(xt),et=v(Ht),gt=v(et),At=v(gt);Ee(At,()=>ug),h(gt),h(et);var ne=E(et,2);ca(ne,(Wt,re)=>tr?.(Wt,re),()=>({get(){return je.pageStart},set(Wt){je.pageStart=Wt}})),h(Ht);var be=E(Ht,2),ge=v(be),X=v(ge),$t=v(X);Ee($t,()=>fg),h(X),h(ge);var Bt=E(ge,2);ca(Bt,(Wt,re)=>tr?.(Wt,re),()=>({get(){return je.pageEnd},set(Wt){je.pageEnd=Wt}})),h(be),h(xt),h(Rt),C(()=>{ne.disabled=je.downloadAllPages,Bt.disabled=je.downloadAllPages}),A(Dt,O)},_t=Dt=>{var O=Me(),pt=ee(O);{var st=Nt=>{var Gt=xg(),xt=ee(Gt),Ht=de(()=>N("downloader.tag_filter.placeholder.blacklist_tag"));Fd(xt,{allowUpperCase:!0,name:"blacklist",chips:"variant-filled-primary",get placeholder(){return f(Ht)},get value(){return je.blacklistTag},set value(At){je.blacklistTag=At}});var et=E(xt,2),gt=de(()=>N("downloader.tag_filter.placeholder.whitelist_tag"));Fd(et,{allowUpperCase:!0,name:"whitelist",chips:"variant-filled-primary",get placeholder(){return f(gt)},class:"my-4",get value(){return je.whitelistTag},set value(At){je.whitelistTag=At}}),A(Nt,Gt)},Rt=Nt=>{var Gt=Me(),xt=ee(Gt);{var Ht=et=>{var gt=kg(),At=v(gt),ne=v(At,!0);C(()=>Q(ne,N("downloader.others.options.retry_failed"))),h(At);var be=E(At,2);zr(be,{size:"sm",name:"download-retry",get checked(){return je.retryFailed},set checked(ge){je.retryFailed=ge}}),h(gt),A(et,gt)};bt(xt,et=>{f(L)===2&&et(Ht)},!0)}A(Nt,Gt)};bt(pt,Nt=>{f(L)===1?Nt(st):Nt(Rt,!1)},!0)}A(Dt,O)};bt(vt,Dt=>{f(L)===0?Dt(Et):Dt(_t,!1)})}A(ct,dt)}}}),Se(2),h(H),Fe(3,H,()=>vo),A($,H)};bt(Z,$=>{s.current||$(rt)})}var mt=E(Z,2),kt=v(mt);{var yt=$=>{var H=Ig(),tt=v(H),ct=v(tt),Qt=v(ct,!0);h(ct);var dt=E(ct,2),vt=v(dt,!0);h(dt),h(tt);var Et=E(tt,2);{var _t=O=>{var pt=Sg();ur(pt,21,()=>f(z),la,(st,Rt)=>{let Nt=()=>f(Rt)[0],Gt=()=>f(Rt)[1];var xt=Me(),Ht=ee(xt);{var et=gt=>{var At=Ag();At.__click=[Pg,Ot,Nt];var ne=v(At),be=v(ne);Ee(be,()=>Pi),h(ne);var ge=E(ne,2),X=v(ge,!0);C(()=>Q(X,typeof Gt().name=="function"?Gt().name():Gt().name)),h(ge),h(At),A(gt,At)};bt(Ht,gt=>{"fn"in Gt()&&gt(et)})}A(st,xt)}),h(pt),A(O,pt)},Dt=O=>{var pt=Me(),st=ee(pt);{var Rt=Nt=>{var Gt=Tg();Gt.__click=[Cg,Ot,z];var xt=v(Gt),Ht=v(xt);Ee(Ht,()=>Pi),h(xt);var et=E(xt,2),gt=v(et,!0);C(()=>Q(gt,typeof f(z)[0][1].name=="function"?f(z)[0][1].name():f(z)[0][1].name)),h(et),h(Gt),A(Nt,Gt)};bt(st,Nt=>{f(z)&&"fn"in f(z)[0][1]&&Nt(Rt)},!0)}A(O,pt)};bt(Et,O=>{f(z)&&f(z).length>1?O(_t):O(Dt,!1)})}h(H),Ze(H,O=>w=O,()=>w),C(()=>{var O,pt;Q(Qt,f(K)),Ba(dt,"text-error-500",((O=l.current)==null?void 0:O.type)==="Error"),Q(vt,((pt=l.current)==null?void 0:pt.message)??"")}),ut("introstart",H,()=>w.classList.remove("absolute")),ut("outrostart",H,()=>w.classList.add("absolute")),Fe(3,H,()=>Bn,()=>({duration:250})),A($,H)},wt=$=>{var H=Bg(),tt=v(H),ct=v(tt);_h(ct,{height:"h-4",rounded:"rounded-md",meter:"bg-primary-500",track:"bg-primary-500/30",max:100,get value(){return f(J)}});var Qt=E(ct,2),dt=v(Qt),vt=v(dt,!0);h(dt);var Et=E(dt,2),_t=v(Et,!0);h(Et),h(Qt),h(tt);var Dt=E(tt,2);Dt.__click=[Dg,u];var O=v(Dt),pt=v(O);Ee(pt,()=>dg),h(O);var st=E(O,2),Rt=v(st,!0);C(()=>Q(Rt,N("downloader.download_type.stop"))),h(st),h(Dt),h(H),Ze(H,Nt=>y=Nt,()=>y),C(()=>{var Nt,Gt;Ba(dt,"text-error-500",((Nt=l.current)==null?void 0:Nt.type)==="Error"),Q(vt,((Gt=l.current)==null?void 0:Gt.message)??""),Q(_t,a.current?`${f(F)} / ${a.current}`:"")}),ut("introstart",H,()=>y.classList.remove("absolute")),ut("outrostart",H,()=>y.classList.add("absolute")),Fe(3,H,()=>Bn,()=>({duration:250})),A($,H)};bt(kt,$=>{s.current?$(wt,!1):$(yt)})}h(mt);var St=E(mt,2);{var qt=$=>{var H=Rg(),tt=v(H),ct=v(tt,!0);C(()=>Q(ct,N("downloader.file_handle_not_found.title"))),h(tt);var Qt=E(tt,2);ur(Qt,22,()=>f(x),dt=>dt,(dt,vt,Et)=>{var _t=Mg();const Dt=de(()=>vt.path.lastIndexOf("/")),O=de(()=>f(Dt)!==-1);var pt=v(_t),st=v(pt),Rt=v(st,!0);C(()=>Q(Rt,f(O)?vt.path.slice(f(Dt)+1):vt.path)),h(st);var Nt=E(st,2),Gt=v(Nt,!0);C(()=>Q(Gt,f(O)?vt.path.slice(0,f(Dt)):"")),h(Nt),h(pt);var xt=E(pt,2),Ht=v(xt);Ht.__click=()=>{vt.abort(),f(x).splice(f(Et),1),p(g()-1)};var et=v(Ht,!0);C(()=>Q(et,N("downloader.file_handle_not_found.button.cancel"))),h(Ht);var gt=E(Ht,2);gt.__click=async()=>{await vt.getFileHandle(),f(x).splice(f(Et),1),p(g()-1)};var At=v(gt,!0);C(()=>Q(At,N("downloader.file_handle_not_found.button.save"))),h(gt),h(xt),h(_t),Fe(3,_t,()=>vo,()=>({duration:250})),A(dt,_t)}),h(Qt),h(H),Fe(3,H,()=>vo,()=>({duration:250})),A($,H)};bt(St,$=>{f(x).length&&$(qt)})}var zt=E(St,2);{var Yt=$=>{const H=de(()=>o.current.toSorted(tt=>tt.reason instanceof Ti?-1:1));Yp($,{class:"text-surface-700-200-token mt-4",children:(tt,ct)=>{Xp(tt,{class:"bg-white/30 dark:bg-black/15 rounded-container-token",lead:Et=>{var _t=Og(),Dt=v(_t,!0);h(_t),C(()=>Q(Dt,f(H).length)),A(Et,_t)},summary:Et=>{Se();var _t=Pe();C(()=>Q(_t,N("downloader.failed_downloads"))),A(Et,_t)},content:Et=>{var _t=Lg();ur(_t,20,()=>f(H),Dt=>Dt,(Dt,O)=>{var pt=Ng(),st=v(pt),Rt=v(st,!0);h(st);var Nt=E(st,2),Gt=v(Nt,!0);h(Nt),h(pt),C(()=>{Q(Rt,O.id),Q(Gt,O.reason)}),A(Dt,pt)}),h(_t),A(Et,_t)},$$slots:{lead:!0,summary:!0,content:!0}})},$$slots:{default:!0}})};bt(zt,$=>{!s.current&&o.current.length&&$(Yt)})}h(G),Fe(3,G,()=>La,()=>({x:50,opacity:0})),A(M,G)};bt(ot,M=>{f(R)&&f(B)&&M(it)})}var W=E(ot,2);{var nt=M=>{var G=Wg();G.__click=[jg,R];var Z=v(G),rt=v(Z);{var mt=Yt=>{var $=zg();C(()=>Mt($,"src",f(P))),A(Yt,$)};bt(rt,Yt=>{f(P)&&Yt(mt)})}h(Z);var kt=E(Z,2);{var yt=Yt=>{var $=Hg(),H=v($);mo(H,{width:"w-16",stroke:32,meter:"stroke-primary-500",track:"stroke-primary-500/30",fill:"fill-primary-500",strokeLinecap:"butt",get value(){return f(J)}}),h($),Fe(3,$,()=>Bn,()=>({duration:250})),A(Yt,$)};bt(kt,Yt=>{s.current&&!f(R)&&Yt(yt)})}var wt=E(kt,2),St=v(wt);{var qt=Yt=>{var $=Ug(),H=v($),tt=v(H,!0);h(H);var ct=E(H,4),Qt=v(ct,!0);h(ct),h($),Ze($,dt=>_=dt,()=>_),C(()=>{Q(tt,f(F)),Q(Qt,a.current)}),ut("introstart",$,()=>_.classList.remove("absolute")),ut("outrostart",$,()=>_.classList.add("absolute")),Fe(3,$,()=>Bn,()=>({duration:250})),A(Yt,$)},zt=Yt=>{var $=Me(),H=ee($);{var tt=ct=>{var Qt=qg(),dt=v(Qt);Ee(dt,()=>pg),h(Qt),Ze(Qt,vt=>k=vt,()=>k),ut("introstart",Qt,()=>k.classList.remove("absolute")),ut("outrostart",Qt,()=>k.classList.add("absolute")),Fe(3,Qt,()=>Bn,()=>({duration:250})),A(ct,Qt)};bt(H,ct=>{f(R)||ct(tt)},!0)}A(Yt,$)};bt(St,Yt=>{s.current&&a.current&&!f(R)?Yt(qt):Yt(zt,!1)})}h(wt),h(G),C(()=>{Ba(Z,"opacity-70",!f(R)),Ba(Z,"blur-[1px]",!f(R))}),Fe(3,G,()=>La,()=>({opacity:0,x:50})),A(M,G)};bt(W,M=>{f(B)&&M(nt)})}A(r,jt),xe()}sa(["click"]);const Vg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" /></svg>',Ye={isFirefox(){return navigator.userAgent.includes("Firefox")},isViolentmonkey(){return an.scriptHandler==="Violentmonkey"},isTampermonkey(){return an.scriptHandler==="Tampermonkey"},isBlobDlAvaliable(){return!this.isFirefox()||this.isFirefox()&&this.isTampermonkey()&&parseFloat(an.version??"")<4.18},isSupportSubpath(){return this.isBrowserDownloadMode()},isBrowserDownloadMode(){return an.downloadMode==="browser"},isConflictActionEnable(){return this.isTampermonkey()&&parseFloat(an.version??"")>=4.18&&this.isBrowserDownloadMode()},isConflictActionPromptEnable(){return!this.isFirefox()&&this.isConflictActionEnable()},isFileSystemAccessAvaliable(){return typeof ua.showDirectoryPicker=="function"&&typeof ua.showSaveFilePicker=="function"},videoFrameSupported(){return typeof ua.VideoFrame=="function"},isPixiv(){return location.hostname==="www.pixiv.net"},isYande(){return location.hostname==="yande.re"},isRule34(){return location.hostname==="rule34.xxx"},isNijie(){return location.hostname==="nijie.info"}},Gd='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>check</title><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" /></svg>',$g='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z" /></svg>',Jg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z" /></svg>',ce={preloadData:/"meta-preload-data" content='(.*?)'>/,globalData:/"meta-global-data" content='(.*?)'>/,artworksPage:/artworks\/(\d+)$/,userPage:/\/users\/(\d+)$|\/users\/(\d+)\/(?!following|mypixiv|followers)/,bookmarkPage:/users\/(\d+)\/bookmarks\/artworks/,userPageTags:new RegExp("(?<=users\\/)([0-9]+)\\/(artworks|illustrations|manga|bookmarks(?=\\/artworks))(?:\\/artworks)?\\/?([^?]*)"),searchPage:/\/tags\/.*\/(artworks|illustrations|manga)/,activityHref:/illust_id=(\d+)/,originSrcPageNum:new RegExp("(?<=_p)\\d+"),followLatest:/\/bookmark_new_illust(?:_r18)?\.php/,historyPage:/\/history\.php/,historyThumbnailsId:/\d+(?=_)/,series:/\/user\/([0-9]+)\/series\/([0-9]+)/,unlisted:new RegExp("(?<=artworks\\/unlisted\\/)[A-Za-z0-9]+"),imageExt:/bmp|jp(e)?g|jfif|png|tif(f)?|gif|svg|ico|webp|heif|heic|raw|cr2|nef|arw|dng|avif/i,videoExt:/mp4|avi|mkv|mov|wmv|flv|webm|mpeg|mpg|3gp|m4v|ts|vob|ogv|rm|rmvb|m2ts|mxf|asf|swf/i};var Mn=(r=>(r.UNIQUIFY="uniquify",r.OVERWRITE="overwrite",r.PROMPT="prompt",r))(Mn||{});let ze=null,Zr="dirHandle.unpick";const Rn=new Set,ja=[];ke.on("dirHandle.picking",()=>{Ct.info("channelEvnet:DirHandleStatus.PICKING"),Zr="dirHandle.picking"}),ke.on("dirHandle.unpick",async()=>{Ct.info("channelEvnet:DirHandleStatus.UNPICK"),Zr="dirHandle.unpick",ze=null,On(new Error("Directory handle not found."))}),ke.on("dirHandle.picked",async r=>{Ct.info("channelEvnet:DirHandleStatus.PICKED"),Zr="dirHandle.picked",ze=r,await ze.queryPermission({mode:"readwrite"})==="granted"?Ii(ze):On(new wo)});async function Qg(){return await se.getDirectoryHandle()??null}function Kg(r){se.setDirectoryHandle(r)}function Ii(r){if(ja.length){for(const[t]of ja)t(r);ja.length=0}}function On(r){if(ja.length){for(const[,t]of ja)t(r);ja.length=0}}function fa(r,t){if(r==="dirHandle.picking"){Zr="dirHandle.picking",ke.emit("dirHandle.picking");return}if(r==="dirHandle.unpick"){Zr="dirHandle.unpick",ke.emit("dirHandle.unpick");return}if(!t)throw new Error("directory handle should not be null.");Zr="dirHandle.picked",ke.emit("dirHandle.picked",t)}async function Zs(r){const t={mode:"readwrite"};if(await r.queryPermission(t)==="granted")return!0;if(navigator.userActivation.isActive){if(await r.requestPermission(t)==="granted")return!0}else{Zr!=="dirHandle.picking"&&fa("dirHandle.picking");const e=await new Promise(n=>{globalThis.dispatchEvent(new CustomEvent(Wd,{detail:{onAction(){n(!0)},onClosed(){n(!1)}}}))});if(!e)return fa("dirHandle.picked",r),!1;const a=await r.requestPermission(t);if(fa("dirHandle.picked",r),e&&a==="granted")return!0}return!1}async function Yd(r){try{Zr!=="dirHandle.picking"&&fa("dirHandle.picking"),ze=await r(),fa("dirHandle.picked",ze),Ii(ze),Kg(ze)}catch(t){if(ze){Ct.warn(t);const e=await Zs(ze);if(fa("dirHandle.picked",ze),!e){const a=new wo;throw On(a),a}Ii(ze)}else throw fa("dirHandle.unpick"),On(t),t}return ze}async function Xg(r){if(Zr==="dirHandle.unpick"){if(fa("dirHandle.picking"),ze=await Qg()){const t=await Zs(ze);if(fa("dirHandle.picked",ze),!t){const e=new wo;throw On(e),e}return Ii(ze),ze}return await Yd(()=>new Promise((t,e)=>{globalThis.dispatchEvent(new CustomEvent(qd,{detail:{getFileHandle:async()=>{try{const a=await ua.showDirectoryPicker({id:"pdl-dir-handle",mode:"readwrite"});t(a)}catch(a){e(a)}},abort:()=>e(new Si)}})),r?.addEventListener("abort",()=>{e(r.reason)},{once:!0}),ja.push([t,e])}))}if(Zr==="dirHandle.picking")return await new Promise((e,a)=>{ja.push([e,a])});if(!ze)throw new Error("DirHandle should not be null.");if(!await Zs(ze)){const t=new wo;throw On(t),t}return ze}async function Zg(r,t,e){if(e==="overwrite")return r.getFileHandle(t,{create:!0});if(!Rn.has(t)){Rn.add(t);try{await r.getFileHandle(t)}catch{return await r.getFileHandle(t,{create:!0})}finally{Rn.delete(t)}}if(e==="prompt")throw new DOMException("","NotFoundError");const a=t.lastIndexOf("."),n=t.slice(a+1),o=t.slice(0,a);for(let s=1;s<101;s++){const l=`${o} (${s}).${n}`;if(!Rn.has(l)){Rn.add(l);try{await r.getFileHandle(l)}catch{const d=await r.getFileHandle(l,{create:!0});return Ct.info(`Rename ${t}' to ${l}`),d}finally{Rn.delete(l)}}}const i=`${o} - ${new Date().toISOString().replaceAll(":","")}.${n}`;return r.getFileHandle(i,{create:!0})}async function tv(r,t,e,a){const n=await Xg(a);a?.throwIfAborted();let o=n,i=null,s=null;const l=e.lastIndexOf("/"),c=l===-1?e:e.slice(l+1);try{if(l!==-1){const d=e.slice(0,l).split("/");for(const u of d)o=await o.getDirectoryHandle(u,{create:!0})}i=await Zg(o,c,r),s=await i.createWritable()}catch(d){if(!(d instanceof DOMException&&d.name==="NotFoundError"))throw d;i!==null&&o.removeEntry(i.name),i=await new Promise((u,g)=>{const p=c.lastIndexOf("."),b=c.slice(p+1),w=ce.imageExt.test(b)?`image/${b}`:`video/${b}`;globalThis.dispatchEvent(new CustomEvent(Ai,{detail:{signal:a,path:e,getFileHandle:async()=>{try{const y=await ua.showSaveFilePicker({startIn:o,suggestedName:c,types:[{description:"Media",accept:{[w]:"."+b}}]});u(y)}catch(y){g(y)}},abort:()=>g(new Si)}})),a?.addEventListener("abort",()=>{g(a.reason)},{once:!0})})}try{s??(s=await i.createWritable()),await s.write(t),await s.close()}catch(d){throw o.removeEntry(i.name),d}}function ev(){return Yd(()=>ua.showDirectoryPicker({id:"pdl-dir-handle",mode:"readwrite"}))}function rv(r,t,e){return new Promise((a,n)=>{e?.throwIfAborted();const o=URL.createObjectURL(r),i=Sd({url:URL.createObjectURL(r),name:t,onerror:s=>{URL.revokeObjectURL(o),e?.aborted?a():(Ct.error(s),n(new Error(`FileSave error: ${t}`)))},onload:()=>{URL.revokeObjectURL(o),a()}});e?.addEventListener("abort",()=>i.abort(),{once:!0})})}function av(r,t){const e=t.lastIndexOf("/");e!==-1&&(t=t.slice(e+1));const a=document.createElement("a");a.href=URL.createObjectURL(r),a.download=t,a.click(),URL.revokeObjectURL(a.href)}function nv(r,t,e){return np(r).then(a=>(e?.throwIfAborted(),new Promise((n,o)=>{const i=Sd({url:a,name:t,onerror:s=>{e?.aborted?n():(Ct.error(s),o(new Error(`FileSave error: ${t}`)))},onload:()=>{n()}});e?.addEventListener("abort",()=>i.abort(),{once:!0})})))}let Di;const ov=Ye.isBlobDlAvaliable();Ye.isSupportSubpath()?ov?Di=rv:Di=nv:(Di=av,Ct.warn("Download function is not fully supported:",an.scriptHandler,an.version));const iv={isFileSystemAccessAvailable:Ye.isFileSystemAccessAvaliable(),getAdapter(r,t=Mn.UNIQUIFY){return this.isFileSystemAccessAvailable&&r?tv.bind(void 0,t):Di}};function sv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Vd={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(e=!1));function n(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function o(l,c,d,u,g){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new n(d,u||l,g),b=e?e+c:c;return l._events[b]?l._events[b].fn?l._events[b]=[l._events[b],p]:l._events[b].push(p):(l._events[b]=p,l._eventsCount++),l}function i(l,c){--l._eventsCount===0?l._events=new a:delete l._events[c]}function s(){this._events=new a,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],d,u;if(this._eventsCount===0)return c;for(u in d=this._events)t.call(d,u)&&c.push(e?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},s.prototype.listeners=function(c){var d=e?e+c:c,u=this._events[d];if(!u)return[];if(u.fn)return[u.fn];for(var g=0,p=u.length,b=new Array(p);g<p;g++)b[g]=u[g].fn;return b},s.prototype.listenerCount=function(c){var d=e?e+c:c,u=this._events[d];return u?u.fn?1:u.length:0},s.prototype.emit=function(c,d,u,g,p,b){var w=e?e+c:c;if(!this._events[w])return!1;var y=this._events[w],_=arguments.length,k,x;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),_){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,u),!0;case 4:return y.fn.call(y.context,d,u,g),!0;case 5:return y.fn.call(y.context,d,u,g,p),!0;case 6:return y.fn.call(y.context,d,u,g,p,b),!0}for(x=1,k=new Array(_-1);x<_;x++)k[x-1]=arguments[x];y.fn.apply(y.context,k)}else{var T=y.length,P;for(x=0;x<T;x++)switch(y[x].once&&this.removeListener(c,y[x].fn,void 0,!0),_){case 1:y[x].fn.call(y[x].context);break;case 2:y[x].fn.call(y[x].context,d);break;case 3:y[x].fn.call(y[x].context,d,u);break;case 4:y[x].fn.call(y[x].context,d,u,g);break;default:if(!k)for(P=1,k=new Array(_-1);P<_;P++)k[P-1]=arguments[P];y[x].fn.apply(y[x].context,k)}}return!0},s.prototype.on=function(c,d,u){return o(this,c,d,u,!1)},s.prototype.once=function(c,d,u){return o(this,c,d,u,!0)},s.prototype.removeListener=function(c,d,u,g){var p=e?e+c:c;if(!this._events[p])return this;if(!d)return i(this,p),this;var b=this._events[p];if(b.fn)b.fn===d&&(!g||b.once)&&(!u||b.context===u)&&i(this,p);else{for(var w=0,y=[],_=b.length;w<_;w++)(b[w].fn!==d||g&&!b[w].once||u&&b[w].context!==u)&&y.push(b[w]);y.length?this._events[p]=y.length===1?y[0]:y:i(this,p)}return this},s.prototype.removeAllListeners=function(c){var d;return c?(d=e?e+c:c,this._events[d]&&i(this,d)):(this._events=new a,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=e,s.EventEmitter=s,r.exports=s})(Vd);var lv=Vd.exports;const cv=sv(lv);class $d extends Error{constructor(t){super(t),this.name="TimeoutError"}}class dv extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const Jd=r=>globalThis.DOMException===void 0?new dv(r):new DOMException(r),Qd=r=>{const t=r.reason===void 0?Jd("This operation was aborted."):r.reason;return t instanceof Error?t:Jd(t)};function uv(r,t){const{milliseconds:e,fallback:a,message:n,customTimers:o={setTimeout,clearTimeout}}=t;let i,s;const c=new Promise((d,u)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(t.signal){const{signal:p}=t;p.aborted&&u(Qd(p)),s=()=>{u(Qd(p))},p.addEventListener("abort",s,{once:!0})}if(e===Number.POSITIVE_INFINITY){r.then(d,u);return}const g=new $d;i=o.setTimeout.call(void 0,()=>{if(a){try{d(a())}catch(p){u(p)}return}typeof r.cancel=="function"&&r.cancel(),n===!1?d():n instanceof Error?u(n):(g.message=n??`Promise timed out after ${e} milliseconds`,u(g))},e),(async()=>{try{d(await r)}catch(p){u(p)}})()}).finally(()=>{c.clear(),s&&t.signal&&t.signal.removeEventListener("abort",s)});return c.clear=()=>{o.clearTimeout.call(void 0,i),i=void 0},c}function fv(r,t,e){let a=0,n=r.length;for(;n>0;){const o=Math.trunc(n/2);let i=a+o;e(r[i],t)<=0?(a=++i,n-=o+1):n=o}return a}class pv{constructor(){Tt(this,ea,[])}enqueue(t,e){e={priority:0,...e};const a={priority:e.priority,run:t};if(this.size&&D(this,ea)[this.size-1].priority>=e.priority){D(this,ea).push(a);return}const n=fv(D(this,ea),a,(o,i)=>i.priority-o.priority);D(this,ea).splice(n,0,a)}dequeue(){const t=D(this,ea).shift();return t?.run}filter(t){return D(this,ea).filter(e=>e.priority===t.priority).map(e=>e.run)}get size(){return D(this,ea).length}}ea=new WeakMap;class Bi extends cv{constructor(t){var e,a;if(super(),Tt(this,Le),Tt(this,Wn),Tt(this,Gn),Tt(this,Ua,0),Tt(this,To),Tt(this,Yn),Tt(this,Io,0),Tt(this,Mr),Tt(this,Vn),Tt(this,hr),Tt(this,Do),Tt(this,Rr,0),Tt(this,$n),Tt(this,ya),Tt(this,Bo),V(this,"timeout"),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:pv,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${((e=t.intervalCap)==null?void 0:e.toString())??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${((a=t.interval)==null?void 0:a.toString())??""}\` (${typeof t.interval})`);Zt(this,Wn,t.carryoverConcurrencyCount),Zt(this,Gn,t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0),Zt(this,To,t.intervalCap),Zt(this,Yn,t.interval),Zt(this,hr,new t.queueClass),Zt(this,Do,t.queueClass),this.concurrency=t.concurrency,this.timeout=t.timeout,Zt(this,Bo,t.throwOnTimeout===!0),Zt(this,ya,t.autoStart===!1)}get concurrency(){return D(this,$n)}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);Zt(this,$n,t),j(this,Le,Ro).call(this)}async add(t,e={}){return e={timeout:this.timeout,throwOnTimeout:D(this,Bo),...e},new Promise((a,n)=>{D(this,hr).enqueue(async()=>{var o;Ui(this,Rr)._++,Ui(this,Ua)._++;try{(o=e.signal)==null||o.throwIfAborted();let i=t({signal:e.signal});e.timeout&&(i=uv(Promise.resolve(i),{milliseconds:e.timeout})),e.signal&&(i=Promise.race([i,j(this,Le,kl).call(this,e.signal)]));const s=await i;a(s),this.emit("completed",s)}catch(i){if(i instanceof $d&&!e.throwOnTimeout){a();return}n(i),this.emit("error",i)}finally{j(this,Le,yl).call(this)}},e),this.emit("add"),j(this,Le,Mo).call(this)})}async addAll(t,e){return Promise.all(t.map(async a=>this.add(a,e)))}start(){return D(this,ya)?(Zt(this,ya,!1),j(this,Le,Ro).call(this),this):this}pause(){Zt(this,ya,!0)}clear(){Zt(this,hr,new(D(this,Do)))}async onEmpty(){D(this,hr).size!==0&&await j(this,Le,Oo).call(this,"empty")}async onSizeLessThan(t){D(this,hr).size<t||await j(this,Le,Oo).call(this,"next",()=>D(this,hr).size<t)}async onIdle(){D(this,Rr)===0&&D(this,hr).size===0||await j(this,Le,Oo).call(this,"idle")}get size(){return D(this,hr).size}sizeBy(t){return D(this,hr).filter(t).length}get pending(){return D(this,Rr)}get isPaused(){return D(this,ya)}}Wn=new WeakMap,Gn=new WeakMap,Ua=new WeakMap,To=new WeakMap,Yn=new WeakMap,Io=new WeakMap,Mr=new WeakMap,Vn=new WeakMap,hr=new WeakMap,Do=new WeakMap,Rr=new WeakMap,$n=new WeakMap,ya=new WeakMap,Bo=new WeakMap,Le=new WeakSet,wl=function(){return D(this,Gn)||D(this,Ua)<D(this,To)},bl=function(){return D(this,Rr)<D(this,$n)},yl=function(){Ui(this,Rr)._--,j(this,Le,Mo).call(this),this.emit("next")},_l=function(){j(this,Le,Gi).call(this),j(this,Le,Wi).call(this),Zt(this,Vn,void 0)},xl=function(){const r=Date.now();if(D(this,Mr)===void 0){const t=D(this,Io)-r;if(t<0)Zt(this,Ua,D(this,Wn)?D(this,Rr):0);else return D(this,Vn)===void 0&&Zt(this,Vn,setTimeout(()=>{j(this,Le,_l).call(this)},t)),!0}return!1},Mo=function(){if(D(this,hr).size===0)return D(this,Mr)&&clearInterval(D(this,Mr)),Zt(this,Mr,void 0),this.emit("empty"),D(this,Rr)===0&&this.emit("idle"),!1;if(!D(this,ya)){const r=!D(this,Le,xl);if(D(this,Le,wl)&&D(this,Le,bl)){const t=D(this,hr).dequeue();return t?(this.emit("active"),t(),r&&j(this,Le,Wi).call(this),!0):!1}}return!1},Wi=function(){D(this,Gn)||D(this,Mr)!==void 0||(Zt(this,Mr,setInterval(()=>{j(this,Le,Gi).call(this)},D(this,Yn))),Zt(this,Io,Date.now()+D(this,Yn)))},Gi=function(){D(this,Ua)===0&&D(this,Rr)===0&&D(this,Mr)&&(clearInterval(D(this,Mr)),Zt(this,Mr,void 0)),Zt(this,Ua,D(this,Wn)?D(this,Rr):0),j(this,Le,Ro).call(this)},Ro=function(){for(;j(this,Le,Mo).call(this););},kl=async function(r){return new Promise((t,e)=>{r.addEventListener("abort",()=>{e(r.reason)},{once:!0})})},Oo=async function(r,t){return new Promise(e=>{const a=()=>{t&&!t()||(this.off(r,a),e())};this.on(r,a)})};class hv{constructor(){Tt(this,Lo),Tt(this,No,3),Tt(this,Yi,new Bi({concurrency:5,interval:1e3,intervalCap:4}))}async updateDirHandle(){return(await ev()).name}async download(t,e={}){const{signal:a,priority:n}=e;if(a?.throwIfAborted(),Ct.info("Downloader add:",t),Array.isArray(t)||(t=[t]),t.length<1)return;const o=t.map(s=>j(this,Lo,Pl).call(this,s,n,a)),i=await Promise.allSettled(o);for(const s of i)if(s.status==="rejected")throw s.reason}}No=new WeakMap,Yi=new WeakMap,Lo=new WeakSet,El=function(r,t){if(t?.aborted)return Promise.resolve([t.reason,null]);const{src:e,onProgress:a,timeout:n,taskId:o,headers:i}=r;return new Promise(s=>{const l=Cd({url:e,method:"GET",responseType:"blob",timeout:n,headers:i,ontimeout(){s([new Xs(`${o} | ${e}`),null])},onerror(c){let d;c.status===429?d=new ir(r.src,c.status):d=new Error(`Download failed. ID: ${o}.`),s([d,null])},onprogress(c){if(c.loaded>0&&c.total>0){const d=Math.floor(c.loaded/c.total*100);a?.(d,r)}},onload(c){const{status:d,statusText:u,finalUrl:g}=c;if(d<200||d>299){s([new ir(u+" "+g,d),null]);return}s([null,c.response])}});t?.addEventListener("abort",()=>{l.abort(),s([t.reason,null])},{once:!0})})},Pl=async function(r,t=0,e){var a,n,o,i;try{const{src:s,taskId:l,path:c,useFileSystemAccessApi:d,filenameConflictAction:u}=r,g=await D(this,Yi).add(async({signal:b})=>{b?.throwIfAborted(),Ct.info("Download start:",s);let w,y=0;do{const _=await j(this,Lo,El).call(this,r,b);if(b?.throwIfAborted(),_[0]===null){w=_[1];break}else{const k=_[0];if(!(k instanceof Xs)||++y>D(this,No))throw k;Ct.error(`Download will be retried. Count: ${y}.`,k)}}while(y<=D(this,No));return w},{signal:e,priority:t});if(!g)throw new Xs(`${l} | ${s}`);Ct.info("Xhr complete:",s),(a=r.onXhrLoaded)==null||a.call(r,r);const p=iv.getAdapter(d,u);if(typeof r.beforeFileSave=="function"){const b=await r.beforeFileSave(g,r);if(e?.throwIfAborted(),!b)return;await p(b,c,e)}else await p(g,c,e);(n=r.onFileSaved)==null||n.call(r,r),Ct.info("Download complete:",c)}catch(s){throw s instanceof Si?(o=r.onAbort)==null||o.call(r,r):(i=r.onError)==null||i.call(r,s,r),s}};const Ue=new hv,It=Oa("pdl-download-setting",{directoryTemplate:Ut.folderPattern??"",filenameTemplate:Ut.filenamePattern??"{id}",useFileSystemAccessApi:Ut.useFileSystemAccess??!1,filenameConflictAction:Ut.fileSystemFilenameConflictAction??Mn.UNIQUIFY},{get isSubpathSupported(){return this.useFileSystemAccessApi||Ye.isSupportSubpath()},setDirectoryTemplate(r){const t=r.split("/").map(Fs).filter(Boolean).join("/");return t!==this.directoryTemplate&&(this.directoryTemplate=t),t},setFilenameTemplate(r){const t=Fs(r);return t===""?this.filenameTemplate:(t!==this.filenameTemplate&&(this.filenameTemplate=t),t)}});var pa=(r=>(r.JAPANESE="ja",r.CHINESE="zh",r.TRADITIONAL_CHINESE="zh_tw",r.ENGLISH="en",r))(pa||{});const Pt=Oa("pdl-site-state",{ugoiraFormat:null,mixSeasonalEffect:null,tagLocale:null,compressMultiIllusts:null,compressManga:null,addBookmark:Ut.addBookmark??null,bookmarkWithTags:null,privateBookmarkIfR18:null,likeIllustWhenDownloading:null});async function gv(){Ue.updateDirHandle()}var vv=q('<input type="text">'),mv=q('<input type="text" disabled>'),wv=q('<button class="chip variant-soft hover:variant-filled"><span> </span></button>'),bv=q("<!> <!> <!>",1),yv=q('<li><p class="flex-auto"> </p> <span class="text-sm italic"> </span> <button class="btn btn-sm variant-filled"> </button></li> <li><p class="flex-auto"> </p> <!></li>',1),_v=q('<button class="chip variant-soft hover:variant-filled"><span> </span></button>'),xv=q("<!> <!> <!> <!>",1),kv=q('<li><div class="flex-auto"><p> </p> <p> </p></div> <!></li>'),Ev=q('<div><section><p> </p> <ul><li class=" flex-col gap-3"><div class="input-group input-group-divider grid-cols-[auto_1fr_auto_auto]"><button type="button" class="[&amp;:not([disabled])]:variant-soft-primary"><i class=" w-6 fill-current"><!></i></button> <!> <button type="button" class="variant-soft-surface [&amp;:not([disabled])]:variant-soft-primary"><i class=" w-6 fill-current"><!></i></button></div> <div class=" flex flex-wrap self-start gap-y-1 gap-x-2"></div></li> <li><p class="flex-auto"> </p> <!></li> <!></ul></section> <section><p> </p> <ul><li class=" flex-col gap-3"><div class="input-group input-group-divider grid-cols-[auto_1fr_auto]"><button type="button" class="[&amp;:not([disabled])]:variant-soft-primary"><i class=" w-6 fill-current"><!></i></button> <input type="text" required> <button type="button" class="variant-soft-surface dark:variant-fill-surface [&amp;:not([disabled])]:variant-soft-primary"><i class=" w-6 fill-current"><!></i></button></div> <div class=" flex flex-wrap self-start gap-y-1 gap-x-2"></div></li> <!></ul></section></div>');function Pv(r,t){_e(t,!0);const[e,a]=Ma(),n=()=>wr(T,"$directoryHandleStore",e);let o=m(t,"bg",3,"bg-white/30 dark:bg-black/15"),i=m(t,"border",3,"divide-y-[1px] *:border-surface-300-600-token"),s=m(t,"padding",3,"px-4 *:py-4"),l=m(t,"margin",3,"mt-2 *:!m-0"),c=m(t,"rounded",3,"rounded-container-token *:!rounded-none"),d=m(t,"sectionSpace",19,()=>"space-y-4"),u=m(t,"sectionTitle",3,"font-bold"),g=m(t,"class",3,""),p=m(t,"templates",19,()=>te("supportedTemplate")),b=m(t,"descriptionText",3,"text-sm text-surface-400");const w=de(()=>`list *:items-center ${s()} ${l()} ${i()} ${o()} ${c()} ${g()}`);let y,_,k=Ge(ie(It.directoryTemplate)),x=Ge(ie(It.filenameTemplate));const T=_o.liveQuery(async()=>{var et;return((et=await se.getDirectoryHandle())==null?void 0:et.name)??""});async function P(){S(k,ie(It.directoryTemplate)),await so();const et=f(k).length;y.focus(),y.setSelectionRange(et,et)}async function L(){S(x,ie(It.filenameTemplate)),await so();const et=f(x).length;_.focus(),_.setSelectionRange(et,et)}function R(et){return async()=>{const gt=y.selectionStart,At=y.selectionEnd;S(k,f(k).slice(0,gt)+et+f(k).slice(At)),await so();const ne=gt+et.length;y.focus(),y.setSelectionRange(ne,ne)}}function z(et){return async()=>{const gt=_.selectionStart,At=_.selectionEnd;S(x,f(x).slice(0,gt)+et+f(x).slice(At)),await so();const ne=gt+et.length;_.focus(),_.setSelectionRange(ne,ne)}}const B=de(()=>f(k)===It.directoryTemplate),F=de(()=>f(x)===It.filenameTemplate),J=de(()=>It.isSubpathSupported?N("setting.save_to.placeholder.sub_directory_unused"):Ye.isViolentmonkey()?N("setting.save_to.placeholder.vm_not_supported"):N("setting.save_to.placeholder.need_browser_api"));var K=Ev(),Y=v(K),ft=v(Y),lt=v(ft,!0);C(()=>Q(lt,N("setting.save_to.label.directory"))),h(ft);var Ot=E(ft,2),jt=v(Ot),ot=v(jt),it=v(ot);it.__click=P;var W=v(it),nt=v(W);Ee(nt,()=>$g),h(W),h(it);var M=E(it,2);{var G=et=>{var gt=vv();mr(gt),Ze(gt,At=>y=At,()=>y),C(()=>Mt(gt,"placeholder",f(J))),In(gt,()=>f(k),At=>S(k,At)),A(et,gt)},Z=et=>{var gt=mv();C(()=>Mt(gt,"placeholder",f(J))),A(et,gt)};bt(M,et=>{It.isSubpathSupported?et(G):et(Z,!1)})}var rt=E(M,2);rt.__click=()=>S(k,ie(It.setDirectoryTemplate(f(k))));var mt=v(rt),kt=v(mt);Ee(kt,()=>Gd),h(mt),h(rt),h(ot);var yt=E(ot,2);ur(yt,21,()=>Object.entries(p()),la,(et,gt)=>{let At=()=>f(gt)[0],ne=()=>f(gt)[1];var be=wv(),ge=de(()=>R(`{${At()}}`));be.__click=function(...Bt){var Wt;(Wt=f(ge))==null||Wt.apply(this,Bt)};var X=v(be),$t=v(X,!0);h(X),h(be),C(()=>{be.disabled=!It.isSubpathSupported,Q($t,ne())}),A(et,be)}),h(yt),h(jt);var wt=E(jt,2),St=v(wt),qt=v(St,!0);C(()=>Q(qt,N("setting.save_to.options.use_fsa"))),h(St);var zt=E(St,2),Yt=de(()=>!Ye.isFileSystemAccessAvaliable());zr(zt,{size:"sm",name:"fsa-enable",get disabled(){return f(Yt)},get checked(){return It.useFileSystemAccessApi},set checked(et){It.useFileSystemAccessApi=et}}),h(wt);var $=E(wt,2);{var H=et=>{var gt=yv(),At=ee(gt),ne=v(At),be=v(ne,!0);C(()=>Q(be,N("setting.save_to.options.fsa_directory"))),h(ne);var ge=E(ne,2),X=v(ge,!0);h(ge);var $t=E(ge,2);$t.__click=[gv];var Bt=v($t,!0);C(()=>Q(Bt,N("setting.save_to.button.choose_fsa_directory"))),h($t),h(At);var Wt=E(At,2),re=v(Wt),Ce=v(re,!0);C(()=>Q(Ce,N("setting.save_to.options.fsa_filename_conflict"))),h(re);var ae=E(re,2);Fa(ae,{class:"shrink-0",children:(Lt,oe)=>{var ue=bv(),ve=ee(ue);Oe(ve,{name:"FilenameConflictAction",class:"text-sm",get value(){return Mn.UNIQUIFY},get group(){return It.filenameConflictAction},set group(Ie){It.filenameConflictAction=Ie},children:(Ie,_r)=>{Se();var He=Pe();C(()=>Q(He,N("setting.save_to.radio.filename_conflict_option_uniquify"))),A(Ie,He)},$$slots:{default:!0}});var Ne=E(ve,2);Oe(Ne,{name:"FilenameConflictAction",class:"text-sm",get value(){return Mn.OVERWRITE},get group(){return It.filenameConflictAction},set group(Ie){It.filenameConflictAction=Ie},children:(Ie,_r)=>{Se();var He=Pe();C(()=>Q(He,N("setting.save_to.radio.filename_conflict_option_overwrite"))),A(Ie,He)},$$slots:{default:!0}});var Ve=E(Ne,2);Oe(Ve,{name:"FilenameConflictAction",class:"text-sm",get value(){return Mn.PROMPT},get group(){return It.filenameConflictAction},set group(Ie){It.filenameConflictAction=Ie},children:(Ie,_r)=>{Se();var He=Pe();C(()=>Q(He,N("setting.save_to.radio.filename_conflict_option_prompt"))),A(Ie,He)},$$slots:{default:!0}}),A(Lt,ue)},$$slots:{default:!0}}),h(Wt),C(()=>Q(X,n())),A(et,gt)};bt($,et=>{It.useFileSystemAccessApi&&et(H)})}h(Ot),h(Y);var tt=E(Y,2),ct=v(tt),Qt=v(ct,!0);C(()=>Q(Qt,N("setting.save_to.label.filename"))),h(ct);var dt=E(ct,2),vt=v(dt),Et=v(vt),_t=v(Et);_t.__click=L;var Dt=v(_t),O=v(Dt);Ee(O,()=>Jg),h(Dt),h(_t);var pt=E(_t,2);mr(pt),C(()=>Mt(pt,"placeholder",N("setting.save_to.placeholder.filename_requried"))),Ze(pt,et=>_=et,()=>_);var st=E(pt,2);st.__click=()=>S(x,ie(It.setFilenameTemplate(f(x))));var Rt=v(st),Nt=v(Rt);Ee(Nt,()=>Gd),h(Rt),h(st),h(Et);var Gt=E(Et,2);ur(Gt,21,()=>Object.entries(p()),la,(et,gt)=>{let At=()=>f(gt)[0],ne=()=>f(gt)[1];var be=_v(),ge=de(()=>z(`{${At()}}`));be.__click=function(...Bt){var Wt;(Wt=f(ge))==null||Wt.apply(this,Bt)};var X=v(be),$t=v(X,!0);h(X),h(be),C(()=>Q($t,ne())),A(et,be)}),h(Gt),h(vt);var xt=E(vt,2);{var Ht=et=>{var gt=kv(),At=v(gt),ne=v(At),be=v(ne,!0);C(()=>Q(be,N("setting.save_to.options.tag_language"))),h(ne);var ge=E(ne,2),X=v(ge,!0);C(()=>Q(X,N("setting.save_to.options.tag_language_tips"))),h(ge),h(At);var $t=E(At,2);Fa($t,{class:" shrink-0",children:(Bt,Wt)=>{var re=xv(),Ce=ee(re);Oe(Ce,{name:"tagLang",class:"text-sm",get value(){return pa.JAPANESE},get group(){return Pt.tagLocale},set group(ue){Pt.tagLocale=ue},children:(ue,ve)=>{Se();var Ne=Pe("\u65E5\u672C\u8A9E");A(ue,Ne)},$$slots:{default:!0}});var ae=E(Ce,2);Oe(ae,{name:"tagLang",class:"text-sm",get value(){return pa.CHINESE},get group(){return Pt.tagLocale},set group(ue){Pt.tagLocale=ue},children:(ue,ve)=>{Se();var Ne=Pe("\u7B80\u4E2D");A(ue,Ne)},$$slots:{default:!0}});var Lt=E(ae,2);Oe(Lt,{name:"tagLang",class:"text-sm",get value(){return pa.TRADITIONAL_CHINESE},get group(){return Pt.tagLocale},set group(ue){Pt.tagLocale=ue},children:(ue,ve)=>{Se();var Ne=Pe("\u7E41\u4E2D");A(ue,Ne)},$$slots:{default:!0}});var oe=E(Lt,2);Oe(oe,{name:"tagLang",class:"text-sm",get value(){return pa.ENGLISH},get group(){return Pt.tagLocale},set group(ue){Pt.tagLocale=ue},children:(ue,ve)=>{Se();var Ne=Pe("En");A(ue,Ne)},$$slots:{default:!0}}),A(Bt,re)},$$slots:{default:!0}}),h(gt),C(()=>U(ge,Ft(b()))),A(et,gt)};bt(xt,et=>{Ye.isPixiv()&&et(Ht)})}h(dt),h(tt),h(K),C(()=>{U(K,Ft(d())),U(ft,Ft(u())),U(Ot,Ft(f(w))),it.disabled=f(B),rt.disabled=f(B),U(ct,Ft(u())),U(dt,Ft(f(w))),_t.disabled=f(F),st.disabled=f(F)}),In(pt,()=>f(x),et=>S(x,et)),A(r,K),xe(),a()}sa(["click"]);const qe=Oa("pdl-convert-setting",{mp4Bitrate:Ut.mp4Bitrate??20,webmBitrate:Ut.webmBitrate??20,gifQuality:Ut.gifQuality??10,pngColor:Ut.pngColor??256,losslessWebp:Ut.losslessWebp??!1,webpQuality:Ut.webpQuality??95,webpMehtod:Ut.webpMehtod??4});var Av=q("<!> <!> <!> <!> <!> <!>",1),Sv=q("<option> </option>"),Cv=q("<option> </option>"),Tv=q('<div><section><p> </p> <ul><li><p class="flex-auto"> </p> <!></li></ul></section> <section><p> </p> <ul><li><div class="flex-auto"><p>Webm</p> <p>Bitrate (Mbps)</p></div> <input type="number" required min="1" max="120" step="1"></li> <li><div class="flex-auto"><p>Mp4</p> <p>Bitrate (Mbps)</p></div> <input type="number" required min="1" max="99" step="1"></li> <li class="flex-col !items-stretch"><p>Webp</p> <ul><li class="items-center"><p class="flex-auto"> </p> <!></li> <li class="items-center"><div class="flex-auto"><p> </p> <p> </p></div> <input type="number" required min="0" max="100" step="1"></li> <li class="items-center"><div class="flex-auto"><p> </p> <p> </p></div> <select></select></li></ul></li> <li><div class="flex-auto"><p>Gif</p> <p> </p></div> <select></select></li> <li><div class="flex-auto"><p>Png</p> <p> </p></div> <input type="number" required min="0" max="256" step="1"></li></ul></section></div>');function Iv(r,t){_e(t,!0);let e=m(t,"bg",3,"bg-white/30 dark:bg-black/15"),a=m(t,"border",3,"divide-y-[1px] *:border-surface-300-600-token"),n=m(t,"padding",3,"px-4 *:py-4"),o=m(t,"margin",3,"mt-2 *:!m-0"),i=m(t,"rounded",3,"rounded-container-token *:!rounded-none"),s=m(t,"sectionSpace",19,()=>"space-y-4"),l=m(t,"sectionTitle",3,"font-bold"),c=m(t,"class",3,""),d=m(t,"descriptionText",3,"text-sm text-surface-400"),u=m(t,"inputRounded",3,"rounded-full"),g=m(t,"inputWidth",3,"w-32");const p=de(()=>`list *:items-center ${n()} ${o()} ${a()} ${e()} ${i()} ${c()}`),b=de(()=>`${g()} ${u()} shrink-0`);var w=Tv(),y=v(w),_=v(y),k=v(_,!0);C(()=>Q(k,N("setting.ugoira.label.format"))),h(_);var x=E(_,2),T=v(x),P=v(T),L=v(P,!0);C(()=>Q(L,N("setting.ugoira.options.select_format"))),h(P);var R=E(P,2);Fa(R,{class:"shrink-0",children:(xt,Ht)=>{var et=Av(),gt=ee(et);Oe(gt,{name:"ugoiraFormat",class:"text-sm",value:"zip",get group(){return Pt.ugoiraFormat},set group(Bt){Pt.ugoiraFormat=Bt},children:(Bt,Wt)=>{Se();var re=Pe("Zip");A(Bt,re)},$$slots:{default:!0}});var At=E(gt,2);Oe(At,{name:"ugoiraFormat",class:"text-sm",get value(){return Ke.WEBM},get group(){return Pt.ugoiraFormat},set group(Bt){Pt.ugoiraFormat=Bt},children:(Bt,Wt)=>{Se();var re=Pe("Webm");A(Bt,re)},$$slots:{default:!0}});var ne=E(At,2),be=de(()=>!Ye.videoFrameSupported());Oe(ne,{get disabled(){return f(be)},class:"text-sm",name:"ugoiraFormat",get value(){return Ke.MP4},get group(){return Pt.ugoiraFormat},set group(Bt){Pt.ugoiraFormat=Bt},children:(Bt,Wt)=>{Se();var re=Pe("Mp4");A(Bt,re)},$$slots:{default:!0}});var ge=E(ne,2);Oe(ge,{name:"ugoiraFormat",class:"text-sm",get value(){return Ke.WEBP},get group(){return Pt.ugoiraFormat},set group(Bt){Pt.ugoiraFormat=Bt},children:(Bt,Wt)=>{Se();var re=Pe("Webp");A(Bt,re)},$$slots:{default:!0}});var X=E(ge,2);Oe(X,{name:"ugoiraFormat",class:"text-sm",get value(){return Ke.GIF},get group(){return Pt.ugoiraFormat},set group(Bt){Pt.ugoiraFormat=Bt},children:(Bt,Wt)=>{Se();var re=Pe("Gif");A(Bt,re)},$$slots:{default:!0}});var $t=E(X,2);Oe($t,{name:"ugoiraFormat",class:"text-sm",get value(){return Ke.PNG},get group(){return Pt.ugoiraFormat},set group(Bt){Pt.ugoiraFormat=Bt},children:(Bt,Wt)=>{Se();var re=Pe("Png");A(Bt,re)},$$slots:{default:!0}}),A(xt,et)},$$slots:{default:!0}}),h(T),h(x),h(y);var z=E(y,2),B=v(z),F=v(B,!0);C(()=>Q(F,N("setting.ugoira.label.quality"))),h(B);var J=E(B,2),K=v(J),Y=v(K),ft=E(v(Y),2);h(Y);var lt=E(Y,2);ca(lt,(xt,Ht)=>tr?.(xt,Ht),()=>({get(){return qe.webmBitrate},set(xt){qe.webmBitrate=xt}})),h(K);var Ot=E(K,2),jt=v(Ot),ot=E(v(jt),2);h(jt);var it=E(jt,2);ca(it,(xt,Ht)=>tr?.(xt,Ht),()=>({get(){return qe.mp4Bitrate},set(xt){qe.mp4Bitrate=xt}})),h(Ot);var W=E(Ot,2),nt=E(v(W),2),M=v(nt),G=v(M),Z=v(G,!0);C(()=>Q(Z,N("setting.ugoira.options.webp_lossy"))),h(G);var rt=E(G,2);zr(rt,{name:"lossless-webp",size:"sm",get checked(){return qe.losslessWebp},set checked(xt){qe.losslessWebp=xt}}),h(M);var mt=E(M,2),kt=v(mt),yt=v(kt),wt=v(yt,!0);C(()=>Q(wt,N("setting.ugoira.options.webp_quality"))),h(yt);var St=E(yt,2),qt=v(St,!0);C(()=>Q(qt,N("setting.ugoira.options.webp_quality_tips"))),h(St),h(kt);var zt=E(kt,2);ca(zt,(xt,Ht)=>tr?.(xt,Ht),()=>({get(){return qe.webpQuality},set(xt){qe.webpQuality=xt}})),h(mt);var Yt=E(mt,2),$=v(Yt),H=v($),tt=v(H,!0);C(()=>Q(tt,N("setting.ugoira.options.webp_method"))),h(H);var ct=E(H,2),Qt=v(ct,!0);C(()=>Q(Qt,N("setting.ugoira.options.webp_method_tips"))),h(ct),h($);var dt=E($,2);ur(dt,20,()=>Array.from({length:7},(xt,Ht)=>Ht),la,(xt,Ht)=>{var et=Sv(),gt={},At=v(et,!0);h(et),C(()=>{gt!==(gt=Ht)&&(et.value=(et.__value=Ht)==null?"":Ht),Q(At,Ht)}),A(xt,et)}),h(dt),h(Yt),h(nt),h(W);var vt=E(W,2),Et=v(vt),_t=E(v(Et),2),Dt=v(_t,!0);C(()=>Q(Dt,N("setting.ugoira.options.gif_tips"))),h(_t),h(Et);var O=E(Et,2);ur(O,20,()=>Array.from({length:20},(xt,Ht)=>Ht),la,(xt,Ht)=>{var et=Cv(),gt={},At=v(et,!0);h(et),C(()=>{gt!==(gt=Ht+1)&&(et.value=(et.__value=Ht+1)==null?"":Ht+1),Q(At,Ht+1)}),A(xt,et)}),h(O),h(vt);var pt=E(vt,2),st=v(pt),Rt=E(v(st),2),Nt=v(Rt,!0);C(()=>Q(Nt,N("setting.ugoira.options.png_tips"))),h(Rt),h(st);var Gt=E(st,2);ca(Gt,(xt,Ht)=>tr?.(xt,Ht),()=>({get(){return qe.pngColor},set(xt){qe.pngColor=xt}})),h(pt),h(J),h(z),h(w),C(()=>{U(w,Ft(s())),U(_,Ft(l())),U(x,Ft(f(p))),U(B,Ft(l())),U(J,Ft(f(p))),U(ft,Ft(d())),U(lt,`input ${f(b)??""}`),U(ot,Ft(d())),U(it,`input ${f(b)??""}`),U(nt,`list ${a()??""} ${i()??""} [&:not(:last-child)]:*:py-4 [&:last-child]:*:pt-4`),U(St,Ft(d())),U(zt,`input ${f(b)??""}`),U(ct,Ft(d())),U(dt,`select ${f(b)??""}`),U(_t,Ft(d())),U(O,`select ${f(b)??""}`),U(Rt,Ft(d())),U(Gt,`input ${f(b)??""}`)}),mi(dt,()=>qe.webpMehtod,xt=>qe.webpMehtod=xt),mi(O,()=>qe.gifQuality,xt=>qe.gifQuality=xt),A(r,w),xe()}function Dv(r,t){return new Promise(e=>{if(t.type!==r)throw new Error("Invalid file");const a=new FileReader;a.readAsText(t),a.onload=n=>{var o;const i=(o=n.target)==null?void 0:o.result;if(typeof i!="string")throw new Error("Invalid file");const s=JSON.parse(i);if(!(s instanceof Array))throw new Error("Invalid file");e(s)}})}function Bv(r){return Dv("application/json",r).then(t=>se.import(t))}function Mv(){return se.getAll().then(r=>{const t=JSON.stringify(r),e=new Blob([t],{type:"application/json"}),a=`Pixiv Downloader_${location.hostname}_${new Date().toLocaleString()}.json`;xd(e,a)})}function Rv(){return se.generateCsv().then(r=>{const t=`Pixiv Downloader_${location.hostname}_${new Date().toLocaleString()}.csv`;xd(r,t)})}function Kd(){return{importJSON:Bv,exportAsJSON:Mv,exportAsCSV:Rv}}var fr=(r=>(r[r.NEVER=0]="NEVER",r[r.EVERY_DAY=864e5]="EVERY_DAY",r[r.EVERY_7_DAY=6048e5]="EVERY_7_DAY",r[r.EVERY_30_DAY=2592e6]="EVERY_30_DAY",r))(fr||{});const bo=Oa("pdl-backup-setting",{interval:Ut.historyBackupInterval??0,lastTimestamp:Ut.lastHistoryBackup??0});var Ov=q("<!> <span> </span>",1),Nv=q('<div><section><p> </p> <ul><li><p class="flex-auto"> </p> <select><option> </option><option> </option><option> </option><option> </option></select></li></ul></section> <section><p> </p> <ul><li><p class="flex-auto"> </p> <button class="btn variant-filled"><!> <span> </span></button></li> <li><p class="flex-auto"> </p> <button class="btn variant-filled"><!> <span> </span></button></li></ul></section> <section><p> </p> <ul><li><p class="flex-auto"> </p> <!></li></ul></section> <section><p> </p> <ul><li><p class="flex-auto"> </p> <button class="btn variant-filled"><!> <span> </span></button></li></ul></section></div>');function Lv(r,t){_e(t,!0);const[e,a]=Ma(),n=()=>wr(ft,"$exportJsonPending",e),o=()=>wr(Ot,"$exportCsvPending",e),i=()=>wr(F,"$importPending",e),s=()=>wr(K,"$clearPending",e);let l=m(t,"bg",3,"bg-white/30 dark:bg-black/15"),c=m(t,"border",3,"divide-y-[1px] *:border-surface-300-600-token"),d=m(t,"padding",3,"px-4 *:py-4"),u=m(t,"margin",3,"mt-2 *:!m-0"),g=m(t,"rounded",3,"rounded-container-token *:!rounded-none"),p=m(t,"sectionSpace",19,()=>"space-y-4"),b=m(t,"sectionTitle",3,"font-bold"),w=m(t,"inputRounded",3,"rounded-full"),y=m(t,"inputWidth",3,"w-32"),_=m(t,"class",3,"");const k=de(()=>`list *:items-center ${d()} ${u()} ${c()} ${l()} ${g()} ${_()}`),x=de(()=>`${y()} ${w()} shrink-0`);function T(Be){const Hr=Ra(!1);return{store:Hr,async wrapFn(...ma){Hr.set(!0);const wa=await Be(...ma);return Hr.set(!1),wa}}}async function P(Be){var Hr;const ma=(Hr=Be.currentTarget.files)==null?void 0:Hr[0];if(ma)try{await R(ma)}catch(wa){Ct.error(wa),alert(wa)}}function L(){if(confirm(N("setting.history.text.confirm_clear_history")))return se.clear()}const{importJSON:R,exportAsJSON:z,exportAsCSV:B}=Kd(),{store:F,wrapFn:J}=T(P),{store:K,wrapFn:Y}=T(L),{store:ft,wrapFn:lt}=T(z),{store:Ot,wrapFn:jt}=T(B);var ot=Nv(),it=v(ot),W=v(it),nt=v(W,!0);C(()=>Q(nt,N("setting.history.label.scheduled_backups"))),h(W);var M=E(W,2),G=v(M),Z=v(G),rt=v(Z,!0);C(()=>Q(rt,N("setting.history.options.scheduled_backups"))),h(Z);var mt=E(Z,2),kt=v(mt),yt={},wt=v(kt,!0);C(()=>Q(wt,N("setting.history.select.backup_interval_never"))),h(kt);var St=E(kt),qt={},zt=v(St,!0);C(()=>Q(zt,N("setting.history.select.backup_interval_every_day"))),h(St);var Yt=E(St),$={},H=v(Yt,!0);C(()=>Q(H,N("setting.history.select.backup_interval_every_7_day"))),h(Yt);var tt=E(Yt),ct={},Qt=v(tt,!0);C(()=>Q(Qt,N("setting.history.select.backup_interval_every_30_day"))),h(tt),h(mt),h(G),h(M),h(it);var dt=E(it,2),vt=v(dt),Et=v(vt,!0);C(()=>Q(Et,N("setting.history.label.export"))),h(vt);var _t=E(vt,2),Dt=v(_t),O=v(Dt),pt=v(O,!0);C(()=>Q(pt,N("setting.history.options.export_as_json"))),h(O);var st=E(O,2);st.__click=async()=>{await lt(),bo.lastTimestamp=new Date().getTime()};var Rt=v(st);{var Nt=Be=>{mo(Be,{stroke:80,width:"w-5",meter:"stroke-primary-500",track:"stroke-primary-500/30"})};bt(Rt,Be=>{n()&&Be(Nt)})}var Gt=E(Rt,2),xt=v(Gt,!0);C(()=>Q(xt,N("setting.history.button.export"))),h(Gt),h(st),h(Dt);var Ht=E(Dt,2),et=v(Ht),gt=v(et,!0);C(()=>Q(gt,N("setting.history.options.export_as_csv"))),h(et);var At=E(et,2);At.__click=jt;var ne=v(At);{var be=Be=>{mo(Be,{stroke:80,width:"w-5",meter:"stroke-primary-500",track:"stroke-primary-500/30"})};bt(ne,Be=>{o()&&Be(be)})}var ge=E(ne,2),X=v(ge,!0);C(()=>Q(X,N("setting.history.button.export"))),h(ge),h(At),h(Ht),h(_t),h(dt);var $t=E(dt,2),Bt=v($t),Wt=v(Bt,!0);C(()=>Q(Wt,N("setting.history.label.import"))),h(Bt);var re=E(Bt,2),Ce=v(re),ae=v(Ce),Lt=v(ae,!0);C(()=>Q(Lt,N("setting.history.options.import_json"))),h(ae);var oe=E(ae,2);oh(oe,{name:"import-file",accept:".json",get disabled(){return Uf(),i()},set disabled(Be){Hf(F,ie(Be))},$$events:{change:J},children:(Be,Hr)=>{var ma=Ov(),wa=ee(ma);{var bw=fl=>{mo(fl,{stroke:80,width:"w-5",meter:"stroke-primary-500",track:"stroke-primary-500/30"})};bt(wa,fl=>{i()&&fl(bw)})}var du=E(wa,2),yw=v(du,!0);C(()=>Q(yw,N("setting.history.button.import"))),h(du),A(Be,ma)},$$slots:{default:!0}}),h(Ce),h(re),h($t);var ue=E($t,2),ve=v(ue),Ne=v(ve,!0);C(()=>Q(Ne,N("setting.history.label.clear"))),h(ve);var Ve=E(ve,2),Ie=v(Ve),_r=v(Ie),He=v(_r,!0);C(()=>Q(He,N("setting.history.options.clear_history"))),h(_r);var xr=E(_r,2);xr.__click=Y;var cn=v(xr);{var zi=Be=>{mo(Be,{stroke:80,width:"w-5",meter:"stroke-primary-500",track:"stroke-primary-500/30"})};bt(cn,Be=>{s()&&Be(zi)})}var jn=E(cn,2),dn=v(jn,!0);C(()=>Q(dn,N("setting.history.button.clear"))),h(jn),h(xr),h(Ie),h(Ve),h(ue),h(ot),C(()=>{U(ot,Ft(p())),U(W,Ft(b())),U(M,Ft(f(k))),U(mt,`select ${f(x)??""}`),yt!==(yt=fr.NEVER)&&(kt.value=(kt.__value=fr.NEVER)==null?"":fr.NEVER),qt!==(qt=fr.EVERY_DAY)&&(St.value=(St.__value=fr.EVERY_DAY)==null?"":fr.EVERY_DAY),$!==($=fr.EVERY_7_DAY)&&(Yt.value=(Yt.__value=fr.EVERY_7_DAY)==null?"":fr.EVERY_7_DAY),ct!==(ct=fr.EVERY_30_DAY)&&(tt.value=(tt.__value=fr.EVERY_30_DAY)==null?"":fr.EVERY_30_DAY),U(vt,Ft(b())),U(_t,Ft(f(k))),st.disabled=n(),At.disabled=o(),U(Bt,Ft(b())),U(re,Ft(f(k))),U(ve,Ft(b())),U(Ve,Ft(f(k))),xr.disabled=s()}),mi(mt,()=>bo.interval,Be=>bo.interval=Be),A(r,ot),xe(),a()}sa(["click"]);const Fv='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-align-left-icon lucide-align-left"><path d="M15 12H3"/><path d="M17 18H3"/><path d="M21 6H3"/></svg>',jv='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-align-right-icon lucide-align-right"><path d="M21 12H9"/><path d="M21 18H7"/><path d="M21 6H3"/></svg>',zv='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-align-start-horizontal-icon lucide-align-start-horizontal"><rect width="6" height="16" x="4" y="6" rx="2"/><rect width="6" height="9" x="14" y="6" rx="2"/><path d="M22 2H2"/></svg>',Hv='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-align-end-horizontal-icon lucide-align-end-horizontal"><rect width="6" height="16" x="4" y="2" rx="2"/><rect width="6" height="9" x="14" y="9" rx="2"/><path d="M22 22H2"/></svg>';var Uv=q("<!> <!>",1),qv=q('<button class="btn variant-filled rounded-r-none text-xl flex-[1]">+</button> <input type="number" class="input variant-form-material text-sm flex-[3]" min="0"> <button class=" btn variant-filled rounded-l-none text-xl flex-[1]">-</button>',1),Wv=q("<!> <!>",1),Gv=q('<button class="btn variant-filled rounded-r-none text-xl flex-[1]">+</button> <input type="number" class="input variant-form-material text-sm flex-[3]" min="0"> <button class=" btn variant-filled rounded-l-none text-xl flex-[1]">-</button>',1),Yv=q('<div class="flex justify-between items-center"><p> </p> <div class="text-xs"> </div></div>'),Vv=q('<div class="flex justify-between items-center"><p> </p> <div class="text-xs"> </div></div>'),$v=q('<section><p> </p> <ul><li class="flex-col !items-stretch md:flex-row md:!items-baseline gap-4 *:!m-0"><!> <!></li></ul></section>'),Jv=q("<i><!></i>"),Qv=q("<i><!></i>"),Kv=q("<!> <!>",1),Xv=q("<i><!></i>"),Zv=q("<i><!></i>"),tm=q("<!> <!>",1),em=q('<div><div class="flex items-center justify-center"><div></div></div> <section><p> </p> <ul><li class="flex-col !items-stretch md:flex-row md:!items-baseline gap-4 *:!m-0"><div class=" flex-1"><div class="flex justify-between items-center"><p> </p> <!></div> <div class="flex flex-row mt-2 gap-1 h-8"><!></div></div> <div class=" flex-1"><div class="flex justify-between items-center"><p> </p> <!></div> <div class="flex flex-row mt-2 gap-1 h-8"><!></div></div></li></ul></section> <!> <section><p> </p> <ul><li class="flex-col !items-stretch md:flex-row md:!items-center gap-4 *:!m-0"><div class="flex flex-1 justify-between items-center"><p> </p> <!></div> <div class="flex flex-1 justify-between items-center"><p> </p> <!></div></li></ul></section></div>');function rm(r,t){_e(t,!0);let e=m(t,"bg",3,"bg-white/30 dark:bg-black/15"),a=m(t,"border",3,"divide-y-[1px] *:border-surface-300-600-token"),n=m(t,"padding",3,"px-4 *:py-4"),o=m(t,"margin",3,"mt-2 *:!m-0"),i=m(t,"rounded",3,"rounded-container-token *:!rounded-none"),s=m(t,"sectionSpace",19,()=>"space-y-4"),l=m(t,"sectionTitle",3,"font-bold"),c=m(t,"class",3,"");const d=de(()=>`list *:items-center ${n()} ${o()} ${a()} ${e()} ${i()} ${c()}`),u=100,g=4;let p;Ls(()=>{const dt=new le({id:"0",shouldObserveDb:!1,onClick:()=>{}});if(dt.setAttribute("disabled",""),p.appendChild(dt),!Ye.isPixiv())return;const vt=new le({id:"0",type:Qe.PixivMyBookmark,shouldObserveDb:!1,onClick:()=>{}});vt.setAttribute("disabled",""),vt.setStatus(Us.Complete),p.appendChild(vt)});var b=em(),w=v(b),y=v(w);Ze(y,dt=>p=dt,()=>p),h(w);var _=E(w,2),k=v(_),x=v(k,!0);C(()=>Q(x,N("setting.button_position.label.common"))),h(k);var T=E(k,2),P=v(T),L=v(P),R=v(L),z=v(R),B=v(z,!0);C(()=>Q(B,N("setting.button_position.options.horizontal_position"))),h(z);var F=E(z,2);Fa(F,{children:(dt,vt)=>{var Et=Uv(),_t=ee(Et);Oe(_t,{name:"thumbnail-btn-unit-x",get value(){return Na.PERCENT},class:" text-xs",get group(){return Vt.thumbnailBtnUnitX},set group(O){Vt.thumbnailBtnUnitX=O},children:(O,pt)=>{Se();var st=Pe("%");A(O,st)},$$slots:{default:!0}});var Dt=E(_t,2);Oe(Dt,{name:"thumbnail-btn-unit-x",get value(){return Na.PX},class:" text-xs",get group(){return Vt.thumbnailBtnUnitX},set group(O){Vt.thumbnailBtnUnitX=O},children:(O,pt)=>{Se();var st=Pe("px");A(O,st)},$$slots:{default:!0}}),A(dt,Et)},$$slots:{default:!0}}),h(R);var J=E(R,2),K=v(J);{var Y=dt=>{var vt=qv(),Et=ee(vt);Et.__click=()=>Vt["--pdl-btn-left-px"]+=1;var _t=E(Et,2);ca(_t,(O,pt)=>tr?.(O,pt),()=>({get(){return Vt["--pdl-btn-left-px"]},set(O){Vt["--pdl-btn-left-px"]=O}}));var Dt=E(_t,2);Dt.__click=()=>Vt["--pdl-btn-left-px"]-=1,C(()=>Dt.disabled=Vt["--pdl-btn-left-px"]<1),A(dt,vt)},ft=dt=>{Ei(dt,{name:"thumbnail-btn-left",step:g,max:u,ticked:!0,class:" flex-grow self-center",get value(){return Vt[Fr.LEFT_PERCENT]},set value(vt){Vt[Fr.LEFT_PERCENT]=vt}})};bt(K,dt=>{Vt.thumbnailBtnUnitX===Na.PX?dt(Y):dt(ft,!1)})}h(J),h(L);var lt=E(L,2),Ot=v(lt),jt=v(Ot),ot=v(jt,!0);C(()=>Q(ot,N("setting.button_position.options.vertical_position"))),h(jt);var it=E(jt,2);Fa(it,{children:(dt,vt)=>{var Et=Wv(),_t=ee(Et);Oe(_t,{name:"thumbnail-btn-unit-y",get value(){return Na.PERCENT},class:" text-xs",get group(){return Vt.thumbnailBtnUnitY},set group(O){Vt.thumbnailBtnUnitY=O},children:(O,pt)=>{Se();var st=Pe("%");A(O,st)},$$slots:{default:!0}});var Dt=E(_t,2);Oe(Dt,{name:"thumbnail-btn-unit-y",get value(){return Na.PX},class:" text-xs",get group(){return Vt.thumbnailBtnUnitY},set group(O){Vt.thumbnailBtnUnitY=O},children:(O,pt)=>{Se();var st=Pe("px");A(O,st)},$$slots:{default:!0}}),A(dt,Et)},$$slots:{default:!0}}),h(Ot);var W=E(Ot,2),nt=v(W);{var M=dt=>{var vt=Gv(),Et=ee(vt);Et.__click=()=>Vt["--pdl-btn-top-px"]+=1;var _t=E(Et,2);ca(_t,(O,pt)=>tr?.(O,pt),()=>({get(){return Vt["--pdl-btn-top-px"]},set(O){Vt["--pdl-btn-top-px"]=O}}));var Dt=E(_t,2);Dt.__click=()=>Vt["--pdl-btn-top-px"]-=1,C(()=>Dt.disabled=Vt["--pdl-btn-top-px"]<1),A(dt,vt)},G=dt=>{Ei(dt,{name:"thumbnail-btn-top",step:g,max:u,ticked:!0,class:" flex-grow self-center",get value(){return Vt[Fr.TOP_PERCENT]},set value(vt){Vt[Fr.TOP_PERCENT]=vt}})};bt(nt,dt=>{Vt.thumbnailBtnUnitY===Na.PX?dt(M):dt(G,!1)})}h(W),h(lt),h(P),h(T),h(_);var Z=E(_,2);{var rt=dt=>{var vt=$v(),Et=v(vt),_t=v(Et,!0);C(()=>Q(_t,N("setting.button_position.label.my_bookmark"))),h(Et);var Dt=E(Et,2),O=v(Dt),pt=v(O);Ei(pt,{name:"pdl-bookmark-btn-left",step:g,max:u,ticked:!0,class:"flex-grow",get value(){return Vt[Fr.PIXIV_BOOKMARK_LEFT_PERCENT]},set value(Rt){Vt[Fr.PIXIV_BOOKMARK_LEFT_PERCENT]=Rt},children:(Rt,Nt)=>{var Gt=Yv(),xt=v(Gt),Ht=v(xt,!0);C(()=>Q(Ht,N("setting.button_position.options.horizontal_position"))),h(xt);var et=E(xt,2),gt=v(et);h(et),h(Gt),C(()=>Q(gt,`${Vt[Fr.PIXIV_BOOKMARK_LEFT_PERCENT]??""} / ${u}`)),A(Rt,Gt)},$$slots:{default:!0}});var st=E(pt,2);Ei(st,{name:"pdl-bookmark-btn-top",step:g,max:u,ticked:!0,class:"flex-grow",get value(){return Vt[Fr.PIXIV_BOOKMARK_TOP_PERCENT]},set value(Rt){Vt[Fr.PIXIV_BOOKMARK_TOP_PERCENT]=Rt},children:(Rt,Nt)=>{var Gt=Vv(),xt=v(Gt),Ht=v(xt,!0);C(()=>Q(Ht,N("setting.button_position.options.vertical_position"))),h(xt);var et=E(xt,2),gt=v(et);h(et),h(Gt),C(()=>Q(gt,`${Vt[Fr.PIXIV_BOOKMARK_TOP_PERCENT]??""} / ${u}`)),A(Rt,Gt)},$$slots:{default:!0}}),h(O),h(Dt),h(vt),C(()=>{U(Et,Ft(l())),U(Dt,Ft(f(d)))}),A(dt,vt)};bt(Z,dt=>{Ye.isPixiv()&&dt(rt)})}var mt=E(Z,2),kt=v(mt),yt=v(kt,!0);C(()=>Q(yt,N("setting.button_position.label.gallery"))),h(kt);var wt=E(kt,2),St=v(wt),qt=v(St),zt=v(qt),Yt=v(zt,!0);C(()=>Q(Yt,N("setting.button_position.options.horizontal_alignment"))),h(zt);var $=E(zt,2);Fa($,{children:(dt,vt)=>{var Et=Kv(),_t=ee(Et);Oe(_t,{name:"artwork-align-x",get value(){return _i.LEFT},class:" text-xs",get group(){return Vt.artworkBtnAlignX},set group(O){Vt.artworkBtnAlignX=O},children:(O,pt)=>{var st=Jv(),Rt=v(st);Ee(Rt,()=>Fv),h(st),A(O,st)},$$slots:{default:!0}});var Dt=E(_t,2);Oe(Dt,{name:"artwork-align-x",get value(){return _i.RIGHT},class:" text-xs",get group(){return Vt.artworkBtnAlignX},set group(O){Vt.artworkBtnAlignX=O},children:(O,pt)=>{var st=Qv(),Rt=v(st);Ee(Rt,()=>jv),h(st),A(O,st)},$$slots:{default:!0}}),A(dt,Et)},$$slots:{default:!0}}),h(qt);var H=E(qt,2),tt=v(H),ct=v(tt,!0);C(()=>Q(ct,N("setting.button_position.options.vertical_alignment"))),h(tt);var Qt=E(tt,2);Fa(Qt,{children:(dt,vt)=>{var Et=tm(),_t=ee(Et);Oe(_t,{name:"artwork-align-y",get value(){return xi.TOP},class:" text-xs",get group(){return Vt.artworkBtnAlignY},set group(O){Vt.artworkBtnAlignY=O},children:(O,pt)=>{var st=Xv(),Rt=v(st);Ee(Rt,()=>zv),h(st),A(O,st)},$$slots:{default:!0}});var Dt=E(_t,2);Oe(Dt,{name:"artwork-align-y",get value(){return xi.BOTTOM},class:" text-xs",get group(){return Vt.artworkBtnAlignY},set group(O){Vt.artworkBtnAlignY=O},children:(O,pt)=>{var st=Zv(),Rt=v(st);Ee(Rt,()=>Hv),h(st),A(O,st)},$$slots:{default:!0}}),A(dt,Et)},$$slots:{default:!0}}),h(H),h(St),h(wt),h(mt),h(b),C(()=>{U(b,Ft(s())),U(y,`w-48 h-48 backdrop-blur-sm rounded-lg relative overflow-hidden ${e()??""}`),U(k,Ft(l())),U(T,Ft(f(d))),U(kt,Ft(l())),U(wt,Ft(f(d)))}),A(r,b),xe()}sa(["click"]);let Xd=new vg("(prefers-color-scheme: dark)"),tl=Ge(0);const we=Oa("pdl-client-state",{theme:"auto",locale:ig.current,version:null,showPopupButton:Ut.showPopupButton??!0},{get autoTheme(){return f(tl),Xd.current?"dark":"light"},setThemeWatcher(r){S(tl,f(tl)+1),Xd=r}});co(()=>{Tr(()=>og(we.locale))});var am=q('<li><p class="flex-auto"> </p> <!></li>'),nm=q('<li><p class="flex-auto"> </p> <!></li> <li><div class="flex-auto"><p> </p> <p> </p></div> <!></li>',1),om=q('<li><label class="label flex flex-grow items-center justify-center"><p class="flex-auto"> </p> <!></label></li>'),im=q('<ul><li><label class="label flex flex-grow items-center justify-center"><p class="flex-auto"> </p> <!></label></li> <!></ul>'),sm=q('<li class="flex-col !items-stretch"><div class="flex items-center"><div class="flex-auto"><p> </p> <p> </p></div> <!></div> <!></li>'),lm=q('<section><p>\u5B9E\u9A8C\u6027\u529F\u80FD</p> <ul><li><div class="flex-auto"><p>\u4E3A\u5355\u9875\u63D2\u56FE\u589E\u52A0 #pixivGlow2024 \u6548\u679C</p> <p>* \u8F6C\u6362\u81F3\u52A8\u56FE\u683C\u5F0F\u3002\u5982\u679C\u63D2\u56FE\u5C3A\u5BF8\u8FC7\u5927\uFF0C\u53EF\u80FD\u5360\u7528\u5927\u91CF\u5185\u5B58 / \u8F6C\u6362\u5931\u8D25</p></div> <!></li></ul></section>'),cm=q('<div><ul><li><p class="flex-auto"> </p> <!></li> <!> <!> <!></ul> <!></div>');function dm(r,t){_e(t,!0);let e=m(t,"bg",3,"bg-white/30 dark:bg-black/15"),a=m(t,"border",3,"divide-y-[1px] *:border-surface-300-600-token"),n=m(t,"padding",3,"px-4 *:py-4"),o=m(t,"margin",3,"mt-2 *:!m-0"),i=m(t,"rounded",3,"rounded-container-token *:!rounded-none"),s=m(t,"sectionSpace",19,()=>"space-y-4"),l=m(t,"sectionTitle",3,"font-bold"),c=m(t,"descriptionText",3,"text-sm text-surface-400"),d=m(t,"class",3,"");const u=de(()=>`list *:items-center ${n()} ${o()} ${a()} ${e()} ${i()} ${d()}`);var g=cm(),p=v(g),b=v(p),w=v(b),y=v(w,!0);C(()=>Q(y,N("setting.others.options.show_setting_button"))),h(w);var _=E(w,2);zr(_,{name:"show-popup-button",size:"sm",get checked(){return we.showPopupButton},set checked(F){we.showPopupButton=F}}),h(b);var k=E(b,2);{var x=F=>{var J=am(),K=v(J),Y=v(K,!0);C(()=>Q(Y,N("setting.others.options.bundle_multipage_illust"))),h(K);var ft=E(K,2);zr(ft,{name:"bundle-illusts",size:"sm",get checked(){return Pt.compressMultiIllusts},set checked(lt){Pt.compressMultiIllusts=lt}}),h(J),A(F,J)};bt(k,F=>{(Ye.isPixiv()||Ye.isNijie())&&F(x)})}var T=E(k,2);{var P=F=>{var J=nm(),K=ee(J),Y=v(K),ft=v(Y,!0);C(()=>Q(ft,N("setting.others.options.bundle_manga"))),h(Y);var lt=E(Y,2);zr(lt,{name:"bundle-manga",size:"sm",get checked(){return Pt.compressManga},set checked(G){Pt.compressManga=G}}),h(K);var Ot=E(K,2),jt=v(Ot),ot=v(jt),it=v(ot,!0);C(()=>Q(it,N("setting.others.options.like_illust_when_downloading"))),h(ot);var W=E(ot,2),nt=v(W,!0);C(()=>Q(nt,N("setting.others.options.option_does_not_apply_to_batch_download"))),h(W),h(jt);var M=E(jt,2);zr(M,{name:"like-illust",size:"sm",get checked(){return Pt.likeIllustWhenDownloading},set checked(G){Pt.likeIllustWhenDownloading=G}}),h(Ot),C(()=>U(W,Ft(c()))),A(F,J)};bt(T,F=>{Ye.isPixiv()&&F(P)})}var L=E(T,2);{var R=F=>{var J=sm(),K=v(J),Y=v(K),ft=v(Y),lt=v(ft,!0);C(()=>Q(lt,N("setting.others.options.add_bookmark_when_downloading"))),h(ft);var Ot=E(ft,2),jt=v(Ot,!0);C(()=>Q(jt,N("setting.others.options.option_does_not_apply_to_batch_download"))),h(Ot),h(Y);var ot=E(Y,2);zr(ot,{name:"add-bookmark",size:"sm",get checked(){return Pt.addBookmark},set checked(nt){Pt.addBookmark=nt}}),h(K);var it=E(K,2);{var W=nt=>{var M=im(),G=v(M),Z=v(G),rt=v(Z),mt=v(rt,!0);C(()=>Q(mt,N("setting.others.options.add_bookmark_with_tags"))),h(rt);var kt=E(rt,2);zr(kt,{name:"bookmark-with-tags",size:"sm",get checked(){return Pt.bookmarkWithTags},set checked(St){Pt.bookmarkWithTags=St}}),h(Z),h(G);var yt=E(G,2);{var wt=St=>{var qt=om(),zt=v(qt),Yt=v(zt),$=v(Yt,!0);C(()=>Q($,N("setting.others.options.add_bookmark_private_r18"))),h(Yt);var H=E(Yt,2);zr(H,{name:"private-bookmark-if-r18",size:"sm",get checked(){return Pt.privateBookmarkIfR18},set checked(tt){Pt.privateBookmarkIfR18=tt}}),h(zt),h(qt),A(St,qt)};bt(yt,St=>{Ye.isPixiv()&&St(wt)})}h(M),C(()=>U(M,`list ${a()??""} ${i()??""} [&:not(:last-child)]:*:py-4 [&:last-child]:*:pt-4`)),A(nt,M)};bt(it,nt=>{Pt.addBookmark&&(Ye.isPixiv()||Ye.isNijie())&&nt(W)})}h(J),C(()=>U(Ot,Ft(c()))),A(F,J)};bt(L,F=>{Pt.addBookmark!==null&&F(R)})}h(p);var z=E(p,2);{var B=F=>{var J=lm(),K=v(J),Y=E(K,2),ft=v(Y),lt=v(ft),Ot=E(v(lt),2);h(lt);var jt=E(lt,2);zr(jt,{name:"mix-effect",size:"sm",get checked(){return Pt.mixSeasonalEffect},set checked(ot){Pt.mixSeasonalEffect=ot}}),h(ft),h(Y),h(J),C(()=>{U(K,Ft(l())),U(Y,Ft(f(u))),U(Ot,`${c()??""} !text-error-500`)}),A(F,J)};bt(z,F=>{Ye.isPixiv()&&F(B)})}h(g),C(()=>{U(g,Ft(s())),U(p,Ft(f(u)))}),A(r,g),xe()}var um=q('<div><section><p> </p> <ul><li><span><!></span></li></ul></section> <section><p> </p> <ul><li><p><!></p></li> <li class=" justify-center"><figure><img alt="credit" class=" rounded-full m-auto"> <figcaption class="mt-4"> </figcaption></figure></li></ul></section></div>');function fm(r,t){_e(t,!0);let e=m(t,"bg",3,"bg-white/30 dark:bg-black/15"),a=m(t,"border",3,"divide-y-[1px] *:border-surface-300-600-token"),n=m(t,"padding",3,"px-4 *:py-4"),o=m(t,"margin",3,"mt-2 *:!m-0"),i=m(t,"rounded",3,"rounded-container-token *:!rounded-none"),s=m(t,"sectionSpace",19,()=>"space-y-4"),l=m(t,"sectionTitle",3,"font-bold"),c=m(t,"class",3,"");const d=de(()=>`list *:items-center ${n()} ${o()} ${a()} ${e()} ${i()} ${c()}`);var u=um(),g=v(u),p=v(g),b=v(p,!0);C(()=>Q(b,N("setting.feedback.label.feedback"))),h(p);var w=E(p,2),y=v(w),_=v(y),k=v(_);Ee(k,()=>N("setting.feedback.text.feedback_desc")),h(_),h(y),h(w),h(g);var x=E(g,2),T=v(x),P=v(T,!0);C(()=>Q(P,N("setting.feedback.label.donate"))),h(T);var L=E(T,2),R=v(L),z=v(R),B=v(z);Ee(B,()=>N("setting.feedback.text.give_me_a_star")),h(z),h(R);var F=E(R,2),J=v(F),K=v(J);Mt(K,"src",jd);var Y=E(K,2),ft=v(Y,!0);C(()=>Q(ft,N("setting.feedback.text.donate_desc"))),h(Y),h(J),h(F),h(L),h(x),h(u),C(()=>{U(u,Ft(s())),U(p,Ft(l())),U(w,Ft(f(d))),U(T,Ft(l())),U(L,Ft(f(d)))}),A(r,u),xe()}const We=Oa("pdl-auth-state",{cf_clearance:((Al=Ut.auth)==null?void 0:Al.cf_clearance)??null,username:((Sl=Ut.auth)==null?void 0:Sl.username)??null,apiKey:((Cl=Ut.auth)==null?void 0:Cl.apiKey)??null});var pm=q('<section><p> </p> <div><div><input type="text" class="input"></div></div></section>'),hm=q("<div></div>");function gm(r,t){_e(t,!0);let e=m(t,"bg",3,"bg-white/30 dark:bg-black/15"),a=m(t,"border",3,"divide-y-[1px] *:border-surface-300-600-token"),n=m(t,"padding",3,"px-4 *:py-4"),o=m(t,"margin",3,"mt-2 *:!m-0"),i=m(t,"rounded",3,"rounded-container-token *:!rounded-none"),s=m(t,"sectionSpace",19,()=>"space-y-4"),l=m(t,"sectionTitle",3,"font-bold"),c=m(t,"class",3,"");const d=de(()=>`${n()} ${o()} ${a()} ${e()} ${i()} ${c()}`),u=Object.entries(We).filter(([p,b])=>b!==null).map(([p,b])=>p);var g=hm();ur(g,20,()=>u,p=>p,(p,b)=>{var w=pm(),y=v(w),_=v(y,!0);C(()=>Q(_,b.toUpperCase())),h(y);var k=E(y,2),x=v(k),T=v(x);mr(T),h(x),h(k),h(w),C(()=>{U(y,Ft(l())),U(k,Ft(f(d))),Mt(T,"name",b)}),In(T,()=>We[b],P=>We[b]=P),A(p,w)}),h(g),C(()=>U(g,Ft(s()))),A(r,g),xe()}const vm='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21,15.61L19.59,17L14.58,12L19.59,7L21,8.39L17.44,12L21,15.61M3,6H16V8H3V6M3,13V11H13V13H3M3,18V16H16V18H3Z" /></svg>',mm='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6H13V8H3V6M3 16H13V18H3V16M3 11H15V13H3V11M16 7L14.58 8.39L18.14 12L14.58 15.61L16 17L21 12L16 7Z" /></svg>';var wm=(r,t)=>S(t,!f(t)),bm=q('<button type="button" class="btn-icon hover:variant-soft-surface ml-1"><i class="w-8 fill-current"><!></i></button>'),ym=q('<h3 class="h3"> </h3>'),_m=q('<div><!> <!> <div class="mt-4 pr-4 scrollbar-track-transparent scrollbar-thumb-slate-400/50 scrollbar-corner-transparent scrollbar-thin overflow-y-auto" style="scrollbar-gutter: stable"><!></div></div>');function xm(r,t){_e(t,!0);let e=Ge(0),a=Ge(!0);const n=[{name:()=>N("setting.save_to.title"),component:Pv},{name:()=>N("setting.ugoira.title"),component:Iv,show:Ye.isPixiv()},{name:()=>N("setting.history.title"),component:Lv},{name:()=>N("setting.button_position.title"),component:rm},{name:()=>N("setting.others.title"),component:dm},{name:()=>N("setting.authorization.title"),component:gm,show:Object.values(We).some(c=>c!==null)},{name:()=>N("setting.feedback.title"),component:fm}],o=de(()=>n[f(e)].component),i=de(()=>f(a)?"grid-cols-[140px_1fr]":"grid-cols-[0px_1fr]"),s=de(()=>f(a)?"translate-x-0":"-translate-x-full"),l="w-[140px]";zd(r,{get parent(){return t.parent},height:"h-screen md:h-[600px]",width:"w-screen md:max-w-screen-md xl:max-w-screen-lg",padding:"",children:(c,d)=>{var u=_m(),g=v(u);ph(g,{get class(){return`pt-4 pr-6 row-start-1 row-span-2 ${l} transition-[transform] ${f(s)??""}`},children:(y,_)=>{var k=Me(),x=ee(k);ur(x,17,()=>n,la,(T,P,L)=>{var R=Me(),z=ee(R);{var B=F=>{bh(F,{name:"option",value:L,class:"rounded-token",get group(){return f(e)},set group(J){S(e,ie(J))},children:(J,K)=>{Se();var Y=Pe();C(()=>Q(Y,f(P).name())),A(J,Y)},$$slots:{default:!0}})};bt(z,F=>{(!("show"in f(P))||f(P).show)&&F(B)})}A(T,R)}),A(y,k)},$$slots:{default:!0}});var p=E(g,2);ah(p,{padding:"py-2",background:"bg-transparent",class:"mr-6 border-b border-surface-800-100-token",lead:_=>{var k=bm();k.__click=[wm,a];var x=v(k),T=v(x);{var P=R=>{var z=Me(),B=ee(z);Ee(B,()=>mm),A(R,z)},L=R=>{var z=Me(),B=ee(z);Ee(B,()=>vm),A(R,z)};bt(T,R=>{f(a)?R(P):R(L,!1)})}h(x),h(k),A(_,k)},children:(_,k)=>{var x=ym(),T=v(x,!0);C(()=>Q(T,n[f(e)].name())),h(x),A(_,x)},$$slots:{lead:!0,default:!0}});var b=E(p,2),w=v(b);Is(w,()=>f(o),(y,_)=>{_(y,{bg:"bg-white/30 dark:bg-surface-500/20 backdrop-blur-sm"})}),h(b),h(u),C(()=>U(u,`h-full pt-4 pb-6 pl-6 grid grid-rows-[auto_1fr] transition-[grid-template-columns] ${f(i)??""}`)),A(c,u)},$$slots:{default:!0}}),xe()}sa(["click"]);var km=r=>r.stopImmediatePropagation(),Em=q('<button type="button" class="btn btn-sm variant-filled fixed bottom-24 rounded-none rounded-s-full opacity-40 hover:opacity-100 right-0 translate-x-[calc(100%-44px)] hover:translate-x-0 delay-100"><i class=" text-sm w-6 fill-current"><!></i> <span class="text-sm"> </span></button>'),Pm=q('<div data-theme="skeleton"><!> <!> <!> <!></div>');function Am(r,t){_e(t,!0);let e=m(t,"supportedTemplate",19,()=>({}));Xt("supportedTemplate",e()),Up();const a=Gs(),n=Dd(),o=de(()=>we.theme==="auto"?we.autoTheme==="dark":we.theme==="dark");let i;const s={changelog:{ref:cg},setting:{ref:xm}};function l(){a.trigger({type:"component",component:"changelog"})}function c(){a.trigger({type:"component",component:"setting"})}function d(P){let L;switch(P.type||"success"){case"success":L="variant-filled-primary";break;case"warning":L="variant-filled-warning";break;case"error":L="variant-filled-error";break;default:throw new Error("Unknown toast type.")}return P.type&&delete P.type,n.trigger({...P,background:L})}function u(P){if(!(P.target instanceof Element))return;const L=P.target.classList;(L.contains("modal-backdrop")||L.contains("modal-transition"))&&P.stopPropagation()}function g(){return!!i?.querySelector(".modal-backdrop")}function p(P){if(g()){if(P.code==="Escape"){a.close();return}else if(P.ctrlKey||P.shiftKey)return;P.composedPath().includes(i)||(P.stopImmediatePropagation(),P.preventDefault())}}Ls(()=>{const P=i.getRootNode();js(P),P.host.setAttribute("style","position:fixed; z-index:99999"),we.version!=="1.10.0"&&(we.version="1.10.0",l()),globalThis.addEventListener(qd,L=>{const R=L,{getFileHandle:z,abort:B}=R.detail;let F=!1;d({message:N("toast.message.pick_directory_handle"),type:"warning",autohide:!1,action:{label:N("toast.actionLabel.browse"),response:()=>{F=!0,z()}},callback({status:J}){J==="closed"&&!F&&B()}})}),globalThis.addEventListener(Ai,L=>{const R=L;if(t.useBatchDownload){const{downloading:J,hasTask:K}=t.useBatchDownload(),{signal:Y}=R.detail;if(Y&&J.current&&K(Y))return}const{getFileHandle:z,abort:B}=R.detail;let F=!1;d({message:N("toast.message.file_handle_not_found"),type:"warning",autohide:!1,action:{label:N("toast.actionLabel.save"),response:()=>{F=!0,z()}},callback({status:J}){J==="closed"&&!F&&B()}})}),globalThis.addEventListener(Wd,L=>{const R=L,{onAction:z,onClosed:B}=R.detail;let F=!1;d({message:N("toast.message.request_directory_handle_permission"),type:"warning",autohide:!1,action:{label:N("toast.actionLabel.allow_permission"),response:()=>{F=!0,z()}},callback({status:J}){J==="closed"&&!F&&B()}})})});var b=Pm();ut("keydown",ui,p,!0),b.__keydown=[km];var w=v(b);Vh(w,{components:s,class:"!p-0"});var y=E(w,2);{var _=P=>{Yg(P,{get downloaderConfig(){return t.downloaderConfig},get useBatchDownload(){return t.useBatchDownload}})};bt(y,P=>{t.downloaderConfig&&t.useBatchDownload&&P(_)})}var k=E(y,2);{var x=P=>{var L=Em();L.__click=c;var R=v(L),z=v(R);Ee(z,()=>Vg),h(R);var B=E(R,2),F=v(B,!0);C(()=>Q(F,N("button.setting"))),h(B),h(L),A(P,L)};bt(k,P=>{we.showPopupButton&&P(x)})}var T=E(k,2);return Zh(T,{}),h(b),Ze(b,P=>i=P,()=>i),C(()=>U(b,Ft({contents:!0,dark:f(o)}))),ut("mousedown",b,u,!0),ut("mouseup",b,u,!0),A(r,b),xe({showChangelog:l,showSetting:c,toast:d})}sa(["keydown","click"]);function Sm(){const r=String(Math.random()),t=[];let e=!1,a=!1,n,o;return ke.on("batchdownload.query",()=>{e&&ke.emit("batchdownload.set-pending")}),ke.on("batchdownload.set-pending",()=>{!a&&(a=!0)}),ke.on("batchdownload.set-idle",()=>{a&&(a=!1)}),ke.on("batchdownload.add-queue",i=>{e&&t.push(i)}),ke.on("batchdownload.remove-queue",i=>{if(!e)return;const s=t.findIndex(l=>l===i);s!==-1&&t.splice(s,1)}),ke.on("batchdownload.process-next",i=>{i[0]===r&&(t.push(...i.slice(1)),a=!1,e=!0,n())}),window.addEventListener("unload",()=>{if(a){ke.emit("batchdownload.remove-queue",r);return}e&&(t.length?ke.emit("batchdownload.process-next",t):ke.emit("batchdownload.set-idle"))}),ke.emit("batchdownload.query"),{async requestDownload(){if(!a){e=!0,ke.emit("batchdownload.set-pending"),Ct.info("channel post: SET_PENDING");return}const i=new Promise((s,l)=>{n=s,o=l});return ke.emit("batchdownload.add-queue",r),Ct.info("channel post: ADD_QUEUE",r),i},cancelDownloadRequest(i){a&&(ke.emit("batchdownload.remove-queue",r),Ct.info("channel post: REMOVE_QUEUE",r),o(i))},processNextDownload(){e&&(e=!1,t.length?(a=!0,ke.emit("batchdownload.process-next",t),t.length=0,Ct.info("channel post: PROCESS_NEXT")):(ke.emit("batchdownload.set-idle"),Ct.info("channel post: SET_IDLE")))}}}const Cm=429,Tm=3e4,Zd=5;function Im(r){const{requestDownload:t,cancelDownloadRequest:e,processNextDownload:a}=Sm();let n=null,o=Ge(0),i=Ge(ie([])),s=Ge(ie([])),l=Ge(ie([])),c=Ge(!1),d=Ge(void 0);const u=[],g=[],p=[],b=[],w=[],y=[];let _;const k=new Map,x=new Bi({concurrency:Zd,interval:1100,intervalCap:1}),T={artworkCount:{get current(){return f(o)}},successd:{get current(){return f(i)}},failed:{get current(){return f(s)}},excluded:{get current(){return f(l)}},downloading:{get current(){return f(c)}},log:{get current(){return f(d)}},batchDownload:ft,abort(){_&&_.abort(new Si)},hasTask(W){return k.has(W)},getConcurrency(){return x.concurrency},setConcurrency(W){if(typeof W>"u"){x.concurrency=Zd;return}x.concurrency=W}};function P(W){return typeof W[0]=="string"}function L(){S(o,0),S(i,ie([])),S(s,ie([])),S(l,ie([])),u.length=0,p.length=0,g.length=0,b.length=0,J("Info","Reset store.")}function R(W){if(f(c)&&W)throw new Error("Already downloading.");S(c,ie(W))}function z(W){Array.isArray(W)?(f(i).push(...W),J("Complete",W[W.length-1])):(f(i).push(W),J("Complete",W))}function B(W){let nt;Array.isArray(W)?(f(s).push(...W),nt=W[W.length-1]):(f(s).push(W),nt=W);const{id:M,reason:G}=nt;(G instanceof Error||typeof G=="string")&&J("Fail",M,G)}function F(W){if(Array.isArray(W))P(W)?f(l).push(...W):f(l).push(...W.map(nt=>nt.id)),J("Info",`${W.length+" task"+(W.length>1?"s were":" was")} excluded...`);else{const nt=typeof W=="string"?W:W.id;f(l).push(nt),J("Info",`${nt} was excluded...`)}}function J(W,nt,M){const G={type:W,message:""};switch(W){case"Error":if(!(nt instanceof Error))throw new TypeError("error` is expected to be error, but got "+typeof nt);G.message=`[${nt.name}] ${nt.message}`;break;case"Fail":if(typeof nt!="string")throw new TypeError("`id` is expected to be string, but got "+typeof nt);typeof M=="string"?G.message=`[Fail] ${nt}...${M}`:G.message=`[Fail] ${nt}...${M?M.name+":"+M.message:""}`;break;default:G.message=`[${W}] ${nt}`;break}S(d,ie(G))}function K(W,nt){if(!("tags"in W)||!Array.isArray(W.tags))return!0;const{whitelistTag:M,blacklistTag:G}=n;return nt??(nt=(rt,mt)=>rt.some(kt=>mt.includes(kt))),M.length?nt(M,W.tags):G.length?!nt(G,W.tags):!0}async function Y(W){try{const{enableTagFilter:nt}=r.filterOption;if(nt===!0){if(!K(W))return!1}else if(nt&&!K(W,nt))return!1;if(!w.length)return!1;for(let M=0;M<y.length;M++){const G=y[M];if(await G(W))return!1}for(let M=0;M<w.length;M++){const G=w[M];if(await G(W))return!0}}catch(nt){console.error(nt)}return!1}async function ft(W,...nt){R(!0),J("Info","Download start..."),x.start(),n=vc(je.$state),(n.selectedFilters??[]).forEach(yt=>{const wt=r.filterOption.filters.find(St=>St.id===yt);wt&&(wt.type==="include"?w.push(wt.fn):y.push(wt.fn))}),L();const{beforeDownload:G,afterDownload:Z}=r;let rt,mt;_=new AbortController;const kt=_.signal;kt.addEventListener("abort",()=>{var yt;e(kt.reason),(yt=r.onDownloadAbort)==null||yt.call(r)},{once:!0});try{const yt=lt(W);if(!yt||!("fn"in yt))throw new Error("Invalid generator id: "+W);const{filterInGenerator:wt,beforeDownload:St,afterDownload:qt}=yt;rt=qt,typeof G=="function"&&await G(),typeof St=="function"&&await St(),mt=Ot(yt,...nt),J("Info","Waiting for other downloads to finish..."),await t(),J("Info","Starting..."),await it(mt,wt,kt),n.retryFailed&&(u.length||g.length)&&(u.length?(mt=jt(f(o),u.slice(),p.slice()),u.length=0,p.length=0):g.length&&(mt=ot(f(o),g.slice(),b.slice()),g.length=0,b.length=0),S(s,ie([])),J("Info","Retry..."),await it(mt,wt,kt)),J("Info","Download complete.")}catch(yt){throw mt?.return(),kt.aborted||_.abort(yt),yt instanceof Error&&J("Error",yt),yt}finally{typeof rt=="function"&&rt(),typeof Z=="function"&&Z(),_=null,n=null,w.length=0,y.length=0,x.pause(),R(!1),a()}}function lt(W){const{pageOption:nt}=r;for(const M in nt)if(M===W)return nt[M]}function Ot(W,...nt){let M;const{downloadAllPages:G,pageEnd:Z,pageStart:rt}=n;if(!G&&Z<rt)throw new Error("End page must not be less than the start page.");const mt=G?null:[rt,Z];return"filterInGenerator"in W&&!W.filterInGenerator?M=W.fn(mt,...nt):M=W.fn(mt,Y,...nt),M}function*jt(W,nt,M){yield{total:W,page:0,avaliable:nt,invalid:[],unavaliable:M}}function*ot(W,nt,M){yield{total:W,page:0,avaliable:nt,invalid:[],unavaliable:M}}async function it(W,nt,M){M.throwIfAborted();const G=new Promise((kt,yt)=>{M.addEventListener("abort",()=>{yt(M.reason),x.size!==0&&x.clear(),k.forEach(wt=>wt.abort(M.reason)),k.clear()},{once:!0})}),{parseMetaByArtworkId:Z,downloadArtworkByMeta:rt}=r;let mt;for(;(mt=await Promise.race([W.next(),G]))&&!mt.done;){M.throwIfAborted();const{total:kt,avaliable:yt,invalid:wt,unavaliable:St}=mt.value;if(Ct.info(kt,yt,wt,St),kt!==f(o)&&S(o,ie(kt)),wt.length&&F(wt),St.length&&(P(St)?(B(St.map(qt=>({id:qt,reason:new Ti(qt)}))),p.push(...St)):(B(St.map(qt=>({id:qt.id,reason:new Ti(qt.id)}))),b.push(...St))),!yt.length){await Promise.race([tp(1500),G]);continue}for(const qt of yt){const zt=new AbortController,Yt=zt.signal;k.set(Yt,zt),x.add(async({signal:$})=>{if(!$)throw new Error("Expect `QueueAddOptions.signal` to be a AbortSignal but got undefined.");const H=typeof qt=="string",tt=H?qt:qt.id;try{$.throwIfAborted();let ct;if(!H)ct=qt;else if(ct=await Z(tt),$.throwIfAborted(),!nt&&!await Y(ct)){F(tt);return}J("Add",tt),await rt(ct,$),!$.aborted&&z(tt)}catch(ct){if($.aborted)return;if(B({id:tt,reason:ct}),ct instanceof wo){_?.abort(ct);return}const Qt=ct instanceof Ti;H?(Qt?p:u).push(qt):(Qt?b:g).push(qt),ct instanceof ir&&ct.status===Cm&&!x.isPaused&&(x.pause(),setTimeout(()=>{!M.aborted&&x.start()},Tm),J("Error",new Error("Http status: 429, wait for 30 seconds."))),Ct.error(ct)}},{signal:Yt}).catch(Ct.warn).finally(()=>{k.delete(Yt)})}await Promise.race([G,x.onEmpty()])}return Promise.race([G,x.onIdle()])}return function(){return T}}const tu=Jf(Am,{supportedTemplate:{},downloaderConfig:{},useBatchDownload:{}},[],["showChangelog","showSetting","toast"],!0,r=>class extends r{constructor(t){super(),V(this,"supportedTemplate"),V(this,"downloaderConfig"),V(this,"useBatchDownload"),this.supportedTemplate=t.supportedTemplate}initBatchDownloader(t){return this.downloaderConfig=t,this.useBatchDownload=Im(t)}});customElements.define("pdl-app",tu);class ha{constructor(){V(this,"app"),V(this,"useBatchDownload"),this.app=this.createApp(),this.backupIfNeeded()}static get hostname(){throw new Error("`hostname` should be overwritten by a subclass.")}createApp(){return new tu({supportedTemplate:this.getSupportedTemplate()})}backupIfNeeded(){const{interval:t,lastTimestamp:e}=bo;if(t===fr.NEVER)return;const a=new Date().getTime();e+t>a||(Kd().exportAsJSON(),bo.lastTimestamp=a)}toast(t){return this.app.toast(t)}inject(){Dp(N("button.setting"),()=>{var t;(t=this.app.shadowRoot)!=null&&t.querySelector(".modal")||this.app.showSetting()},"s"),document.body.append(this.app)}}var br=(r=>(r[r.VALID=0]="VALID",r[r.INVALID=1]="INVALID",r[r.UNAVAILABLE=2]="UNAVAILABLE",r))(br||{});class za{constructor(){V(this,"UNKNOWN_ARTIST","UnknownArtist"),V(this,"UNKNOWN_CHARACTER","UnknownCharacter")}async*paginationGenerator(t,e,a,n){const[o=1,i=0]=t??[];let s=o,{lastPage:l,data:c}=await e(s);if(!c||!c.length)throw new Error(`There is no post in page ${s}.`);let d=c.length,u=null;do{let g,p=!0;if(s!==i&&!l)try{const{lastPage:_,data:k}=await e(s+1),x=k?.length??0;x&&(d+=x,g=k,p=_)}catch(_){u=_}const b=[],w=[],y=[];if(typeof n=="function")for(const _ of c){const k=await n(_),x=a(_);k===0?b.push(x):k===1?w.push(x):y.push(x)}else for(const _ of c)b.push(a(_));yield{total:d,page:s,avaliable:b,invalid:w,unavaliable:y},s++,c=g,l=p}while(c);if(u)throw u}}class el extends za{parseArtworkSrc(t){return t.querySelector('meta[property="og:image"]').getAttribute("content")}parseArtworkNameBySrc(t){const e=new RegExp("(?<=\\/)\\w+\\.\\w+(?=\\?|$)").exec(t);if(!e)throw new Error("Can not parse image name from src.");return e[0].split(".")}parseTags(t){const e=[],a=[],n=[];return t.querySelectorAll('li[class*="tag-type"]').forEach(i=>{var s;const l=new RegExp("(?<=tag-type-)\\w+").exec(i.className);if(!l)throw new Error("Unknown tag: "+i.className);const c=l[0],d=(((s=i.querySelector('a[href*="page=post"]'))==null?void 0:s.textContent)||"").replaceAll(" ","_");c==="artist"?e.push(d):c==="character"&&a.push(d),n.push(c+":"+d)}),{artist:e,character:a,tags:n}}parseStatistics(t){var e,a,n,o,i,s;const l=t.querySelector('a[href*="page=account&s=profile"]'),c=(a=(e=l?.parentElement)==null?void 0:e.firstChild)==null?void 0:a.nodeValue,d=c?c.split(": ")[1]:"";let u="";const g=(o=(n=l?.parentElement)==null?void 0:n.nextElementSibling)==null?void 0:o.nextElementSibling;if(g&&/^source:/i.test(g.textContent??"")){const w=g.querySelector("a");w?u=w.href:u=((i=g.textContent)==null?void 0:i.replace(/^source: ?/i,""))??""}const p=/Rating: ?(General|Explicit|Questionable|Safe|Sensitive)/.exec(t.documentElement.innerHTML)[1].toLowerCase(),b=(s=t.querySelector("span[id^=psc]"))==null?void 0:s.textContent;if(!b)throw new Error("Cannot parse score");return{postDate:d,score:+b,source:u,rating:p}}buildMeta(t,e){const a=this.parseArtworkSrc(e),[n,o]=this.parseArtworkNameBySrc(a),{artist:i,character:s,tags:l}=this.parseTags(e),{postDate:c,source:d,rating:u,score:g}=this.parseStatistics(e);return{id:t,src:a,extendName:o,artist:i.join(",")||this.UNKNOWN_ARTIST,character:s.join(",")||this.UNKNOWN_CHARACTER,title:n,tags:l,createDate:c,score:g,source:d,rating:u}}parseBlacklistTags(){const[t]=new RegExp("(?<=tag_blacklist=).*?(?=;|$)").exec(document.cookie)??[];return t?decodeURIComponent(decodeURIComponent(t)).split(" "):[]}parseFavoriteByDoc(t){const e=t.querySelectorAll("span + script");return Array.from(e).map(n=>{const o=n.textContent,[i]=new RegExp("(?<=posts\\[)[0-9]+?(?=\\])").exec(o),[s]=o.match(/{.+}/),{tags:l,rating:c,score:d,user:u}=JSON.parse(s.replace(".split(/ /g)","").replaceAll("'",'"'));return{id:i,tags:decodeURIComponent(l).split(/\s/g),rating:c.toLowerCase(),score:+d,user:u}})}parsePostsByDoc(t){const a=Array.from(t.querySelectorAll("span[id]:has(a > img), .thumbnail-preview > a[id]:has(img)")).map(n=>{const i=n.querySelector("img").title.trim().replaceAll(/ +/g," ").split(" "),s=n.id.slice(1),l=[];let c="",d=0,u="";for(let g=0;g<i.length;g++){const p=i[g];p.startsWith("rating:")?c=p.slice(7):p.startsWith("score:")?d=+p.slice(6):p.startsWith("user:")?u=p.slice(5):l.push(p)}return{id:s,tags:l,rating:c,score:+d,user:u}});return Ct.info(`Parse posts in ${t.URL}:`,a),a}}function Dm(){const r=new fu;return{add(t,e,a){var n;(n=r.folder(t))==null||n.file(e,a)},bundle(t,e){const a=r.folder(t);if(!a)throw new TypeError("no such folder:"+t);return a.generateAsync({type:"blob",comment:e})},remove(t){r.remove(t)},fileCount(t){var e;let a=0;return(e=r.folder(t))==null||e.forEach(()=>a++),a},async unzip(t){const e=Math.random().toString(36);let a=r.folder(e);if(!a)throw TypeError("Can not get new root folder");const n=[];a=await a.loadAsync(t),a.forEach((i,s)=>{n.push(s.async("blob"))});const o=await Promise.all(n);return r.remove(e),o}}}const Nn=Dm();var pe=(r=>(r.ID="id",r.ARTIST="artist",r.ARTISTID="artistID",r.CHARACTER="character",r.DATE="date",r.MD5="md5",r.SCORE="score",r.TAGS="tags",r.TITLE="title",r.PAGE="page",r))(pe||{});class rl{constructor(t){Tt(this,Vi),V(this,"id"),V(this,"src"),V(this,"ext"),V(this,"artist"),V(this,"title"),V(this,"tags"),V(this,"createDate"),V(this,"imageTimeout",6e4),V(this,"videoTimeout"),V(this,"taskId"),V(this,"downloaded"),V(this,"total"),V(this,"onDownloadCompleted");const{id:e,src:a,extendName:n,artist:o,title:i,tags:s,createDate:l}=t;this.id=e,this.src=a,this.ext=n,this.artist=o,this.title=i,this.tags=s,this.createDate=l,this.total=Array.isArray(a)?a.length:1,this.downloaded=0}static get supportedTemplate(){throw new Error("Should be overwritten by a subclass")}normalizeString(t){return Fs(ep(t))}isStringArray(t){return Array.isArray(t)}isImageExt(t){return ce.imageExt.test(t)}getTaskId(){return this.taskId??(this.taskId=this.id+"_"+Math.random().toString(36).slice(2))}getSrc(t=0){return Array.isArray(this.src)?this.src[t]:this.src}getExt(t=0){return Array.isArray(this.ext)?this.ext[t]:this.ext}getDownloadTimeout(t=0){return this.isImageExt(Array.isArray(this.ext)?this.ext[t]:this.ext)?this.imageTimeout:this.videoTimeout}getMultipleMediaDownloadCB(t){return this.onDownloadCompleted??(this.onDownloadCompleted=()=>{t(++this.downloaded/this.total*100)})}getPathTemplate(t,e){return t?`${t}/${e}`:e}getSavePath(t,e,a,n){return`${j(this,Vi,Tl).call(this,this.getPathTemplate(t,e),n)}.${a}`}}Vi=new WeakSet,Tl=function(r,t){const e=new RegExp("{(artist|artistID|character|id|md5|page|score|tags|title)}","g"),a=r.replace(e,(o,i)=>{if(!(i in t))return o;const s=t[i];return s?this.normalizeString(s):o}),n=new RegExp("{(date)(\\((.+?)\\))?}","g");return a.replace(n,(o,i,s,l)=>{if(!t.date)return o;const c=l||"YYYY-MM-DD",d=t.date;return uu(d).format(c)})};class eu extends rl{constructor(){super(...arguments),V(this,"handleBeforeSaveCb"),V(this,"handleErrorCb"),V(this,"handleAbortCb"),V(this,"filenames")}handleBundleFactory(t){return this.filenames??(this.filenames=t),this.handleBeforeSaveCb??(this.handleBeforeSaveCb=async(e,a,n)=>{n?.throwIfAborted();const{taskId:o,src:i}=a,s=this.src.indexOf(i);if(s===-1)throw new Error("No src matches.");if(Nn.add(o,this.filenames[s],e),Nn.fileCount(o)!==t.length)return;const l=await Nn.bundle(o,this.getZipComment());return n?.throwIfAborted(),Nn.remove(o),l})}handleBundleErrorFactory(){return this.handleErrorCb??(this.handleErrorCb=()=>{Nn.remove(this.getTaskId())})}handleBundleAbortFactory(){return this.handleAbortCb??(this.handleAbortCb=()=>{Nn.remove(this.getTaskId())})}}class pr extends rl{constructor(t){super(t),V(this,"character"),V(this,"score"),this.character=t.character,this.score=t.score}static get supportedTemplate(){return{id:"{id}",artist:"{artist}",character:"{character}",date:"{date}, {date(YYYY-MM-DD)}",md5:"{md5}",score:"{score}"}}getHeaders(t){return{cookie:`cf_clearance=${t}`}}getTemplateData(){return{id:this.id,artist:this.artist,character:this.character,date:this.createDate,md5:this.title,title:this.title,score:String(this.score)}}create(t){const{filenameTemplate:e,filenameConflictAction:a,directoryTemplate:n,useFileSystemAccessApi:o,setProgress:i,cfClearance:s}=t;return{headers:s?this.getHeaders(s):void 0,taskId:this.getTaskId(),src:this.getSrc(),path:this.getSavePath(n,e,this.getExt(),this.getTemplateData()),timeout:this.getDownloadTimeout(),onProgress:i,useFileSystemAccessApi:o,filenameConflictAction:a}}}class al extends ha{constructor(){we.version===null&&(Pt.addBookmark??(Pt.addBookmark=!1)),super(),Tt(this,un),V(this,"searchParams",new URLSearchParams(location.search)),V(this,"useBatchDownload",this.app.initBatchDownloader({avatar:this.getAvatar.bind(this),parseMetaByArtworkId:async t=>{const e=await this.api.getPostDoc(t);return this.parser.buildMeta(t,e)},downloadArtworkByMeta:async(t,e)=>{const a=new pr(t).create({...It,cfClearance:We.cf_clearance||void 0});await Ue.download(a,{signal:e});const{id:n,tags:o,artist:i,title:s,source:l,rating:c}=t;se.add({pid:Number(n),user:i,title:s,tags:o,source:l,rating:c})},filterOption:{filters:[{id:"exclude_downloaded",type:"exclude",name:()=>N("downloader.category.filter.exclude_downloaded"),checked:!1,fn(t){return!!t.id&&se.has(t.id)}},{id:"allow_image",type:"include",name:()=>N("downloader.category.filter.image"),checked:!0,fn(t){return!!t.tags&&!t.tags.includes("video")}},{id:"allow_video",type:"include",name:()=>N("downloader.category.filter.video"),checked:!0,fn(t){return!!t.tags&&t.tags.includes("video")}}],enableTagFilter:!0},pageOption:{favorites:{name:"Favorites",match:/(?=.*page=favorites)(?=.*s=view)(?=.*id=[0-9]+)/,filterInGenerator:!0,fn:(t,e,a)=>{a??(a=new RegExp("(?<=id=)[0-9]+").exec(location.search)[0]);const n=async o=>{const s=(o-1)*50,l=await this.api.getFavoriteDoc(a,s),c=this.parser.parseFavoriteByDoc(l);return{lastPage:c.length<50,data:c}};return this.parser.paginationGenerator(t,n,o=>o.id,j(this,un,Fo).call(this,e))}},pools:{name:"Pools",match:/(?=.*page=pool)(?=.*s=show)(?=.*id=[0-9]+)/,filterInGenerator:!0,fn:(t,e,a)=>{a??(a=new RegExp("(?<=id=)[0-9]+").exec(location.search)[0]);const n=async()=>{const o=await this.api.getPoolDoc(a);return{lastPage:!0,data:this.parser.parsePostsByDoc(o)}};return this.parser.paginationGenerator([1,1],n,o=>o.id,j(this,un,Fo).call(this,e))}},posts:{name:"Posts",match:/(?=.*page=post)(?=.*s=list)/,filterInGenerator:!0,fn:(t,e,a)=>{a??(a=new URLSearchParams(location.search).get("tags")??"all");const n=async o=>{const s=(o-1)*42,l=await this.api.getPostsDoc(s,a),c=this.parser.parsePostsByDoc(l);return{lastPage:c.length<42,data:c}};return this.parser.paginationGenerator(t,n,o=>o.id,j(this,un,Fo).call(this,e))}}}}))}getSupportedTemplate(){return pr.supportedTemplate}getAvatar(){return"/favicon.ico"}async downloadArtwork(t){const e=t.dataset.id,a=await this.api.getPostDoc(e),n=this.parser.buildMeta(e,a),o=new pr(n).create({...It,cfClearance:We.cf_clearance||void 0,setProgress:u=>{t.setProgress(u)}});Pt.addBookmark&&j(this,un,Il).call(this,e),await Ue.download(o,{priority:1});const{tags:i,artist:s,title:l,source:c,rating:d}=n;se.add({pid:Number(e),user:s,title:l,tags:i,source:c,rating:d})}setThumbnailStyle(t){t.style.position="relative"}createThumbnailBtn(){const t=document.querySelectorAll(this.getThumbnailSelector());t.length&&t.forEach(e=>{this.setThumbnailStyle(e);const a=new RegExp("(?<=&id=)\\d+").exec(e.href);if(!a)return;const n=a[0];e.appendChild(new le({id:n,onClick:this.downloadArtwork.bind(this)}))})}createArtworkBtn(t){const e=document.querySelector("div.flexi > div");e.style.position="relative",e.appendChild(new or({id:t,site:"gelbooru",onClick:this.downloadArtwork.bind(this)}))}isPostsList(){return this.searchParams.get("page")==="post"&&this.searchParams.get("s")==="list"}isPostView(){return this.searchParams.get("page")==="post"&&this.searchParams.get("s")==="view"}isPool(){return this.searchParams.get("page")==="pool"&&this.searchParams.get("s")==="show"}isMyfavorites(){return this.searchParams.get("page")==="favorites"&&this.searchParams.get("s")==="view"}isAccountProfile(){return this.searchParams.get("page")==="account"&&this.searchParams.get("s")==="profile"}inject(){if(super.inject(),this.searchParams.size!==0)if(this.isPostView()){if(!document.querySelector("#image, #gelcomVideoPlayer"))return;const t=this.searchParams.get("id");this.createArtworkBtn(t)}else this.createThumbnailBtn()}}un=new WeakSet,Fo=function(r){return async t=>{const{id:e,tags:a}=t;return await r({id:e,tags:a})?br.VALID:br.INVALID}},Il=function(r){ua.addFav(r)};class ga{constructor(t={rateLimit:4}){V(this,"queue"),V(this,"fetch");const{rateLimit:e}=t;this.queue=new Bi({interval:1e3,intervalCap:e}),this.fetch=(a,n)=>this.queue.add(()=>fetch(a,n),{throwOnTimeout:!0})}async getHtml(t){Ct.info("Fetch url:",t);const e=await this.fetch(t);if(!e.ok)throw new ir(e.url,e.status);return await e.text()}async getDoc(t){const e=await this.getHtml(t);return new DOMParser().parseFromString(e,"text/html")}async getJSON(t,e){Ct.info("Fetch url:",t);const a=await this.fetch(t,e);if(!a.ok)throw new ir(a.url,a.status);return await a.json()}}class nl extends ga{async getPosts(t){let e="/index.php?page=dapi&s=post&q=index&json=1";Object.entries(t).forEach(([n,o])=>{typeof o=="number"?o=String(o):Array.isArray(o)&&(o=o.join("+")),e+=`&${n}=${o}`});const a=await this.fetch(e);if(!a.ok)throw new ir(e,a.status);try{return await a.json()}catch(n){if(n instanceof SyntaxError)return[];throw n}}getPostDoc(t){return this.getDoc("index.php?page=post&s=view&id="+t)}getPostsDoc(t=0,e="all"){return Array.isArray(e)&&(e=e.join("+")),this.getDoc(`/index.php?page=post&s=list&tags=${e}&pid=${t}`)}getFavoriteDoc(t,e=0){return this.getDoc(`/index.php?page=favorites&s=view&id=${t}&pid=${e}`)}getPoolDoc(t){return this.getDoc(`/index.php?page=pool&s=show&id=${t}`)}}class Bm extends el{parseArtworkSrc(t){var e;return((e=t.querySelector("#gelcomVideoPlayer > source"))==null?void 0:e.src)||t.querySelector('meta[property="og:image"]').getAttribute("content")}parseFavoriteByDoc(t){const e=t.querySelectorAll(".image-list > span + script");return Array.from(e).map(n=>{const o=n.textContent,[i]=new RegExp("(?<=posts\\[)[0-9]+?(?=\\])").exec(o),[s]=new RegExp(`(?<=tags: ["']).*?(?=["']\\.)`).exec(o),[l]=new RegExp(`(?<=rating: ["']).*?(?=["'],)`).exec(o),[c]=new RegExp(`(?<=score: ["'])[0-9]+(?=["'],)`).exec(o),[d]=new RegExp(`(?<=user: ["']).*?(?=["']\\s+})`).exec(o);return{id:i,tags:s.split(/\s/g),rating:l.toLowerCase(),score:+c,user:d}})}}class Mm extends al{constructor(){we.version===null&&(It.setDirectoryTemplate(Ut.folderPattern??"rule34/{artist}"),It.setFilenameTemplate(Ut.filenamePattern??"{id}_{artist}_{character}"),We.cf_clearance??(We.cf_clearance="")),we.setThemeWatcher({get current(){return!!document.head.querySelector('link[href*="dark.css"]')}}),super(),V(this,"api",new nl),V(this,"parser",new Bm)}static get hostname(){return"rule34.xxx"}getAvatar(){return"/images/r34chibi.png"}getThumbnailSelector(){return".thumb > a:first-child:not(:has(.blacklist-img))"}setThumbnailStyle(t){t.setAttribute("style","position: relative; align-self: center; width: auto; height: auto;");const e=t.querySelector("img"),a=()=>{e.naturalHeight/e.naturalWidth>1&&(t.style.height="inherit")};a(),e.onload=a}createArtworkBtn(t){var e;let a=!1,n=document.querySelector("#gelcomVideoContainer");if(n)n.style.fontSize="0px";else{a=!0;const o=document.querySelector("#image");n=document.createElement("div"),(e=o.parentElement)==null||e.insertBefore(n,o),n.append(o)}n.style.position="relative",n.appendChild(new or({id:t,site:a?void 0:"fluid_video",onClick:this.downloadArtwork.bind(this)}))}}class ru extends za{constructor(){super(...arguments),Tt(this,$i)}getBlacklistValidationTags(t){const{tag_string:e,rating:a,uploader_id:n,is_deleted:o,is_flagged:i,is_pending:s}=t,l=e.match(/\S+/g)??[];return l.push("rating:"+a),l.push("uploaderid:"+n),o&&l.push("status:deleted"),i&&l.push("status:flagged"),s&&l.push("status:pending"),l}parseCsrfToken(){var t;return((t=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:t.content)||null}getBlacklistByHtml(){var t;return((t=document.querySelector('meta[name="blacklisted-tags"]'))==null?void 0:t.content)??""}getBlacklistItem(t,e="api"){let a;return e==="html"?a=/,/:a=/\n+/,t.replace(/(rating:\w)\w+/gi,"$1").toLowerCase().split(a).filter(o=>o.trim()!=="").map(j(this,$i,Dl))}isBlacklisted(t,e){const a=/score:(-?[0-9]+)/,n=(t.find(i=>a.test(i))??"").match(a),o=n&&+n[1];return e.some(i=>{const{require:s,exclude:l,optional:c,min_score:d}=i,u=p=>t.includes(p),g=d===null||o===null||o<d;return s.every(u)&&g&&(!c.length||op(t,c).length)&&!l.some(u)})}buildMetaByDoc(t){var e,a;const n=(e=t.querySelector("a[download]"))==null?void 0:e.href;if(!n)throw new Error("Can not get media src");const i=t.querySelector('meta[property="og:image"]').getAttribute("content"),s=i.slice(i.lastIndexOf("/")+1).split(".")[0],c=(t.querySelector('meta[property="og:video:type"]')||t.querySelector('meta[property="og:image:type"]')).getAttribute("content"),d=c.slice(c.lastIndexOf("/")+1),u=[],g=[],p=[],b=t.querySelectorAll('section#tag-list  ul[class*="-tag-list"]');b.length&&b.forEach(R=>{const z=/[a-zA-Z]+(?=-tag-list)/.exec(R.className);if(!z)throw new Error("Unknown tag: "+R.className);const B=z[0],F=R.children;let J;B==="artist"?J=u:B==="character"&&(J=g);for(let K=0;K<F.length;K++){const Y=F[K].getAttribute("data-tag-name");Y&&(J&&J.push(Y),p.push(B+":"+Y))}});const w=((a=t.querySelector("time"))==null?void 0:a.getAttribute("datetime"))??"";let y="";const _=t.querySelector("#original-artist-commentary");_&&(y=yi(_));const k=t.querySelector("section.image-container"),{score:x="0",source:T="",rating:P="",id:L}=k.dataset;if(!L)throw new Error("Can not parse post id.");return{id:L,src:n,extendName:d,artist:u.join(",")||this.UNKNOWN_ARTIST,character:g.join(",")||this.UNKNOWN_CHARACTER,title:s,comment:y,tags:p,createDate:w,score:+x,source:T,rating:P}}buildMetaByApi(t,e){const{id:a,created_at:n,file_ext:o,file_url:i,md5:s,tag_string_artist:l,tag_string_character:c,tag_string_copyright:d,tag_string_general:u,tag_string_meta:g,score:p,source:b,rating:w}=t,{original_title:y="",original_description:_=""}=e??{},k=(P,L)=>L.split(" ").map(R=>P+":"+R),x=[...k("artist",l),...k("character",c),...k("copyright",d),...k("general",u),...k("meta",g)],T=y&&_?y+`
`+_:y||_;return{id:String(a),src:i??"",extendName:o,artist:l.replaceAll(" ",",")||this.UNKNOWN_ARTIST,character:c.replaceAll(" ",",")||this.UNKNOWN_CHARACTER,title:s,comment:T,tags:x,createDate:n,rating:w??"",score:p,source:b}}}$i=new WeakSet,Dl=function(r){const t=r.split(" "),e=[],a=[],n=[];let o=null;return t.forEach(i=>{if(i.charAt(0)==="-")a.push(i.slice(1));else if(i.charAt(0)==="~")n.push(i.slice(1));else if(i.match(/^score:<.+/)){const s=i.match(/^score:<(.+)/)[1];o=Number.parseInt(s)}else e.push(i)}),{tags:r,require:e,exclude:a,optional:n,min_score:o}};class Mi extends le{constructor(t){super({...t,shouldObserveDb:!1}),V(this,"downloadingStore");const{downloading:e}=t;this.downloadingStore=rn(()=>e.current)}static get tagNameLowerCase(){return"pdl-danbooru-pool-button"}connectedCallback(){super.connectedCallback(),this.unsubscriber=this.downloadingStore.subscribe(t=>{t?this.setAttribute("disabled",""):this.removeAttribute("disabled")})}}customElements.define(Mi.tagNameLowerCase,Mi);class au extends ga{async getJSON(t,e){Ct.info("Fetch url:",t);const a=await this.fetch(t,e);if(a.status>=500)throw new ir(a.url,a.status);const n=await a.json();if("success"in n&&!n.success){const{error:o,message:i}=n;throw new Ci(o+", "+i)}return n}getPool(t){return this.getJSON(`/pools/${t}.json`)}getPost(t){return this.getJSON(`/posts/${t}.json`)}getPostDoc(t){return this.getDoc("/posts/"+t)}getPostList(t){const{tags:e=[],limit:a=0,page:n=0}=t??{},o=new URLSearchParams;return e?.length&&o.append("tags",e.join(" ")),a&&o.append("limit",String(a)),n&&o.append("page",String(n)),this.getJSON(`/posts.json?${o.toString()}`)}getArtistCommentary(t){return this.getJSON(`/posts/${t}/artist_commentary.json`)}getFavoriteGroups(t){return this.getJSON(`/favorite_groups/${t}.json`)}getProfile(){return this.getJSON("/profile.json")}async addFavorite(t,e){const a=await this.fetch(`/favorites?post_id=${t}`,{method:"POST",headers:{"X-Csrf-Token":e}});if(!a.ok)throw new ir(a.url,a.status);return await a.text()}}class nu extends ha{constructor(){we.version===null&&(Pt.addBookmark??(Pt.addBookmark=!1));const t=document.body.getAttribute("data-current-user-theme");t!=="auto"&&we.setThemeWatcher({get current(){return t==="dark"}}),super(),Tt(this,fn),V(this,"profile",null),V(this,"blacklist",null),V(this,"useBatchDownload",this.app.initBatchDownloader({avatar:()=>this.getAvatar(),beforeDownload:async()=>{this.profile=await this.api.getProfile();const e=this.profile.blacklisted_tags;this.blacklist=e?this.parser.getBlacklistItem(e):null},afterDownload:()=>{this.profile=null,this.blacklist=null},parseMetaByArtworkId:async e=>this.getMetaByPostId(e),downloadArtworkByMeta:async(e,a)=>{const n=new pr(e).create({...It});await Ue.download(n,{signal:a});const{id:o,tags:i,artist:s,title:l,comment:c,source:d,rating:u}=e;se.add({pid:Number(o),user:s,title:l,comment:c,tags:i,source:d,rating:u})},filterOption:{filters:[{id:"exclude_downloaded",type:"exclude",name:()=>N("downloader.category.filter.exclude_downloaded"),checked:!1,fn(e){return!!e.id&&se.has(e.id)}},{id:"exclude_blacklist",type:"exclude",name:()=>N("downloader.category.filter.exclude_blacklist"),checked:!0,fn:async e=>!!e.blacklistValidationTags&&this.parser.isBlacklisted(e.blacklistValidationTags,this.blacklist)},{id:"allow_image",type:"include",name:()=>N("downloader.category.filter.image"),checked:!0,fn(e){return!!e.extendName&&/bmp|jp(e)?g|png|tif|gif|exif|svg|webp/i.test(e.extendName)}},{id:"allow_video",type:"include",name:()=>N("downloader.category.filter.video"),checked:!0,fn(e){return!!e.extendName&&/mp4|avi|mov|mkv|flv|wmv|webm|mpeg|mpg|m4v/i.test(e.extendName)}}],enableTagFilter:!0},pageOption:{pool:{name:"Pool",match:new RegExp("(?<=\\/pools\\/)[0-9]+"),filterInGenerator:!0,fn:(e,a)=>{var n;const o=(n=new RegExp("(?<=\\/pools\\/)[0-9]+").exec(location.pathname))==null?void 0:n[0];if(!o)throw new Error("Invalid pool id");const i=this.profile.per_page,s=async l=>{const c=await this.api.getPostList({tags:[`ordpool:${o}`],limit:i,page:l});return{lastPage:c.length<i,data:c}};return this.parser.paginationGenerator(e,s,l=>String(l.id),j(this,fn,Jn).call(this,a))}},favorite_groups:{name:"FavoriteGroups",match:new RegExp("(?<=\\/favorite_groups\\/)[0-9]+"),filterInGenerator:!0,fn:(e,a)=>{var n;const o=(n=new RegExp("(?<=\\/favorite_groups\\/)[0-9]+").exec(location.pathname))==null?void 0:n[0];if(!o)throw new Error("Invalid pool id");const i=this.profile.per_page,s=async l=>{const c=await this.api.getPostList({tags:[`ordfavgroup:${o}`],limit:i,page:l});return{lastPage:c.length<i,data:c}};return this.parser.paginationGenerator(e,s,l=>String(l.id),j(this,fn,Jn).call(this,a))}},post_list:{name:"Post",match:()=>location.pathname==="/"||location.pathname==="/posts",filterInGenerator:!0,fn:(e,a)=>{var n;const o=this.profile.per_page,i=new URLSearchParams(location.search),s=((n=i.get("tags"))==null?void 0:n.split(" "))??[],l=i.get("limit"),c=l?Number(l):o,d=async g=>{const p=await this.api.getPostList({tags:s,limit:c,page:g});return{lastPage:p.length<c,data:p}},u=s?.includes("status:deleted")||this.profile.show_deleted_posts;return this.parser.paginationGenerator(e,d,g=>String(g.id),j(this,fn,Jn).call(this,a,u))}},pool_gallery_button:{name:"pool_gallery_button",match:()=>!1,filterInGenerator:!0,fn:(e,a,n)=>{if(!n)throw new Error("Invalid pool id");const o=this.profile.per_page,i=async s=>{const l=await this.api.getPostList({tags:[`ordpool:${n}`],limit:o,page:s});return{lastPage:l.length<o,data:l}};return this.parser.paginationGenerator(e,i,s=>String(s.id),j(this,fn,Jn).call(this,a))}},show_downloader_in_pool_gallery:{name:"pool_gallery",match:/\/pools\/gallery/}}}))}getSupportedTemplate(){return pr.supportedTemplate}async getPostAndComment(t){const[e,a]=await Promise.allSettled([this.api.getPost(t),this.api.getArtistCommentary(t)]);if(e.status==="rejected")throw e.reason;let n;if(a.status==="rejected"){if(!(a.reason instanceof Ci))throw a.reason}else n=a.value;return{post:e.value,comment:n}}async getMetaByPostId(t){const{post:e,comment:a}=await this.getPostAndComment(t);return this.parser.buildMetaByApi(e,a)}async addBookmark(t){try{const e=this.parser.parseCsrfToken();if(!e)throw new Error("Can not get csrf-token");const a=await this.api.addFavorite(t,e),n=new RegExp("(?<=^\\/posts\\/)\\d+").exec(location.pathname);n&&t===n[0]&&ap(a),this.toast({message:"You have favorited this post",timeout:2e3})}catch(e){Ct.error(e),this.toast({message:e.message,type:"error"})}}async downloadArtwork(t){const e=t.dataset.id,a=await this.getMetaByPostId(e),n=new pr(a).create({...It,setProgress:u=>{t.setProgress(u)}});Pt.addBookmark&&this.addBookmark(e),await Ue.download(n,{priority:1});const{tags:o,artist:i,title:s,comment:l,source:c,rating:d}=a;se.add({pid:Number(e),user:i,title:s,comment:l,tags:o,source:c,rating:d})}createThumbnailBtn(){const t=document.querySelectorAll("article a.post-preview-link");t.length&&t.forEach(e=>{var a;const n=(a=new RegExp("(?<=\\/posts\\/)\\d+").exec(e.href))==null?void 0:a[0];if(!n)return;const o=new le({id:n,onClick:this.downloadArtwork});e.appendChild(o)})}createArtworkBtn(){const t=document.querySelector("section.image-container:has(:is(picture, video))");if(!t)return;const e=t.getAttribute("data-id");t.appendChild(new or({id:e,site:t.querySelector("video")?"native_video":void 0,onClick:this.downloadArtwork}))}createPoolThumbnailBtn(){const t=document.querySelectorAll("article a.post-preview-link");if(!t.length)return;const{downloading:e,batchDownload:a}=this.useBatchDownload(),n=o=>{const i=o.dataset.id;return a("pool_gallery_button",i)};t.forEach(o=>{var i;const s=(i=new RegExp("(?<=\\/pools\\/)\\d+").exec(o.href))==null?void 0:i[0];if(!s)return;const l=new Mi({id:s,downloading:e,onClick:n});o.appendChild(l)})}inject(){super.inject(),this.downloadArtwork=this.downloadArtwork.bind(this);const t=location.pathname;/^\/posts\/\d+/.test(t)?(this.createArtworkBtn(),this.createThumbnailBtn()):/^\/pools\/gallery/.test(t)?this.createPoolThumbnailBtn():this.createThumbnailBtn()}}fn=new WeakSet,Jn=function(r,t=!0){return async e=>{const{id:a,is_deleted:n,file_ext:o,file_url:i,tag_string:s}=e;if(!i)return br.UNAVAILABLE;if(n&&!t)return br.INVALID;const l=this.parser.getBlacklistValidationTags(e);return await r({id:String(a),extendName:o,tags:s.split(" "),blacklistValidationTags:l})?br.VALID:br.INVALID}};class Rm extends nu{constructor(){we.version===null&&(It.setDirectoryTemplate(Ut.folderPattern??"danbooru/{artist}"),It.setFilenameTemplate(Ut.filenamePattern??"{id}_{artist}_{character}")),super(),V(this,"api",new au),V(this,"parser",new ru)}static get hostname(){return"danbooru.donmai.us"}getAvatar(){return"/packs/static/danbooru-logo-128x128-ea111b6658173e847734.png"}}var on=(r=>(r[r.illusts=0]="illusts",r[r.manga=1]="manga",r[r.ugoira=2]="ugoira",r))(on||{}),Ri=(r=>(r[r.public=0]="public",r[r.private=1]="private",r))(Ri||{});class Om extends ga{async getJSON(t,e){const a=await super.getJSON(t,e);if(a.error)throw new Ci(a.message);return a.body}async getArtworkHtml(t,e){const a=await this.fetch(`/artworks/${t}?lang=${e}`);if(!a.ok)throw new ir(a.url,a.status);return await a.text()}getArtworkDoc(t,e){return this.getDoc(`/artworks/${t}?lang=${e}`)}getArtworkDetail(t,e){return this.getJSON(`/ajax/illust/${t}?lang=${e}`)}getUnlistedArtworkDetail(t,e){return this.getJSON(`/ajax/illust/unlisted/${t}?lang=${e}`)}addBookmark(t,e,a=[],n=Ri.public){return this.getJSON("/ajax/illusts/bookmarks/add",{method:"POST",headers:{accept:"application/json","content-type":"application/json; charset=utf-8","x-csrf-token":e},body:JSON.stringify({illust_id:t,restrict:n,comment:"",tags:a})})}likeIllust(t,e){return this.getJSON("/ajax/illusts/like",{method:"POST",headers:{accept:"application/json","content-type":"application/json; charset=utf-8","x-csrf-token":e},body:JSON.stringify({illust_id:t})})}getFollowLatestWorks(t,e="all"){return this.getJSON(`/ajax/follow_latest/illust?p=${t}&mode=${e}&lang=jp`)}getUserAllProfile(t){return this.getJSON("/ajax/user/"+t+"/profile/all")}getUgoiraMeta(t){return this.getJSON("/ajax/illust/"+t+"/ugoira_meta")}getUserData(t){return this.getJSON("/ajax/user/"+t)}getSeriesData(t,e){return this.getJSON(`/ajax/series/${t}?p=${e}`)}}const sr=new Om,yr={async parse(r,t){let e,a;const{tagLang:n,type:o}=t;if(o==="api")e=await sr.getArtworkDetail(r,n),a="";else if(o==="unlisted")e=await sr.getUnlistedArtworkDetail(r,n),a="";else{const B=await sr.getArtworkDoc(r,n),F=B.querySelector('meta[name="preload-data"]'),J=B.querySelector('meta[name="global-data"]');if(F&&J)e=JSON.parse(F.content).illust[r],a=JSON.parse(J.content).token;else{const K=B.querySelector("script#__NEXT_DATA__");if(!K)throw new Error("Cannot get csrf token.");const Y=JSON.parse(K.textContent);a=JSON.parse(Y.props.pageProps.serverSerializedPreloadedState).api.token,e=await sr.getArtworkDetail(r,n)}}const{id:i,illustType:s,userName:l,userId:c,illustTitle:d,illustComment:u,tags:g,pageCount:p,createDate:b,urls:w,bookmarkData:y,likeData:_,bookmarkCount:k}=e,x=[],T=[];g.tags.forEach(B=>{var F;x.push(B.tag),T.push(((F=B.translation)==null?void 0:F.en)||B.tag)});const P=u.replaceAll(/&lt;|&amp;lt;/g,"<").replaceAll(/&gt;|&amp;gt;/g,">"),L=document.createElement("p");L.innerHTML=P;const R=yi(L),z={id:i,src:w.original,extendName:w.original.slice(-3),artist:l,title:d,tags:x,tagsTranslated:T,userId:c,comment:R,bookmarkData:y,createDate:b,likeData:_,token:a,bookmarkCount:k};if(s===on.ugoira){const B=await sr.getUgoiraMeta(r),F=B.frames.length,J=Array.from({length:F},(Y,ft)=>z.src.replace("ugoira0","ugoira"+ft)),K=Array.from({length:F}).fill(z.extendName);return{...z,src:J,extendName:K,illustType:s,ugoiraMeta:B}}else if(p>1){const B=Array.from({length:p},(J,K)=>z.src.replace("_p0","_p"+K)),F=Array.from({length:p}).fill(z.extendName);return{...z,src:B,extendName:F,illustType:s}}else return{...z,illustType:s}},async*illustMangaGenerator(r,t,e){const n=await sr.getUserAllProfile(e);let o=[];if(typeof n.illusts=="object"&&o.push(...Object.keys(n.illusts)),typeof n.manga=="object"&&o.push(...Object.keys(n.manga)),!o.length)throw new Error(`User ${e} has no illusts or mangas.`);o=o.sort((b,w)=>Number(w)-Number(b));let i,s;const[l=null,c=null]=r??[];let d=l??1;l===null?i=0:i=(l-1)*48,c===null?s=o.length:s=c*48;const u=o.slice(i,s);if(!u.length)throw new RangeError(`Page ${d} exceeds the limit.`);const g=`https://www.pixiv.net/ajax/user/${e}/profile/illusts?`,p=u.length;do{const w=u.splice(0,48).map(P=>"ids[]="+P).join("&")+"&work_category=illustManga&is_first_page=0&lang=ja",y=await sr.getJSON(g+w),_=Object.values(y.works).sort((P,L)=>Number(L.id)-Number(P.id)),k=[],x=[],T=[];for(let P=0;P<_.length;P++){const L=_[P],{id:R,isMasked:z}=L;if(z){T.push(String(R));continue}await t(L)?k.push(R):x.push(R)}yield{total:p,page:d,avaliable:k,invalid:x,unavaliable:T},d++}while(u.length>0)},async*chunkGenerator(r,t,e,a,n,o="show"){const[s=null,l=null]=r??[];if(!e)throw new Error('Require argument "userId".');let c,d,u,g=s??1;s===null?c=0:c=(s-1)*48;do{let p;a==="bookmarks"?p=`/ajax/user/${e}/illusts/bookmarks?tag=${n}&offset=${c}&limit=48&rest=${o}&lang=ja`:p=`/ajax/user/${e}/${a}/tag?tag=${n}&offset=${c}&limit=48&lang=ja`;const b=await sr.getJSON(p),{works:w,total:y}=b;if(y===0)throw new Error(`User ${e} has no ${a} tagged with ${n}.`);if(!d){if(l===null?d=y:d=l*48>y?y:l*48,d<=c)throw new RangeError(`Page ${g} exceeds the limit.`);u=d-c}const _=[],k=[],x=[];for(let T=0;T<w.length;T++){const P=w[T],{id:L,isMasked:R}=P;if(R){x.push(String(L));continue}await t(P)?_.push(L):k.push(L)}yield{total:u,page:g,avaliable:_,invalid:k,unavaliable:x},g++}while((c+=48)<d)},async*bookmarkGenerator(r,t,e,a="show",n=""){yield*this.chunkGenerator(r,t,e,"bookmarks",n,a)},async*taggedArtworkGenerator(r,t,e,a,n,o="show"){a==="bookmarks"?yield*this.bookmarkGenerator(r,t,e,o,n):yield*this.chunkGenerator(r,t,e,a,n)},async*followLatestGenerator(r,t,e="all"){let[o=null,i=null]=r??[];if(o===null&&(o=1),(i===null||i>34)&&(i=34),o>34)throw new RangeError(`Page ${o} exceeds the limit.`);let s,l,c,d=o;function u(w){return Math.min(...w)}async function*g(w,y){const _=[],k=[],x=[],{illust:T}=w.thumbnails;for(let L=0;L<T.length;L++){const R=T[L],{id:z,isMasked:B}=R;if(B){x.push(String(z));continue}await t(R)?_.push(z):k.push(z)}const{ids:P}=w.page;if(P.length!==T.length){const L=P.filter(R=>!T.some(z=>+z.id===R));x.push(...L.map(R=>String(R)))}yield{total:l,page:y,avaliable:_,invalid:k,unavaliable:x}}const p=await sr.getFollowLatestWorks(d,e),b=p.page.ids;if(l=b.length,s=u(b),i===o){yield*g(p,o);return}if(l===60){const w=await sr.getFollowLatestWorks(++d,e),y=w.page.ids,_=u(y);_<s&&(s=_,c=w,l+=y.length)}if(yield*g(p,o),l!==60){if(l<60*2||i-o===1){yield*g(c,d);return}for(;++d<=i;){const w=await sr.getFollowLatestWorks(d,e),y=w.page.ids,_=u(y);if(_>=s){Ct.info("getFollowLatestGenerator: got duplicate works"),yield*g(c,d-1);break}s=_,l+=y.length,yield*g(c,d-1),c=w}yield*g(c,d-1)}},async*seriesGenerator(r,t,e){const[a=1,n=0]=r??[];let o=0,i=0,s=a;do{const l=await sr.getSeriesData(e,s),{series:c}=l.page;if(!c.length)throw new Error(`Invalid page: ${s}`);const{illust:d}=l.thumbnails;if(!i){const b=c.some(({order:y})=>y===1),w=l.page.total;if(b)i=c.length;else if(n===0)i=w;else{const y=c.length,_=Math.ceil(w/y);if(n>=_){const k=w%y||y;i=(_-a)*y+k}else i=(n-a+1)*y}}const u=[],g=[],p=[];for(let b=0;b<c.length;b++){const{workId:w}=c[b],y=d.find(k=>k.id===w);if(!y||y.isMasked){p.push(w);continue}await t(y)?u.push(w):g.push(w)}yield{total:i,page:s,avaliable:u,invalid:g,unavaliable:p},o+=c.length,s++}while(o<i)}};function Ln(){var r,t;return((t=(r=ua.dataLayer)==null?void 0:r[0])==null?void 0:t.user_id)??""}function Nm(r){const t=ce.artworksPage.exec(r.getAttribute("href")||"");if(t){if(r.getAttribute("data-gtm-value")||["gtm-illust-recommend-node-node","gtm-discover-user-recommend-node","work","_history-item","_history-related-item"].some(e=>r.classList.contains(e)))return t[1]}else if(r instanceof HTMLSpanElement&&r.className.includes("_history-item")){const e=r.querySelector("img");if(!e)return"";const a=ce.historyThumbnailsId.exec(e.src);if(a)return a[0]}else{const e=ce.activityHref.exec(r.getAttribute("href")||"");if(e&&r.classList.contains("work"))return e[1]}return""}function ol(r,t){let e=!1;const a=ce.bookmarkPage.exec(location.pathname);a&&a[1]===Ln()&&(e=!0),r.forEach(n=>{let o,i;if((n.childElementCount!==0||n.className.includes("_history-item")||n.className.includes("_history-related-item"))&&!n.querySelector(le.tagNameLowerCase)&&(o=Nm(n))){e?i=Qe.PixivMyBookmark:n.className.includes("_history-related-item")?(n.style.position="relative",i=Qe.PixivHistory):n.className.includes("_history-item")&&(i=Qe.PixivHistory);const s=new le({id:o,type:i,onClick:t});n.appendChild(s)}})}function Lm(r){ce.searchPage.test(location.pathname)&&r.forEach(t=>{var e;(e=t.querySelector(le.tagNameLowerCase))==null||e.remove()})}function Fm(r,t){const e=document.querySelector("main section section");if(!e||e.querySelector(le.tagNameLowerCase))return;const a=new le({id:r,type:Qe.PixivToolbar,onClick:t}),n=e.lastElementChild.cloneNode();n.appendChild(a),e.appendChild(n)}function ou(r,t,e){const a=document.querySelectorAll("figure a.gtm-expand-full-size-illust");a.length<2||a.forEach((n,o)=>{var i;const s=(i=n.parentElement)==null?void 0:i.parentElement;!s||s.querySelector(or.tagNameLowerCase)||s.appendChild(new or({id:r,page:o,site:"pixiv",extraData:e?{unlistedId:e}:void 0,onClick:t}))})}let yo,sn;function iu(r,t,e){const a=document.querySelector("body > [role='presentation'] div[class]");if(!a){yo&&(yo.disconnect(),yo=null,sn=null);return}if(a.querySelector(le.tagNameLowerCase))return;const n=a.querySelector("div > img");if(!n)return;const o=ce.originSrcPageNum.exec(n.src);if(!o)return;const[i]=o;sn=new le({id:r,type:Qe.PixivPresentation,page:Number(i),extraData:e?{unlistedId:e}:void 0,onClick:t}),a.appendChild(sn),yo=new MutationObserver(s=>{const l=s[1].addedNodes[0],[c]=ce.originSrcPageNum.exec(l.src)??[];if(!c)return Ct.throw("Invalid image element.");sn?.remove(),sn=new le({id:r,type:Qe.PixivPresentation,page:Number(c),extraData:e?{unlistedId:e}:void 0,onClick:t}),a.appendChild(sn)}),yo.observe(n.parentElement,{childList:!0,subtree:!0})}function su(r,t,e){var a;const n=document.querySelector(".gtm-manga-viewer-preview-modal-open:not(.pdl-listened)"),o=document.querySelector(".gtm-manga-viewer-open-preview:not(.pdl-listened)"),i=(a=document.querySelectorAll(".gtm-manga-viewer-close-icon:not(.pdl-listened)"))==null?void 0:a[1];!n&&!o&&!i||[n,o,i].forEach(s=>{s&&(s.classList.add("pdl-listened"),s.addEventListener("click",()=>{jm(r,t,e)}))})}function jm(r,t,e){const a=setInterval(()=>{Ct.info("Start to find modal.");const n=document.querySelectorAll("ul"),o=n[n.length-1];getComputedStyle(o).display==="grid"&&(clearInterval(a),o.childNodes.forEach((i,s)=>{i.style.position="relative",i.appendChild(new le({id:r,page:s,extraData:e?{unlistedId:e}:void 0,onClick:t}))}))},300)}function lu(r,t,e){const a=document.querySelector(".gtm-manga-viewer-close-icon");if(!a)return;const n=a.parentElement;!n||n.querySelector(le.tagNameLowerCase)||n.appendChild(new le({id:r,type:Qe.PixivMangaViewer,extraData:e?{unlistedId:e}:void 0,onClick:t}))}const zm=".button-wrapper{display:flex;justify-content:flex-end;align-items:center;height:32px;padding:8px 12px}";class Oi extends HTMLElement{constructor(t){super(),V(this,"props"),this.props=t}static get tagNameLowerCase(){return"pdl-unlisted-artwork-toolbar"}render(){if(this.shadowRoot)return;const t=this.attachShadow({mode:"open"});t.innerHTML=`<style>${zm}</style><div class="button-wrapper"></div>`;const e=new le({...this.props,type:Qe.PixivToolbar});t.querySelector(".button-wrapper").appendChild(e)}connectedCallback(){this.render()}}customElements.define(Oi.tagNameLowerCase,Oi);function Hm(r,t,e){if(document.querySelector(Oi.tagNameLowerCase))return;const n=document.querySelector('div[style^="transform: translateY"]');if(!n)return;const o=new Oi({id:r,onClick:t,extraData:{unlistedId:e}});n.appendChild(o);const i=n.querySelector('button[type="button"]:not([style])');i&&(i.style.bottom="48px")}class Ni extends HTMLElement{constructor(t,e,a){super(),V(this,"btn"),V(this,"downloadingStore"),V(this,"unsubscriber"),this.tagUrl=t,this.handleDownload=a,this.downloadingStore=rn(()=>e.current),this.dispatchDownload=this.dispatchDownload.bind(this)}static get tagNameLowerCase(){return"pdl-tag-list-button"}async render(){if(this.shadowRoot)return;const t=this.attachShadow({mode:"open"});js(t),t.innerHTML=` 
  <div class=" flex items-center">    
    <hr class="!border-t-0 border-l h-6 ml-4 mr-2" />
    <button class=" h-[38px] w-[38px] btn-icon [&:not([disabled])]:hover:bg-slate-400/30 disabled:cursor-wait disabled:opacity-70">
      <i class="text-sm w-6 fill-current mx-2">
      ${Pi}
      </i>
    </button>
  </div>
  `}getTagProps(){const t=new URL(this.tagUrl),{searchParams:e,pathname:a}=t,n=ce.userPageTags.exec(a);if(!n)throw new Error(`Could not extract tag props from: ${a}`);const[,o,i,s]=n;if(!s)throw new Error(`Could not extract tag from: ${a}`);let l;return i==="illustrations"||i==="artworks"?l="illusts":l=i,{userId:o,category:l,tag:s,rest:e.get("rest")==="hide"?"hide":"show"}}dispatchDownload(t){t?.preventDefault(),this.handleDownload(this.getTagProps()).catch(Ct.error)}connectedCallback(){this.render(),this.btn??(this.btn=this.shadowRoot.querySelector("button")),this.btn.addEventListener("click",this.dispatchDownload),this.unsubscriber=this.downloadingStore.subscribe(t=>{t?this.setAttribute("disabled",""):this.removeAttribute("disabled")})}disconnectedCallback(){var t,e;(t=this.unsubscriber)==null||t.call(this),(e=this.btn)==null||e.removeEventListener("click",this.dispatchDownload)}static get observedAttributes(){return["disabled"]}attributeChangedCallback(t,e,a){var n,o;typeof a=="string"?(n=this.btn)==null||n.setAttribute("disabled",""):(o=this.btn)==null||o.removeAttribute("disabled")}}customElements.define(Ni.tagNameLowerCase,Ni);function Um(r,t){var e;const a=document.querySelector('div[style*="position: relative"]');if(!a)return;const n=a?.closest('div[role="presentation"], div[class="charcoal-token"]'),o=(e=n?.querySelector("svg"))==null?void 0:e.parentElement;a.querySelectorAll('div[style*="position: absolute"] a').forEach(s=>{if(s.querySelector(Ni.tagNameLowerCase))return;const l=new Ni(s.href,r,c=>(o?.click(),t(c)));s.appendChild(l)})}class Li extends HTMLElement{constructor(t,e,a){super(),V(this,"btn"),V(this,"ob"),V(this,"downloadingStore"),V(this,"unsubscriber"),this.tagElement=t,this.handleDownload=a,this.downloadingStore=rn(()=>e.current),this.dispatchDownload=this.dispatchDownload.bind(this),this.ob=new MutationObserver(()=>{this.changeBtnColor()})}static get tagNameLowerCase(){return"pdl-artwork-tag"}resetTagStyle(){this.tagElement.style.borderTopRightRadius="0px",this.tagElement.style.borderBottomRightRadius="0px"}changeBtnColor(){if(!this.btn)return;const{color:t,backgroundColor:e}=getComputedStyle(this.tagElement);this.btn.style.color=t,this.btn.style.backgroundColor=e}async render(){if(this.shadowRoot)return;const t=this.attachShadow({mode:"open"});js(t),t.innerHTML=`  <button class="flex h-full items-center pr-2 rounded-e-[4px] disabled:cursor-wait disabled:opacity-70">
    <hr class="!border-t-0 border-l h-6 pr-2" />
    <i class="text-sm w-6 fill-current">
      ${Pi}
    </i>
  </button>`,this.resetTagStyle()}getTagProps(){const t=this.tagElement.querySelectorAll("div[title]"),e=t[t.length-1].getAttribute("title"),a=e.startsWith("#")?e.slice(1):"\u672A\u5206\u985E",n=new URL(this.tagElement.href),{searchParams:o,pathname:i}=n,s=ce.userPageTags.exec(i);if(!s)throw new Error(`Could not extract tag props from: ${i}`);const[,l,c]=s;let d;return c==="illustrations"||c==="artworks"?d="illusts":d=c,{userId:l,category:d,tag:a,rest:o.get("rest")==="hide"?"hide":"show"}}dispatchDownload(){this.handleDownload(this.getTagProps()).catch(Ct.error)}connectedCallback(){this.render(),this.btn??(this.btn=this.shadowRoot.querySelector("button")),this.changeBtnColor(),this.btn.addEventListener("click",this.dispatchDownload),this.unsubscriber=this.downloadingStore.subscribe(t=>{t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}),this.ob.observe(this.tagElement,{attributes:!0,attributeFilter:["class"]})}disconnectedCallback(){var t,e;(t=this.unsubscriber)==null||t.call(this),(e=this.btn)==null||e.removeEventListener("click",this.dispatchDownload),this.ob.disconnect()}static get observedAttributes(){return["disabled"]}attributeChangedCallback(t,e,a){var n,o;typeof a=="string"?(n=this.btn)==null||n.setAttribute("disabled",""):(o=this.btn)==null||o.removeAttribute("disabled")}}customElements.define(Li.tagNameLowerCase,Li);function qm(r,t){const e=Array.from(document.querySelectorAll("a[status]"));e.length&&e.forEach(a=>{var n;if(((n=a.nextElementSibling)==null?void 0:n.tagName.toLowerCase())===Li.tagNameLowerCase)return;const o=new Li(a,r,t);a.parentElement.appendChild(o)})}class Wm{constructor(){Tt(this,zo),Tt(this,Wr,{}),Tt(this,jo,new Bi({concurrency:2}))}addFrame(t){var e;const{id:a,frame:n,delay:o,order:i}=t;(e=D(this,Wr))[a]??(e[a]={ugoiraFrames:[],delays:[]});const{ugoiraFrames:s,delays:l}=D(this,Wr)[a];if(i===void 0){const c=frames.length;s[c]=n,l[c]=o}else s[i]=n,l[i]=o}clearFrames(t){t in D(this,Wr)&&delete D(this,Wr)[t]}framesCount(t){return t in D(this,Wr)?D(this,Wr)[t].ugoiraFrames.filter(Boolean).length:0}async convert(t){const{id:e,signal:a,onProgress:n}=t;a?.throwIfAborted();const o=await D(this,jo).add(({signal:i})=>{if(i?.throwIfAborted(),!(e in D(this,Wr)))throw new Error("No frame data matched with taskId: "+e);const{ugoiraFrames:s,delays:l}=D(this,Wr)[e];if(!s.length||!l.length)throw new Error("No frame data found in taskId: "+e);return this.clearFrames(e),n?.(0),j(this,zo,Ji).call(this,{...t,frames:s,delays:l})},{signal:a});if(!o)throw new Error(`Task ${e} has no result returned.`);return o}async appendPixivEffect(t){const{id:e,signal:a,illust:n,seasonalEffect:o,onProgress:i}=t;a?.throwIfAborted();const s=await D(this,jo).add(async({signal:l})=>{l?.throwIfAborted(),Ct.info("Append Effect:",e),i?.(0);const c=Pd.getMixEffectFn(),d=performance.now(),{frames:u,delays:g}=await c(n,o,l),p=performance.now();return Ct.info(`Effect appended: ${e} ${p-d}ms.`),j(this,zo,Ji).call(this,{...t,frames:u,delays:g,signal:l})},{signal:a});if(!s)throw new Error(`Task ${e} has no result returned.`);return s}}Wr=new WeakMap,jo=new WeakMap,zo=new WeakSet,Ji=async function(r){const{id:t,qualityOption:e,frames:a,delays:n,signal:o,onProgress:i}=r;Ct.info("Start convert:",t);const s=Pd.getAdapter(e),l=performance.now(),c=await s(a,n,o,i),d=performance.now();return Ct.info(`Convert finished: ${t} ${d-l}ms.`),c};const Fn=new Wm;class va extends eu{constructor(t){super(t),V(this,"ugoiraMeta"),V(this,"illustType"),V(this,"userId"),V(this,"comment"),V(this,"translatedTags"),V(this,"bookmarkCount"),this.ugoiraMeta="ugoiraMeta"in t?t.ugoiraMeta:void 0,this.illustType=t.illustType,this.userId=t.userId,this.comment=t.comment,this.translatedTags=t.tagsTranslated,this.bookmarkCount=t.bookmarkCount}static get supportedTemplate(){return{[pe.ID]:"{id}",[pe.ARTIST]:"{artist}",[pe.ARTISTID]:"{artistID}",[pe.DATE]:"{date} {date(YYYY-MM-DD)}",[pe.PAGE]:"{page}",[pe.SCORE]:"{score}: bookmarkCount",[pe.TAGS]:"{tags}",[pe.TITLE]:"{title}"}}getHeaders(){return{referer:"https://www.pixiv.net"}}getZipComment(){if(!this.ugoiraMeta)return this.comment;const t=this.ugoiraMeta.frames.map(({delay:e})=>e);return this.comment+`
`+JSON.stringify(t)}getTemplateData(t){return{id:this.id,artist:this.normalizeString(this.artist)||this.userId,artistID:this.userId,date:this.createDate,score:String(this.bookmarkCount),title:this.normalizeString(this.title)||this.id,tags:this.tags.join("_"),...t}}handleConvertFactory(t,e){return this.handleBeforeSaveCb??(this.handleBeforeSaveCb=async(a,n,o)=>{o?.throwIfAborted();const{taskId:i,src:s}=n,l=this.src.indexOf(s);if(l===-1)throw new Error("No src matches.");if(this.ugoiraMeta&&(this.handleAbortCb??(this.handleAbortCb=()=>{Fn.clearFrames(i)}),o?.addEventListener("abort",this.handleAbortCb,{once:!0}),Fn.addFrame({id:i,frame:a,delay:this.ugoiraMeta.frames[l].delay,order:l}),Fn.framesCount(i)===this.ugoiraMeta.frames.length))return await Fn.convert({id:i,qualityOption:t,onProgress:e,signal:o})})}handleSeasonalEffectFactory(t,e){return this.handleBeforeSaveCb??(this.handleBeforeSaveCb=async(a,n,o)=>{o?.throwIfAborted();const i="pixivGlow2024",s="https://source.pixiv.net/special/seasonal-effect-tag/pixiv-glow-2024/effect.png",{taskId:l}=n,c=await se.getImageEffect(i);if(c&&!("width"in c)){const{data:d}=c;return await Fn.appendPixivEffect({id:l,qualityOption:t,illust:a,seasonalEffect:d,onProgress:e,signal:o})}else{const d=await new Promise((g,p)=>{Cd({url:s,headers:{referer:"https://www.pixiv.net"},responseType:"blob",onload(b){g(b.response)},onerror:p,ontimeout:()=>p(new Error("Timeout"))})}),u=await Fn.appendPixivEffect({id:l,qualityOption:t,illust:a,seasonalEffect:await d.arrayBuffer(),onProgress:e,signal:o});return se.addImageEffect({id:i,data:await d.arrayBuffer()}),u}})}create(t){const{filenameTemplate:e,directoryTemplate:a,setProgress:n,useTranslatedTags:o,useFileSystemAccessApi:i,filenameConflictAction:s}=t,l="index"in t?t.index:0,c=this.getHeaders(),d=this.getTemplateData(o?{tags:this.translatedTags.join("_"),page:String(l)}:{page:String(l)});return{headers:c,taskId:this.getTaskId(),src:this.getSrc(l),path:this.getSavePath(a,e,this.getExt(l),d),timeout:this.getDownloadTimeout(l),onProgress:n,useFileSystemAccessApi:i,filenameConflictAction:s}}createMulti(t){if(!this.isStringArray(this.src))throw new Error(`Artwork ${this.id} only have one media.`);const{filenameTemplate:e,directoryTemplate:a,setProgress:n,useTranslatedTags:o,useFileSystemAccessApi:i,filenameConflictAction:s}=t,l=this.getTaskId(),c=this.getHeaders(),d=n?this.getMultipleMediaDownloadCB(n):void 0,u=o?{tags:this.translatedTags.join("_")}:{};return this.src.map((g,p)=>({headers:c,taskId:l,src:g,path:this.getSavePath(a,e,this.getExt(p),this.getTemplateData({...u,page:String(p)})),timeout:this.getDownloadTimeout(),onFileSaved:d,useFileSystemAccessApi:i,filenameConflictAction:s}))}createBundle(t){if(!this.isStringArray(this.src))throw new Error(`Artwork ${this.id} only have one media.`);const{filenameTemplate:e,directoryTemplate:a,setProgress:n,useTranslatedTags:o,useFileSystemAccessApi:i,filenameConflictAction:s}=t,l=this.getTaskId(),c=this.getHeaders(),d=n?this.getMultipleMediaDownloadCB(n):void 0,u=o?{tags:this.translatedTags.join("_")}:{},g=this.getSavePath(a,e,"zip",this.getTemplateData({...u,page:String(this.src.length)})),p=e.includes(`{${pe.PAGE}}`)?e:e+`_{${pe.PAGE}}`,b=this.src.map((w,y)=>this.getSavePath("",p,this.getExt(y),this.getTemplateData({...u,page:String(y)})));return this.src.map((w,y)=>({headers:c,taskId:l,src:w,path:g,timeout:this.getDownloadTimeout(y),onXhrLoaded:d,beforeFileSave:this.handleBundleFactory(b),onError:this.handleBundleErrorFactory(),onAbort:this.handleBundleAbortFactory(),useFileSystemAccessApi:i,filenameConflictAction:s}))}createConvert(t){if(!this.isStringArray(this.src))throw new Error(`Artwork ${this.id} only have one media.`);const{filenameTemplate:e,directoryTemplate:a,setProgress:n,qualityOption:o,useTranslatedTags:i,useFileSystemAccessApi:s,filenameConflictAction:l}=t,c=this.getTaskId(),d=this.getHeaders(),u=n?this.getMultipleMediaDownloadCB(n):void 0,g=this.handleConvertFactory(o,n),p=this.getTemplateData(i?{tags:this.translatedTags.join("_"),page:String(0)}:{page:String(0)}),b=this.getSavePath(a,e,o.format,p);return this.src.map((w,y)=>({headers:d,taskId:c,src:w,path:b,timeout:this.getDownloadTimeout(y),onXhrLoaded:u,beforeFileSave:g,useFileSystemAccessApi:s,filenameConflictAction:l}))}createSeasonalEffect(t){const{filenameTemplate:e,directoryTemplate:a,setProgress:n,qualityOption:o,useTranslatedTags:i,useFileSystemAccessApi:s,filenameConflictAction:l}=t,c="index"in t?t.index:0,d=this.getTemplateData(i?{tags:this.translatedTags.join("_"),page:String(c)}:{page:String(c)});return{headers:this.getHeaders(),taskId:this.getTaskId(),src:this.getSrc(c),path:this.getSavePath(a,e,o.format,d),timeout:this.getDownloadTimeout(c),onProgress:n,beforeFileSave:this.handleSeasonalEffectFactory(o,n),useFileSystemAccessApi:s,filenameConflictAction:l}}}async function Gm(r,t,e){const{btn:a,tags:n,restrict:o}=e;try{if(await sr.addBookmark(r,t,n,o),!a)return;const i=Ym(a);if(!i)return;switch(i.kind){case"main":{const s=i.button.querySelector("svg g path");s&&(s.style.color="rgb(255, 64, 96)");break}case"sub":{const s=i.button.querySelector("path");s&&(s.style.color="rgb(255, 64, 96)");break}case"rank":{i.button.style.backgroundColor="rgb(255, 64, 96)";break}default:break}}catch(i){Ct.error(i)}}function Ym(r){var t,e,a,n,o;const i={};if(r.dataset.type)if(r.dataset.type===Qe.PixivToolbar){const s=(o=(n=r.parentElement)==null?void 0:n.parentElement)==null?void 0:o.querySelector("button.gtm-main-bookmark");s&&(i.kind="main",i.button=s)}else return Ct.warn(new Error("Can not find bookmark button."));else{const s=(e=(t=r.parentElement)==null?void 0:t.nextElementSibling)==null?void 0:e.querySelector('button[type="button"]');if(s)i.kind="sub",i.button=s;else{const l=(a=r.parentElement)==null?void 0:a.querySelector("div._one-click-bookmark");l&&(i.kind="rank",i.button=l)}}return i}function Vm(r){return location.pathname.includes(`/artworks/${r}`)}async function $m(r,t){var e,a,n;if(await sr.likeIllust(r,t),!Vm(r))return;const o=(n=(a=(e=document.querySelector(`${le.tagNameLowerCase}[data-type="pixiv-toolbar"]`))==null?void 0:e.parentElement)==null?void 0:a.previousElementSibling)==null?void 0:n.firstElementChild;o&&(o.disabled=!0,o.style.color="#0096fa",o.style.cursor="default")}class Jm extends ha{constructor(){we.version===null&&(It.setDirectoryTemplate(Ut.folderPattern??"pixiv/{artist}"),It.setFilenameTemplate(Ut.filenamePattern??"{artist}_{title}_{id}_p{page}"),Pt.$update(e=>({...e,ugoiraFormat:Ut.ugoiraFormat??"zip",mixSeasonalEffect:Ut.mixEffect??!1,tagLocale:Ut.tagLang??pa.JAPANESE,compressMultiIllusts:Ut.bundleIllusts??!1,compressManga:Ut.bundleManga??!1,addBookmark:!1,bookmarkWithTags:Ut.addBookmarkWithTags??!1,privateBookmarkIfR18:Ut.privateR18??!1,likeIllustWhenDownloading:Ut.likeIllust??!1})));const t=new Ks(()=>document.documentElement.getAttribute("data-theme")==="dark",e=>{const a=new MutationObserver(n=>{n.some(i=>i.attributeName==="data-theme")&&e()});return a.observe(document.documentElement,{attributes:!0,childList:!1,subtree:!1}),()=>{a.disconnect()}});we.setThemeWatcher(t),super(),V(this,"firstObserverCbRunFlag",!0),V(this,"useBatchDownload",this.app.initBatchDownloader({async avatar(e){let a,n;if((n=ce.series.exec(e))?a=n[1]:(n=ce.userPage.exec(e))?a=n[1]||n[2]:a=Ln()??"",!a)return"";try{return(await sr.getUserData(a)).imageBig}catch(o){return Ct.error(o),""}},parseMetaByArtworkId:e=>{const a=Pt.tagLocale??pa.JAPANESE;return yr.parse(e,{tagLang:a,type:"api"})},downloadArtworkByMeta:async(e,a)=>{const n=this.getDownloadConfig(e);await Ue.download(n,{signal:a});const{comment:o,id:i,tags:s,artist:l,userId:c,title:d}=e,u={pid:Number(i),user:l,userId:Number(c),title:d,comment:o,tags:s};se.add(u)},filterOption:{filters:[{id:"exclude_downloaded",type:"exclude",name:()=>N("downloader.category.filter.exclude_downloaded"),checked:!1,fn(e){return!!e.id&&se.has(e.id)}},{id:"illust",type:"include",name:()=>N("downloader.category.filter.pixiv_illust"),checked:!0,fn(e){return e.illustType===on.illusts}},{id:"manga",type:"include",name:()=>N("downloader.category.filter.pixiv_manga"),checked:!0,fn(e){return e.illustType===on.manga}},{id:"ugoira",type:"include",name:()=>N("downloader.category.filter.pixiv_ugoira"),checked:!0,fn(e){return e.illustType===on.ugoira}}],enableTagFilter:!0},pageOption:{self_bookmark_public:{name:()=>N("downloader.download_type.pixiv_bookmark_public"),match(e){const a=ce.userPage.exec(e);return a?(a[1]||a[2])===Ln():!1},filterInGenerator:!0,fn:(e,a)=>yr.bookmarkGenerator(e,a,Ln())},self_bookmark_private:{name:()=>N("downloader.download_type.pixiv_bookmark_private"),match(e){const a=ce.userPage.exec(e);return a?(a[1]||a[2])===Ln():!1},filterInGenerator:!0,fn:(e,a)=>yr.bookmarkGenerator(e,a,Ln(),"hide")},user_page_works:{name:()=>N("downloader.download_type.pixiv_works"),match:ce.userPage,filterInGenerator:!0,fn:(e,a)=>{const n=ce.userPage.exec(location.href),o=n[1]||n[2];return yr.illustMangaGenerator(e,a,o)}},user_page_bookmark:{name:()=>N("downloader.download_type.pixiv_bookmark"),match:ce.userPage,filterInGenerator:!0,fn:(e,a)=>{const n=ce.userPage.exec(location.href),o=n[1]||n[2];return yr.bookmarkGenerator(e,a,o)}},follow_latest_all:{name:()=>N("downloader.download_type.pixiv_follow_latest_all"),match:ce.followLatest,filterInGenerator:!0,fn:(e,a)=>yr.followLatestGenerator(e,a,"all")},follow_latest_r18:{name:()=>N("downloader.download_type.pixiv_follow_latest_r18"),match:ce.followLatest,filterInGenerator:!0,fn:(e,a)=>yr.followLatestGenerator(e,a,"r18")},series:{name:()=>N("downloader.download_type.pixiv_series"),match:ce.series,filterInGenerator:!0,fn:(e,a)=>{const n=ce.series.exec(location.pathname);return yr.seriesGenerator(e,a,n[2])}},tagged_artwork:{name:"tagged_artwork",match:()=>!1,filterInGenerator:!0,fn:(e,a,n,o,i,s="show")=>o==="bookmarks"?yr.taggedArtworkGenerator(e,a,n,o,i,s):yr.taggedArtworkGenerator(e,a,n,o,i)}}}))}static get hostname(){return"www.pixiv.net"}inject(){super.inject(),this.downloadArtwork=this.downloadArtwork.bind(this),new MutationObserver(t=>{this.injectThumbnailButtons(t),this.pageActions()}).observe(document.body,{childList:!0,subtree:!0})}getSupportedTemplate(){return va.supportedTemplate}injectThumbnailButtons(t){const e=[];if(t.forEach(a=>{a.addedNodes.length&&a.addedNodes.forEach(n=>{n.nodeType===Node.ELEMENT_NODE&&n.tagName.toLowerCase()!==le.tagNameLowerCase&&n.tagName!=="IMG"&&e.push(n)})}),!!e.length)if(this.firstObserverCbRunFlag)ol(document.querySelectorAll("a"),this.downloadArtwork),this.firstObserverCbRunFlag=!1;else{Lm(e);const a=e.reduce((n,o)=>n.concat(o instanceof HTMLAnchorElement?[o]:Array.from(o.querySelectorAll("a"))),[]);ol(a,this.downloadArtwork)}}pageActions(){var t;const e=location.pathname;let a;switch(!0){case!!(a=ce.artworksPage.exec(e)):{const n=a[1];Fm(n,this.downloadArtwork),ou(n,this.downloadArtwork),iu(n,this.downloadArtwork),su(n,this.downloadArtwork),lu(n,this.downloadArtwork);break}case ce.userPageTags.test(e):{const{downloading:n,batchDownload:o}=this.useBatchDownload(),i=s=>{const{userId:l,category:c,tag:d,rest:u}=s;return o("tagged_artwork",l,c,d,u)};qm(n,i),Um(n,i);break}case ce.historyPage.test(e):{ol(document.querySelectorAll("span[style]._history-item"),this.downloadArtwork);break}case!!(a=ce.unlisted.exec(e)):{const n=a[0],o=document.head.querySelector('link[rel="canonical"]')||document.head.querySelector('link[data-next-head][href^="https://www.pixiv.net/artworks/"]'),i=o?.getAttribute("href");if(!i)throw new Error(`Cannot get canonical url for ${n}`);const s=(t=ce.artworksPage.exec(i))==null?void 0:t[1];if(!s)throw new Error(`Cannot get artwork id for ${n}`);Hm(s,this.downloadArtwork,n),ou(s,this.downloadArtwork,n),iu(s,this.downloadArtwork,n),su(s,this.downloadArtwork,n),lu(s,this.downloadArtwork,n);break}}}isMultiImageMeta(t){return Array.isArray(t.src)&&t.src.length>1}getConvertQualityOption(t){switch(t){case Ke.GIF:return{format:Ke.GIF,quality:qe.gifQuality};case Ke.PNG:return{format:Ke.PNG,cnum:qe.pngColor};case Ke.WEBM:return{format:Ke.WEBM,bitrate:qe.webmBitrate};case Ke.WEBP:{const{losslessWebp:e,webpQuality:a,webpMehtod:n}=qe;return{format:Ke.WEBP,lossless:e,quality:a,method:n}}case Ke.MP4:return{format:Ke.MP4,bitrate:qe.mp4Bitrate};default:return}}getDownloadConfig(t,e,a){const{compressManga:n,compressMultiIllusts:o,mixSeasonalEffect:i,ugoiraFormat:s,tagLocale:l}=Pt,c=Ke.MP4,d=this.getConvertQualityOption(s),u={...It,useTranslatedTags:!!l&&l!==pa.JAPANESE,setProgress:e};return"ugoiraMeta"in t?d?new va(t).createConvert({...u,qualityOption:d}):new va(t).createBundle(u):this.isMultiImageMeta(t)?a!==void 0?i?new va(t).createSeasonalEffect({...u,index:a,qualityOption:d||this.getConvertQualityOption(c)}):new va(t).create({...u,index:a}):t.illustType===on.manga&&n||t.illustType===on.illusts&&o?new va(t).createBundle(u):new va(t).createMulti(u):i?new va(t).createSeasonalEffect({...u,qualityOption:d||this.getConvertQualityOption(c)}):new va(t).create(u)}async downloadArtwork(t){const{id:e,page:a,unlistedId:n}=t.dataset,o=a!==void 0?+a:void 0,i=Pt.tagLocale??pa.JAPANESE;let s;if(n)s=await yr.parse(n,{tagLang:i,type:"unlisted"});else{const w=Pt.addBookmark,y=Pt.likeIllustWhenDownloading;if(w||y){s=await yr.parse(e,{tagLang:i,type:"html"});const{bookmarkData:_,token:k,tags:x,likeData:T}=s;if(!_&&w){const P=Pt.bookmarkWithTags?x:void 0,L=Pt.privateBookmarkIfR18&&x.includes("R-18")?Ri.private:Ri.public;Gm(e,k,{btn:t,tags:P,restrict:L})}!T&&y&&$m(e,k)}else s=await yr.parse(e,{tagLang:i,type:"api"})}const l=this.getDownloadConfig(s,w=>{w>0?t.setProgress(w):t.setStatus(Us.Loading)},o);await Ue.download(l,{priority:1});const{comment:c,tags:d,artist:u,userId:g,title:p}=s,b={pid:Number(e),user:u,userId:Number(g),title:p,comment:c,tags:d};a!==void 0&&(b.page=Number(a)),n&&(b.unlistedId=n),se.add(b)}}class il extends za{constructor(){super(...arguments),Tt(this,pn)}parseCsrfToken(){const t=document.querySelector('meta[name="csrf-token"]');if(!t)throw new Error("Can not find csrf-token element.");return t.content}isLatestData(t){return"file_ext"in t}buildMeta(t,e){if(t.status==="deleted")throw new Error(`Post ${t.id} is deleted.`);const{id:a,file_url:n,md5:o,created_at:i,source:s,rating:l,score:c}=t,d=this.isLatestData(t)?t.file_ext:n.match(/\.(\w+)$/)[1],u=[],g=[],p=t.tags.split(" ").map(b=>{const w=e[b]??"unknown";return w==="artist"?u.push(b):w==="character"&&g.push(b),w+":"+b});return{id:String(a),src:n,extendName:d,artist:u.join(",")||this.UNKNOWN_ARTIST,character:g.join(",")||this.UNKNOWN_CHARACTER,title:o,tags:p,createDate:new Date(i*1e3).toISOString(),rating:l,score:c,source:s}}isFavorite(t,e){return t in e&&e[t]===3}parsePostsList(t){return{posts:j(this,pn,Bl).call(this,t),tags:j(this,pn,Ml).call(this,t)}}parsePostAndPool(t){const[e]=new RegExp("(?<=Post\\.register_resp\\().+(?=\\);)").exec(t);return JSON.parse(e)}parseBlacklistByDoc(t){const e=t.querySelector("script#user-blacklisted-tags");if(!e)throw new Error("Can not get blacklist.");const a=JSON.parse(e.textContent??"[]");return j(this,pn,Qi).call(this,a)}parseBlacklistByCookie(){const t=document.cookie.match(new RegExp("(?<=blacklisted_tags=).+?(?=;)"));let e=t?decodeURIComponent(t[0]):"[]";return e==='[""]'&&(e="[]"),j(this,pn,Qi).call(this,JSON.parse(e))}isBlacklisted(t,e){return e.some(a=>{const{require:n,exclude:o}=a,i=s=>t.includes(s);return n.every(i)&&!o.some(i)})}}pn=new WeakSet,Bl=function(r){return r.match(new RegExp("(?<=Post\\.register\\().+(?=\\))","g")).map(e=>JSON.parse(e))},Ml=function(r){const[t]=r.match(new RegExp("(?<=Post\\.register_tags\\().+(?=\\))"));return JSON.parse(t)},Qi=function(r){return r.map(t=>{const a=t.replace(/(rating:[qes])\w+/,"$1").split(" "),n=[],o=[];return a.forEach(i=>{i.charAt(0)==="-"?o.push(i.slice(1)):n.push(i)}),{tags:a,original_tag_string:t,require:n,exclude:o}})};class sl extends ga{isBadResponse(t){return"success"in t&&!t.success}async getJSON(t,e){const a=await super.getJSON(t,e);if(this.isBadResponse(a))throw new Ci(a.reason);return a}async getPost(t){const[e]=await this.getJSON(`/post.json?tags=id:${t}`);return e}async getPosts(t){let e="/post.json?";return Object.entries(t).forEach(([a,n])=>{typeof n=="number"?n=String(n):Array.isArray(n)&&(n=n.join("+")),e+=`&${a}=${n}`}),this.getJSON(e)}async getPool(t,e=1){return this.getJSON(`/pool/show.json?id=${t}&page=${e}`)}async getPopularByDate(t){let e;const{month:a="",year:n=""}=t;return t.period==="month"?e=`/post/popular_by_month.json?month=${a}&year=${n}`:e=`/post/popular_by_${t.period}.json?day=${t.day??""}&month=${a}&year=${n}`,this.getJSON(e)}async getPostHtml(t){return this.getHtml(`/post/show/${t}`)}async getPostsHtml(t,e){return Array.isArray(t)&&t.join("+"),this.getHtml(`/post?page=${e}&tags=${t}`)}async getPopularHtmlByPeriod(t){return this.getHtml(`/post/popular_recent?period=${t}`)}async getPoolHtml(t){return this.getHtml(`/pool/show/${t}`)}async getBlacklistDoc(){return this.getDoc("/static/more")}async getPopularHtmlByDate(t){let e;const{month:a="",year:n=""}=t;return t.period==="month"?e=`/post/popular_by_month?month=${a}&year=${n}`:e=`/post/popular_by_${t.period}?day=${t.day??""}&month=${a}&year=${n}`,this.getHtml(e)}async addFavorite(t,e){const a=await this.fetch("/post/vote.json",{method:"POST",headers:{"x-csrf-token":e,"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:`id=${t}&score=3`});if(!a.ok)throw new ir(a.url,a.status)}}class ll extends ha{constructor(){we.version===null&&(Pt.addBookmark??(Pt.addBookmark=!1)),super(),Tt(this,De),V(this,"blacklist",null),V(this,"useBatchDownload",this.app.initBatchDownloader({avatar:"/favicon.ico",parseMetaByArtworkId:async t=>{const e=await this.api.getPostHtml(t),{posts:a,tags:n}=this.parser.parsePostAndPool(e);return this.parser.buildMeta(a[0],n)},downloadArtworkByMeta:async(t,e)=>{const a=new pr(t).create({...It,cfClearance:We.cf_clearance||void 0});await Ue.download(a,{signal:e});const{id:n,tags:o,artist:i,title:s,rating:l,source:c}=t;se.add({pid:Number(n),user:i,title:s,tags:o,rating:l,source:c})},afterDownload:()=>{this.blacklist&&(this.blacklist=null)},filterOption:{filters:[{id:"exclude_downloaded",type:"exclude",name:()=>N("downloader.category.filter.exclude_downloaded"),checked:!1,fn(t){return!!t.id&&se.has(t.id)}},{id:"exclude_blacklist",type:"exclude",name:()=>N("downloader.category.filter.exclude_blacklist"),checked:!0,fn:async t=>t.tags?(this.blacklist??(this.blacklist=await this.getBlacklist()),this.parser.isBlacklisted(t.tags,this.blacklist)):!1},{id:"allow_image",type:"include",name:()=>N("downloader.category.filter.image"),checked:!0,fn(){return!0}}],enableTagFilter:!0},pageOption:{posts:{name:()=>N("downloader.download_type.moebooru_posts"),match:()=>location.pathname==="/post",filterInGenerator:!0,fn:(t,e,a)=>{a??(a=new URLSearchParams(location.search).get("tags")??"");const n=async o=>{const s=await this.api.getPostsHtml(a,o),{posts:l,tags:c}=this.parser.parsePostsList(s),d=l.map(u=>({...u,tagType:c}));return{lastPage:d.length<40,data:d}};return this.parser.paginationGenerator(t,n,j(this,De,xa).bind(this),j(this,De,_a).call(this,e))}},popular_1d:{name:()=>N("downloader.download_type.moebooru_popular_1d"),match:()=>location.pathname==="/post/popular_recent",filterInGenerator:!0,fn:(t,e)=>this.parser.paginationGenerator([1,1],j(this,De,Qn).call(this,"1d"),j(this,De,xa).bind(this),j(this,De,_a).call(this,e))},popular_1w:{name:()=>N("downloader.download_type.moebooru_popular_1w"),match:()=>location.pathname==="/post/popular_recent",filterInGenerator:!0,fn:(t,e)=>this.parser.paginationGenerator([1,1],j(this,De,Qn).call(this,"1w"),j(this,De,xa).bind(this),j(this,De,_a).call(this,e))},popular_1m:{name:()=>N("downloader.download_type.moebooru_popular_1m"),match:()=>location.pathname==="/post/popular_recent",filterInGenerator:!0,fn:(t,e)=>this.parser.paginationGenerator([1,1],j(this,De,Qn).call(this,"1m"),j(this,De,xa).bind(this),j(this,De,_a).call(this,e))},popular_1y:{name:()=>N("downloader.download_type.moebooru_popular_1y"),match:()=>location.pathname==="/post/popular_recent",filterInGenerator:!0,fn:(t,e)=>this.parser.paginationGenerator([1,1],j(this,De,Qn).call(this,"1y"),j(this,De,xa).bind(this),j(this,De,_a).call(this,e))},popular_by_date:{name:()=>N("downloader.download_type.moebooru_popular_date"),match:/\/post\/popular_by_(day|week|month)/,filterInGenerator:!0,fn:(t,e)=>{const a=new RegExp("(?<=popular_by_)day|week|month").exec(location.pathname)[0],n=new URLSearchParams(location.search);let o;n.size===0?o={period:a}:(o={period:a,month:n.get("month")||void 0,year:n.get("year")||void 0},o.period!=="month"&&(o.day=n.get("day")||void 0));const i=async()=>{const s=await this.api.getPopularHtmlByDate(o),{posts:l,tags:c}=this.parser.parsePostsList(s);return{lastPage:!0,data:l.map(u=>({...u,tagType:c}))}};return this.parser.paginationGenerator([1,1],i,j(this,De,xa).bind(this),j(this,De,_a).call(this,e))}},pool:{name:()=>N("downloader.download_type.moebooru_pool"),match:/\/pool\/show\//,filterInGenerator:!0,fn:(t,e,a)=>{a??(a=new RegExp("(?<=show\\/)[0-9]+").exec(location.pathname)[0]);const n=async()=>{const o=await this.api.getPoolHtml(a),{posts:i,tags:s}=this.parser.parsePostAndPool(o);return{lastPage:!0,data:i.map(c=>({...c,tagType:s}))}};return this.parser.paginationGenerator([1,1],n,j(this,De,xa).bind(this),j(this,De,_a).call(this,e))}}}}))}getSupportedTemplate(){return pr.supportedTemplate}createThumbnailBtn(t){t.length&&t.forEach(e=>{const a=new RegExp("(?<=\\/post\\/show\\/)\\d+|(?<=\\/post\\/browse#)\\d+").exec(e.href);if(!a)return;const n=a[0],o=e.querySelector(le.tagNameLowerCase);if(o){if(o.dataset.id===n)return;o.remove()}else{if(e.href.includes("/post/show")&&(e.style.height="fit-content",!e.classList.contains("thumb"))){const i=e.querySelector("img");if(i.src.includes("blacklisted-preview.png"))return;i.onload=()=>{i.src.includes("blacklisted-preview.png")&&i.nextElementSibling&&i.nextElementSibling.remove()},e.style.marginBottom="1em",i.style.marginBottom="0px"}e.parentElement.style.display="flex",e.style.position="relative"}e.appendChild(new le({id:n,onClick:j(this,De,Ho).bind(this)}))})}createArtworkBtn(t){const e=document.querySelector("#post-view > .content > div:has(:is(img, video))");if(!e)throw new Error("Can not find button container");e.style.position="relative",e.style.width="max-content",e.appendChild(new or({id:t,site:e.querySelector("video")?"vjs_video":"moebooru_image",onClick:j(this,De,Ho).bind(this)}))}createScrollerBtn(){const t=document.querySelector("ul.post-browser-posts");if(!t)return;new MutationObserver(a=>{const n=[];a.forEach(o=>{o.addedNodes.length&&o.addedNodes.forEach(i=>{if(!(i instanceof HTMLElement))return;const s=i.querySelectorAll("a.thumb");s.length&&n.push(...s)})}),this.createThumbnailBtn(n)}).observe(t,{subtree:!0,childList:!0})}createImageBrowseBtn(){const t=document.querySelector("span.post-id");if(!t)return;const e=()=>{var a;(a=document.querySelector(`${le.tagNameLowerCase}[data-type="${Qe.YandeBrowse}"]`))==null||a.remove();const n=t.textContent;n&&document.body.appendChild(new le({id:n,type:Qe.YandeBrowse,onClick:j(this,De,Ho).bind(this)}))};e(),new MutationObserver(e).observe(t,{childList:!0})}inject(){super.inject();const t=location.pathname,e=t.match(new RegExp("(?<=\\/post\\/show\\/)\\d+"));if(e)this.createArtworkBtn(e[0]);else if(t==="/post/browse")this.createScrollerBtn(),this.createImageBrowseBtn();else{const a=document.querySelectorAll("a.thumb, div.post div.col1 a");this.createThumbnailBtn(Array.from(a))}}}De=new WeakSet,_a=function(r){return async t=>{const e=t.tags.split(" ");return e.push("rating:"+t.rating.charAt(0)),e.push("status:"+t.status),await r({id:String(t.id),tags:e})?br.VALID:br.INVALID}},xa=function(r){return this.parser.buildMeta(r,r.tagType)},Qn=function(r){return async()=>{const t=await this.api.getPopularHtmlByPeriod(r),{posts:e,tags:a}=this.parser.parsePostsList(t);return{lastPage:!0,data:e.map(o=>({...o,tagType:a}))}}},Rl=async function(r){try{const t=this.parser.parseCsrfToken();await this.api.addFavorite(r,t),this.toast({message:"You have favorited this post",timeout:2e3})}catch(t){Ct.error(t),this.toast({message:t.message,type:"error"})}},Ho=async function(r){const t=r.dataset.id,e=await this.api.getPostHtml(t),{posts:a,tags:n,votes:o}=this.parser.parsePostAndPool(e),i=this.parser.buildMeta(a[0],n),s=new pr(i).create({...It,cfClearance:We.cf_clearance||void 0,setProgress:p=>{r.setProgress(p)}});Pt.addBookmark&&!this.parser.isFavorite(t,o)&&j(this,De,Rl).call(this,t),await Ue.download(s,{priority:1});const{tags:l,artist:c,title:d,rating:u,source:g}=i;se.add({pid:Number(t),user:c,title:d,tags:l,rating:u,source:g})};class Qm extends ll{constructor(){we.version===null&&(It.setDirectoryTemplate(Ut.folderPattern??"yande/{artist}"),It.setFilenameTemplate(Ut.filenamePattern??"{id}_{artist}_{character}")),super(),V(this,"api",new sl),V(this,"parser",new il)}async getBlacklist(){const t=await this.api.getBlacklistDoc();return this.parser.parseBlacklistByDoc(t)}static get hostname(){return"yande.re"}}class Km extends nu{constructor(){we.version===null&&(It.setDirectoryTemplate(Ut.folderPattern??"ATFbooru/{artist}"),It.setFilenameTemplate(Ut.filenamePattern??"{id}_{artist}_{character}")),super(),V(this,"api",new au),V(this,"parser",new ru),V(this,"commentaryAccessible")}static get hostname(){return"booru.allthefallen.moe"}getAvatar(){return"/favicon.svg"}async isCommentaryAccessible(){try{await this.api.getArtistCommentary("703816")}catch(t){if(!(t instanceof ir))return!1;throw t}return!0}async getMetaByPostId(t){let e;if(this.commentaryAccessible??(this.commentaryAccessible=await this.isCommentaryAccessible())){const{post:a,comment:n}=await this.getPostAndComment(t);e=this.parser.buildMetaByApi(a,n)}else{const a=await this.api.getPostDoc(t);e=this.parser.buildMetaByDoc(a)}return e}}class Xm extends ll{constructor(){we.version===null&&(It.setDirectoryTemplate(Ut.folderPattern??"konachan/{artist}"),It.setFilenameTemplate(Ut.filenamePattern??"{id}_{artist}_{character}"),We.cf_clearance??(We.cf_clearance="")),super(),Tt(this,Ki),V(this,"api",new sl),V(this,"parser",new il)}async getBlacklist(){return this.parser.parseBlacklistByCookie()}static get hostname(){return["konachan.com","konachan.net"]}inject(){super.inject(),/pool\/show\//.test(location.pathname)&&j(this,Ki,Ol).call(this)}}Ki=new WeakSet,Ol=function(){document.querySelectorAll("ul#post-list-posts li").forEach(r=>{r.style.width="auto";const t=r.firstElementChild;t.style.width="auto",t.style.height="auto"})};class Zm extends ll{constructor(){we.version===null&&(It.setDirectoryTemplate(Ut.folderPattern??"sakugabooru/{artist}"),It.setFilenameTemplate(Ut.filenamePattern??"{id}_{artist}_{character}")),super(),V(this,"api",new sl),V(this,"parser",new il)}async getBlacklist(){const t=await this.api.getBlacklistDoc();return this.parser.parseBlacklistByDoc(t)}static get hostname(){return"www.sakugabooru.com"}}class tw extends al{constructor(){we.version===null&&(It.setDirectoryTemplate(Ut.folderPattern??"safebooru/{artist}"),It.setFilenameTemplate(Ut.filenamePattern??"{id}_{artist}_{character}"),We.cf_clearance??(We.cf_clearance="")),super(),V(this,"api",new nl),V(this,"parser",new el)}static get hostname(){return"safebooru.org"}getThumbnailSelector(){return".thumb:not(.blacklisted-image) > a:first-child"}}class ew extends nl{async getPosts(){throw new Error("This is a Gelbooru v0.2.0 method, do not use.")}async getPostsV025(t){let e="/index.php?page=dapi&s=post&q=index&json=1";Object.entries(t).forEach(([o,i])=>{typeof i=="number"?i=String(i):Array.isArray(i)&&(i=i.join("+")),e+=`&${o}=${i}`});const a=await this.fetch(e);if(!a.ok)throw new ir(e,a.status);const n=await a.json();return n.post?n.post:[]}}class rw extends al{constructor(){we.version===null&&(It.setDirectoryTemplate(Ut.folderPattern??"gelbooru/{artist}"),It.setFilenameTemplate(Ut.filenamePattern??"{id}_{artist}_{character}")),we.setThemeWatcher({get current(){return!!document.head.querySelector('link[href*="dark.css"]')}}),super(),V(this,"api",new ew),V(this,"parser",new el)}static get hostname(){return"gelbooru.com"}getAvatar(){return"/user_avatars/honkonymous.png"}getThumbnailSelector(){return'.thumb > a:first-child,     .thumbnail-preview > a[id],     .commentThumbnail > a:first-child,     .thumbnail-container > span[id] > a,     a:has(img[style*="max-height: 100px"]),     a:has(div.profileThumbnailPadding)'}setThumbnailStyle(t){switch(!0){case this.isMyfavorites():{t.setAttribute("style","position: relative; display: inline-block;");break}case this.isPool():{t.setAttribute("style","position: relative; display: inline-block; margin: 10px;");const e=t.querySelector("img");e.style.margin="0px",e.style.padding="0px";break}case this.isPostsList():{t.style.position="relative";break}case this.isPostView():{t.setAttribute("style","position: relative; display: inline-block; margin: 10px;");const e=t.querySelector("img");e.style.margin="0px";break}case this.isAccountProfile():{t.setAttribute("style","position: relative; display: inline-block"),t.firstElementChild.style.padding="0px";break}}}createArtworkBtn(t){let e=document.querySelector(".image-container > picture");if(e)e.setAttribute("style","position: relative; display: inline-block;");else{const a=document.querySelector("#gelcomVideoPlayer");if(!a)return;e=document.createElement("div"),e.setAttribute("style","position: relative; width: fit-content; font-size: 0px;"),a.parentElement.insertBefore(e,a),e.appendChild(a)}e.appendChild(new or({id:t,site:e.nodeName==="DIV"?"native_video":void 0,onClick:this.downloadArtwork.bind(this)}))}inject(){super.inject(),this.isPostView()&&this.createThumbnailBtn()}}class aw extends ga{constructor(t){super(t),Tt(this,Or);const[e,a]=t.authorization,n="Pixiv Downloader/1.10.0 (by drunkg00se on e621)";Zt(this,Or,new URLSearchParams({username:e,apiKey:a,_client:n}))}get username(){return D(this,Or).get("username")}set username(t){t!==D(this,Or).get("username")&&D(this,Or).set("username",t)}get apiKey(){return D(this,Or).get("apiKey")}set apiKey(t){t!==D(this,Or).get("apiKey")&&D(this,Or).set("apiKey",t)}async getJSON(t,e){const a=new URL(t,location.origin);t+=a.search===""?"?":"&",t+=D(this,Or).toString(),Ct.info("Fetch url:",t);const n=await this.fetch(t,e);if(!n.ok)throw new ir(n.url,n.status);return await n.json()}getFavorites(t){const e=new URLSearchParams(Object.entries(t).map(([a,n])=>[a,String(n)]));return this.getJSON(`/favorites.json?${e.toString()}`)}getPool(t){return this.getJSON(`/pools/${t}.json`)}getPosts(t){const{limit:e,page:a}=t;if(e<0||e>320)throw new RangeError("limit should between 0 and 320.");if(a<1||a>750)throw new RangeError("Page should between 1 and 750.");const n=new URLSearchParams(Object.entries(t).map(([o,i])=>typeof i=="string"?[o,i]:[o,String(i)]));return this.getJSON(`/posts.json?${n.toString()}`)}getPost(t){return this.getJSON(`/posts/${t}.json`)}getCurrentUserProfile(t){return this.getJSON(`/users/${t}.json`)}async addFavorites(t,e){const a=await this.fetch(`/favorites.json?${D(this,Or).toString()}`,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8","x-csrf-token":e},body:`post_id=${t}`});if(!a.ok)throw new ir("/favorites.json",a.status);return a.json()}}Or=new WeakMap;class nw extends za{buildMeta(t){const{id:e,file:a,tags:n,description:o,created_at:i,rating:s,sources:l,score:c,is_favorited:d}=t,{ext:u,url:g,md5:p}=a;if(!g)throw new Error(`Url can not be null: Post ${e}`);const b=[];for(const[w,y]of Object.entries(n))y.forEach(_=>b.push(`${w}:${_}`));return{id:String(e),src:g,extendName:u,artist:("artist"in n?n.artist:n.director).join(",")||this.UNKNOWN_ARTIST,character:n.character.join(",")||this.UNKNOWN_CHARACTER,title:p,comment:o,tags:b,createDate:i,score:c.total,source:l.join(`
`),rating:s,isFavorited:d}}parseCsrfToken(){var t;return(t=document.head.querySelector('meta[name="csrf-token"]'))==null?void 0:t.content}parseCurrentUserId(){var t;return(t=document.head.querySelector('meta[name="current-user-id"]'))==null?void 0:t.content}}class ow extends ha{constructor(){we.version===null&&(It.setDirectoryTemplate(Ut.folderPattern??"e621/{artist}"),It.setFilenameTemplate(Ut.filenamePattern??"{id}_{artist}_{character}"),Pt.addBookmark??(Pt.addBookmark=!1),We.$update(t=>({...t,apiKey:"",username:""}))),super(),Tt(this,er),V(this,"api",new aw({rateLimit:2,authorization:[We.username??"",We.apiKey??""]})),V(this,"parser",new nw),V(this,"profile",null),V(this,"useBatchDownload",this.app.initBatchDownloader({avatar:"/packs/static/main-logo-2653c015c5870ec4ff08.svg",parseMetaByArtworkId:async t=>{const{post:e}=await this.api.getPost(+t);return this.parser.buildMeta(e)},downloadArtworkByMeta:async(t,e)=>{const a=new pr(t).create({...It});await Ue.download(a,{priority:1,signal:e});const{tags:n,artist:o,title:i,comment:s,source:l,rating:c}=t;se.add({pid:Number(t.id),user:o,title:i,comment:s,tags:n,source:l,rating:c})},beforeDownload:async()=>{j(this,er,Xi).call(this);const t=this.parser.parseCurrentUserId();if(!t)throw new Error("Cannot get user id.");this.profile=await this.api.getCurrentUserProfile(+t)},afterDownload:()=>{this.profile=null},filterOption:{filters:[{id:"exclude_downloaded",type:"exclude",name:()=>N("downloader.category.filter.exclude_downloaded"),checked:!1,fn(t){return!!t.id&&se.has(t.id)}},{id:"allow_image",type:"include",name:()=>N("downloader.category.filter.image"),checked:!0,fn(t){return!!t.extendName&&/bmp|jp(e)?g|png|tif|gif|exif|svg|webp/i.test(t.extendName)}},{id:"allow_video",type:"include",name:()=>N("downloader.category.filter.video"),checked:!0,fn(t){return!!t.extendName&&/mp4|avi|mov|mkv|flv|wmv|webm|mpeg|mpg|m4v/i.test(t.extendName)}}],enableTagFilter:!0},pageOption:{pool:{name:"Pool",match:()=>j(this,er,Ll).call(this),filterInGenerator:!0,fn:(t,e)=>{var a;const n=(a=new RegExp("(?<=\\/pools\\/)[0-9]+").exec(location.pathname))==null?void 0:a[0];if(!n)throw new Error("Invalid pool id");const o=this.profile.per_page,i=async s=>{const l=(await this.api.getPosts({limit:o,page:s,tags:`pool:${n} order:id`})).posts;return{lastPage:l.length<o,data:l}};return this.parser.paginationGenerator(t,i,s=>this.parser.buildMeta(s),j(this,er,Kn).call(this,e))}},post_list:{name:"Posts",match:()=>j(this,er,zl).call(this),filterInGenerator:!0,fn:(t,e)=>{const a=new URLSearchParams(new URL(location.href).search),n=a.get("tags")||"",o=+(a.get("limit")||this.profile.per_page),i=async s=>{const l=(await this.api.getPosts({limit:o,page:s,tags:n})).posts;return{lastPage:l.length<o,data:l}};return this.parser.paginationGenerator(t,i,s=>this.parser.buildMeta(s),j(this,er,Kn).call(this,e))}},favorites:{name:"Favorites",match:()=>j(this,er,jl).call(this),filterInGenerator:!0,fn:(t,e)=>{const a=new URLSearchParams(new URL(location.href).search),n=+(a.get("limit")||this.profile.per_page),o=+(a.get("user_id")||this.profile.id);if(!o)throw new Error("Cannot get user id.");const i=async s=>{const l=(await this.api.getFavorites({limit:n,page:s,user_id:o})).posts;return{lastPage:l.length<n,data:l}};return this.parser.paginationGenerator(t,i,s=>this.parser.buildMeta(s),j(this,er,Kn).call(this,e))}},pool_gallery_button:{name:"pool_gallery_button",match:()=>!1,filterInGenerator:!0,fn:(t,e,a)=>{if(!a)throw new Error("Invalid pool id");const n=async o=>{const i=this.profile.per_page,s=(await this.api.getPosts({limit:i,page:o,tags:`pool:${a}`})).posts;return{lastPage:s.length<i,data:s}};return this.parser.paginationGenerator(t,n,o=>this.parser.buildMeta(o),j(this,er,Kn).call(this,e))}},show_downloader_in_pool_gallery:{name:"pool_gallery",match:/\/pools\/gallery/}}})),rn(()=>[We.username,We.apiKey]).subscribe(([t,e])=>{this.api.username=t,this.api.apiKey=e})}static get hostname(){return["e621.net","e926.net","e6ai.net"]}getSupportedTemplate(){return pr.supportedTemplate}async downloadArtwork(t){j(this,er,Xi).call(this);const e=+t.dataset.id,{post:a}=await this.api.getPost(e),n=this.parser.buildMeta(a),o=new pr(n).create({...It,setProgress:g=>{t.setProgress(g)}});Pt.addBookmark&&!a.is_favorited&&j(this,er,Ul).call(this,e),await Ue.download(o,{priority:1});const{tags:i,artist:s,title:l,comment:c,source:d,rating:u}=n;se.add({pid:e,user:s,title:l,comment:c,tags:i,source:d,rating:u})}createArtworkBtn(){const t=document.querySelector("#image-container");if(!t)return;t.style.width="fit-content",t.style.position="relative";const e=t.dataset.id;t.appendChild(new or({id:e,site:t.querySelector("video")?"native_video":void 0,onClick:this.downloadArtwork}))}createPoolThumbnailBtn(){const t=document.querySelectorAll("article.thumbnail > a");t.length&&t.forEach(e=>{var a;const n=(a=new RegExp("(?<=\\/pools\\/)[0-9]+").exec(e.href))==null?void 0:a[0];if(!n)return;const{downloading:o,batchDownload:i}=this.useBatchDownload(),s=c=>{const d=c.dataset.id;return i("pool_gallery_button",d)},l=new Mi({id:n,downloading:o,onClick:s});e.style.position="relative",e.appendChild(l)})}createThumbnailBtn(){const t=document.querySelectorAll("article.thumbnail > a");t.length&&t.forEach(e=>{var a;const n=(a=new RegExp("(?<=\\/posts\\/)[0-9]+").exec(e.href))==null?void 0:a[0];if(!n)return;e.style.position="relative";const o=new le({id:n,onClick:this.downloadArtwork});e.appendChild(o)})}inject(){super.inject(),this.downloadArtwork=this.downloadArtwork.bind(this),j(this,er,Fl).call(this)?this.createArtworkBtn():j(this,er,Nl).call(this)?this.createPoolThumbnailBtn():this.createThumbnailBtn()}}er=new WeakSet,Nl=function(){return location.pathname==="/pools/gallery"},Ll=function(){return/\/pools\/[0-9]+/.test(location.pathname)},Fl=function(){return/\/posts\/[0-9]+/.test(location.pathname)},jl=function(){return location.pathname==="/favorites"},zl=function(){return location.pathname==="/posts"},Hl=function(){return this.api.username&&this.api.apiKey},Xi=function(){if(!j(this,er,Hl).call(this)){const r="Please input your username and apiKey in setting.";throw this.toast({message:r,type:"error"}),new Error(r)}},Kn=function(r){return async t=>{const{id:e,file:a,tags:n}=t,o=[];for(const i of Object.values(n))i.forEach(s=>{o.push(s)});return await r({id:String(e),extendName:a.ext,tags:o})?br.VALID:br.INVALID}},Ul=async function(r){try{const t=this.parser.parseCsrfToken();if(!t)throw new Error("Cannot get csrf-token.");await this.api.addFavorites(r,t),this.toast({message:"You have favorited this post",timeout:2e3})}catch(t){Ct.error(t),this.toast({message:t.message,type:"error"})}};class iw extends za{constructor(){super(...arguments),Tt(this,ka)}buildMetaByView(t,e){var a,n,o,i;const[s,l]=(((a=e.querySelector('meta[property="og:title"]'))==null?void 0:a.content)??"").split(" | "),c=((n=e.querySelector("#illust_text p, #dojin_text p:not(.title), #view-honbun > p.m-bottom15:not(.gray)"))==null?void 0:n.textContent)??"",d=e.querySelector("#img_filter :is(img, video), p.image img, #gallery_new img#view_img").src,u=(i=(o=e.querySelector('a[href*="members_illust"]'))==null?void 0:o.href.match(new RegExp("(?<=id=)[0-9]+$")))==null?void 0:i[0];if(!s||!l||!d||!u)throw new Error("Can not parse necessary data");const g=d.match(new RegExp("(?<=\\.)[a-z0-9]{3,4}$","i"));if(!g)throw new Error("Can not parse ext.");const p=/[0-9:\- ]+$/.exec(e.querySelector("#view-honbun > p, #created").textContent),b=e.querySelector("#good_cnt").textContent??0,w=Array.from(e.querySelectorAll("[tag_id].tag .tag_name")).map(_=>_.textContent),y=!!e.querySelector('a[href*="bookmark_edit"]');return{id:t,userId:u,src:d,extendName:g[0],artist:l,title:s,tags:w,createDate:p[0],comment:c,score:+b,isBookmarked:y}}parseDiffSrcByDoc(t){return Array.from(t.querySelectorAll('#img_filter :is(img[src*="pic.nijie.net"], video)')).map(e=>{const a=e.src,n=a.match(new RegExp("(?<=\\.)[a-z0-9]{3,4}$","i"));if(!n)throw new Error("Can not parse ext.");return{src:a,extendName:n[0]}})}mergeImageDiff(t,e){const a=[],n=[];for(const o of e)a.push(o.src),n.push(o.extendName);return{...t,src:a,extendName:n}}parseUserPageArtworkIdByDoc(t){const e=t.querySelectorAll('.mem-index .nijiedao > a[href^="/view.php?id="]');return j(this,ka,qa).call(this,Array.from(e))}parseUserFeedArtworkIdByDoc(t){const e=t.querySelectorAll('#main-left-main [illust_id] .picture > a[href^="/view.php?id="]');return j(this,ka,qa).call(this,Array.from(e))}parseHistoryIllustArtworkIdByDoc(t){const e=t.querySelectorAll('.history_block > .picture > a[href*="id="]:has(img)');return j(this,ka,qa).call(this,Array.from(e))}parseHistoryNuitaArtworkIdByDoc(t){const e=t.querySelectorAll('#center_column div[illust_id].illust_list .picture a[href*="id="]:has(img)');return j(this,ka,qa).call(this,Array.from(e))}parseOkiniiriArtworkIdByDoc(t){const e=t.querySelectorAll('#content_delete .picture a[href*="id="]:has(img)');return j(this,ka,qa).call(this,Array.from(e))}parseSearchArtworkIdByDoc(t){const e=t.querySelectorAll('#main-left-main [illust_id] .picture a[href*="id="]:has(img)');return j(this,ka,qa).call(this,Array.from(e))}docHasDiff(t){return!!t.querySelector('a[href*="#diff_"]')}docIsDojin(t){return!!t.querySelector("#dojin_left")}docHasNextPagination(t){return!!t.querySelector('.page_button > a[rel="next"]')}}ka=new WeakSet,qa=function(r){return r.length?r.map(t=>new RegExp("(?<=id=)[0-9]+$").exec(t.href)[0]):[]};class sw extends ga{getViewDoc(t){return this.getDoc(`/view.php?id=${t}`)}getViewPopupDoc(t){return this.getDoc(`/view_popup.php?id=${t}`)}getUserIllustsDoc(t,e){return this.getDoc(`/members_illust.php?id=${t}&p=${e}`)}getUserDojinDoc(t){return this.getDoc(`/members_dojin.php?id=${t}`)}getUserBookmarkDoc(t,e){return this.getDoc(`/user_like_illust_view.php?p=${e}&id=${t}`)}getUserFeedDoc(t){return this.getDoc(`/like_user_view.php?p=${t}`)}getHistoryIllustDoc(){return this.getDoc("/history_illust.php")}getHistoryNuitaDoc(){return this.getDoc("/history_nuita.php")}getOkiniiriDoc(t,e,a){return this.getDoc(`/okiniiri.php?p=${e}&id=${t}&sort=${a}`)}getIllustSearchDoc(t){const{mode:e=0,type:a="partial",sort:n=0,illustType:o=0,period:i=0,userId:s="0",word:l,page:c}=t,d=new URLSearchParams;return d.append("mode",String(e)),d.append("type",String(a)),d.append("sort",String(n)),d.append("illust_type",String(o)),d.append("period",String(i)),d.append("user_id",s),d.append("word",l),d.append("p",String(c)),this.getDoc(`/search.php?${d.toString()}`)}async addBookmark(t,e){const a=new URLSearchParams;a.append("id",t),a.append("tag",e?.join(" ")??"");const n="/bookmark_add.php",o=await this.fetch(n,{method:"POST",redirect:"manual",body:a});if(o.type!=="opaqueredirect")throw new ir(n,o.status)}}class Ha extends eu{constructor(t){super(t),V(this,"userId"),V(this,"comment"),V(this,"score"),this.userId=t.userId,this.comment=t.comment,this.score=t.score}static get supportedTemplate(){return{[pe.ID]:"{id}",[pe.ARTIST]:"{artist}",[pe.ARTISTID]:"{artistID}",[pe.DATE]:"{date} {date(YYYY-MM-DD)}",[pe.PAGE]:"{page}",[pe.SCORE]:"{score}: likeCount",[pe.TAGS]:"{tags}",[pe.TITLE]:"{title}"}}getZipComment(){return this.comment}getTemplateData(t){return{id:this.id,artist:this.normalizeString(this.artist)||this.userId,artistID:this.userId,date:this.createDate,score:String(this.score),title:this.normalizeString(this.title)||this.id,tags:this.tags.join("_"),...t}}create(t){const{filenameTemplate:e,directoryTemplate:a,setProgress:n,useFileSystemAccessApi:o,filenameConflictAction:i}=t,s="index"in t?t.index:0;return{taskId:this.getTaskId(),src:this.getSrc(s),path:this.getSavePath(a,e,this.getExt(s),this.getTemplateData({page:String(s)})),timeout:this.getDownloadTimeout(s),onProgress:n,useFileSystemAccessApi:o,filenameConflictAction:i}}createMulti(t){if(!this.isStringArray(this.src))throw new Error(`Artwork ${this.id} only have one media.`);const{filenameTemplate:e,directoryTemplate:a,setProgress:n,useFileSystemAccessApi:o,filenameConflictAction:i}=t,s=this.getTaskId(),l=n?this.getMultipleMediaDownloadCB(n):void 0;return this.src.map((c,d)=>({taskId:s,src:c,path:this.getSavePath(a,e,this.getExt(d),this.getTemplateData({page:String(d)})),timeout:this.getDownloadTimeout(),onFileSaved:l,useFileSystemAccessApi:o,filenameConflictAction:i}))}createBundle(t){if(!this.isStringArray(this.src)||!this.isStringArray(this.ext))throw new Error(`Artwork ${this.id} only have one media.`);const{filenameTemplate:e,directoryTemplate:a,setProgress:n,useFileSystemAccessApi:o,filenameConflictAction:i}=t,s=this.getTaskId(),l=n?this.getMultipleMediaDownloadCB(n):void 0,c=this.getSavePath(a,e,"zip",this.getTemplateData({page:String(this.src.length)})),d=e.includes(`{${pe.PAGE}}`)?e:e+`_{${pe.PAGE}}`,u=this.src.map((g,p)=>this.getSavePath("",d,this.getExt(p),this.getTemplateData({page:String(p)})));return this.src.map((g,p)=>({taskId:s,src:g,path:c,timeout:this.getDownloadTimeout(p),onXhrLoaded:l,beforeFileSave:this.handleBundleFactory(u),onError:this.handleBundleErrorFactory(),onAbort:this.handleBundleAbortFactory(),useFileSystemAccessApi:o,filenameConflictAction:i}))}}class lw extends ha{constructor(){we.version===null&&(It.setDirectoryTemplate(Ut.folderPattern??"nijie/{artist}"),It.setFilenameTemplate(Ut.filenamePattern??"{artist}_{title}_{id}_p{page}"),Pt.$update(t=>({...t,compressMultiIllusts:Ut.bundleIllusts??!1,addBookmark:t.addBookmark??!1,bookmarkWithTags:t.bookmarkWithTags??!1}))),we.setThemeWatcher({get current(){return!!document.querySelector('link[type="text/css"][href*="night_mode"]')}}),super(),Tt(this,Ae),V(this,"parser",new iw),V(this,"api",new sw({rateLimit:3})),Tt(this,kr,new URLSearchParams(location.search)),V(this,"useBatchDownload",this.app.initBatchDownloader({avatar:()=>{const t=document.querySelector('a[href*="members.php"].name img');return t?t.src:"/pic/icon/nijie.png"},parseMetaByArtworkId:async t=>{const e=await this.api.getViewDoc(t),a=this.parser.buildMetaByView(t,e);if(this.parser.docHasDiff(e)){const n=await this.api.getViewPopupDoc(t),o=this.parser.parseDiffSrcByDoc(n);return this.parser.mergeImageDiff(a,o)}return a},downloadArtworkByMeta:async(t,e)=>{let a;const n={...It},o=Pt.compressMultiIllusts;Array.isArray(t.src)?a=o?new Ha(t).createBundle(n):new Ha(t).createMulti(n):a=new Ha(t).create(n),await Ue.download(a,{signal:e});const{id:i,artist:s,userId:l,title:c,comment:d,tags:u}=t,g={pid:Number(i),user:s,userId:Number(l),title:c,comment:d,tags:u};se.add(g)},filterOption:{filters:[{id:"exclude_downloaded",type:"exclude",name:()=>N("downloader.category.filter.exclude_downloaded"),checked:!1,fn(t){return!!t.id&&se.has(t.id)}},{id:"allow_image",type:"include",name:()=>N("downloader.category.filter.image"),checked:!0,fn(t){return t.extendName===void 0?!1:Array.isArray(t.extendName)?t.extendName.some(e=>ce.imageExt.test(e)):ce.imageExt.test(t.extendName)}},{id:"allow_video",type:"include",name:()=>N("downloader.category.filter.video"),checked:!0,fn(t){return t.extendName===void 0?!1:Array.isArray(t.extendName)?t.extendName.some(e=>ce.videoExt.test(e)):ce.videoExt.test(t.extendName)}}],enableTagFilter:!0},pageOption:{illusts:{name:"\u6295\u7A3F\u30A4\u30E9\u30B9\u30C8",match:t=>j(this,Ae,Wo).call(this,t),filterInGenerator:!1,fn:t=>{const e=j(this,Ae,Er).call(this);if(!e)throw new Error("Invalid user ID.");const a=async n=>{const o=await this.api.getUserIllustsDoc(e,n);return{lastPage:!this.parser.docHasNextPagination(o),data:this.parser.parseUserPageArtworkIdByDoc(o)}};return this.parser.paginationGenerator(t,a,n=>n)}},dojin:{name:"\u540C\u4EBA",match:t=>j(this,Ae,Wo).call(this,t),filterInGenerator:!1,fn:()=>{const t=j(this,Ae,Er).call(this);if(!t)throw new Error("Invalid user ID.");return this.parser.paginationGenerator([1,1],async()=>{const e=await this.api.getUserDojinDoc(t);return{lastPage:!0,data:this.parser.parseUserPageArtworkIdByDoc(e)}},e=>e)}},bookmark:{name:"\u30D6\u30C3\u30AF\u30DE\u30FC\u30AF",match:t=>j(this,Ae,Wo).call(this,t),filterInGenerator:!1,fn:t=>{const e=j(this,Ae,Er).call(this);if(!e)throw new Error("Invalid user ID.");return this.parser.paginationGenerator(t,async a=>{const n=await this.api.getUserBookmarkDoc(e,a);return{lastPage:!this.parser.docHasNextPagination(n),data:this.parser.parseUserPageArtworkIdByDoc(n)}},a=>a)}},feed:{name:"\u65B0\u77402\u6B21\u7D75",match:/like_user_view\.php/,filterInGenerator:!1,fn:t=>this.parser.paginationGenerator(t,async e=>{const a=await this.api.getUserFeedDoc(e);return{lastPage:!this.parser.docHasNextPagination(a),data:this.parser.parseUserFeedArtworkIdByDoc(a)}},e=>e)},nuita:{name:"\u629C\u3044\u305F",match:t=>j(this,Ae,Zi).call(this,t),filterInGenerator:!1,fn:()=>this.parser.paginationGenerator([1,1],async()=>{const t=await this.api.getHistoryNuitaDoc();return{lastPage:!0,data:this.parser.parseHistoryNuitaArtworkIdByDoc(t)}},t=>t)},history:{name:"\u95B2\u89A7",match:t=>j(this,Ae,Zi).call(this,t),filterInGenerator:!1,fn:()=>this.parser.paginationGenerator([1,1],async()=>{const t=await this.api.getHistoryIllustDoc();return{lastPage:!0,data:this.parser.parseHistoryIllustArtworkIdByDoc(t)}},t=>t)},okiniiri:{name:"\u304A\u6C17\u306B\u5165\u308A",match:/okiniiri\.php/,filterInGenerator:!1,fn:t=>{const e=D(this,kr).get("id")??"0",a=D(this,kr).get("sort")??"0";if(a!=="0"&&a!=="1")throw new RangeError('Invalid sort params, must be "0" or "1"');return this.parser.paginationGenerator(t,async n=>{const o=await this.api.getOkiniiriDoc(e,String(n),a);return{lastPage:!this.parser.docHasNextPagination(o),data:this.parser.parseOkiniiriArtworkIdByDoc(o)}},n=>n)}},userIllustTagSearch:{name:"\u30A4\u30E9\u30B9\u30C8\u691C\u7D22",match:/search\.php.+user_id=[0-9]+/,filterInGenerator:!1,fn:t=>{const e=Number(D(this,kr).get("mode")),a=D(this,kr).get("type")||void 0,n=Number(D(this,kr).get("sort")),o=Number(D(this,kr).get("illust_type")),i=Number(D(this,kr).get("p")),s=D(this,kr).get("user_id"),l=D(this,kr).get("word")??"";if(!s)throw new Error("User id is required.");return this.parser.paginationGenerator(t,async c=>{const d=await this.api.getIllustSearchDoc({mode:e,type:a,sort:n,illustType:o,period:i,userId:s,word:l,page:c});return{lastPage:!this.parser.docHasNextPagination(d),data:this.parser.parseSearchArtworkIdByDoc(d)}},c=>c)}}}}))}static get hostname(){return"nijie.info"}getSupportedTemplate(){return Ha.supportedTemplate}async downloadArtwork(t){const{id:e,page:a}=t.dataset;let n,o;j(this,Ae,Uo).call(this)&&e===j(this,Ae,Er).call(this)?n=document:n=await this.api.getViewDoc(e);const i=this.parser.buildMetaByView(e,n),{userId:s,comment:l,tags:c,artist:d,title:u,isBookmarked:g}=i;!g&&Pt.addBookmark&&j(this,Ae,Wl).call(this,e,Pt.bookmarkWithTags?c:void 0);const p={...It,setProgress:_=>{t.setProgress(_)}},b=a?+a:void 0;let w;if(b===0||!this.parser.docHasDiff(n))w=new Ha(i).create(p);else{j(this,Ae,qo).call(this)&&e===j(this,Ae,Er).call(this)?o=document:o=await this.api.getViewPopupDoc(e);const _=this.parser.parseDiffSrcByDoc(o),k=this.parser.mergeImageDiff(i,_);b?w=new Ha(k).create({...p,index:b}):w=Pt.compressMultiIllusts?new Ha(k).createBundle(p):new Ha(k).createMulti(p)}await Ue.download(w,{priority:1});const y={pid:Number(e),user:d,userId:Number(s),title:u,comment:l,tags:c};a!==void 0&&(y.page=Number(a)),se.add(y)}createThumbnailBtn(){const t={thumbnails:{selector:"p.nijiedao:has(> img.ngtag)",setStyle:void 0,diff:void 0},memberAndHotImage:{selector:"p.nijiedao > a:has(img.ngtag)",setStyle:e=>{e.style.display="inline-block"},diff:void 0},imgDiff:{selector:'a[href*="#diff_"]:has(img.ngtag:not([data-original]))',setStyle:e=>{const a=e.querySelector("img"),n=getComputedStyle(a).margin;a.style.margin="0px",e.style.display="inline-block",e.style.margin=n},diff:e=>{var a;return(a=new RegExp("(?<=#diff_)[0-9]+$").exec(e.href))==null?void 0:a[0]}},dojinDiff:{selector:'a[href*="#diff_"]:has(img[data-original].ngtag)',setStyle:e=>{const a=e.querySelector("img");a.style.width="auto",e.style.display="inline-block"},diff:e=>{var a;return(a=new RegExp("(?<=#diff_)[0-9]+$").exec(e.href))==null?void 0:a[0]}},otherDojin:{selector:'a[href*="id="]:has(>.other_dojin_block)',setStyle:e=>{e.style.display="block"},diff:void 0},similar:{selector:"#nuitahito li:has(img.ngtag)",setStyle:void 0,diff:void 0},rank:{selector:"p.illust:has(> img.ngtag)",setStyle:e=>{const a=e.previousElementSibling;a&&(a.style.zIndex="1")},diff:void 0},dictionary:{selector:'a[href*="id="]:has(> :is(img.tagsimage, img.mozamoza:not([illust_id])))',setStyle:e=>{const a=e.querySelector("img"),n=getComputedStyle(a).width;e.style.width=n,a.style.width="100%",e.style.display="inline-block"},diff:void 0},responseOdai:{selector:'#response_odai li a[href*="id="]:has(img)',setStyle:e=>{e.style.display="inline-block"},diff:void 0},historyIllust:{selector:'.history_block > .picture > a[href*="id="]:has(img)',setStyle:e=>{e.style.display="inline-block"},diff:void 0}};for(const{selector:e,setStyle:a,diff:n}of Object.values(t)){const o=document.querySelectorAll(e);o.length&&o.forEach(i=>{if(i.querySelector(le.tagNameLowerCase))return;let s;i instanceof HTMLAnchorElement?s=new RegExp("(?<=id=)[0-9]+").exec(i.href)[0]:s=i.querySelector("img.ngtag").getAttribute("illust_id");const l=n?.(i);a?.(i),i.style.position="relative",i.appendChild(new le({id:s,page:l?+l:void 0,onClick:this.downloadArtwork}))})}}createIllustSettingBtn(){const t=j(this,Ae,Er).call(this),e=document.querySelector("#illust_setting");!t||!e||e.appendChild(new le({id:t,type:Qe.NijieIllust,onClick:this.downloadArtwork}))}createImgFilterBtn(){const t=j(this,Ae,Er).call(this),e=document.querySelectorAll("#img_filter");!t||!e.length||e.length===1&&(e[0].dataset.index||!document.querySelector('#img_diff > a[href*="diff_"]'))||e.forEach((a,n)=>{const o=a.querySelector('img[src*="pic.nijie.net"], video');if(!o)return;const{marginBottom:i}=getComputedStyle(o);a.style.marginBottom=i,o.style.marginBottom="0px";const s=a.querySelector("img.filter");s&&(s.style.zIndex="auto"),a.appendChild(new or({id:t,page:n,site:"nijie",onClick:this.downloadArtwork}))})}createDojinHeaderBtn(){const t=document.querySelector("#dojin_header > .right > ul"),e=j(this,Ae,Er).call(this);!t||!e||t.appendChild(new le({id:e,type:Qe.NijieIllust,onClick:this.downloadArtwork}))}createDojinCoverBtn(){const t=document.querySelector('#dojin_left .image > a[href*="view_popup"]'),e=j(this,Ae,Er).call(this);!t||!e||(t.style.display="inline-block",t.style.position="relative",t.style.width="fit-content",t.appendChild(new or({id:e,page:0,onClick:this.downloadArtwork})))}createOdaiBtn(){const t=j(this,Ae,Er).call(this),e=document.querySelector("#gallery_new > p > a:has(img#view_img)");if(!t||!e)return;const a=e.querySelector("img:not(.filter)"),{marginBottom:n}=getComputedStyle(a);a.style.marginBottom="0px",e.style.marginBottom=n,e.style.display="inline-block",e.style.position="relative",e.appendChild(new or({id:t,page:0,onClick:this.downloadArtwork}))}observeOzakuListChange(){const t=document.querySelector("#okazu_list");if(!t)return;new MutationObserver(()=>this.createThumbnailBtn()).observe(t,{subtree:!0,childList:!0})}inject(){super.inject(),this.downloadArtwork=this.downloadArtwork.bind(this),this.createThumbnailBtn(),j(this,Ae,Uo).call(this)?(this.createIllustSettingBtn(),this.createImgFilterBtn(),this.createDojinHeaderBtn(),this.createDojinCoverBtn(),this.createOdaiBtn()):j(this,Ae,qo).call(this)?(this.createIllustSettingBtn(),this.createImgFilterBtn()):j(this,Ae,ql).call(this)&&this.observeOzakuListChange()}}kr=new WeakMap,Ae=new WeakSet,Uo=function(){return location.pathname==="/view.php"},qo=function(){return location.pathname==="/view_popup.php"},ql=function(){return location.pathname==="/okazu.php"},Wo=function(r){return/members\.php|members_illust\.php|members_dojin\.php|user_like_illust_view\.php/.test(r)},Zi=function(r){return/history_nuita\.php|history_illust\.php/.test(r)},Er=function(){return D(this,kr).get("id")},Wl=async function(r,t){var e;try{if(await this.api.addBookmark(r,t),(j(this,Ae,Uo).call(this)||j(this,Ae,qo).call(this))&&j(this,Ae,Er).call(this)===r){const a=document.querySelector("a#bukuma-do");if(!a)return;a.id="bukuma",a.setAttribute("href",a.getAttribute("href").replace("bookmark.php","bookmark_edit.php")),(e=a.lastChild)==null||e.remove();const n=document.createElement("span");n.textContent="\u30D6\u30C3\u30AF\u30DE\u30FC\u30AF\u7DE8\u96C6",a.appendChild(n)}}catch(a){Ct.error(a)}};class cl extends pr{static get supportedTemplate(){return{[pe.ID]:"{id}",[pe.ARTIST]:"{artist}",[pe.CHARACTER]:"{character}",[pe.DATE]:"{date}, {date(YYYY-MM-DD)}",[pe.SCORE]:"{score}"}}getTemplateData(){return{id:this.id,artist:this.artist,character:this.character,date:this.createDate,score:String(this.score)}}create(t){return super.create({...t,cfClearance:void 0})}}var Fi=(r=>(r[r.JPG=0]="JPG",r[r.MP4=1]="MP4",r))(Fi||{}),ln=(r=>(r[r.GENERAL=1]="GENERAL",r[r.COPYRIGHT=2]="COPYRIGHT",r[r.CHARACTER=4]="CHARACTER",r[r.ARTIST=8]="ARTIST",r))(ln||{}),ji=(r=>(r[r.LATEST=0]="LATEST",r[r.TOP_RATED=1]="TOP_RATED",r[r.MOST_VIEWED=2]="MOST_VIEWED",r))(ji||{});class cw extends ga{constructor(){super(...arguments),Tt(this,hn)}getPostData(t){return this.getJSON(`/api/v2/post/${t}`)}getUserProfile(t){return this.getJSON(`/api/v2/account/user/${t}`)}searchPlaylist(t,e,a){return j(this,hn,Xn).call(this,`/api/v2/post/search/playlist/${t}`,e,a)}searchTags(t,e){return j(this,hn,Xn).call(this,"/api/v2/post/search/root",t,e)}searchUserBookmark(t,e,a){return j(this,hn,Xn).call(this,`/api/v2/post/search/bookmarked/${t}`,e,a)}searchUserSubscriptions(t,e,a){return j(this,hn,Xn).call(this,`/api/v2/post/search/tag-subscriptions/${t}`,{...e,sortBy:0},a)}addBookmark(t,e){return this.getJSON("/api/v2/post/action/bookmark",{method:"POST",headers:{"content-type":"application/json; charset=utf-8",authorization:`Bearer ${e}`},body:`{"postId":${t}}`})}}hn=new WeakSet,Xn=function(r,t,e){return this.getJSON(r,{method:"POST",headers:{"content-type":"application/json; charset=utf-8",...e?{authorization:`Bearer ${e}`}:{}},body:JSON.stringify(t)})};class dw extends za{constructor(){super(...arguments),Tt(this,ts,{[ln.GENERAL]:"general",[ln.COPYRIGHT]:"copyright",[ln.CHARACTER]:"character",[ln.ARTIST]:"artist"})}buildMeta(t){const{id:e,type:a,data:n,posted:o,likes:i=0,tags:s}=t,l=[],c=[],d=[],u=[];for(const{value:b,type:w}of s){l.push(b);const y=b.replaceAll(" ","_");c.push(`${D(this,ts)[w]}:${y}`),w===ln.ARTIST?d.push(y):w===ln.CHARACTER&&u.push(y)}const g=a===Fi.JPG?"jpg":"mp4",p=`https://r34xyz.b-cdn.net/posts/${e/1e3|0}/${e}/${e}.${g}`;return{id:String(e),src:p,extendName:g,artist:d.join(",")||this.UNKNOWN_ARTIST,character:u.join(",")||this.UNKNOWN_CHARACTER,tags:l,tagsToStore:c,score:i,source:n.sources?n.sources.join(`
`):"",createDate:o,title:""}}getCurrentUserToken(){return localStorage.getItem("token")||void 0}getCurrentUserProfile(){const t=localStorage.getItem("user");return t?JSON.parse(t):void 0}}ts=new WeakMap;class uw extends ha{constructor(){we.version===null&&(It.setDirectoryTemplate("Rule34Vault/{artist}"),It.setFilenameTemplate("{id}_{artist}_{character}"),Vt.$update(t=>({...t,thumbnailBtnUnitY:Na.PX,"--pdl-btn-left-percent":100,"--pdl-btn-top-px":40})),Pt.addBookmark??(Pt.addBookmark=!1)),super(),Tt(this,Pr),V(this,"api",new cw),V(this,"parser",new dw),V(this,"pageType",["app-home-page","app-post-page","app-highest-posts-page","app-hot-posts-page","app-playlists-page","app-playlist-page","app-comments-page","app-upgrade-to-premium-page","app-user-page","app-feed-page","app-sign-in-page","app-sign-up-page"]),Tt(this,Wa),Tt(this,gn),V(this,"useBatchDownload",this.app.initBatchDownloader({avatar:async t=>{try{let e;/\/playlists\/view\/[0-9]+/.test(t)?e=await ip("app-playlist-page-content app-user-avatar div.img"):e=document.body.querySelector("mat-sidenav app-user-avatar div.img");const a=e.getAttribute("style");return new RegExp('(?<=url\\(").+(?="\\))').exec(a)[0]}catch{return"/assets/icons/icon-512x512.png"}},parseMetaByArtworkId:async t=>{const e=await this.api.getPostData(t);return this.parser.buildMeta(e)},downloadArtworkByMeta:async(t,e)=>{const a=new cl(t).create({...It});await Ue.download(a,{signal:e});const{id:n,tagsToStore:o,artist:i,title:s,source:l}=t;se.add({pid:Number(n),user:i,title:s,tags:o,source:l})},filterOption:{filters:[{id:"exclude_downloaded",type:"exclude",name:()=>N("downloader.category.filter.exclude_downloaded"),checked:!1,fn(t){return!!t.id&&se.has(t.id)}},{id:"allow_image",type:"include",name:()=>N("downloader.category.filter.image"),checked:!0,fn(t){return!!t.extendName&&ce.imageExt.test(t.extendName)}},{id:"allow_video",type:"include",name:()=>N("downloader.category.filter.video"),checked:!0,fn(t){return!!t.extendName&&ce.videoExt.test(t.extendName)}}],enableTagFilter:!0},pageOption:{playlist:{name:"Playlist",match:()=>D(this,Wa).current==="app-playlist-page",filterInGenerator:!1,fn:t=>{const e=new RegExp("(?<=\\/playlists\\/view\\/)[0-9]+").exec(location.pathname);if(!e)throw new Error("Cannot get playlist id.");const a=e[0],n=this.parser.getCurrentUserToken();let o;const i=async s=>{const d={checkHasMore:!0,countTotal:!1,skip:(s-1)*30,take:30};o&&(d.cursor=o);const{cursor:u,hasMore:g,items:p}=await this.api.searchPlaylist(a,d,n);return o=u,{lastPage:!g,data:p}};return this.parser.paginationGenerator(t,i,s=>String(s.id))}},tagSearch:{name:"All Posts",match:()=>D(this,Wa).current==="app-home-page",filterInGenerator:!1,fn:t=>{const{includeTags:e,sortBy:a,type:n}=j(this,Pr,Go).call(this),o=this.parser.getCurrentUserToken();let i;const s=async l=>{const d=(l-1)*30,u={includeTags:e,sortBy:a,checkHasMore:!0,countTotal:!0,skip:d,take:30};i&&(u.cursor=i),n!==void 0&&(u.type=n);const{cursor:g,hasMore:p,items:b}=await this.api.searchTags(u,o);return i=g,{lastPage:!p,data:b}};return this.parser.paginationGenerator(t,s,l=>String(l.id))}},bookmarkSearch:{name:"Bookmarks",match:()=>D(this,Wa).current==="app-home-page",filterInGenerator:!1,fn:t=>{var e;const a=this.parser.getCurrentUserToken(),n=(e=this.parser.getCurrentUserProfile())==null?void 0:e.id;if(!a||!n)throw new Error("Please sign in.");const{includeTags:o,sortBy:i,type:s}=j(this,Pr,Go).call(this);let l;const c=async d=>{const g=(d-1)*30,p={includeTags:o,sortBy:i,checkHasMore:!0,countTotal:!0,skip:g,take:30};l&&(p.cursor=l),s!==void 0&&(p.type=s);const{cursor:b,hasMore:w,items:y}=await this.api.searchUserBookmark(String(n),p,a);return l=b,{lastPage:!w,data:y}};return this.parser.paginationGenerator(t,c,d=>String(d.id))}},subscriptionSearch:{name:"Subscriptions",match:()=>D(this,Wa).current==="app-home-page",filterInGenerator:!1,fn:t=>{var e;const a=this.parser.getCurrentUserToken(),n=(e=this.parser.getCurrentUserProfile())==null?void 0:e.id;if(!a||!n)throw new Error("Please sign in.");const{includeTags:o,type:i}=j(this,Pr,Go).call(this);let s;const l=async c=>{const u=(c-1)*30,g={includeTags:o,checkHasMore:!0,countTotal:!0,skip:u,take:30};s&&(g.cursor=s),i!==void 0&&(g.type=i);const{cursor:p,hasMore:b,items:w}=await this.api.searchUserSubscriptions(String(n),g,a);return s=p,{lastPage:!b,data:w}};return this.parser.paginationGenerator(t,l,c=>String(c.id))}}}})),Zt(this,Wa,new Ks(()=>document.querySelector(this.pageType.join(",")).tagName.toLowerCase(),t=>(Zt(this,gn,t),()=>{Zt(this,gn,void 0)})))}static get hostname(){return"rule34vault.com"}getSupportedTemplate(){return cl.supportedTemplate}inject(){super.inject();const t=document.querySelector("app-root");t&&new MutationObserver(e=>{const a=le.tagNameLowerCase.toUpperCase(),n=e.filter(i=>i.type==="childList"&&i.addedNodes.length).flatMap(i=>Array.from(i.addedNodes)).filter(i=>i.nodeType===Node.ELEMENT_NODE&&i.tagName!==a);if(!n.length)return;const o=i=>{var s;return((s=new RegExp("(?<=\\/post\\/)[0-9]+$").exec(i.getAttribute("href")))==null?void 0:s[0])??""};n.forEach(i=>{switch(!0){case i.matches('a[href^="/post/"].box'):{const s=o(i);if(!s)return;j(this,Pr,Yo).call(this,s,i.querySelector("div.box-inner"));break}case i.matches('a[href^="/post/"].masonry-item'):{const s=o(i);if(!s)return;j(this,Pr,Yo).call(this,s,i);break}case i.matches('div.post-con:has(a[href^="/post/"])'):{const s=i.querySelector('a[href^="/post/"]'),l=o(s);if(!l)return;j(this,Pr,Yo).call(this,l,i.querySelector("div.con"));break}case i.matches("app-post-page-content, app-tag-list"):{j(this,Pr,Yl).call(this);break}case i.matches(this.pageType.join(",")):{if(!D(this,gn))throw new TypeError("Type of #notifyPageChange is undefined.");D(this,gn).call(this);break}}})}).observe(t,{subtree:!0,childList:!0})}}Wa=new WeakMap,gn=new WeakMap,Pr=new WeakSet,Go=function(){const r=new URLSearchParams(location.search),t=r.get("sort"),e=r.get("type"),a=t==="likes"?ji.TOP_RATED:t==="views"?ji.MOST_VIEWED:ji.LATEST,n=e==="image"?Fi.JPG:e==="video"?Fi.MP4:void 0,o=location.pathname.slice(1);return{includeTags:o?decodeURIComponent(decodeURIComponent(o)).replaceAll("_"," ").split("|"):[],sortBy:a,type:n}},Gl=async function(r){try{const t=this.parser.getCurrentUserToken();if(!t)throw new Error("Token not found, please sign in");await this.api.addBookmark(r,t),this.toast({message:"You have favorited this post",timeout:2e3})}catch(t){Ct.error(t),this.toast({message:t.message,type:"error"})}},es=async function(r){const t=r.dataset.id,e=await this.api.getPostData(t),a=this.parser.buildMeta(e),n=new cl(a).create({...It,setProgress:c=>{r.setProgress(c)}});Pt.addBookmark&&j(this,Pr,Gl).call(this,t),await Ue.download(n,{priority:1});const{tagsToStore:o,artist:i,title:s,source:l}=a;se.add({pid:Number(t),user:i,title:s,tags:o,source:l})},Yl=function(){var r;const t=(r=new RegExp("(?<=\\/post\\/)[0-9]+").exec(location.pathname))==null?void 0:r[0];if(!t)return;const e=document.querySelector("app-post-actions div.con");if(!e)return;const a=e.querySelector(le.tagNameLowerCase);if(a)a.dataset.id=t;else{const n=document.createElement("div");n.setAttribute("style","margin-right: 8px;"),n.classList.add("chip"),n.appendChild(new le({id:t,type:Qe.Rule34VaultPostAction,onClick:o=>j(this,Pr,es).call(this,o)})),e.insertBefore(n,e.firstElementChild)}},Yo=function(r,t){t.querySelector(le.tagNameLowerCase)||t.appendChild(new le({id:r,onClick:e=>j(this,Pr,es).call(this,e)}))};class fw extends ga{getPostViewDoc(t){return this.getDoc(`/post/view/${t}`)}getPostListDoc(t,e){let a="/post/list/";return a+=e!==void 0?`${e}/${t}`:String(t),this.getDoc(a)}}class pw extends za{constructor(){super(...arguments),Tt(this,rs)}buildMetaByDoc(t,e){var a;const n=e.querySelector("#main_image");if(!n)throw new Error("Cannot find media element.");let o,i;if(n.tagName==="IMG"){const g=n.getAttribute("data-mime");if(!g)throw new Error("Cannot get mimetype.");i=g.split("/")[1],o=n.src}else{const g=n.querySelector("source");if(!g)throw new Error("Cannot get video source.");const p=g.getAttribute("type");if(!p)throw new Error("Cannot get mimetype.");i=p.split("/")[1],o=g.src}const s=o.slice(o.lastIndexOf("/")+1),l=Array.from(e.querySelectorAll('tr[data-row="Tags"] .tag')).map(g=>g.textContent.toLowerCase()),c=(a=e.querySelector('tr[data-row="Uploader"] time'))==null?void 0:a.dateTime;if(!c)throw new Error("Cannot get upload date.");const d=e.querySelector('tr[data-row="Source Link"] td a'),u=d?.href||"";return{id:t,src:o,extendName:i,artist:"",title:s,tags:l,createDate:c,source:u}}buildMetasByPostsListDoc(t){const e=t.querySelectorAll(".shm-image-list  .shm-thumb.thumb");return e.length?Array.from(e).map(a=>j(this,rs,Vl).call(this,a)):[]}docHasNextPage(t){return Array.from(t.querySelectorAll("#paginator a")).some(e=>e.textContent==="Next")}}rs=new WeakSet,Vl=function(r){const t=r.querySelector("img"),e=r.querySelector('a[href*="r34i.paheal-cdn.net"]');if(!t||!e)throw new Error("Cannot find image or flie link.");const a=e.href,n=a.slice(a.lastIndexOf("/")+1),{ext:o,tags:i,postId:s}=r.dataset,l=t.title.split(`
`),c=l[l.length-1];return{id:s,src:a,extendName:o,artist:"",title:n,tags:i.split(" "),createDate:c}};class dl extends rl{constructor(t){super(t)}static get supportedTemplate(){return{[pe.ID]:"{id}",[pe.DATE]:"{date}, {date(YYYY-MM-DD)}",[pe.TAGS]:"{tags}",[pe.MD5]:"{md5}"}}getTemplateData(){return{id:this.id,tags:this.tags.join(" "),date:this.createDate,md5:this.title}}create(t){const{filenameTemplate:e,filenameConflictAction:a,directoryTemplate:n,useFileSystemAccessApi:o,setProgress:i}=t;return{taskId:this.getTaskId(),src:this.getSrc(),path:this.getSavePath(n,e,this.getExt(),this.getTemplateData()),timeout:this.getDownloadTimeout(),onProgress:i,useFileSystemAccessApi:o,filenameConflictAction:a}}}class hw extends ha{constructor(){we.version===null&&It.setDirectoryTemplate("Rule34Paheal"),super(),Tt(this,Ea),Tt(this,Zn,new fw),Tt(this,Ga,new pw),V(this,"useBatchDownload",this.app.initBatchDownloader({avatar:"/favicon.ico",parseMetaByArtworkId:async t=>{const e=await D(this,Zn).getPostViewDoc(t);return D(this,Ga).buildMetaByDoc(t,e)},downloadArtworkByMeta:async(t,e)=>{const a=new dl(t).create({...It});await Ue.download(a,{signal:e});const{tags:n,title:o,source:i,id:s}=t;se.add({pid:Number(s),title:o,tags:n,source:i})},filterOption:{filters:[{id:"exclude_downloaded",type:"exclude",name:()=>N("downloader.category.filter.exclude_downloaded"),checked:!1,fn(t){return!!t.id&&se.has(t.id)}},{id:"allow_image",type:"include",name:()=>N("downloader.category.filter.image"),checked:!0,fn(t){return!!t.extendName&&ce.imageExt.test(t.extendName)}},{id:"allow_video",type:"include",name:()=>N("downloader.category.filter.video"),checked:!0,fn(t){return!!t.extendName&&ce.videoExt.test(t.extendName)}}],enableTagFilter:!0},pageOption:{posts:{name:"Posts",match:()=>j(this,Ea,$l).call(this),filterInGenerator:!0,fn:(t,e)=>{if(t&&t[0]>500)throw new Error("Only 500 pages of results are searchable");const a=location.pathname.slice(11),[n,o]=a.split("/");let i;o===void 0&&/^[0-9]+$/.test(n)?i=void 0:i=n===""?void 0:n;const s=async l=>{const c=await D(this,Zn).getPostListDoc(l,i);return{lastPage:!D(this,Ga).docHasNextPage(c),data:D(this,Ga).buildMetasByPostsListDoc(c)}};return D(this,Ga).paginationGenerator(t,s,l=>l.id,async l=>await e(l)?br.VALID:br.INVALID)}}}}))}static get hostname(){return"rule34.paheal.net"}getSupportedTemplate(){return dl.supportedTemplate}inject(){super.inject(),j(this,Ea,Jl).call(this)?j(this,Ea,Ql).call(this):j(this,Ea,Kl).call(this)}}Zn=new WeakMap,Ga=new WeakMap,Ea=new WeakSet,$l=function(){return location.pathname.startsWith("/post/list")},Jl=function(){return/\/post\/view\/[0-9]+/.test(location.pathname)},as=async function(r){const t=r.dataset.id,e=await D(this,Zn).getPostViewDoc(t),a=D(this,Ga).buildMetaByDoc(t,e),n=new dl(a).create({...It,setProgress:l=>{r.setProgress(l)}});await Ue.download(n,{priority:1});const{tags:o,title:i,source:s}=a;se.add({pid:Number(t),title:i,tags:o,source:s})},Ql=function(){const r=new RegExp("(?<=view\\/)[0-9]+").exec(location.pathname);if(!r)return;const t=r[0],e=document.querySelector(":is(#Imagemain, #Videomain) .blockbody"),a=document.querySelector("#main_image");if(!e||!a)throw new Error("Cannot find container or media.");const n=document.createElement("div");n.classList.add("pdl-wrapper"),n.appendChild(a),n.appendChild(new or({id:t,site:a.tagName==="VIDEO"?"native_video":void 0,onClick:i=>j(this,Ea,as).call(this,i)})),e.appendChild(n);const o=new CSSStyleSheet;o.replaceSync(".pdl-wrapper { position: relative; width: fit-content; margin: 0 auto; font-size: 0px; } #main_image { max-width: 100% !important; }"),document.adoptedStyleSheets=[...document.adoptedStyleSheets,o]},Kl=function(){const r=document.querySelectorAll(".shm-thumb.thumb");r.length&&r.forEach(t=>{const e=t.dataset.postId;if(!e)throw new Error("Cannot get post id.");const a=t.querySelector("a.shm-thumb-link");if(!a)throw new Error("Cannot find button container");a.setAttribute("style","display: inline-block; position: relative; font-size: 0px;"),a.appendChild(new le({id:e,onClick:n=>j(this,Ea,as).call(this,n)}))})};class gw extends ga{getPostViewDoc(t){return this.getDoc(`/index.php?r=posts/view&id=${t}`)}getPostListDoc(t,e="all"){return this.getDoc(`/index.php?r=posts/index&page=${t}&q=${e}`)}getFavoritesDoc(t,e){return this.getDoc(`/index.php?r=favorites/view&id=${t}&page=${e}`)}addBookmark(t){return this.fetch(`/index.php?r=favorites/create&id=${t}`)}}class vw extends za{constructor(){super(...arguments),Tt(this,Ya)}buildMetaByDoc(t,e){var a;const n=e.querySelector(".content_push > :is(video, img[width])");if(!n)throw new Error("Cannot find media element.");let o;if(n.tagName==="IMG")o=n.src;else{const _=n.querySelector("source");if(_)o=_.src;else{if(!n.src)throw new Error("Cannot get src of the video");o=n.src}}const[i,s]=o.slice(o.lastIndexOf("/")+1).split("."),l=e.querySelector("ul.tag-list-left"),c=j(this,Ya,vn).call(this,l,"ul > .artist-tag > a"),d=j(this,Ya,vn).call(this,l,"ul > .character-tag > a"),u=j(this,Ya,vn).call(this,l,"ul > .copyright-tag > a"),g=j(this,Ya,vn).call(this,l,"ul > .metadata-tag > a"),p=j(this,Ya,vn).call(this,l,"ul > .general-tag > a"),b=[...c,...d,...u,...g,...p],w=[...c.map(_=>"artist:"+_),...d.map(_=>"character:"+_),...u.map(_=>"copyright:"+_),...g.map(_=>"metadata:"+_),...p.map(_=>"general:"+_)],y=(a=l.querySelector('span[id^="psc"]'))==null?void 0:a.textContent;return{id:t,src:o,extendName:s,title:i,artist:c.join(",")||this.UNKNOWN_ARTIST,character:d.join(",")||this.UNKNOWN_CHARACTER,tags:b,tagsWithType:w,createDate:"",score:y?+y:0,source:""}}parsePostIdsByDoc(t){const e=t.querySelectorAll('a[href*="posts/view&id="]');return e.length?Array.from(e).map(a=>{const n=new RegExp("(?<=id=)[0-9]+$").exec(a.href);if(!n)throw new Error("Cannot match post id.");return n[0]}):[]}}Ya=new WeakSet,vn=function(r,t){return Array.from(r.querySelectorAll(t)).map(e=>e.textContent.replaceAll(" ","_"))};class ul extends pr{static get supportedTemplate(){return{[pe.ID]:"{id}",[pe.ARTIST]:"{artist}",[pe.CHARACTER]:"{character}",[pe.MD5]:"{md5}",[pe.SCORE]:"{score}"}}getTemplateData(){return{id:this.id,artist:this.artist,character:this.character,md5:this.title,title:this.title,score:String(this.score)}}}class mw extends ha{constructor(){we.version===null&&(It.setDirectoryTemplate("Rule34us/{artist}"),Pt.addBookmark??(Pt.addBookmark=!1)),super(),Tt(this,lr),Tt(this,mn,new gw),Tt(this,Pa,new vw),Tt(this,Va,new URLSearchParams(location.search)),V(this,"useBatchDownload",this.app.initBatchDownloader({avatar:"/v1/counter/7.gif",parseMetaByArtworkId:async t=>{const e=await D(this,mn).getPostViewDoc(t);return D(this,Pa).buildMetaByDoc(t,e)},downloadArtworkByMeta:async(t,e)=>{const a=new ul(t).create({...It});await Ue.download(a,{signal:e});const{tagsWithType:n,title:o,artist:i,id:s}=t;se.add({pid:Number(s),title:o,tags:n,user:i})},filterOption:{filters:[{id:"exclude_downloaded",type:"exclude",name:()=>N("downloader.category.filter.exclude_downloaded"),checked:!1,fn(t){return!!t.id&&se.has(t.id)}},{id:"allow_image",type:"include",name:()=>N("downloader.category.filter.image"),checked:!0,fn(t){return!!t.extendName&&ce.imageExt.test(t.extendName)}},{id:"allow_video",type:"include",name:()=>N("downloader.category.filter.video"),checked:!0,fn(t){return!!t.extendName&&ce.videoExt.test(t.extendName)}}],enableTagFilter:!0},pageOption:{posts:{name:"Posts",match:()=>j(this,lr,Xl).call(this),filterInGenerator:!1,fn:t=>{const e=j(this,lr,tc).call(this)||void 0;return D(this,Pa).paginationGenerator(t,async a=>{const o=await D(this,mn).getPostListDoc(a-1,e),i=D(this,Pa).parsePostIdsByDoc(o);return{lastPage:i.length<42,data:i}},a=>a)}},favorites:{name:"Favorites",match:()=>j(this,lr,ns).call(this),filterInGenerator:!1,fn:t=>{const e=j(this,lr,os).call(this);if(!e)throw new Error("Cannot get user id.");return D(this,Pa).paginationGenerator(t,async a=>{const o=await D(this,mn).getFavoritesDoc(e,a-1),i=D(this,Pa).parsePostIdsByDoc(o);return{lastPage:i.length<30,data:i}},a=>a)}}}}))}static get hostname(){return"rule34.us"}getSupportedTemplate(){return ul.supportedTemplate}inject(){super.inject(),j(this,lr,Zl).call(this)?j(this,lr,ac).call(this):j(this,lr,rc).call(this)}}mn=new WeakMap,Pa=new WeakMap,Va=new WeakMap,lr=new WeakSet,Xl=function(){return D(this,Va).get("r")==="posts/index"},Zl=function(){return D(this,Va).get("r")==="posts/view"},ns=function(){return D(this,Va).get("r")==="favorites/view"},tc=function(){return D(this,Va).get("q")},os=function(){return D(this,Va).get("id")},ec=function(r){ua.addFav(r)},is=async function(r){const t=r.dataset.id,e=await D(this,mn).getPostViewDoc(t),a=D(this,Pa).buildMetaByDoc(t,e),n=new ul(a).create({...It,setProgress:l=>{r.setProgress(l)}});Pt.addBookmark&&j(this,lr,ec).call(this,t),await Ue.download(n,{priority:1});const{tagsWithType:o,title:i,artist:s}=a;se.add({pid:Number(t),title:i,tags:o,user:s})},rc=function(){const r=document.querySelectorAll('a[href*="posts/view&id="]');if(!r.length)return;const t=!j(this,lr,ns).call(this);r.forEach(e=>{const a=new RegExp("(?<=id=)[0-9]+$").exec(e.href);if(!a)throw new Error("Cannot match post id.");const n=a[0];e.setAttribute("style","display: block; position: relative; height: inherit; font-size: 0px"),t&&(e.style.width="fit-content"),e.appendChild(new le({id:n,onClick:o=>j(this,lr,is).call(this,o)}))})},ac=function(){var r;const t=j(this,lr,os).call(this);if(!t)throw new Error("Cannot get post id.");const e=document.querySelector(".content_push > :is(video, img[width])");if(!e)throw new Error("Cannot find media element.");const a=document.createElement("div");a.setAttribute("style","position: relative; width: fit-content; margin: 0 auto; font-size: 0px"),(r=e.parentElement)==null||r.insertBefore(a,e),a.appendChild(e),a.appendChild(new or({id:t,site:e.tagName==="VIDEO"?"native_video":void 0,onClick:n=>j(this,lr,is).call(this,n)}))};function ww(){const r=[Jm,Rm,Mm,Qm,Km,Xm,Zm,tw,rw,ow,lw,uw,hw,mw],t=location.hostname;for(const e of r)if(typeof e.hostname=="string"){if(t===e.hostname)return e}else if(e.hostname.includes(t))return e}const cu=ww();cu&&new cu().inject()}(Dexie,GIF,WebMMuxer,Mp4Muxer,dayjs,JSZip);
